module.exports=[67329,a=>{"use strict";let b=(0,a.i(60137).default)("list",[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]]);a.s(["List",()=>b],67329)},47349,(a,b,c)=>{"use strict";var d=a.r(72131);d.useState,d.useEffect,d.useLayoutEffect,d.useDebugValue,c.useSyncExternalStore=void 0!==d.useSyncExternalStore?d.useSyncExternalStore:function(a,b){return b()}},87610,(a,b,c)=>{"use strict";b.exports=a.r(47349)},97514,(a,b,c)=>{"use strict";var d=a.r(72131),e=a.r(87610),f="function"==typeof Object.is?Object.is:function(a,b){return a===b&&(0!==a||1/a==1/b)||a!=a&&b!=b},g=e.useSyncExternalStore,h=d.useRef,i=d.useEffect,j=d.useMemo,k=d.useDebugValue;c.useSyncExternalStoreWithSelector=function(a,b,c,d,e){var l=h(null);if(null===l.current){var m={hasValue:!1,value:null};l.current=m}else m=l.current;var n=g(a,(l=j(function(){function a(a){if(!i){if(i=!0,g=a,a=d(a),void 0!==e&&m.hasValue){var b=m.value;if(e(b,a))return h=b}return h=a}if(b=h,f(g,a))return b;var c=d(a);return void 0!==e&&e(b,c)?(g=a,b):(g=a,h=c)}var g,h,i=!1,j=void 0===c?null:c;return[function(){return a(b())},null===j?void 0:function(){return a(j())}]},[b,c,d,e]))[0],l[1]);return i(function(){m.hasValue=!0,m.value=n},[n]),k(n),n}},64442,(a,b,c)=>{"use strict";b.exports=a.r(97514)},12998,30222,31011,27875,5784,25015,22617,33441,4720,5151,28345,41135,59407,14753,31953,16707,27015,57544,82434,21601,20494,44494,54074,53569,24569,31462,24007,95828,39876,80386,42068,98592,74788,10948,60252,41815,86005,70978,34012,19521,68976,59923,49651,97063,34148,2835,a=>{"use strict";var b,c,d,e,f,g,h,i,j,k,l,m,n,o=a.i(72131);function p(a){if("string"==typeof a||"number"==typeof a)return""+a;let b="";if(Array.isArray(a))for(let c=0,d;c<a.length;c++)""!==(d=p(a[c]))&&(b+=(b&&" ")+d);else for(let c in a)a[c]&&(b+=(b&&" ")+c);return b}a.s(["default",()=>p],30222);var q=a.i(64442);let r={get url(){return`file://${a.P("node_modules/zustand/esm/vanilla.mjs")}`}},s=a=>{let b,c=new Set,d=(a,d)=>{let e="function"==typeof a?a(b):a;if(!Object.is(e,b)){let a=b;b=(null!=d?d:"object"!=typeof e||null===e)?e:Object.assign({},b,e),c.forEach(c=>c(b,a))}},e=()=>b,f={setState:d,getState:e,getInitialState:()=>g,subscribe:a=>(c.add(a),()=>c.delete(a)),destroy:()=>{(r.env?r.env.MODE:void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),c.clear()}},g=b=a(d,e,f);return f},{useDebugValue:t}=o.default,{useSyncExternalStoreWithSelector:u}=q.default,v=a=>a;function w(a,b=v,c){let d=u(a.subscribe,a.getState,a.getServerState||a.getInitialState,b,c);return t(d),d}let x=(a,b)=>{let c=a?s(a):s,d=(a,d=b)=>w(c,a,d);return Object.assign(d,c),d};function y(a,b){if(Object.is(a,b))return!0;if("object"!=typeof a||null===a||"object"!=typeof b||null===b)return!1;if(a instanceof Map&&b instanceof Map){if(a.size!==b.size)return!1;for(let[c,d]of a)if(!Object.is(d,b.get(c)))return!1;return!0}if(a instanceof Set&&b instanceof Set){if(a.size!==b.size)return!1;for(let c of a)if(!b.has(c))return!1;return!0}let c=Object.keys(a);if(c.length!==Object.keys(b).length)return!1;for(let d of c)if(!Object.prototype.hasOwnProperty.call(b,d)||!Object.is(a[d],b[d]))return!1;return!0}a.s(["shallow",()=>y],31011);var z={value:()=>{}};function A(){for(var a,b=0,c=arguments.length,d={};b<c;++b){if(!(a=arguments[b]+"")||a in d||/[\s.]/.test(a))throw Error("illegal type: "+a);d[a]=[]}return new B(d)}function B(a){this._=a}function C(a,b,c){for(var d=0,e=a.length;d<e;++d)if(a[d].name===b){a[d]=z,a=a.slice(0,d).concat(a.slice(d+1));break}return null!=c&&a.push({name:b,value:c}),a}function D(){}function E(a){return null==a?D:function(){return this.querySelector(a)}}function F(){return[]}function G(a){return null==a?F:function(){return this.querySelectorAll(a)}}function H(a){return function(){return this.matches(a)}}function I(a){return function(b){return b.matches(a)}}B.prototype=A.prototype={constructor:B,on:function(a,b){var c,d=this._,e=(a+"").trim().split(/^|\s+/).map(function(a){var b="",c=a.indexOf(".");if(c>=0&&(b=a.slice(c+1),a=a.slice(0,c)),a&&!d.hasOwnProperty(a))throw Error("unknown type: "+a);return{type:a,name:b}}),f=-1,g=e.length;if(arguments.length<2){for(;++f<g;)if((c=(a=e[f]).type)&&(c=function(a,b){for(var c,d=0,e=a.length;d<e;++d)if((c=a[d]).name===b)return c.value}(d[c],a.name)))return c;return}if(null!=b&&"function"!=typeof b)throw Error("invalid callback: "+b);for(;++f<g;)if(c=(a=e[f]).type)d[c]=C(d[c],a.name,b);else if(null==b)for(c in d)d[c]=C(d[c],a.name,null);return this},copy:function(){var a={},b=this._;for(var c in b)a[c]=b[c].slice();return new B(a)},call:function(a,b){if((c=arguments.length-2)>0)for(var c,d,e=Array(c),f=0;f<c;++f)e[f]=arguments[f+2];if(!this._.hasOwnProperty(a))throw Error("unknown type: "+a);for(d=this._[a],f=0,c=d.length;f<c;++f)d[f].value.apply(b,e)},apply:function(a,b,c){if(!this._.hasOwnProperty(a))throw Error("unknown type: "+a);for(var d=this._[a],e=0,f=d.length;e<f;++e)d[e].value.apply(b,c)}};var J=Array.prototype.find;function K(){return this.firstElementChild}var L=Array.prototype.filter;function M(){return Array.from(this.children)}function N(a){return Array(a.length)}function O(a,b){this.ownerDocument=a.ownerDocument,this.namespaceURI=a.namespaceURI,this._next=null,this._parent=a,this.__data__=b}function P(a,b,c,d,e,f){for(var g,h=0,i=b.length,j=f.length;h<j;++h)(g=b[h])?(g.__data__=f[h],d[h]=g):c[h]=new O(a,f[h]);for(;h<i;++h)(g=b[h])&&(e[h]=g)}function Q(a,b,c,d,e,f,g){var h,i,j,k=new Map,l=b.length,m=f.length,n=Array(l);for(h=0;h<l;++h)(i=b[h])&&(n[h]=j=g.call(i,i.__data__,h,b)+"",k.has(j)?e[h]=i:k.set(j,i));for(h=0;h<m;++h)j=g.call(a,f[h],h,f)+"",(i=k.get(j))?(d[h]=i,i.__data__=f[h],k.delete(j)):c[h]=new O(a,f[h]);for(h=0;h<l;++h)(i=b[h])&&k.get(n[h])===i&&(e[h]=i)}function R(a){return a.__data__}function S(a,b){return a<b?-1:a>b?1:a>=b?0:NaN}O.prototype={constructor:O,appendChild:function(a){return this._parent.insertBefore(a,this._next)},insertBefore:function(a,b){return this._parent.insertBefore(a,b)},querySelector:function(a){return this._parent.querySelector(a)},querySelectorAll:function(a){return this._parent.querySelectorAll(a)}};var T="http://www.w3.org/1999/xhtml";let U={svg:"http://www.w3.org/2000/svg",xhtml:T,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function V(a){var b=a+="",c=b.indexOf(":");return c>=0&&"xmlns"!==(b=a.slice(0,c))&&(a=a.slice(c+1)),U.hasOwnProperty(b)?{space:U[b],local:a}:a}function W(a){return a.ownerDocument&&a.ownerDocument.defaultView||a.document&&a||a.defaultView}function X(a,b){return a.style.getPropertyValue(b)||W(a).getComputedStyle(a,null).getPropertyValue(b)}function Y(a){return a.trim().split(/^|\s+/)}function Z(a){return a.classList||new $(a)}function $(a){this._node=a,this._names=Y(a.getAttribute("class")||"")}function _(a,b){for(var c=Z(a),d=-1,e=b.length;++d<e;)c.add(b[d])}function aa(a,b){for(var c=Z(a),d=-1,e=b.length;++d<e;)c.remove(b[d])}function ab(){this.textContent=""}function ac(){this.innerHTML=""}function ad(){this.nextSibling&&this.parentNode.appendChild(this)}function ae(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function af(a){var b=V(a);return(b.local?function(a){return function(){return this.ownerDocument.createElementNS(a.space,a.local)}}:function(a){return function(){var b=this.ownerDocument,c=this.namespaceURI;return c===T&&b.documentElement.namespaceURI===T?b.createElement(a):b.createElementNS(c,a)}})(b)}function ag(){return null}function ah(){var a=this.parentNode;a&&a.removeChild(this)}function ai(){var a=this.cloneNode(!1),b=this.parentNode;return b?b.insertBefore(a,this.nextSibling):a}function aj(){var a=this.cloneNode(!0),b=this.parentNode;return b?b.insertBefore(a,this.nextSibling):a}function ak(a){return function(){var b=this.__on;if(b){for(var c,d=0,e=-1,f=b.length;d<f;++d)(c=b[d],a.type&&c.type!==a.type||c.name!==a.name)?b[++e]=c:this.removeEventListener(c.type,c.listener,c.options);++e?b.length=e:delete this.__on}}}function al(a,b,c){return function(){var d,e=this.__on,f=function(a){b.call(this,a,this.__data__)};if(e){for(var g=0,h=e.length;g<h;++g)if((d=e[g]).type===a.type&&d.name===a.name){this.removeEventListener(d.type,d.listener,d.options),this.addEventListener(d.type,d.listener=f,d.options=c),d.value=b;return}}this.addEventListener(a.type,f,c),d={type:a.type,name:a.name,value:b,listener:f,options:c},e?e.push(d):this.__on=[d]}}function am(a,b,c){var d=W(a),e=d.CustomEvent;"function"==typeof e?e=new e(b,c):(e=d.document.createEvent("Event"),c?(e.initEvent(b,c.bubbles,c.cancelable),e.detail=c.detail):e.initEvent(b,!1,!1)),a.dispatchEvent(e)}$.prototype={add:function(a){0>this._names.indexOf(a)&&(this._names.push(a),this._node.setAttribute("class",this._names.join(" ")))},remove:function(a){var b=this._names.indexOf(a);b>=0&&(this._names.splice(b,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(a){return this._names.indexOf(a)>=0}};var an=[null];function ao(a,b){this._groups=a,this._parents=b}function ap(){return new ao([[document.documentElement]],an)}function aq(a){return"string"==typeof a?new ao([[document.querySelector(a)]],[document.documentElement]):new ao([[a]],an)}ao.prototype=ap.prototype={constructor:ao,select:function(a){"function"!=typeof a&&(a=E(a));for(var b=this._groups,c=b.length,d=Array(c),e=0;e<c;++e)for(var f,g,h=b[e],i=h.length,j=d[e]=Array(i),k=0;k<i;++k)(f=h[k])&&(g=a.call(f,f.__data__,k,h))&&("__data__"in f&&(g.__data__=f.__data__),j[k]=g);return new ao(d,this._parents)},selectAll:function(a){if("function"==typeof a){var b;b=a,a=function(){var a;return a=b.apply(this,arguments),null==a?[]:Array.isArray(a)?a:Array.from(a)}}else a=G(a);for(var c=this._groups,d=c.length,e=[],f=[],g=0;g<d;++g)for(var h,i=c[g],j=i.length,k=0;k<j;++k)(h=i[k])&&(e.push(a.call(h,h.__data__,k,i)),f.push(h));return new ao(e,f)},selectChild:function(a){var b;return this.select(null==a?K:(b="function"==typeof a?a:I(a),function(){return J.call(this.children,b)}))},selectChildren:function(a){var b;return this.selectAll(null==a?M:(b="function"==typeof a?a:I(a),function(){return L.call(this.children,b)}))},filter:function(a){"function"!=typeof a&&(a=H(a));for(var b=this._groups,c=b.length,d=Array(c),e=0;e<c;++e)for(var f,g=b[e],h=g.length,i=d[e]=[],j=0;j<h;++j)(f=g[j])&&a.call(f,f.__data__,j,g)&&i.push(f);return new ao(d,this._parents)},data:function(a,b){if(!arguments.length)return Array.from(this,R);var c=b?Q:P,d=this._parents,e=this._groups;"function"!=typeof a&&(s=a,a=function(){return s});for(var f=e.length,g=Array(f),h=Array(f),i=Array(f),j=0;j<f;++j){var k=d[j],l=e[j],m=l.length,n="object"==typeof(r=a.call(k,k&&k.__data__,j,d))&&"length"in r?r:Array.from(r),o=n.length,p=h[j]=Array(o),q=g[j]=Array(o);c(k,l,p,q,i[j]=Array(m),n,b);for(var r,s,t,u,v=0,w=0;v<o;++v)if(t=p[v]){for(v>=w&&(w=v+1);!(u=q[w])&&++w<o;);t._next=u||null}}return(g=new ao(g,d))._enter=h,g._exit=i,g},enter:function(){return new ao(this._enter||this._groups.map(N),this._parents)},exit:function(){return new ao(this._exit||this._groups.map(N),this._parents)},join:function(a,b,c){var d=this.enter(),e=this,f=this.exit();return"function"==typeof a?(d=a(d))&&(d=d.selection()):d=d.append(a+""),null!=b&&(e=b(e))&&(e=e.selection()),null==c?f.remove():c(f),d&&e?d.merge(e).order():e},merge:function(a){for(var b=a.selection?a.selection():a,c=this._groups,d=b._groups,e=c.length,f=d.length,g=Math.min(e,f),h=Array(e),i=0;i<g;++i)for(var j,k=c[i],l=d[i],m=k.length,n=h[i]=Array(m),o=0;o<m;++o)(j=k[o]||l[o])&&(n[o]=j);for(;i<e;++i)h[i]=c[i];return new ao(h,this._parents)},selection:function(){return this},order:function(){for(var a=this._groups,b=-1,c=a.length;++b<c;)for(var d,e=a[b],f=e.length-1,g=e[f];--f>=0;)(d=e[f])&&(g&&4^d.compareDocumentPosition(g)&&g.parentNode.insertBefore(d,g),g=d);return this},sort:function(a){function b(b,c){return b&&c?a(b.__data__,c.__data__):!b-!c}a||(a=S);for(var c=this._groups,d=c.length,e=Array(d),f=0;f<d;++f){for(var g,h=c[f],i=h.length,j=e[f]=Array(i),k=0;k<i;++k)(g=h[k])&&(j[k]=g);j.sort(b)}return new ao(e,this._parents).order()},call:function(){var a=arguments[0];return arguments[0]=this,a.apply(null,arguments),this},nodes:function(){return Array.from(this)},node:function(){for(var a=this._groups,b=0,c=a.length;b<c;++b)for(var d=a[b],e=0,f=d.length;e<f;++e){var g=d[e];if(g)return g}return null},size:function(){let a=0;for(let b of this)++a;return a},empty:function(){return!this.node()},each:function(a){for(var b=this._groups,c=0,d=b.length;c<d;++c)for(var e,f=b[c],g=0,h=f.length;g<h;++g)(e=f[g])&&a.call(e,e.__data__,g,f);return this},attr:function(a,b){var c=V(a);if(arguments.length<2){var d=this.node();return c.local?d.getAttributeNS(c.space,c.local):d.getAttribute(c)}return this.each((null==b?c.local?function(a){return function(){this.removeAttributeNS(a.space,a.local)}}:function(a){return function(){this.removeAttribute(a)}}:"function"==typeof b?c.local?function(a,b){return function(){var c=b.apply(this,arguments);null==c?this.removeAttributeNS(a.space,a.local):this.setAttributeNS(a.space,a.local,c)}}:function(a,b){return function(){var c=b.apply(this,arguments);null==c?this.removeAttribute(a):this.setAttribute(a,c)}}:c.local?function(a,b){return function(){this.setAttributeNS(a.space,a.local,b)}}:function(a,b){return function(){this.setAttribute(a,b)}})(c,b))},style:function(a,b,c){return arguments.length>1?this.each((null==b?function(a){return function(){this.style.removeProperty(a)}}:"function"==typeof b?function(a,b,c){return function(){var d=b.apply(this,arguments);null==d?this.style.removeProperty(a):this.style.setProperty(a,d,c)}}:function(a,b,c){return function(){this.style.setProperty(a,b,c)}})(a,b,null==c?"":c)):X(this.node(),a)},property:function(a,b){return arguments.length>1?this.each((null==b?function(a){return function(){delete this[a]}}:"function"==typeof b?function(a,b){return function(){var c=b.apply(this,arguments);null==c?delete this[a]:this[a]=c}}:function(a,b){return function(){this[a]=b}})(a,b)):this.node()[a]},classed:function(a,b){var c=Y(a+"");if(arguments.length<2){for(var d=Z(this.node()),e=-1,f=c.length;++e<f;)if(!d.contains(c[e]))return!1;return!0}return this.each(("function"==typeof b?function(a,b){return function(){(b.apply(this,arguments)?_:aa)(this,a)}}:b?function(a){return function(){_(this,a)}}:function(a){return function(){aa(this,a)}})(c,b))},text:function(a){return arguments.length?this.each(null==a?ab:("function"==typeof a?function(a){return function(){var b=a.apply(this,arguments);this.textContent=null==b?"":b}}:function(a){return function(){this.textContent=a}})(a)):this.node().textContent},html:function(a){return arguments.length?this.each(null==a?ac:("function"==typeof a?function(a){return function(){var b=a.apply(this,arguments);this.innerHTML=null==b?"":b}}:function(a){return function(){this.innerHTML=a}})(a)):this.node().innerHTML},raise:function(){return this.each(ad)},lower:function(){return this.each(ae)},append:function(a){var b="function"==typeof a?a:af(a);return this.select(function(){return this.appendChild(b.apply(this,arguments))})},insert:function(a,b){var c="function"==typeof a?a:af(a),d=null==b?ag:"function"==typeof b?b:E(b);return this.select(function(){return this.insertBefore(c.apply(this,arguments),d.apply(this,arguments)||null)})},remove:function(){return this.each(ah)},clone:function(a){return this.select(a?aj:ai)},datum:function(a){return arguments.length?this.property("__data__",a):this.node().__data__},on:function(a,b,c){var d,e,f=(a+"").trim().split(/^|\s+/).map(function(a){var b="",c=a.indexOf(".");return c>=0&&(b=a.slice(c+1),a=a.slice(0,c)),{type:a,name:b}}),g=f.length;if(arguments.length<2){var h=this.node().__on;if(h){for(var i,j=0,k=h.length;j<k;++j)for(d=0,i=h[j];d<g;++d)if((e=f[d]).type===i.type&&e.name===i.name)return i.value}return}for(d=0,h=b?al:ak;d<g;++d)this.each(h(f[d],b,c));return this},dispatch:function(a,b){return this.each(("function"==typeof b?function(a,b){return function(){return am(this,a,b.apply(this,arguments))}}:function(a,b){return function(){return am(this,a,b)}})(a,b))},[Symbol.iterator]:function*(){for(var a=this._groups,b=0,c=a.length;b<c;++b)for(var d,e=a[b],f=0,g=e.length;f<g;++f)(d=e[f])&&(yield d)}};let ar={passive:!1},as={capture:!0,passive:!1};function at(a){a.stopImmediatePropagation()}function au(a){a.preventDefault(),a.stopImmediatePropagation()}function av(a){var b=a.document.documentElement,c=aq(a).on("dragstart.drag",au,as);"onselectstart"in b?c.on("selectstart.drag",au,as):(b.__noselect=b.style.MozUserSelect,b.style.MozUserSelect="none")}function aw(a,b){var c=a.document.documentElement,d=aq(a).on("dragstart.drag",null);b&&(d.on("click.drag",au,as),setTimeout(function(){d.on("click.drag",null)},0)),"onselectstart"in c?d.on("selectstart.drag",null):(c.style.MozUserSelect=c.__noselect,delete c.__noselect)}function ax(a){return((a=Math.exp(a))+1/a)/2}let ay=function a(b,c,d){function e(a,e){var f,g,h=a[0],i=a[1],j=a[2],k=e[0],l=e[1],m=e[2],n=k-h,o=l-i,p=n*n+o*o;if(p<1e-12)g=Math.log(m/j)/b,f=function(a){return[h+a*n,i+a*o,j*Math.exp(b*a*g)]};else{var q=Math.sqrt(p),r=(m*m-j*j+d*p)/(2*j*c*q),s=(m*m-j*j-d*p)/(2*m*c*q),t=Math.log(Math.sqrt(r*r+1)-r);g=(Math.log(Math.sqrt(s*s+1)-s)-t)/b,f=function(a){var d,e,f=a*g,k=ax(t),l=j/(c*q)*(k*(((d=Math.exp(2*(d=b*f+t)))-1)/(d+1))-((e=Math.exp(e=t))-1/e)/2);return[h+l*n,i+l*o,j*k/ax(b*f+t)]}}return f.duration=1e3*g*b/Math.SQRT2,f}return e.rho=function(b){var c=Math.max(.001,+b),d=c*c;return a(c,d,d*d)},e}(Math.SQRT2,2,4);function az(a,b){if(a=function(a){let b;for(;b=a.sourceEvent;)a=b;return a}(a),void 0===b&&(b=a.currentTarget),b){var c=b.ownerSVGElement||b;if(c.createSVGPoint){var d=c.createSVGPoint();return d.x=a.clientX,d.y=a.clientY,[(d=d.matrixTransform(b.getScreenCTM().inverse())).x,d.y]}if(b.getBoundingClientRect){var e=b.getBoundingClientRect();return[a.clientX-e.left-b.clientLeft,a.clientY-e.top-b.clientTop]}}return[a.pageX,a.pageY]}var aA,aB,aC=0,aD=0,aE=0,aF=0,aG=0,aH=0,aI="object"==typeof performance&&performance.now?performance:Date,aJ=function(a){setTimeout(a,17)};function aK(){return aG||(aJ(aL),aG=aI.now()+aH)}function aL(){aG=0}function aM(){this._call=this._time=this._next=null}function aN(a,b,c){var d=new aM;return d.restart(a,b,c),d}function aO(){aG=(aF=aI.now())+aH,aC=aD=0;try{aK(),++aC;for(var a,b=aA;b;)(a=aG-b._time)>=0&&b._call.call(void 0,a),b=b._next;--aC}finally{aC=0,function(){for(var a,b,c=aA,d=1/0;c;)c._call?(d>c._time&&(d=c._time),a=c,c=c._next):(b=c._next,c._next=null,c=a?a._next=b:aA=b);aB=a,aQ(d)}(),aG=0}}function aP(){var a=aI.now(),b=a-aF;b>1e3&&(aH-=b,aF=a)}function aQ(a){!aC&&(aD&&(aD=clearTimeout(aD)),a-aG>24?(a<1/0&&(aD=setTimeout(aO,a-aI.now()-aH)),aE&&(aE=clearInterval(aE))):(aE||(aF=aI.now(),aE=setInterval(aP,1e3)),aC=1,aJ(aO)))}function aR(a,b,c){var d=new aM;return b=null==b?0:+b,d.restart(c=>{d.stop(),a(c+b)},b,c),d}aM.prototype=aN.prototype={constructor:aM,restart:function(a,b,c){if("function"!=typeof a)throw TypeError("callback is not a function");c=(null==c?aK():+c)+(null==b?0:+b),this._next||aB===this||(aB?aB._next=this:aA=this,aB=this),this._call=a,this._time=c,aQ()},stop:function(){this._call&&(this._call=null,this._time=1/0,aQ())}};var aS=A("start","end","cancel","interrupt"),aT=[];function aU(a,b,c,d,e,f){var g=a.__transition;if(g){if(c in g)return}else a.__transition={};!function(a,b,c){var d,e=a.__transition;function f(i){var j,k,l,m;if(1!==c.state)return h();for(j in e)if((m=e[j]).name===c.name){if(3===m.state)return aR(f);4===m.state?(m.state=6,m.timer.stop(),m.on.call("interrupt",a,a.__data__,m.index,m.group),delete e[j]):+j<b&&(m.state=6,m.timer.stop(),m.on.call("cancel",a,a.__data__,m.index,m.group),delete e[j])}if(aR(function(){3===c.state&&(c.state=4,c.timer.restart(g,c.delay,c.time),g(i))}),c.state=2,c.on.call("start",a,a.__data__,c.index,c.group),2===c.state){for(j=0,c.state=3,d=Array(l=c.tween.length),k=-1;j<l;++j)(m=c.tween[j].value.call(a,a.__data__,c.index,c.group))&&(d[++k]=m);d.length=k+1}}function g(b){for(var e=b<c.duration?c.ease.call(null,b/c.duration):(c.timer.restart(h),c.state=5,1),f=-1,g=d.length;++f<g;)d[f].call(a,e);5===c.state&&(c.on.call("end",a,a.__data__,c.index,c.group),h())}function h(){for(var d in c.state=6,c.timer.stop(),delete e[b],e)return;delete a.__transition}e[b]=c,c.timer=aN(function(a){c.state=1,c.timer.restart(f,c.delay,c.time),c.delay<=a&&f(a-c.delay)},0,c.time)}(a,c,{name:b,index:d,group:e,on:aS,tween:aT,time:f.time,delay:f.delay,duration:f.duration,ease:f.ease,timer:null,state:0})}function aV(a,b){var c=aX(a,b);if(c.state>0)throw Error("too late; already scheduled");return c}function aW(a,b){var c=aX(a,b);if(c.state>3)throw Error("too late; already running");return c}function aX(a,b){var c=a.__transition;if(!c||!(c=c[b]))throw Error("transition not found");return c}function aY(a,b){var c,d,e,f=a.__transition,g=!0;if(f){for(e in b=null==b?null:b+"",f){if((c=f[e]).name!==b){g=!1;continue}d=c.state>2&&c.state<5,c.state=6,c.timer.stop(),c.on.call(d?"interrupt":"cancel",a,a.__data__,c.index,c.group),delete f[e]}g&&delete a.__transition}}function aZ(a,b){return a*=1,b*=1,function(c){return a*(1-c)+b*c}}var a$=180/Math.PI,a_={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function a0(a,b,c,d,e,f){var g,h,i;return(g=Math.sqrt(a*a+b*b))&&(a/=g,b/=g),(i=a*c+b*d)&&(c-=a*i,d-=b*i),(h=Math.sqrt(c*c+d*d))&&(c/=h,d/=h,i/=h),a*d<b*c&&(a=-a,b=-b,i=-i,g=-g),{translateX:e,translateY:f,rotate:Math.atan2(b,a)*a$,skewX:Math.atan(i)*a$,scaleX:g,scaleY:h}}function a1(a,b,c,d){function e(a){return a.length?a.pop()+" ":""}return function(f,g){var h,i,j,k,l=[],m=[];return f=a(f),g=a(g),!function(a,d,e,f,g,h){if(a!==e||d!==f){var i=g.push("translate(",null,b,null,c);h.push({i:i-4,x:aZ(a,e)},{i:i-2,x:aZ(d,f)})}else(e||f)&&g.push("translate("+e+b+f+c)}(f.translateX,f.translateY,g.translateX,g.translateY,l,m),h=f.rotate,i=g.rotate,h!==i?(h-i>180?i+=360:i-h>180&&(h+=360),m.push({i:l.push(e(l)+"rotate(",null,d)-2,x:aZ(h,i)})):i&&l.push(e(l)+"rotate("+i+d),j=f.skewX,k=g.skewX,j!==k?m.push({i:l.push(e(l)+"skewX(",null,d)-2,x:aZ(j,k)}):k&&l.push(e(l)+"skewX("+k+d),!function(a,b,c,d,f,g){if(a!==c||b!==d){var h=f.push(e(f)+"scale(",null,",",null,")");g.push({i:h-4,x:aZ(a,c)},{i:h-2,x:aZ(b,d)})}else(1!==c||1!==d)&&f.push(e(f)+"scale("+c+","+d+")")}(f.scaleX,f.scaleY,g.scaleX,g.scaleY,l,m),f=g=null,function(a){for(var b,c=-1,d=m.length;++c<d;)l[(b=m[c]).i]=b.x(a);return l.join("")}}}var a2=a1(function(a){let b=new("function"==typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(a+"");return b.isIdentity?a_:a0(b.a,b.b,b.c,b.d,b.e,b.f)},"px, ","px)","deg)"),a3=a1(function(a){return null==a?a_:(h||(h=document.createElementNS("http://www.w3.org/2000/svg","g")),h.setAttribute("transform",a),a=h.transform.baseVal.consolidate())?a0((a=a.matrix).a,a.b,a.c,a.d,a.e,a.f):a_},", ",")",")");function a4(a,b,c){var d=a._id;return a.each(function(){var a=aW(this,d);(a.value||(a.value={}))[b]=c.apply(this,arguments)}),function(a){return aX(a,d).value[b]}}function a5(a,b,c){a.prototype=b.prototype=c,c.constructor=a}function a6(a,b){var c=Object.create(a.prototype);for(var d in b)c[d]=b[d];return c}function a7(){}var a8="\\s*([+-]?\\d+)\\s*",a9="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",ba="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",bb=/^#([0-9a-f]{3,8})$/,bc=RegExp(`^rgb\\(${a8},${a8},${a8}\\)$`),bd=RegExp(`^rgb\\(${ba},${ba},${ba}\\)$`),be=RegExp(`^rgba\\(${a8},${a8},${a8},${a9}\\)$`),bf=RegExp(`^rgba\\(${ba},${ba},${ba},${a9}\\)$`),bg=RegExp(`^hsl\\(${a9},${ba},${ba}\\)$`),bh=RegExp(`^hsla\\(${a9},${ba},${ba},${a9}\\)$`),bi={aliceblue:0xf0f8ff,antiquewhite:0xfaebd7,aqua:65535,aquamarine:8388564,azure:0xf0ffff,beige:0xf5f5dc,bisque:0xffe4c4,black:0,blanchedalmond:0xffebcd,blue:255,blueviolet:9055202,brown:0xa52a2a,burlywood:0xdeb887,cadetblue:6266528,chartreuse:8388352,chocolate:0xd2691e,coral:0xff7f50,cornflowerblue:6591981,cornsilk:0xfff8dc,crimson:0xdc143c,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:0xb8860b,darkgray:0xa9a9a9,darkgreen:25600,darkgrey:0xa9a9a9,darkkhaki:0xbdb76b,darkmagenta:9109643,darkolivegreen:5597999,darkorange:0xff8c00,darkorchid:0x9932cc,darkred:9109504,darksalmon:0xe9967a,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:0xff1493,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:0xb22222,floralwhite:0xfffaf0,forestgreen:2263842,fuchsia:0xff00ff,gainsboro:0xdcdcdc,ghostwhite:0xf8f8ff,gold:0xffd700,goldenrod:0xdaa520,gray:8421504,green:32768,greenyellow:0xadff2f,grey:8421504,honeydew:0xf0fff0,hotpink:0xff69b4,indianred:0xcd5c5c,indigo:4915330,ivory:0xfffff0,khaki:0xf0e68c,lavender:0xe6e6fa,lavenderblush:0xfff0f5,lawngreen:8190976,lemonchiffon:0xfffacd,lightblue:0xadd8e6,lightcoral:0xf08080,lightcyan:0xe0ffff,lightgoldenrodyellow:0xfafad2,lightgray:0xd3d3d3,lightgreen:9498256,lightgrey:0xd3d3d3,lightpink:0xffb6c1,lightsalmon:0xffa07a,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:0xb0c4de,lightyellow:0xffffe0,lime:65280,limegreen:3329330,linen:0xfaf0e6,magenta:0xff00ff,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:0xba55d3,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:0xc71585,midnightblue:1644912,mintcream:0xf5fffa,mistyrose:0xffe4e1,moccasin:0xffe4b5,navajowhite:0xffdead,navy:128,oldlace:0xfdf5e6,olive:8421376,olivedrab:7048739,orange:0xffa500,orangered:0xff4500,orchid:0xda70d6,palegoldenrod:0xeee8aa,palegreen:0x98fb98,paleturquoise:0xafeeee,palevioletred:0xdb7093,papayawhip:0xffefd5,peachpuff:0xffdab9,peru:0xcd853f,pink:0xffc0cb,plum:0xdda0dd,powderblue:0xb0e0e6,purple:8388736,rebeccapurple:6697881,red:0xff0000,rosybrown:0xbc8f8f,royalblue:4286945,saddlebrown:9127187,salmon:0xfa8072,sandybrown:0xf4a460,seagreen:3050327,seashell:0xfff5ee,sienna:0xa0522d,silver:0xc0c0c0,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:0xfffafa,springgreen:65407,steelblue:4620980,tan:0xd2b48c,teal:32896,thistle:0xd8bfd8,tomato:0xff6347,turquoise:4251856,violet:0xee82ee,wheat:0xf5deb3,white:0xffffff,whitesmoke:0xf5f5f5,yellow:0xffff00,yellowgreen:0x9acd32};function bj(){return this.rgb().formatHex()}function bk(){return this.rgb().formatRgb()}function bl(a){var b,c;return a=(a+"").trim().toLowerCase(),(b=bb.exec(a))?(c=b[1].length,b=parseInt(b[1],16),6===c?bm(b):3===c?new bp(b>>8&15|b>>4&240,b>>4&15|240&b,(15&b)<<4|15&b,1):8===c?bn(b>>24&255,b>>16&255,b>>8&255,(255&b)/255):4===c?bn(b>>12&15|b>>8&240,b>>8&15|b>>4&240,b>>4&15|240&b,((15&b)<<4|15&b)/255):null):(b=bc.exec(a))?new bp(b[1],b[2],b[3],1):(b=bd.exec(a))?new bp(255*b[1]/100,255*b[2]/100,255*b[3]/100,1):(b=be.exec(a))?bn(b[1],b[2],b[3],b[4]):(b=bf.exec(a))?bn(255*b[1]/100,255*b[2]/100,255*b[3]/100,b[4]):(b=bg.exec(a))?bv(b[1],b[2]/100,b[3]/100,1):(b=bh.exec(a))?bv(b[1],b[2]/100,b[3]/100,b[4]):bi.hasOwnProperty(a)?bm(bi[a]):"transparent"===a?new bp(NaN,NaN,NaN,0):null}function bm(a){return new bp(a>>16&255,a>>8&255,255&a,1)}function bn(a,b,c,d){return d<=0&&(a=b=c=NaN),new bp(a,b,c,d)}function bo(a,b,c,d){var e;return 1==arguments.length?((e=a)instanceof a7||(e=bl(e)),e)?new bp((e=e.rgb()).r,e.g,e.b,e.opacity):new bp:new bp(a,b,c,null==d?1:d)}function bp(a,b,c,d){this.r=+a,this.g=+b,this.b=+c,this.opacity=+d}function bq(){return`#${bu(this.r)}${bu(this.g)}${bu(this.b)}`}function br(){let a=bs(this.opacity);return`${1===a?"rgb(":"rgba("}${bt(this.r)}, ${bt(this.g)}, ${bt(this.b)}${1===a?")":`, ${a})`}`}function bs(a){return isNaN(a)?1:Math.max(0,Math.min(1,a))}function bt(a){return Math.max(0,Math.min(255,Math.round(a)||0))}function bu(a){return((a=bt(a))<16?"0":"")+a.toString(16)}function bv(a,b,c,d){return d<=0?a=b=c=NaN:c<=0||c>=1?a=b=NaN:b<=0&&(a=NaN),new bx(a,b,c,d)}function bw(a){if(a instanceof bx)return new bx(a.h,a.s,a.l,a.opacity);if(a instanceof a7||(a=bl(a)),!a)return new bx;if(a instanceof bx)return a;var b=(a=a.rgb()).r/255,c=a.g/255,d=a.b/255,e=Math.min(b,c,d),f=Math.max(b,c,d),g=NaN,h=f-e,i=(f+e)/2;return h?(g=b===f?(c-d)/h+(c<d)*6:c===f?(d-b)/h+2:(b-c)/h+4,h/=i<.5?f+e:2-f-e,g*=60):h=i>0&&i<1?0:g,new bx(g,h,i,a.opacity)}function bx(a,b,c,d){this.h=+a,this.s=+b,this.l=+c,this.opacity=+d}function by(a){return(a=(a||0)%360)<0?a+360:a}function bz(a){return Math.max(0,Math.min(1,a||0))}function bA(a,b,c){return(a<60?b+(c-b)*a/60:a<180?c:a<240?b+(c-b)*(240-a)/60:b)*255}function bB(a,b,c,d,e){var f=a*a,g=f*a;return((1-3*a+3*f-g)*b+(4-6*f+3*g)*c+(1+3*a+3*f-3*g)*d+g*e)/6}a5(a7,bl,{copy(a){return Object.assign(new this.constructor,this,a)},displayable(){return this.rgb().displayable()},hex:bj,formatHex:bj,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return bw(this).formatHsl()},formatRgb:bk,toString:bk}),a5(bp,bo,a6(a7,{brighter(a){return a=null==a?1.4285714285714286:Math.pow(1.4285714285714286,a),new bp(this.r*a,this.g*a,this.b*a,this.opacity)},darker(a){return a=null==a?.7:Math.pow(.7,a),new bp(this.r*a,this.g*a,this.b*a,this.opacity)},rgb(){return this},clamp(){return new bp(bt(this.r),bt(this.g),bt(this.b),bs(this.opacity))},displayable(){return -.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:bq,formatHex:bq,formatHex8:function(){return`#${bu(this.r)}${bu(this.g)}${bu(this.b)}${bu((isNaN(this.opacity)?1:this.opacity)*255)}`},formatRgb:br,toString:br})),a5(bx,function(a,b,c,d){return 1==arguments.length?bw(a):new bx(a,b,c,null==d?1:d)},a6(a7,{brighter(a){return a=null==a?1.4285714285714286:Math.pow(1.4285714285714286,a),new bx(this.h,this.s,this.l*a,this.opacity)},darker(a){return a=null==a?.7:Math.pow(.7,a),new bx(this.h,this.s,this.l*a,this.opacity)},rgb(){var a=this.h%360+(this.h<0)*360,b=isNaN(a)||isNaN(this.s)?0:this.s,c=this.l,d=c+(c<.5?c:1-c)*b,e=2*c-d;return new bp(bA(a>=240?a-240:a+120,e,d),bA(a,e,d),bA(a<120?a+240:a-120,e,d),this.opacity)},clamp(){return new bx(by(this.h),bz(this.s),bz(this.l),bs(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){let a=bs(this.opacity);return`${1===a?"hsl(":"hsla("}${by(this.h)}, ${100*bz(this.s)}%, ${100*bz(this.l)}%${1===a?")":`, ${a})`}`}}));let bC=a=>()=>a;function bD(a,b){var c=b-a;return c?function(b){return a+b*c}:bC(isNaN(a)?b:a)}let bE=function a(b){var c,d=1==(c=+b)?bD:function(a,b){var d,e,f;return b-a?(d=a,e=b,d=Math.pow(d,f=c),e=Math.pow(e,f)-d,f=1/f,function(a){return Math.pow(d+a*e,f)}):bC(isNaN(a)?b:a)};function e(a,b){var c=d((a=bo(a)).r,(b=bo(b)).r),e=d(a.g,b.g),f=d(a.b,b.b),g=bD(a.opacity,b.opacity);return function(b){return a.r=c(b),a.g=e(b),a.b=f(b),a.opacity=g(b),a+""}}return e.gamma=a,e}(1);function bF(a){return function(b){var c,d,e=b.length,f=Array(e),g=Array(e),h=Array(e);for(c=0;c<e;++c)d=bo(b[c]),f[c]=d.r||0,g[c]=d.g||0,h[c]=d.b||0;return f=a(f),g=a(g),h=a(h),d.opacity=1,function(a){return d.r=f(a),d.g=g(a),d.b=h(a),d+""}}}bF(function(a){var b=a.length-1;return function(c){var d=c<=0?c=0:c>=1?(c=1,b-1):Math.floor(c*b),e=a[d],f=a[d+1],g=d>0?a[d-1]:2*e-f,h=d<b-1?a[d+2]:2*f-e;return bB((c-d/b)*b,g,e,f,h)}}),bF(function(a){var b=a.length;return function(c){var d=Math.floor(((c%=1)<0?++c:c)*b),e=a[(d+b-1)%b],f=a[d%b],g=a[(d+1)%b],h=a[(d+2)%b];return bB((c-d/b)*b,e,f,g,h)}});var bG=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,bH=RegExp(bG.source,"g");function bI(a,b){var c;return("number"==typeof b?aZ:b instanceof bl?bE:(c=bl(b))?(b=c,bE):function(a,b){var c,d,e,f,g,h=bG.lastIndex=bH.lastIndex=0,i=-1,j=[],k=[];for(a+="",b+="";(e=bG.exec(a))&&(f=bH.exec(b));)(g=f.index)>h&&(g=b.slice(h,g),j[i]?j[i]+=g:j[++i]=g),(e=e[0])===(f=f[0])?j[i]?j[i]+=f:j[++i]=f:(j[++i]=null,k.push({i:i,x:aZ(e,f)})),h=bH.lastIndex;return h<b.length&&(g=b.slice(h),j[i]?j[i]+=g:j[++i]=g),j.length<2?k[0]?(c=k[0].x,function(a){return c(a)+""}):(d=b,function(){return d}):(b=k.length,function(a){for(var c,d=0;d<b;++d)j[(c=k[d]).i]=c.x(a);return j.join("")})})(a,b)}var bJ=ap.prototype.constructor;function bK(a){return function(){this.style.removeProperty(a)}}var bL=0;function bM(a,b,c,d){this._groups=a,this._parents=b,this._name=c,this._id=d}var bN=ap.prototype;bM.prototype=(function(a){return ap().transition(a)}).prototype={constructor:bM,select:function(a){var b=this._name,c=this._id;"function"!=typeof a&&(a=E(a));for(var d=this._groups,e=d.length,f=Array(e),g=0;g<e;++g)for(var h,i,j=d[g],k=j.length,l=f[g]=Array(k),m=0;m<k;++m)(h=j[m])&&(i=a.call(h,h.__data__,m,j))&&("__data__"in h&&(i.__data__=h.__data__),l[m]=i,aU(l[m],b,c,m,l,aX(h,c)));return new bM(f,this._parents,b,c)},selectAll:function(a){var b=this._name,c=this._id;"function"!=typeof a&&(a=G(a));for(var d=this._groups,e=d.length,f=[],g=[],h=0;h<e;++h)for(var i,j=d[h],k=j.length,l=0;l<k;++l)if(i=j[l]){for(var m,n=a.call(i,i.__data__,l,j),o=aX(i,c),p=0,q=n.length;p<q;++p)(m=n[p])&&aU(m,b,c,p,n,o);f.push(n),g.push(i)}return new bM(f,g,b,c)},selectChild:bN.selectChild,selectChildren:bN.selectChildren,filter:function(a){"function"!=typeof a&&(a=H(a));for(var b=this._groups,c=b.length,d=Array(c),e=0;e<c;++e)for(var f,g=b[e],h=g.length,i=d[e]=[],j=0;j<h;++j)(f=g[j])&&a.call(f,f.__data__,j,g)&&i.push(f);return new bM(d,this._parents,this._name,this._id)},merge:function(a){if(a._id!==this._id)throw Error();for(var b=this._groups,c=a._groups,d=b.length,e=c.length,f=Math.min(d,e),g=Array(d),h=0;h<f;++h)for(var i,j=b[h],k=c[h],l=j.length,m=g[h]=Array(l),n=0;n<l;++n)(i=j[n]||k[n])&&(m[n]=i);for(;h<d;++h)g[h]=b[h];return new bM(g,this._parents,this._name,this._id)},selection:function(){return new bJ(this._groups,this._parents)},transition:function(){for(var a=this._name,b=this._id,c=++bL,d=this._groups,e=d.length,f=0;f<e;++f)for(var g,h=d[f],i=h.length,j=0;j<i;++j)if(g=h[j]){var k=aX(g,b);aU(g,a,c,j,h,{time:k.time+k.delay+k.duration,delay:0,duration:k.duration,ease:k.ease})}return new bM(d,this._parents,a,c)},call:bN.call,nodes:bN.nodes,node:bN.node,size:bN.size,empty:bN.empty,each:bN.each,on:function(a,b){var c,d,e,f,g,h,i=this._id;return arguments.length<2?aX(this.node(),i).on.on(a):this.each((c=i,d=a,e=b,h=(d+"").trim().split(/^|\s+/).every(function(a){var b=a.indexOf(".");return b>=0&&(a=a.slice(0,b)),!a||"start"===a})?aV:aW,function(){var a=h(this,c),b=a.on;b!==f&&(g=(f=b).copy()).on(d,e),a.on=g}))},attr:function(a,b){var c=V(a),d="transform"===c?a3:bI;return this.attrTween(a,"function"==typeof b?(c.local?function(a,b,c){var d,e,f;return function(){var g,h,i=c(this);return null==i?void this.removeAttributeNS(a.space,a.local):(g=this.getAttributeNS(a.space,a.local))===(h=i+"")?null:g===d&&h===e?f:(e=h,f=b(d=g,i))}}:function(a,b,c){var d,e,f;return function(){var g,h,i=c(this);return null==i?void this.removeAttribute(a):(g=this.getAttribute(a))===(h=i+"")?null:g===d&&h===e?f:(e=h,f=b(d=g,i))}})(c,d,a4(this,"attr."+a,b)):null==b?(c.local?function(a){return function(){this.removeAttributeNS(a.space,a.local)}}:function(a){return function(){this.removeAttribute(a)}})(c):(c.local?function(a,b,c){var d,e,f=c+"";return function(){var g=this.getAttributeNS(a.space,a.local);return g===f?null:g===d?e:e=b(d=g,c)}}:function(a,b,c){var d,e,f=c+"";return function(){var g=this.getAttribute(a);return g===f?null:g===d?e:e=b(d=g,c)}})(c,d,b))},attrTween:function(a,b){var c="attr."+a;if(arguments.length<2)return(c=this.tween(c))&&c._value;if(null==b)return this.tween(c,null);if("function"!=typeof b)throw Error();var d=V(a);return this.tween(c,(d.local?function(a,b){var c,d;function e(){var e=b.apply(this,arguments);return e!==d&&(c=(d=e)&&function(b){this.setAttributeNS(a.space,a.local,e.call(this,b))}),c}return e._value=b,e}:function(a,b){var c,d;function e(){var e=b.apply(this,arguments);return e!==d&&(c=(d=e)&&function(b){this.setAttribute(a,e.call(this,b))}),c}return e._value=b,e})(d,b))},style:function(a,b,c){var d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y="transform"==(a+="")?a2:bI;return null==b?this.styleTween(a,(d=a,function(){var a=X(this,d),b=(this.style.removeProperty(d),X(this,d));return a===b?null:a===e&&b===f?g:g=y(e=a,f=b)})).on("end.style."+a,bK(a)):"function"==typeof b?this.styleTween(a,(h=a,i=a4(this,"style."+a,b),function(){var a=X(this,h),b=i(this),c=b+"";return null==b&&(this.style.removeProperty(h),c=b=X(this,h)),a===c?null:a===j&&c===k?l:(k=c,l=y(j=a,b))})).each((m=this._id,t="end."+(s="style."+(n=a)),function(){var a=aW(this,m),b=a.on,c=null==a.value[s]?r||(r=bK(n)):void 0;(b!==o||q!==c)&&(p=(o=b).copy()).on(t,q=c),a.on=p})):this.styleTween(a,(u=a,x=b+"",function(){var a=X(this,u);return a===x?null:a===v?w:w=y(v=a,b)}),c).on("end.style."+a,null)},styleTween:function(a,b,c){var d="style."+(a+="");if(arguments.length<2)return(d=this.tween(d))&&d._value;if(null==b)return this.tween(d,null);if("function"!=typeof b)throw Error();return this.tween(d,function(a,b,c){var d,e;function f(){var f=b.apply(this,arguments);return f!==e&&(d=(e=f)&&function(b){this.style.setProperty(a,f.call(this,b),c)}),d}return f._value=b,f}(a,b,null==c?"":c))},text:function(a){var b,c;return this.tween("text","function"==typeof a?(b=a4(this,"text",a),function(){var a=b(this);this.textContent=null==a?"":a}):(c=null==a?"":a+"",function(){this.textContent=c}))},textTween:function(a){var b="text";if(arguments.length<1)return(b=this.tween(b))&&b._value;if(null==a)return this.tween(b,null);if("function"!=typeof a)throw Error();return this.tween(b,function(a){var b,c;function d(){var d=a.apply(this,arguments);return d!==c&&(b=(c=d)&&function(a){this.textContent=d.call(this,a)}),b}return d._value=a,d}(a))},remove:function(){var a;return this.on("end.remove",(a=this._id,function(){var b=this.parentNode;for(var c in this.__transition)if(+c!==a)return;b&&b.removeChild(this)}))},tween:function(a,b){var c=this._id;if(a+="",arguments.length<2){for(var d,e=aX(this.node(),c).tween,f=0,g=e.length;f<g;++f)if((d=e[f]).name===a)return d.value;return null}return this.each((null==b?function(a,b){var c,d;return function(){var e=aW(this,a),f=e.tween;if(f!==c){d=c=f;for(var g=0,h=d.length;g<h;++g)if(d[g].name===b){(d=d.slice()).splice(g,1);break}}e.tween=d}}:function(a,b,c){var d,e;if("function"!=typeof c)throw Error();return function(){var f=aW(this,a),g=f.tween;if(g!==d){e=(d=g).slice();for(var h={name:b,value:c},i=0,j=e.length;i<j;++i)if(e[i].name===b){e[i]=h;break}i===j&&e.push(h)}f.tween=e}})(c,a,b))},delay:function(a){var b=this._id;return arguments.length?this.each(("function"==typeof a?function(a,b){return function(){aV(this,a).delay=+b.apply(this,arguments)}}:function(a,b){return b*=1,function(){aV(this,a).delay=b}})(b,a)):aX(this.node(),b).delay},duration:function(a){var b=this._id;return arguments.length?this.each(("function"==typeof a?function(a,b){return function(){aW(this,a).duration=+b.apply(this,arguments)}}:function(a,b){return b*=1,function(){aW(this,a).duration=b}})(b,a)):aX(this.node(),b).duration},ease:function(a){var b=this._id;return arguments.length?this.each(function(a,b){if("function"!=typeof b)throw Error();return function(){aW(this,a).ease=b}}(b,a)):aX(this.node(),b).ease},easeVarying:function(a){var b;if("function"!=typeof a)throw Error();return this.each((b=this._id,function(){var c=a.apply(this,arguments);if("function"!=typeof c)throw Error();aW(this,b).ease=c}))},end:function(){var a,b,c=this,d=c._id,e=c.size();return new Promise(function(f,g){var h={value:g},i={value:function(){0==--e&&f()}};c.each(function(){var c=aW(this,d),e=c.on;e!==a&&((b=(a=e).copy())._.cancel.push(h),b._.interrupt.push(h),b._.end.push(i)),c.on=b}),0===e&&f()})},[Symbol.iterator]:bN[Symbol.iterator]};var bO={time:null,delay:0,duration:250,ease:function(a){return((a*=2)<=1?a*a*a:(a-=2)*a*a+2)/2}};ap.prototype.interrupt=function(a){return this.each(function(){aY(this,a)})},ap.prototype.transition=function(a){var b,c;a instanceof bM?(b=a._id,a=a._name):(b=++bL,(c=bO).time=aK(),a=null==a?null:a+"");for(var d=this._groups,e=d.length,f=0;f<e;++f)for(var g,h=d[f],i=h.length,j=0;j<i;++j)(g=h[j])&&aU(g,a,b,j,h,c||function(a,b){for(var c;!(c=a.__transition)||!(c=c[b]);)if(!(a=a.parentNode))throw Error(`transition ${b} not found`);return c}(g,b));return new bM(d,this._parents,a,b)};let bP=a=>()=>a;function bQ(a,{sourceEvent:b,target:c,transform:d,dispatch:e}){Object.defineProperties(this,{type:{value:a,enumerable:!0,configurable:!0},sourceEvent:{value:b,enumerable:!0,configurable:!0},target:{value:c,enumerable:!0,configurable:!0},transform:{value:d,enumerable:!0,configurable:!0},_:{value:e}})}function bR(a,b,c){this.k=a,this.x=b,this.y=c}bR.prototype={constructor:bR,scale:function(a){return 1===a?this:new bR(this.k*a,this.x,this.y)},translate:function(a,b){return 0===a&0===b?this:new bR(this.k,this.x+this.k*a,this.y+this.k*b)},apply:function(a){return[a[0]*this.k+this.x,a[1]*this.k+this.y]},applyX:function(a){return a*this.k+this.x},applyY:function(a){return a*this.k+this.y},invert:function(a){return[(a[0]-this.x)/this.k,(a[1]-this.y)/this.k]},invertX:function(a){return(a-this.x)/this.k},invertY:function(a){return(a-this.y)/this.k},rescaleX:function(a){return a.copy().domain(a.range().map(this.invertX,this).map(a.invert,a))},rescaleY:function(a){return a.copy().domain(a.range().map(this.invertY,this).map(a.invert,a))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var bS=new bR(1,0,0);function bT(a){a.stopImmediatePropagation()}function bU(a){a.preventDefault(),a.stopImmediatePropagation()}function bV(a){return(!a.ctrlKey||"wheel"===a.type)&&!a.button}function bW(){var a=this;return a instanceof SVGElement?(a=a.ownerSVGElement||a).hasAttribute("viewBox")?[[(a=a.viewBox.baseVal).x,a.y],[a.x+a.width,a.y+a.height]]:[[0,0],[a.width.baseVal.value,a.height.baseVal.value]]:[[0,0],[a.clientWidth,a.clientHeight]]}function bX(){return this.__zoom||bS}function bY(a){return-a.deltaY*(1===a.deltaMode?.05:a.deltaMode?1:.002)*(a.ctrlKey?10:1)}function bZ(){return navigator.maxTouchPoints||"ontouchstart"in this}function b$(a,b,c){var d=a.invertX(b[0][0])-c[0][0],e=a.invertX(b[1][0])-c[1][0],f=a.invertY(b[0][1])-c[0][1],g=a.invertY(b[1][1])-c[1][1];return a.translate(e>d?(d+e)/2:Math.min(0,d)||Math.max(0,e),g>f?(f+g)/2:Math.min(0,f)||Math.max(0,g))}bR.prototype;let b_=a=>()=>a;function b0(a,{sourceEvent:b,subject:c,target:d,identifier:e,active:f,x:g,y:h,dx:i,dy:j,dispatch:k}){Object.defineProperties(this,{type:{value:a,enumerable:!0,configurable:!0},sourceEvent:{value:b,enumerable:!0,configurable:!0},subject:{value:c,enumerable:!0,configurable:!0},target:{value:d,enumerable:!0,configurable:!0},identifier:{value:e,enumerable:!0,configurable:!0},active:{value:f,enumerable:!0,configurable:!0},x:{value:g,enumerable:!0,configurable:!0},y:{value:h,enumerable:!0,configurable:!0},dx:{value:i,enumerable:!0,configurable:!0},dy:{value:j,enumerable:!0,configurable:!0},_:{value:k}})}function b1(a){return!a.ctrlKey&&!a.button}function b2(){return this.parentNode}function b3(a,b){return null==b?{x:a.x,y:a.y}:b}function b4(){return navigator.maxTouchPoints||"ontouchstart"in this}b0.prototype.on=function(){var a=this._.on.apply(this._,arguments);return a===this._?this:a};var b5=a.i(35112);let b6=(0,o.createContext)(null),b7=b6.Provider,b8="[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001";function b9(a,b){let c=(0,o.useContext)(b6);if(null===c)throw Error(b8);return w(c,a,b)}let ca=()=>{let a=(0,o.useContext)(b6);if(null===a)throw Error(b8);return(0,o.useMemo)(()=>({getState:a.getState,setState:a.setState,subscribe:a.subscribe,destroy:a.destroy}),[a])},cb=a=>a.userSelectionActive?"none":"all";function cc({position:a,children:b,className:c,style:d,...e}){let f=b9(cb),g=`${a}`.split("-");return o.default.createElement("div",{className:p(["react-flow__panel",c,...g]),style:{...d,pointerEvents:f},...e},b)}function cd({proOptions:a,position:b="bottom-right"}){return a?.hideAttribution?null:o.default.createElement(cc,{position:b,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://reactflow.dev/pro"},o.default.createElement("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution"},"React Flow"))}var ce=(0,o.memo)(({x:a,y:b,label:c,labelStyle:d={},labelShowBg:e=!0,labelBgStyle:f={},labelBgPadding:g=[2,4],labelBgBorderRadius:h=2,children:i,className:j,...k})=>{let l=(0,o.useRef)(null),[m,n]=(0,o.useState)({x:0,y:0,width:0,height:0}),q=p(["react-flow__edge-textwrapper",j]);return((0,o.useEffect)(()=>{if(l.current){let a=l.current.getBBox();n({x:a.x,y:a.y,width:a.width,height:a.height})}},[c]),void 0!==c&&c)?o.default.createElement("g",{transform:`translate(${a-m.width/2} ${b-m.height/2})`,className:q,visibility:m.width?"visible":"hidden",...k},e&&o.default.createElement("rect",{width:m.width+2*g[0],x:-g[0],y:-g[1],height:m.height+2*g[1],className:"react-flow__edge-textbg",style:f,rx:h,ry:h}),o.default.createElement("text",{className:"react-flow__edge-text",y:m.height/2,dy:"0.3em",ref:l,style:d},c),i):null});let cf=a=>({width:a.offsetWidth,height:a.offsetHeight}),cg=(a,b=0,c=1)=>Math.min(Math.max(a,b),c),ch=(a={x:0,y:0},b)=>({x:cg(a.x,b[0][0],b[1][0]),y:cg(a.y,b[0][1],b[1][1])}),ci=(a,b,c)=>a<b?cg(Math.abs(a-b),1,50)/50:a>c?-cg(Math.abs(a-c),1,50)/50:0,cj=(a,b)=>[20*ci(a.x,35,b.width-35),20*ci(a.y,35,b.height-35)],ck=a=>a.getRootNode?.()||window?.document,cl=({x:a,y:b,width:c,height:d})=>({x:a,y:b,x2:a+c,y2:b+d}),cm=a=>({...a.positionAbsolute||{x:0,y:0},width:a.width||0,height:a.height||0}),cn=(a,b)=>Math.ceil(Math.max(0,Math.min(a.x+a.width,b.x+b.width)-Math.max(a.x,b.x))*Math.max(0,Math.min(a.y+a.height,b.y+b.height)-Math.max(a.y,b.y))),co=a=>!isNaN(a)&&isFinite(a),cp=Symbol.for("internals"),cq=["Enter"," ","Escape"],cr=(a,b)=>{};function cs(a){let b="nativeEvent"in a?a.nativeEvent:a,c=b.composedPath?.()?.[0]||a.target;return["INPUT","SELECT","TEXTAREA"].includes(c?.nodeName)||c?.hasAttribute("contenteditable")||!!c?.closest(".nokey")}let ct=(a,b)=>{let c="clientX"in a,d=c?a.clientX:a.touches?.[0].clientX,e=c?a.clientY:a.touches?.[0].clientY;return{x:d-(b?.left??0),y:e-(b?.top??0)}},cu=()=>"undefined"!=typeof navigator&&navigator?.userAgent?.indexOf("Mac")>=0,cv=({id:a,path:b,labelX:c,labelY:d,label:e,labelStyle:f,labelShowBg:g,labelBgStyle:h,labelBgPadding:i,labelBgBorderRadius:j,style:k,markerEnd:l,markerStart:m,interactionWidth:n=20})=>o.default.createElement(o.default.Fragment,null,o.default.createElement("path",{id:a,style:k,d:b,fill:"none",className:"react-flow__edge-path",markerEnd:l,markerStart:m}),n&&o.default.createElement("path",{d:b,fill:"none",strokeOpacity:0,strokeWidth:n,className:"react-flow__edge-interaction"}),e&&co(c)&&co(d)?o.default.createElement(ce,{x:c,y:d,label:e,labelStyle:f,labelShowBg:g,labelBgStyle:h,labelBgPadding:i,labelBgBorderRadius:j}):null);function cw(a,b,c){return void 0===c?c:d=>{let e=b().edges.find(b=>b.id===a);e&&c(d,{...e})}}function cx({sourceX:a,sourceY:b,targetX:c,targetY:d}){let e=Math.abs(c-a)/2,f=Math.abs(d-b)/2;return[c<a?c+e:c-e,d<b?d+f:d-f,e,f]}function cy({sourceX:a,sourceY:b,targetX:c,targetY:d,sourceControlX:e,sourceControlY:f,targetControlX:g,targetControlY:h}){let i=.125*a+.375*e+.375*g+.125*c,j=.125*b+.375*f+.375*h+.125*d,k=Math.abs(i-a),l=Math.abs(j-b);return[i,j,k,l]}function cz({pos:a,x1:b,y1:c,x2:d,y2:e}){return a===n.Left||a===n.Right?[.5*(b+d),c]:[b,.5*(c+e)]}function cA({sourceX:a,sourceY:b,sourcePosition:c=n.Bottom,targetX:d,targetY:e,targetPosition:f=n.Top}){let[g,h]=cz({pos:c,x1:a,y1:b,x2:d,y2:e}),[i,j]=cz({pos:f,x1:d,y1:e,x2:a,y2:b}),[k,l,m,o]=cy({sourceX:a,sourceY:b,targetX:d,targetY:e,sourceControlX:g,sourceControlY:h,targetControlX:i,targetControlY:j});return[`M${a},${b} C${g},${h} ${i},${j} ${d},${e}`,k,l,m,o]}cv.displayName="BaseEdge",(b=i||(i={})).Strict="strict",b.Loose="loose",(c=j||(j={})).Free="free",c.Vertical="vertical",c.Horizontal="horizontal",(d=k||(k={})).Partial="partial",d.Full="full",(e=l||(l={})).Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e.SimpleBezier="simplebezier",(f=m||(m={})).Arrow="arrow",f.ArrowClosed="arrowclosed",(g=n||(n={})).Left="left",g.Top="top",g.Right="right",g.Bottom="bottom";let cB=(0,o.memo)(({sourceX:a,sourceY:b,targetX:c,targetY:d,sourcePosition:e=n.Bottom,targetPosition:f=n.Top,label:g,labelStyle:h,labelShowBg:i,labelBgStyle:j,labelBgPadding:k,labelBgBorderRadius:l,style:m,markerEnd:p,markerStart:q,interactionWidth:r})=>{let[s,t,u]=cA({sourceX:a,sourceY:b,sourcePosition:e,targetX:c,targetY:d,targetPosition:f});return o.default.createElement(cv,{path:s,labelX:t,labelY:u,label:g,labelStyle:h,labelShowBg:i,labelBgStyle:j,labelBgPadding:k,labelBgBorderRadius:l,style:m,markerEnd:p,markerStart:q,interactionWidth:r})});cB.displayName="SimpleBezierEdge";let cC={[n.Left]:{x:-1,y:0},[n.Right]:{x:1,y:0},[n.Top]:{x:0,y:-1},[n.Bottom]:{x:0,y:1}},cD=({source:a,sourcePosition:b=n.Bottom,target:c})=>b===n.Left||b===n.Right?a.x<c.x?{x:1,y:0}:{x:-1,y:0}:a.y<c.y?{x:0,y:1}:{x:0,y:-1},cE=(a,b)=>Math.sqrt(Math.pow(b.x-a.x,2)+Math.pow(b.y-a.y,2));function cF({sourceX:a,sourceY:b,sourcePosition:c=n.Bottom,targetX:d,targetY:e,targetPosition:f=n.Top,borderRadius:g=5,centerX:h,centerY:i,offset:j=20}){let[k,l,m,o,p]=function({source:a,sourcePosition:b=n.Bottom,target:c,targetPosition:d=n.Top,center:e,offset:f}){let g,h,i=cC[b],j=cC[d],k={x:a.x+i.x*f,y:a.y+i.y*f},l={x:c.x+j.x*f,y:c.y+j.y*f},m=cD({source:k,sourcePosition:b,target:l}),o=0!==m.x?"x":"y",p=m[o],q=[],r={x:0,y:0},s={x:0,y:0},[t,u,v,w]=cx({sourceX:a.x,sourceY:a.y,targetX:c.x,targetY:c.y});if(i[o]*j[o]==-1){g=e.x??t,h=e.y??u;let a=[{x:g,y:k.y},{x:g,y:l.y}],b=[{x:k.x,y:h},{x:l.x,y:h}];q=i[o]===p?"x"===o?a:b:"x"===o?b:a}else{let e=[{x:k.x,y:l.y}],m=[{x:l.x,y:k.y}];if(q="x"===o?i.x===p?m:e:i.y===p?e:m,b===d){let b=Math.abs(a[o]-c[o]);if(b<=f){let d=Math.min(f-1,f-b);i[o]===p?r[o]=(k[o]>a[o]?-1:1)*d:s[o]=(l[o]>c[o]?-1:1)*d}}if(b!==d){let a="x"===o?"y":"x",b=i[o]===j[a],c=k[a]>l[a],d=k[a]<l[a];(1===i[o]&&(!b&&c||b&&d)||1!==i[o]&&(!b&&d||b&&c))&&(q="x"===o?e:m)}let n={x:k.x+r.x,y:k.y+r.y},t={x:l.x+s.x,y:l.y+s.y};Math.max(Math.abs(n.x-q[0].x),Math.abs(t.x-q[0].x))>=Math.max(Math.abs(n.y-q[0].y),Math.abs(t.y-q[0].y))?(g=(n.x+t.x)/2,h=q[0].y):(g=q[0].x,h=(n.y+t.y)/2)}return[[a,{x:k.x+r.x,y:k.y+r.y},...q,{x:l.x+s.x,y:l.y+s.y},c],g,h,v,w]}({source:{x:a,y:b},sourcePosition:c,target:{x:d,y:e},targetPosition:f,center:{x:h,y:i},offset:j});return[k.reduce((a,b,c)=>a+(c>0&&c<k.length-1?function(a,b,c,d){let e=Math.min(cE(a,b)/2,cE(b,c)/2,d),{x:f,y:g}=b;if(a.x===f&&f===c.x||a.y===g&&g===c.y)return`L${f} ${g}`;if(a.y===g){let b=a.x<c.x?-1:1,d=a.y<c.y?1:-1;return`L ${f+e*b},${g}Q ${f},${g} ${f},${g+e*d}`}let h=a.x<c.x?1:-1,i=a.y<c.y?-1:1;return`L ${f},${g+e*i}Q ${f},${g} ${f+e*h},${g}`}(k[c-1],b,k[c+1],g):`${0===c?"M":"L"}${b.x} ${b.y}`),""),l,m,o,p]}let cG=(0,o.memo)(({sourceX:a,sourceY:b,targetX:c,targetY:d,label:e,labelStyle:f,labelShowBg:g,labelBgStyle:h,labelBgPadding:i,labelBgBorderRadius:j,style:k,sourcePosition:l=n.Bottom,targetPosition:m=n.Top,markerEnd:p,markerStart:q,pathOptions:r,interactionWidth:s})=>{let[t,u,v]=cF({sourceX:a,sourceY:b,sourcePosition:l,targetX:c,targetY:d,targetPosition:m,borderRadius:r?.borderRadius,offset:r?.offset});return o.default.createElement(cv,{path:t,labelX:u,labelY:v,label:e,labelStyle:f,labelShowBg:g,labelBgStyle:h,labelBgPadding:i,labelBgBorderRadius:j,style:k,markerEnd:p,markerStart:q,interactionWidth:s})});cG.displayName="SmoothStepEdge";let cH=(0,o.memo)(a=>o.default.createElement(cG,{...a,pathOptions:(0,o.useMemo)(()=>({borderRadius:0,offset:a.pathOptions?.offset}),[a.pathOptions?.offset])}));cH.displayName="StepEdge";let cI=(0,o.memo)(({sourceX:a,sourceY:b,targetX:c,targetY:d,label:e,labelStyle:f,labelShowBg:g,labelBgStyle:h,labelBgPadding:i,labelBgBorderRadius:j,style:k,markerEnd:l,markerStart:m,interactionWidth:n})=>{let[p,q,r]=function({sourceX:a,sourceY:b,targetX:c,targetY:d}){let[e,f,g,h]=cx({sourceX:a,sourceY:b,targetX:c,targetY:d});return[`M ${a},${b}L ${c},${d}`,e,f,g,h]}({sourceX:a,sourceY:b,targetX:c,targetY:d});return o.default.createElement(cv,{path:p,labelX:q,labelY:r,label:e,labelStyle:f,labelShowBg:g,labelBgStyle:h,labelBgPadding:i,labelBgBorderRadius:j,style:k,markerEnd:l,markerStart:m,interactionWidth:n})});function cJ(a,b){return a>=0?.5*a:25*b*Math.sqrt(-a)}function cK({pos:a,x1:b,y1:c,x2:d,y2:e,c:f}){switch(a){case n.Left:return[b-cJ(b-d,f),c];case n.Right:return[b+cJ(d-b,f),c];case n.Top:return[b,c-cJ(c-e,f)];case n.Bottom:return[b,c+cJ(e-c,f)]}}function cL({sourceX:a,sourceY:b,sourcePosition:c=n.Bottom,targetX:d,targetY:e,targetPosition:f=n.Top,curvature:g=.25}){let[h,i]=cK({pos:c,x1:a,y1:b,x2:d,y2:e,c:g}),[j,k]=cK({pos:f,x1:d,y1:e,x2:a,y2:b,c:g}),[l,m,o,p]=cy({sourceX:a,sourceY:b,targetX:d,targetY:e,sourceControlX:h,sourceControlY:i,targetControlX:j,targetControlY:k});return[`M${a},${b} C${h},${i} ${j},${k} ${d},${e}`,l,m,o,p]}cI.displayName="StraightEdge";let cM=(0,o.memo)(({sourceX:a,sourceY:b,targetX:c,targetY:d,sourcePosition:e=n.Bottom,targetPosition:f=n.Top,label:g,labelStyle:h,labelShowBg:i,labelBgStyle:j,labelBgPadding:k,labelBgBorderRadius:l,style:m,markerEnd:p,markerStart:q,pathOptions:r,interactionWidth:s})=>{let[t,u,v]=cL({sourceX:a,sourceY:b,sourcePosition:e,targetX:c,targetY:d,targetPosition:f,curvature:r?.curvature});return o.default.createElement(cv,{path:t,labelX:u,labelY:v,label:g,labelStyle:h,labelShowBg:i,labelBgStyle:j,labelBgPadding:k,labelBgBorderRadius:l,style:m,markerEnd:p,markerStart:q,interactionWidth:s})});cM.displayName="BezierEdge";let cN=(0,o.createContext)(null),cO=cN.Provider;cN.Consumer;let cP=(a,b)=>{if(void 0===a)return"";if("string"==typeof a)return a;let c=b?`${b}__`:"";return`${c}${Object.keys(a).sort().map(b=>`${b}=${a[b]}`).join("&")}`},cQ=(a,b)=>{let c,d;return a.source&&a.target?(d=c="id"in a&&"source"in a&&"target"in a?{...a}:{...a,id:(({source:a,sourceHandle:b,target:c,targetHandle:d})=>`reactflow__edge-${a}${b||""}-${c}${d||""}`)(a)},b.some(a=>a.source===d.source&&a.target===d.target&&(a.sourceHandle===d.sourceHandle||!a.sourceHandle&&!d.sourceHandle)&&(a.targetHandle===d.targetHandle||!a.targetHandle&&!d.targetHandle)))?b:b.concat(c):(cr("006","Can't create edge. An edge needs a source and a target."),b)},cR=({x:a,y:b},[c,d,e],f,[g,h])=>{let i={x:(a-c)/e,y:(b-d)/e};return f?{x:g*Math.round(i.x/g),y:h*Math.round(i.y/h)}:i},cS=({x:a,y:b},[c,d,e])=>({x:a*e+c,y:b*e+d}),cT=(a,b=[0,0])=>{if(!a)return{x:0,y:0,positionAbsolute:{x:0,y:0}};let c=(a.width??0)*b[0],d=(a.height??0)*b[1],e={x:a.position.x-c,y:a.position.y-d};return{...e,positionAbsolute:a.positionAbsolute?{x:a.positionAbsolute.x-c,y:a.positionAbsolute.y-d}:e}},cU=(a,b=[0,0])=>0===a.length?{x:0,y:0,width:0,height:0}:(({x:a,y:b,x2:c,y2:d})=>({x:a,y:b,width:c-a,height:d-b}))(a.reduce((a,c)=>{let d,{x:e,y:f}=cT(c,b).positionAbsolute;return d=cl({x:e,y:f,width:c.width||0,height:c.height||0}),{x:Math.min(a.x,d.x),y:Math.min(a.y,d.y),x2:Math.max(a.x2,d.x2),y2:Math.max(a.y2,d.y2)}},{x:1/0,y:1/0,x2:-1/0,y2:-1/0})),cV=(a,b,[c,d,e]=[0,0,1],f=!1,g=!1,h=[0,0])=>{let i={x:(b.x-c)/e,y:(b.y-d)/e,width:b.width/e,height:b.height/e},j=[];return a.forEach(a=>{let{width:b,height:c,selectable:d=!0,hidden:e=!1}=a;if(g&&!d||e)return!1;let{positionAbsolute:k}=cT(a,h),l=cn(i,{x:k.x,y:k.y,width:b||0,height:c||0}),m=void 0===b||void 0===c||null===b||null===c,n=(b||0)*(c||0);(m||f&&l>0||l>=n||a.dragging)&&j.push(a)}),j},cW=(a,b)=>{let c=a.map(a=>a.id);return b.filter(a=>c.includes(a.source)||c.includes(a.target))},cX=(a,b,c,d,e,f=.1)=>{let g=cg(Math.min(b/(a.width*(1+f)),c/(a.height*(1+f))),d,e);return{x:b/2-(a.x+a.width/2)*g,y:c/2-(a.y+a.height/2)*g,zoom:g}},cY=(a,b=0)=>a.transition().duration(b);function cZ(a,b,c,d){return(b[c]||[]).reduce((b,e)=>(`${a.id}-${e.id}-${c}`!==d&&b.push({id:e.id||null,type:c,nodeId:a.id,x:(a.positionAbsolute?.x??0)+e.x+e.width/2,y:(a.positionAbsolute?.y??0)+e.y+e.height/2}),b),[])}let c$={source:null,target:null,sourceHandle:null,targetHandle:null},c_=()=>({handleDomNode:null,isValid:!1,connection:c$,endHandle:null});function c0(a,b,c,d,e,f,g){let h="target"===e,j=g.querySelector(`.react-flow__handle[data-id="${a?.nodeId}-${a?.id}-${a?.type}"]`),k={...c_(),handleDomNode:j};if(j){let a=c1(void 0,j),e=j.getAttribute("data-nodeid"),g=j.getAttribute("data-handleid"),l=j.classList.contains("connectable"),m=j.classList.contains("connectableend"),n={source:h?e:c,sourceHandle:h?g:d,target:h?c:e,targetHandle:h?d:g};k.connection=n,l&&m&&(b===i.Strict?h&&"source"===a||!h&&"target"===a:e!==c||g!==d)&&(k.endHandle={nodeId:e,handleId:g,type:a},k.isValid=f(n))}return k}function c1(a,b){return a?a:b?.classList.contains("target")?"target":b?.classList.contains("source")?"source":null}function c2(a){a?.classList.remove("valid","connecting","react-flow__handle-valid","react-flow__handle-connecting")}function c3({event:a,handleId:b,nodeId:c,onConnect:d,isTarget:e,getState:f,setState:g,isValidConnection:h,edgeUpdaterType:i,onReconnectEnd:j}){let k,l,m=ck(a.target),{connectionMode:n,domNode:o,autoPanOnConnect:p,connectionRadius:q,onConnectStart:r,panBy:s,getNodes:t,cancelConnection:u}=f(),v=0,{x:w,y:x}=ct(a),y=c1(i,m?.elementFromPoint(w,x)),z=o?.getBoundingClientRect();if(!z||!y)return;let A=ct(a,z),B=!1,C=null,D=!1,E=null,F=function({nodes:a,nodeId:b,handleId:c,handleType:d}){return a.reduce((a,e)=>{if(e[cp]){let{handleBounds:f}=e[cp],g=[],h=[];f&&(g=cZ(e,f,"source",`${b}-${c}-${d}`),h=cZ(e,f,"target",`${b}-${c}-${d}`)),a.push(...g,...h)}return a},[])}({nodes:t(),nodeId:c,handleId:b,handleType:y}),G=()=>{if(!p)return;let[a,b]=cj(A,z);s({x:a,y:b}),v=requestAnimationFrame(G)};function H(a){var d,i;let j,{transform:o}=f();A=ct(a,z);let{handle:p,validHandleResult:r}=function(a,b,c,d,e,f){let{x:g,y:h}=ct(a),i=b.elementsFromPoint(g,h).find(a=>a.classList.contains("react-flow__handle"));if(i){let a=i.getAttribute("data-nodeid");if(a){let b=c1(void 0,i),d=i.getAttribute("data-handleid"),g=f({nodeId:a,id:d,type:b});if(g){let f=e.find(c=>c.nodeId===a&&c.type===b&&c.id===d);return{handle:{id:d,type:b,nodeId:a,x:f?.x||c.x,y:f?.y||c.y},validHandleResult:g}}}}let j=[],k=1/0;if(e.forEach(a=>{let b=Math.sqrt((a.x-c.x)**2+(a.y-c.y)**2);if(b<=d){let c=f(a);b<=k&&(b<k?j=[{handle:a,validHandleResult:c}]:b===k&&j.push({handle:a,validHandleResult:c}),k=b)}}),!j.length)return{handle:null,validHandleResult:c_()};if(1===j.length)return j[0];let l=j.some(({validHandleResult:a})=>a.isValid),m=j.some(({handle:a})=>"target"===a.type);return j.find(({handle:a,validHandleResult:b})=>m?"target"===a.type:!l||b.isValid)||j[0]}(a,m,cR(A,o,!1,[1,1]),q,F,a=>c0(a,n,c,b,e?"target":"source",h,m));if(k=p,B||(G(),B=!0),E=r.handleDomNode,C=r.connection,D=r.isValid,g({connectionPosition:k&&D?cS({x:k.x,y:k.y},o):A,connectionStatus:(d=!!k,j=null,(i=D)?j="valid":d&&!i&&(j="invalid"),j),connectionEndHandle:r.endHandle}),!k&&!D&&!E)return c2(l);C.source!==C.target&&E&&(c2(l),l=E,E.classList.add("connecting","react-flow__handle-connecting"),E.classList.toggle("valid",D),E.classList.toggle("react-flow__handle-valid",D))}function I(a){(k||E)&&C&&D&&d?.(C),f().onConnectEnd?.(a),i&&j?.(a),c2(l),u(),cancelAnimationFrame(v),B=!1,D=!1,C=null,E=null,m.removeEventListener("mousemove",H),m.removeEventListener("mouseup",I),m.removeEventListener("touchmove",H),m.removeEventListener("touchend",I)}g({connectionPosition:A,connectionStatus:null,connectionNodeId:c,connectionHandleId:b,connectionHandleType:y,connectionStartHandle:{nodeId:c,handleId:b,type:y},connectionEndHandle:null}),r?.(a,{nodeId:c,handleId:b,handleType:y}),m.addEventListener("mousemove",H),m.addEventListener("mouseup",I),m.addEventListener("touchmove",H),m.addEventListener("touchend",I)}let c4=()=>!0,c5=a=>({connectionStartHandle:a.connectionStartHandle,connectOnClick:a.connectOnClick,noPanClassName:a.noPanClassName}),c6=(0,o.forwardRef)(({type:a="source",position:b=n.Top,isValidConnection:c,isConnectable:d=!0,isConnectableStart:e=!0,isConnectableEnd:f=!0,id:g,onConnect:h,children:i,className:j,onMouseDown:k,onTouchStart:l,...m},q)=>{let r=g||null,s="target"===a,t=ca(),u=(0,o.useContext)(cN),{connectOnClick:v,noPanClassName:w}=b9(c5,y),{connecting:x,clickConnecting:z}=b9(b=>{let{connectionStartHandle:c,connectionEndHandle:d,connectionClickStartHandle:e}=b;return{connecting:c?.nodeId===u&&c?.handleId===r&&c?.type===a||d?.nodeId===u&&d?.handleId===r&&d?.type===a,clickConnecting:e?.nodeId===u&&e?.handleId===r&&e?.type===a}},y);u||t.getState().onError?.("010","Handle: No node id found. Make sure to only use a Handle inside a custom Node.");let A=a=>{let{defaultEdgeOptions:b,onConnect:c,hasDefaultEdges:d}=t.getState(),e={...b,...a};if(d){let{edges:a,setEdges:b}=t.getState();b(cQ(e,a))}c?.(e),h?.(e)},B=a=>{if(!u)return;let b="clientX"in a;e&&(b&&0===a.button||!b)&&c3({event:a,handleId:r,nodeId:u,onConnect:A,isTarget:s,getState:t.getState,setState:t.setState,isValidConnection:c||t.getState().isValidConnection||c4}),b?k?.(a):l?.(a)};return o.default.createElement("div",{"data-handleid":r,"data-nodeid":u,"data-handlepos":b,"data-id":`${u}-${r}-${a}`,className:p(["react-flow__handle",`react-flow__handle-${b}`,"nodrag",w,j,{source:!s,target:s,connectable:d,connectablestart:e,connectableend:f,connecting:z,connectionindicator:d&&(e&&!x||f&&x)}]),onMouseDown:B,onTouchStart:B,onClick:v?b=>{let{onClickConnectStart:d,onClickConnectEnd:f,connectionClickStartHandle:g,connectionMode:h,isValidConnection:i}=t.getState();if(!u||!g&&!e)return;if(!g){d?.(b,{nodeId:u,handleId:r,handleType:a}),t.setState({connectionClickStartHandle:{nodeId:u,type:a,handleId:r}});return}let j=ck(b.target),k=c||i||c4,{connection:l,isValid:m}=c0({nodeId:u,id:r,type:a},h,g.nodeId,g.handleId||null,g.type,k,j);m&&A(l),f?.(b),t.setState({connectionClickStartHandle:null})}:void 0,ref:q,...m},i)});c6.displayName="Handle";var c7=(0,o.memo)(c6);let c8=({data:a,isConnectable:b,targetPosition:c=n.Top,sourcePosition:d=n.Bottom})=>o.default.createElement(o.default.Fragment,null,o.default.createElement(c7,{type:"target",position:c,isConnectable:b}),a?.label,o.default.createElement(c7,{type:"source",position:d,isConnectable:b}));c8.displayName="DefaultNode";var c9=(0,o.memo)(c8);let da=({data:a,isConnectable:b,sourcePosition:c=n.Bottom})=>o.default.createElement(o.default.Fragment,null,a?.label,o.default.createElement(c7,{type:"source",position:c,isConnectable:b}));da.displayName="InputNode";var db=(0,o.memo)(da);let dc=({data:a,isConnectable:b,targetPosition:c=n.Top})=>o.default.createElement(o.default.Fragment,null,o.default.createElement(c7,{type:"target",position:c,isConnectable:b}),a?.label);dc.displayName="OutputNode";var dd=(0,o.memo)(dc);let de=()=>null;de.displayName="GroupNode";let df=a=>({selectedNodes:a.getNodes().filter(a=>a.selected),selectedEdges:a.edges.filter(a=>a.selected).map(a=>({...a}))}),dg=a=>a.id;function dh(a,b){return y(a.selectedNodes.map(dg),b.selectedNodes.map(dg))&&y(a.selectedEdges.map(dg),b.selectedEdges.map(dg))}let di=(0,o.memo)(({onSelectionChange:a})=>{let b=ca(),{selectedNodes:c,selectedEdges:d}=b9(df,dh);return(0,o.useEffect)(()=>{let e={nodes:c,edges:d};a?.(e),b.getState().onSelectionChange.forEach(a=>a(e))},[c,d,a]),null});di.displayName="SelectionListener";let dj=a=>!!a.onSelectionChange;function dk({onSelectionChange:a}){let b=b9(dj);return a||b?o.default.createElement(di,{onSelectionChange:a}):null}let dl=a=>({setNodes:a.setNodes,setEdges:a.setEdges,setDefaultNodesAndEdges:a.setDefaultNodesAndEdges,setMinZoom:a.setMinZoom,setMaxZoom:a.setMaxZoom,setTranslateExtent:a.setTranslateExtent,setNodeExtent:a.setNodeExtent,reset:a.reset});function dm(a,b){(0,o.useEffect)(()=>{void 0!==a&&b(a)},[a])}function dn(a,b,c){(0,o.useEffect)(()=>{void 0!==b&&c({[a]:b})},[b])}let dp=({nodes:a,edges:b,defaultNodes:c,defaultEdges:d,onConnect:e,onConnectStart:f,onConnectEnd:g,onClickConnectStart:h,onClickConnectEnd:i,nodesDraggable:j,nodesConnectable:k,nodesFocusable:l,edgesFocusable:m,edgesUpdatable:n,elevateNodesOnSelect:p,minZoom:q,maxZoom:r,nodeExtent:s,onNodesChange:t,onEdgesChange:u,elementsSelectable:v,connectionMode:w,snapGrid:x,snapToGrid:z,translateExtent:A,connectOnClick:B,defaultEdgeOptions:C,fitView:D,fitViewOptions:E,onNodesDelete:F,onEdgesDelete:G,onNodeDrag:H,onNodeDragStart:I,onNodeDragStop:J,onSelectionDrag:K,onSelectionDragStart:L,onSelectionDragStop:M,noPanClassName:N,nodeOrigin:O,rfId:P,autoPanOnConnect:Q,autoPanOnNodeDrag:R,onError:S,connectionRadius:T,isValidConnection:U,nodeDragThreshold:V})=>{let{setNodes:W,setEdges:X,setDefaultNodesAndEdges:Y,setMinZoom:Z,setMaxZoom:$,setTranslateExtent:_,setNodeExtent:aa,reset:ab}=b9(dl,y),ac=ca();return(0,o.useEffect)(()=>(Y(c,d?.map(a=>({...a,...C}))),()=>{ab()}),[]),dn("defaultEdgeOptions",C,ac.setState),dn("connectionMode",w,ac.setState),dn("onConnect",e,ac.setState),dn("onConnectStart",f,ac.setState),dn("onConnectEnd",g,ac.setState),dn("onClickConnectStart",h,ac.setState),dn("onClickConnectEnd",i,ac.setState),dn("nodesDraggable",j,ac.setState),dn("nodesConnectable",k,ac.setState),dn("nodesFocusable",l,ac.setState),dn("edgesFocusable",m,ac.setState),dn("edgesUpdatable",n,ac.setState),dn("elementsSelectable",v,ac.setState),dn("elevateNodesOnSelect",p,ac.setState),dn("snapToGrid",z,ac.setState),dn("snapGrid",x,ac.setState),dn("onNodesChange",t,ac.setState),dn("onEdgesChange",u,ac.setState),dn("connectOnClick",B,ac.setState),dn("fitViewOnInit",D,ac.setState),dn("fitViewOnInitOptions",E,ac.setState),dn("onNodesDelete",F,ac.setState),dn("onEdgesDelete",G,ac.setState),dn("onNodeDrag",H,ac.setState),dn("onNodeDragStart",I,ac.setState),dn("onNodeDragStop",J,ac.setState),dn("onSelectionDrag",K,ac.setState),dn("onSelectionDragStart",L,ac.setState),dn("onSelectionDragStop",M,ac.setState),dn("noPanClassName",N,ac.setState),dn("nodeOrigin",O,ac.setState),dn("rfId",P,ac.setState),dn("autoPanOnConnect",Q,ac.setState),dn("autoPanOnNodeDrag",R,ac.setState),dn("onError",S,ac.setState),dn("connectionRadius",T,ac.setState),dn("isValidConnection",U,ac.setState),dn("nodeDragThreshold",V,ac.setState),dm(a,W),dm(b,X),dm(q,Z),dm(r,$),dm(A,_),dm(s,aa),null},dq={display:"none"},dr={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},ds="react-flow__node-desc",dt="react-flow__edge-desc",du=a=>a.ariaLiveMessage;function dv({rfId:a}){let b=b9(du);return o.default.createElement("div",{id:`react-flow__aria-live-${a}`,"aria-live":"assertive","aria-atomic":"true",style:dr},b)}function dw({rfId:a,disableKeyboardA11y:b}){return o.default.createElement(o.default.Fragment,null,o.default.createElement("div",{id:`${ds}-${a}`,style:dq},"Press enter or space to select a node.",!b&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "),o.default.createElement("div",{id:`${dt}-${a}`,style:dq},"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."),!b&&o.default.createElement(dv,{rfId:a}))}var dx=(a=null,b={actInsideInputWithModifier:!0})=>{let[c,d]=(0,o.useState)(!1),e=(0,o.useRef)(!1),f=(0,o.useRef)(new Set([])),[g,h]=(0,o.useMemo)(()=>{if(null!==a){let b=(Array.isArray(a)?a:[a]).filter(a=>"string"==typeof a).map(a=>a.split("+")),c=b.reduce((a,b)=>a.concat(...b),[]);return[b,c]}return[[],[]]},[a]);return(0,o.useEffect)(()=>{let c="undefined"!=typeof document?document:null,i=b?.target||c;if(null!==a){let a=a=>{if(e.current=a.ctrlKey||a.metaKey||a.shiftKey,(!e.current||e.current&&!b.actInsideInputWithModifier)&&cs(a))return!1;let c=dz(a.code,h);f.current.add(a[c]),dy(g,f.current,!1)&&(a.preventDefault(),d(!0))},c=a=>{if((!e.current||e.current&&!b.actInsideInputWithModifier)&&cs(a))return!1;let c=dz(a.code,h);dy(g,f.current,!0)?(d(!1),f.current.clear()):f.current.delete(a[c]),"Meta"===a.key&&f.current.clear(),e.current=!1},j=()=>{f.current.clear(),d(!1)};return i?.addEventListener("keydown",a),i?.addEventListener("keyup",c),window.addEventListener("blur",j),()=>{i?.removeEventListener("keydown",a),i?.removeEventListener("keyup",c),window.removeEventListener("blur",j)}}},[a,d]),c};function dy(a,b,c){return a.filter(a=>c||a.length===b.size).some(a=>a.every(a=>b.has(a)))}function dz(a,b){return b.includes(a)?"code":"key"}function dA(a,b,c){a.forEach(d=>{let e=d.parentNode||d.parentId;if(e&&!a.has(e))throw Error(`Parent node ${e} not found`);if(e||c?.[d.id]){let{x:e,y:f,z:g}=function a(b,c,d,e){let f=b.parentNode||b.parentId;if(!f)return d;let g=c.get(f),h=cT(g,e);return a(g,c,{x:(d.x??0)+h.x,y:(d.y??0)+h.y,z:(g[cp]?.z??0)>(d.z??0)?g[cp]?.z??0:d.z??0},e)}(d,a,{...d.position,z:d[cp]?.z??0},b);d.positionAbsolute={x:e,y:f},d[cp].z=g,c?.[d.id]&&(d[cp].isParent=!0)}})}function dB(a,b,c,d){let e=new Map,f={},g=1e3*!!d;return a.forEach(a=>{let c=(co(a.zIndex)?a.zIndex:0)+(a.selected?g:0),d=b.get(a.id),h={...a,positionAbsolute:{x:a.position.x,y:a.position.y}},i=a.parentNode||a.parentId;i&&(f[i]=!0),Object.defineProperty(h,cp,{enumerable:!1,value:{handleBounds:d?.type&&d?.type!==a.type?void 0:d?.[cp]?.handleBounds,z:c}}),e.set(a.id,h)}),dA(e,c,f),e}function dC(a,b={}){let{getNodes:c,width:d,height:e,minZoom:f,maxZoom:g,d3Zoom:h,d3Selection:i,fitViewOnInitDone:j,fitViewOnInit:k,nodeOrigin:l}=a(),m=b.initial&&!j&&k;if(h&&i&&(m||!b.initial)){let a=c().filter(a=>{let c=b.includeHiddenNodes?a.width&&a.height:!a.hidden;return b.nodes?.length?c&&b.nodes.some(b=>b.id===a.id):c}),j=a.every(a=>a.width&&a.height);if(a.length>0&&j){let{x:c,y:j,zoom:k}=cX(cU(a,l),d,e,b.minZoom??f,b.maxZoom??g,b.padding??.1),m=bS.translate(c,j).scale(k);return"number"==typeof b.duration&&b.duration>0?h.transform(cY(i,b.duration),m):h.transform(i,m),!0}}return!1}function dD({changedNodes:a,changedEdges:b,get:c,set:d}){let{nodeInternals:e,edges:f,onNodesChange:g,onEdgesChange:h,hasDefaultNodes:i,hasDefaultEdges:j}=c();a?.length&&(i&&d({nodeInternals:(a.forEach(a=>{let b=e.get(a.id);b&&e.set(b.id,{...b,[cp]:b[cp],selected:a.selected})}),new Map(e))}),g?.(a)),b?.length&&(j&&d({edges:f.map(a=>{let c=b.find(b=>b.id===a.id);return c&&(a.selected=c.selected),a})}),h?.(b))}let dE=()=>{},dF={zoomIn:dE,zoomOut:dE,zoomTo:dE,getZoom:()=>1,setViewport:dE,getViewport:()=>({x:0,y:0,zoom:1}),fitView:()=>!1,setCenter:dE,fitBounds:dE,project:a=>a,screenToFlowPosition:a=>a,flowToScreenPosition:a=>a,viewportInitialized:!1},dG=a=>({d3Zoom:a.d3Zoom,d3Selection:a.d3Selection});function dH(){let a=(()=>{let a=ca(),{d3Zoom:b,d3Selection:c}=b9(dG,y);return(0,o.useMemo)(()=>c&&b?{zoomIn:a=>b.scaleBy(cY(c,a?.duration),1.2),zoomOut:a=>b.scaleBy(cY(c,a?.duration),1/1.2),zoomTo:(a,d)=>b.scaleTo(cY(c,d?.duration),a),getZoom:()=>a.getState().transform[2],setViewport:(d,e)=>{let[f,g,h]=a.getState().transform,i=bS.translate(d.x??f,d.y??g).scale(d.zoom??h);b.transform(cY(c,e?.duration),i)},getViewport:()=>{let[b,c,d]=a.getState().transform;return{x:b,y:c,zoom:d}},fitView:b=>dC(a.getState,b),setCenter:(d,e,f)=>{let{width:g,height:h,maxZoom:i}=a.getState(),j=void 0!==f?.zoom?f.zoom:i,k=g/2-d*j,l=h/2-e*j,m=bS.translate(k,l).scale(j);b.transform(cY(c,f?.duration),m)},fitBounds:(d,e)=>{let{width:f,height:g,minZoom:h,maxZoom:i}=a.getState(),{x:j,y:k,zoom:l}=cX(d,f,g,h,i,e?.padding??.1),m=bS.translate(j,k).scale(l);b.transform(cY(c,e?.duration),m)},project:b=>{let{transform:c,snapToGrid:d,snapGrid:e}=a.getState();return console.warn("[DEPRECATED] `project` is deprecated. Instead use `screenToFlowPosition`. There is no need to subtract the react flow bounds anymore! https://reactflow.dev/api-reference/types/react-flow-instance#screen-to-flow-position"),cR(b,c,d,e)},screenToFlowPosition:b=>{let{transform:c,snapToGrid:d,snapGrid:e,domNode:f}=a.getState();if(!f)return b;let{x:g,y:h}=f.getBoundingClientRect();return cR({x:b.x-g,y:b.y-h},c,d,e)},flowToScreenPosition:b=>{let{transform:c,domNode:d}=a.getState();if(!d)return b;let{x:e,y:f}=d.getBoundingClientRect(),g=cS(b,c);return{x:g.x+e,y:g.y+f}},viewportInitialized:!0}:dF,[b,c])})(),b=ca(),c=(0,o.useCallback)(()=>b.getState().getNodes().map(a=>({...a})),[]),d=(0,o.useCallback)(a=>b.getState().nodeInternals.get(a),[]),e=(0,o.useCallback)(()=>{let{edges:a=[]}=b.getState();return a.map(a=>({...a}))},[]),f=(0,o.useCallback)(a=>{let{edges:c=[]}=b.getState();return c.find(b=>b.id===a)},[]),g=(0,o.useCallback)(a=>{let{getNodes:c,setNodes:d,hasDefaultNodes:e,onNodesChange:f}=b.getState(),g=c(),h="function"==typeof a?a(g):a;e?d(h):f&&f(0===h.length?g.map(a=>({type:"remove",id:a.id})):h.map(a=>({item:a,type:"reset"})))},[]),h=(0,o.useCallback)(a=>{let{edges:c=[],setEdges:d,hasDefaultEdges:e,onEdgesChange:f}=b.getState(),g="function"==typeof a?a(c):a;e?d(g):f&&f(0===g.length?c.map(a=>({type:"remove",id:a.id})):g.map(a=>({item:a,type:"reset"})))},[]),i=(0,o.useCallback)(a=>{let c=Array.isArray(a)?a:[a],{getNodes:d,setNodes:e,hasDefaultNodes:f,onNodesChange:g}=b.getState();f?e([...d(),...c]):g&&g(c.map(a=>({item:a,type:"add"})))},[]),j=(0,o.useCallback)(a=>{let c=Array.isArray(a)?a:[a],{edges:d=[],setEdges:e,hasDefaultEdges:f,onEdgesChange:g}=b.getState();f?e([...d,...c]):g&&g(c.map(a=>({item:a,type:"add"})))},[]),k=(0,o.useCallback)(()=>{let{getNodes:a,edges:c=[],transform:d}=b.getState(),[e,f,g]=d;return{nodes:a().map(a=>({...a})),edges:c.map(a=>({...a})),viewport:{x:e,y:f,zoom:g}}},[]),l=(0,o.useCallback)(({nodes:a,edges:c})=>{let{nodeInternals:d,getNodes:e,edges:f,hasDefaultNodes:g,hasDefaultEdges:h,onNodesDelete:i,onEdgesDelete:j,onNodesChange:k,onEdgesChange:l}=b.getState(),m=(a||[]).map(a=>a.id),n=(c||[]).map(a=>a.id),o=e().reduce((a,b)=>{let c=b.parentNode||b.parentId,d=!m.includes(b.id)&&c&&a.find(a=>a.id===c);return("boolean"!=typeof b.deletable||b.deletable)&&(m.includes(b.id)||d)&&a.push(b),a},[]),p=f.filter(a=>"boolean"!=typeof a.deletable||a.deletable),q=p.filter(a=>n.includes(a.id));if(o||q){let a=[...q,...cW(o,p)],c=a.reduce((a,b)=>(a.includes(b.id)||a.push(b.id),a),[]);(h||g)&&(h&&b.setState({edges:f.filter(a=>!c.includes(a.id))}),g&&(o.forEach(a=>{d.delete(a.id)}),b.setState({nodeInternals:new Map(d)}))),c.length>0&&(j?.(a),l&&l(c.map(a=>({id:a,type:"remove"})))),o.length>0&&(i?.(o),k&&k(o.map(a=>({id:a.id,type:"remove"}))))}},[]),m=(0,o.useCallback)(a=>{let c=co(a.width)&&co(a.height)&&co(a.x)&&co(a.y),d=c?null:b.getState().nodeInternals.get(a.id);return c||d?[c?a:cm(d),d,c]:[null,null,c]},[]),n=(0,o.useCallback)((a,c=!0,d)=>{let[e,f,g]=m(a);return e?(d||b.getState().getNodes()).filter(a=>{if(!g&&(a.id===f.id||!a.positionAbsolute))return!1;let b=cn(cm(a),e);return c&&b>0||b>=e.width*e.height}):[]},[]),p=(0,o.useCallback)((a,b,c=!0)=>{let[d]=m(a);if(!d)return!1;let e=cn(d,b);return c&&e>0||e>=d.width*d.height},[]);return(0,o.useMemo)(()=>({...a,getNodes:c,getNode:d,getEdges:e,getEdge:f,setNodes:g,setEdges:h,addNodes:i,addEdges:j,toObject:k,deleteElements:l,getIntersectingNodes:n,isNodeIntersecting:p}),[a,c,d,e,f,g,h,i,j,k,l,n,p])}let dI={actInsideInputWithModifier:!1},dJ={position:"absolute",width:"100%",height:"100%",top:0,left:0},dK=a=>({x:a.x,y:a.y,zoom:a.k}),dL=(a,b)=>a.target.closest(`.${b}`),dM=(a,b)=>2===b&&Array.isArray(a)&&a.includes(2),dN=a=>{let b=a.ctrlKey&&cu()?10:1;return-a.deltaY*(1===a.deltaMode?.05:a.deltaMode?1:.002)*b},dO=a=>({d3Zoom:a.d3Zoom,d3Selection:a.d3Selection,d3ZoomHandler:a.d3ZoomHandler,userSelectionActive:a.userSelectionActive}),dP=({onMove:a,onMoveStart:b,onMoveEnd:c,onPaneContextMenu:d,zoomOnScroll:e=!0,zoomOnPinch:f=!0,panOnScroll:g=!1,panOnScrollSpeed:h=.5,panOnScrollMode:i=j.Free,zoomOnDoubleClick:k=!0,elementsSelectable:l,panOnDrag:m=!0,defaultViewport:n,translateExtent:p,minZoom:q,maxZoom:r,zoomActivationKeyCode:s,preventScrolling:t=!0,children:u,noWheelClassName:v,noPanClassName:w})=>{let x,z=(0,o.useRef)(),B=ca(),C=(0,o.useRef)(!1),D=(0,o.useRef)(!1),E=(0,o.useRef)(null),F=(0,o.useRef)({x:0,y:0,zoom:0}),{d3Zoom:G,d3Selection:H,d3ZoomHandler:I,userSelectionActive:J}=b9(dO,y),K=dx(s),L=(0,o.useRef)(0),M=(0,o.useRef)(!1),N=(0,o.useRef)();return x=ca(),(0,o.useEffect)(()=>{let a,b=()=>{if(!E.current)return;let a=cf(E.current);(0===a.height||0===a.width)&&x.getState().onError?.("004","The React Flow parent container needs a width and a height to render the graph."),x.setState({width:a.width||500,height:a.height||500})};return b(),window.addEventListener("resize",b),E.current&&(a=new ResizeObserver(()=>b())).observe(E.current),()=>{window.removeEventListener("resize",b),a&&E.current&&a.unobserve(E.current)}},[]),(0,o.useEffect)(()=>{if(E.current){let a=E.current.getBoundingClientRect(),b=(function(){var a,b,c,d=bV,e=bW,f=b$,g=bY,h=bZ,i=[0,1/0],j=[[-1/0,-1/0],[1/0,1/0]],k=250,l=ay,m=A("start","zoom","end"),n=0,o=10;function p(a){a.property("__zoom",bX).on("wheel.zoom",w,{passive:!1}).on("mousedown.zoom",x).on("dblclick.zoom",y).filter(h).on("touchstart.zoom",z).on("touchmove.zoom",B).on("touchend.zoom touchcancel.zoom",C).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function q(a,b){return(b=Math.max(i[0],Math.min(i[1],b)))===a.k?a:new bR(b,a.x,a.y)}function r(a,b,c){var d=b[0]-c[0]*a.k,e=b[1]-c[1]*a.k;return d===a.x&&e===a.y?a:new bR(a.k,d,e)}function s(a){return[(+a[0][0]+ +a[1][0])/2,(+a[0][1]+ +a[1][1])/2]}function t(a,b,c,d){a.on("start.zoom",function(){u(this,arguments).event(d).start()}).on("interrupt.zoom end.zoom",function(){u(this,arguments).event(d).end()}).tween("zoom",function(){var a=arguments,f=u(this,a).event(d),g=e.apply(this,a),h=null==c?s(g):"function"==typeof c?c.apply(this,a):c,i=Math.max(g[1][0]-g[0][0],g[1][1]-g[0][1]),j=this.__zoom,k="function"==typeof b?b.apply(this,a):b,m=l(j.invert(h).concat(i/j.k),k.invert(h).concat(i/k.k));return function(a){if(1===a)a=k;else{var b=m(a),c=i/b[2];a=new bR(c,h[0]-b[0]*c,h[1]-b[1]*c)}f.zoom(null,a)}})}function u(a,b,c){return!c&&a.__zooming||new v(a,b)}function v(a,b){this.that=a,this.args=b,this.active=0,this.sourceEvent=null,this.extent=e.apply(a,b),this.taps=0}function w(a,...b){if(d.apply(this,arguments)){var c=u(this,b).event(a),e=this.__zoom,h=Math.max(i[0],Math.min(i[1],e.k*Math.pow(2,g.apply(this,arguments)))),k=az(a);if(c.wheel)(c.mouse[0][0]!==k[0]||c.mouse[0][1]!==k[1])&&(c.mouse[1]=e.invert(c.mouse[0]=k)),clearTimeout(c.wheel);else{if(e.k===h)return;c.mouse=[k,e.invert(k)],aY(this),c.start()}bU(a),c.wheel=setTimeout(function(){c.wheel=null,c.end()},150),c.zoom("mouse",f(r(q(e,h),c.mouse[0],c.mouse[1]),c.extent,j))}}function x(a,...b){if(!c&&d.apply(this,arguments)){var e=a.currentTarget,g=u(this,b,!0).event(a),h=aq(a.view).on("mousemove.zoom",function(a){if(bU(a),!g.moved){var b=a.clientX-k,c=a.clientY-l;g.moved=b*b+c*c>n}g.event(a).zoom("mouse",f(r(g.that.__zoom,g.mouse[0]=az(a,e),g.mouse[1]),g.extent,j))},!0).on("mouseup.zoom",function(a){h.on("mousemove.zoom mouseup.zoom",null),aw(a.view,g.moved),bU(a),g.event(a).end()},!0),i=az(a,e),k=a.clientX,l=a.clientY;av(a.view),bT(a),g.mouse=[i,this.__zoom.invert(i)],aY(this),g.start()}}function y(a,...b){if(d.apply(this,arguments)){var c=this.__zoom,g=az(a.changedTouches?a.changedTouches[0]:a,this),h=c.invert(g),i=c.k*(a.shiftKey?.5:2),l=f(r(q(c,i),g,h),e.apply(this,b),j);bU(a),k>0?aq(this).transition().duration(k).call(t,l,g,a):aq(this).call(p.transform,l,g,a)}}function z(c,...e){if(d.apply(this,arguments)){var f,g,h,i,j=c.touches,k=j.length,l=u(this,e,c.changedTouches.length===k).event(c);for(bT(c),g=0;g<k;++g)i=[i=az(h=j[g],this),this.__zoom.invert(i),h.identifier],l.touch0?l.touch1||l.touch0[2]===i[2]||(l.touch1=i,l.taps=0):(l.touch0=i,f=!0,l.taps=1+!!a);a&&(a=clearTimeout(a)),f&&(l.taps<2&&(b=i[0],a=setTimeout(function(){a=null},500)),aY(this),l.start())}}function B(a,...b){if(this.__zooming){var c,d,e,g,h=u(this,b).event(a),i=a.changedTouches,k=i.length;for(bU(a),c=0;c<k;++c)e=az(d=i[c],this),h.touch0&&h.touch0[2]===d.identifier?h.touch0[0]=e:h.touch1&&h.touch1[2]===d.identifier&&(h.touch1[0]=e);if(d=h.that.__zoom,h.touch1){var l=h.touch0[0],m=h.touch0[1],n=h.touch1[0],o=h.touch1[1],p=(p=n[0]-l[0])*p+(p=n[1]-l[1])*p,s=(s=o[0]-m[0])*s+(s=o[1]-m[1])*s;d=q(d,Math.sqrt(p/s)),e=[(l[0]+n[0])/2,(l[1]+n[1])/2],g=[(m[0]+o[0])/2,(m[1]+o[1])/2]}else{if(!h.touch0)return;e=h.touch0[0],g=h.touch0[1]}h.zoom("touch",f(r(d,e,g),h.extent,j))}}function C(a,...d){if(this.__zooming){var e,f,g=u(this,d).event(a),h=a.changedTouches,i=h.length;for(bT(a),c&&clearTimeout(c),c=setTimeout(function(){c=null},500),e=0;e<i;++e)f=h[e],g.touch0&&g.touch0[2]===f.identifier?delete g.touch0:g.touch1&&g.touch1[2]===f.identifier&&delete g.touch1;if(g.touch1&&!g.touch0&&(g.touch0=g.touch1,delete g.touch1),g.touch0)g.touch0[1]=this.__zoom.invert(g.touch0[0]);else if(g.end(),2===g.taps&&(f=az(f,this),Math.hypot(b[0]-f[0],b[1]-f[1])<o)){var j=aq(this).on("dblclick.zoom");j&&j.apply(this,arguments)}}}return p.transform=function(a,b,c,d){var e=a.selection?a.selection():a;e.property("__zoom",bX),a!==e?t(a,b,c,d):e.interrupt().each(function(){u(this,arguments).event(d).start().zoom(null,"function"==typeof b?b.apply(this,arguments):b).end()})},p.scaleBy=function(a,b,c,d){p.scaleTo(a,function(){var a=this.__zoom.k,c="function"==typeof b?b.apply(this,arguments):b;return a*c},c,d)},p.scaleTo=function(a,b,c,d){p.transform(a,function(){var a=e.apply(this,arguments),d=this.__zoom,g=null==c?s(a):"function"==typeof c?c.apply(this,arguments):c,h=d.invert(g),i="function"==typeof b?b.apply(this,arguments):b;return f(r(q(d,i),g,h),a,j)},c,d)},p.translateBy=function(a,b,c,d){p.transform(a,function(){return f(this.__zoom.translate("function"==typeof b?b.apply(this,arguments):b,"function"==typeof c?c.apply(this,arguments):c),e.apply(this,arguments),j)},null,d)},p.translateTo=function(a,b,c,d,g){p.transform(a,function(){var a=e.apply(this,arguments),g=this.__zoom,h=null==d?s(a):"function"==typeof d?d.apply(this,arguments):d;return f(bS.translate(h[0],h[1]).scale(g.k).translate("function"==typeof b?-b.apply(this,arguments):-b,"function"==typeof c?-c.apply(this,arguments):-c),a,j)},d,g)},v.prototype={event:function(a){return a&&(this.sourceEvent=a),this},start:function(){return 1==++this.active&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(a,b){return this.mouse&&"mouse"!==a&&(this.mouse[1]=b.invert(this.mouse[0])),this.touch0&&"touch"!==a&&(this.touch0[1]=b.invert(this.touch0[0])),this.touch1&&"touch"!==a&&(this.touch1[1]=b.invert(this.touch1[0])),this.that.__zoom=b,this.emit("zoom"),this},end:function(){return 0==--this.active&&(delete this.that.__zooming,this.emit("end")),this},emit:function(a){var b=aq(this.that).datum();m.call(a,this.that,new bQ(a,{sourceEvent:this.sourceEvent,target:p,type:a,transform:this.that.__zoom,dispatch:m}),b)}},p.wheelDelta=function(a){return arguments.length?(g="function"==typeof a?a:bP(+a),p):g},p.filter=function(a){return arguments.length?(d="function"==typeof a?a:bP(!!a),p):d},p.touchable=function(a){return arguments.length?(h="function"==typeof a?a:bP(!!a),p):h},p.extent=function(a){return arguments.length?(e="function"==typeof a?a:bP([[+a[0][0],+a[0][1]],[+a[1][0],+a[1][1]]]),p):e},p.scaleExtent=function(a){return arguments.length?(i[0]=+a[0],i[1]=+a[1],p):[i[0],i[1]]},p.translateExtent=function(a){return arguments.length?(j[0][0]=+a[0][0],j[1][0]=+a[1][0],j[0][1]=+a[0][1],j[1][1]=+a[1][1],p):[[j[0][0],j[0][1]],[j[1][0],j[1][1]]]},p.constrain=function(a){return arguments.length?(f=a,p):f},p.duration=function(a){return arguments.length?(k=+a,p):k},p.interpolate=function(a){return arguments.length?(l=a,p):l},p.on=function(){var a=m.on.apply(m,arguments);return a===m?p:a},p.clickDistance=function(a){return arguments.length?(n=(a*=1)*a,p):Math.sqrt(n)},p.tapDistance=function(a){return arguments.length?(o=+a,p):o},p})().scaleExtent([q,r]).translateExtent(p),c=aq(E.current).call(b),d=bS.translate(n.x,n.y).scale(cg(n.zoom,q,r)),e=[[0,0],[a.width,a.height]],f=b.constrain()(d,e,p);b.transform(c,f),b.wheelDelta(dN),B.setState({d3Zoom:b,d3Selection:c,d3ZoomHandler:c.on("wheel.zoom"),transform:[f.x,f.y,f.k],domNode:E.current.closest(".react-flow")})}},[]),(0,o.useEffect)(()=>{H&&G&&(!g||K||J?void 0!==I&&H.on("wheel.zoom",function(a,b){if(!t&&"wheel"===a.type&&!a.ctrlKey||dL(a,v))return null;a.preventDefault(),I.call(this,a,b)},{passive:!1}):H.on("wheel.zoom",d=>{if(dL(d,v))return!1;d.preventDefault(),d.stopImmediatePropagation();let e=H.property("__zoom").k||1;if(d.ctrlKey&&f){let a=az(d),b=e*Math.pow(2,dN(d));G.scaleTo(H,b,a,d);return}let g=1===d.deltaMode?20:1,k=i===j.Vertical?0:d.deltaX*g,l=i===j.Horizontal?0:d.deltaY*g;!cu()&&d.shiftKey&&i!==j.Vertical&&(k=d.deltaY*g,l=0),G.translateBy(H,-(k/e)*h,-(l/e)*h,{internal:!0});let m=dK(H.property("__zoom")),{onViewportChangeStart:n,onViewportChange:o,onViewportChangeEnd:p}=B.getState();clearTimeout(N.current),M.current||(M.current=!0,b?.(d,m),n?.(m)),M.current&&(a?.(d,m),o?.(m),N.current=setTimeout(()=>{c?.(d,m),p?.(m),M.current=!1},150))},{passive:!1}))},[J,g,i,H,G,I,K,f,t,v,b,a,c]),(0,o.useEffect)(()=>{G&&G.on("start",a=>{if(!a.sourceEvent||a.sourceEvent.internal)return null;L.current=a.sourceEvent?.button;let{onViewportChangeStart:c}=B.getState(),d=dK(a.transform);C.current=!0,F.current=d,a.sourceEvent?.type==="mousedown"&&B.setState({paneDragging:!0}),c?.(d),b?.(a.sourceEvent,d)})},[G,b]),(0,o.useEffect)(()=>{G&&(J&&!C.current?G.on("zoom",null):J||G.on("zoom",b=>{let{onViewportChange:c}=B.getState();if(B.setState({transform:[b.transform.x,b.transform.y,b.transform.k]}),D.current=!!(d&&dM(m,L.current??0)),(a||c)&&!b.sourceEvent?.internal){let d=dK(b.transform);c?.(d),a?.(b.sourceEvent,d)}}))},[J,G,a,m,d]),(0,o.useEffect)(()=>{G&&G.on("end",a=>{let b,e;if(!a.sourceEvent||a.sourceEvent.internal)return null;let{onViewportChangeEnd:f}=B.getState();if(C.current=!1,B.setState({paneDragging:!1}),d&&dM(m,L.current??0)&&!D.current&&d(a.sourceEvent),D.current=!1,(c||f)&&(b=F.current,e=a.transform,b.x!==e.x||b.y!==e.y||b.zoom!==e.k)){let b=dK(a.transform);F.current=b,clearTimeout(z.current),z.current=setTimeout(()=>{f?.(b),c?.(a.sourceEvent,b)},150*!!g)}})},[G,g,m,c,d]),(0,o.useEffect)(()=>{G&&G.filter(a=>{let b=K||e,c=f&&a.ctrlKey;if((!0===m||Array.isArray(m)&&m.includes(1))&&1===a.button&&"mousedown"===a.type&&(dL(a,"react-flow__node")||dL(a,"react-flow__edge")))return!0;if(!m&&!b&&!g&&!k&&!f||J||!k&&"dblclick"===a.type||dL(a,v)&&"wheel"===a.type||dL(a,w)&&("wheel"!==a.type||g&&"wheel"===a.type&&!K)||!f&&a.ctrlKey&&"wheel"===a.type||!b&&!g&&!c&&"wheel"===a.type||!m&&("mousedown"===a.type||"touchstart"===a.type)||Array.isArray(m)&&!m.includes(a.button)&&"mousedown"===a.type)return!1;let d=Array.isArray(m)&&m.includes(a.button)||!a.button||a.button<=1;return(!a.ctrlKey||"wheel"===a.type)&&d})},[J,G,e,f,g,k,m,l,K]),o.default.createElement("div",{className:"react-flow__renderer",ref:E,style:dJ},u)},dQ=a=>({userSelectionActive:a.userSelectionActive,userSelectionRect:a.userSelectionRect});function dR(){let{userSelectionActive:a,userSelectionRect:b}=b9(dQ,y);return a&&b?o.default.createElement("div",{className:"react-flow__selection react-flow__container",style:{width:b.width,height:b.height,transform:`translate(${b.x}px, ${b.y}px)`}}):null}function dS(a,b){let c=b.parentNode||b.parentId,d=a.find(a=>a.id===c);if(d){let a=b.position.x+b.width-d.width,c=b.position.y+b.height-d.height;if(a>0||c>0||b.position.x<0||b.position.y<0){if(d.style={...d.style},d.style.width=d.style.width??d.width,d.style.height=d.style.height??d.height,a>0&&(d.style.width+=a),c>0&&(d.style.height+=c),b.position.x<0){let a=Math.abs(b.position.x);d.position.x=d.position.x-a,d.style.width+=a,b.position.x=0}if(b.position.y<0){let a=Math.abs(b.position.y);d.position.y=d.position.y-a,d.style.height+=a,b.position.y=0}d.width=d.style.width,d.height=d.style.height}}}function dT(a,b){if(a.some(a=>"reset"===a.type))return a.filter(a=>"reset"===a.type).map(a=>a.item);let c=a.filter(a=>"add"===a.type).map(a=>a.item);return b.reduce((b,c)=>{let d=a.filter(a=>a.id===c.id);if(0===d.length)return b.push(c),b;let e={...c};for(let a of d)if(a)switch(a.type){case"select":e.selected=a.selected;break;case"position":void 0!==a.position&&(e.position=a.position),void 0!==a.positionAbsolute&&(e.positionAbsolute=a.positionAbsolute),void 0!==a.dragging&&(e.dragging=a.dragging),e.expandParent&&dS(b,e);break;case"dimensions":void 0!==a.dimensions&&(e.width=a.dimensions.width,e.height=a.dimensions.height),void 0!==a.updateStyle&&(e.style={...e.style||{},...a.dimensions}),"boolean"==typeof a.resizing&&(e.resizing=a.resizing),e.expandParent&&dS(b,e);break;case"remove":return b}return b.push(e),b},c)}function dU(a,b){return dT(a,b)}let dV=(a,b)=>({id:a,type:"select",selected:b});function dW(a,b){return a.reduce((a,c)=>{let d=b.includes(c.id);return!c.selected&&d?(c.selected=!0,a.push(dV(c.id,!0))):c.selected&&!d&&(c.selected=!1,a.push(dV(c.id,!1))),a},[])}let dX=(a,b)=>c=>{c.target===b.current&&a?.(c)},dY=a=>({userSelectionActive:a.userSelectionActive,elementsSelectable:a.elementsSelectable,dragging:a.paneDragging}),dZ=(0,o.memo)(({isSelecting:a,selectionMode:b=k.Full,panOnDrag:c,onSelectionStart:d,onSelectionEnd:e,onPaneClick:f,onPaneContextMenu:g,onPaneScroll:h,onPaneMouseEnter:i,onPaneMouseMove:j,onPaneMouseLeave:l,children:m})=>{let n=(0,o.useRef)(null),q=ca(),r=(0,o.useRef)(0),s=(0,o.useRef)(0),t=(0,o.useRef)(),{userSelectionActive:u,elementsSelectable:v,dragging:w}=b9(dY,y),x=()=>{q.setState({userSelectionActive:!1,userSelectionRect:null}),r.current=0,s.current=0},z=a=>{f?.(a),q.getState().resetSelectedElements(),q.setState({nodesSelectionActive:!1})},A=v&&(a||u);return o.default.createElement("div",{className:p(["react-flow__pane",{dragging:w,selection:a}]),onClick:A?void 0:dX(z,n),onContextMenu:dX(a=>{Array.isArray(c)&&c?.includes(2)?a.preventDefault():g?.(a)},n),onWheel:dX(h?a=>h(a):void 0,n),onMouseEnter:A?void 0:i,onMouseDown:A?b=>{let{resetSelectedElements:c,domNode:e}=q.getState();if(t.current=e?.getBoundingClientRect(),!v||!a||0!==b.button||b.target!==n.current||!t.current)return;let{x:f,y:g}=ct(b,t.current);c(),q.setState({userSelectionRect:{width:0,height:0,startX:f,startY:g,x:f,y:g}}),d?.(b)}:void 0,onMouseMove:A?c=>{let{userSelectionRect:d,nodeInternals:e,edges:f,transform:g,onNodesChange:h,onEdgesChange:i,nodeOrigin:j,getNodes:l}=q.getState();if(!a||!t.current||!d)return;q.setState({userSelectionActive:!0,nodesSelectionActive:!1});let m=ct(c,t.current),n=d.startX??0,o=d.startY??0,p={...d,x:m.x<n?m.x:n,y:m.y<o?m.y:o,width:Math.abs(m.x-n),height:Math.abs(m.y-o)},u=l(),v=cV(e,p,g,b===k.Partial,!0,j),w=cW(v,f).map(a=>a.id),x=v.map(a=>a.id);if(r.current!==x.length){r.current=x.length;let a=dW(u,x);a.length&&h?.(a)}if(s.current!==w.length){s.current=w.length;let a=dW(f,w);a.length&&i?.(a)}q.setState({userSelectionRect:p})}:j,onMouseUp:A?a=>{if(0!==a.button)return;let{userSelectionRect:b}=q.getState();!u&&b&&a.target===n.current&&z?.(a),q.setState({nodesSelectionActive:r.current>0}),x(),e?.(a)}:void 0,onMouseLeave:A?a=>{u&&(q.setState({nodesSelectionActive:r.current>0}),e?.(a)),x()}:l,ref:n,style:dJ},m,o.default.createElement(dR,null))});function d$(a,b,c){let d=a;do{if(d?.matches(b))return!0;if(d===c.current)break;d=d.parentElement}while(d)return!1}function d_(a,b,c,d,e=[0,0],f){var g;let h=(g=a.extent||d)&&"parent"!==g?[g[0],[g[1][0]-(a.width||0),g[1][1]-(a.height||0)]]:g,i=h,j=a.parentNode||a.parentId;if("parent"!==a.extent||a.expandParent){if(a.extent&&j&&"parent"!==a.extent){let{x:b,y:d}=cT(c.get(j),e).positionAbsolute;i=[[a.extent[0][0]+b,a.extent[0][1]+d],[a.extent[1][0]+b,a.extent[1][1]+d]]}}else if(j&&a.width&&a.height){let b=c.get(j),{x:d,y:f}=cT(b,e).positionAbsolute;i=b&&co(d)&&co(f)&&co(b.width)&&co(b.height)?[[d+a.width*e[0],f+a.height*e[1]],[d+b.width-a.width+a.width*e[0],f+b.height-a.height+a.height*e[1]]]:i}else f?.("005","Only child nodes can use a parent extent."),i=h;let k={x:0,y:0};j&&(k=cT(c.get(j),e).positionAbsolute);let l=i&&"parent"!==i?ch(b,i):b;return{position:{x:l.x-k.x,y:l.y-k.y},positionAbsolute:l}}function d0({nodeId:a,dragItems:b,nodeInternals:c}){let d=b.map(a=>({...c.get(a.id),position:a.position,positionAbsolute:a.positionAbsolute}));return[a?d.find(b=>b.id===a):d[0],d]}dZ.displayName="Pane";let d1=(a,b,c,d)=>{let e=b.querySelectorAll(a);if(!e||!e.length)return null;let f=Array.from(e),g=b.getBoundingClientRect(),h={x:g.width*d[0],y:g.height*d[1]};return f.map(a=>{let b=a.getBoundingClientRect();return{id:a.getAttribute("data-handleid"),position:a.getAttribute("data-handlepos"),x:(b.left-g.left-h.x)/c,y:(b.top-g.top-h.y)/c,...cf(a)}})};function d2(a,b,c){return void 0===c?c:d=>{let e=b().nodeInternals.get(a);e&&c(d,{...e})}}function d3({id:a,store:b,unselect:c=!1,nodeRef:d}){let e,{addSelectedNodes:f,unselectNodesAndEdges:g,multiSelectionActive:h,nodeInternals:i,onError:j}=b.getState(),k=i.get(a);k?(b.setState({nodesSelectionActive:!1}),k.selected?(c||k.selected&&h)&&(g({nodes:[k],edges:[]}),requestAnimationFrame(()=>d?.current?.blur())):f([a])):j?.("012",(e=a,`Node with id "${e}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`))}function d4(a){return(b,c,d)=>a?.(b,d)}function d5({nodeRef:a,disabled:b=!1,noDragClassName:c,handleSelector:d,nodeId:e,isSelectable:f,selectNodesOnDrag:g}){let h,i=ca(),[j,k]=(0,o.useState)(!1),l=(0,o.useRef)([]),m=(0,o.useRef)({x:null,y:null}),n=(0,o.useRef)(0),p=(0,o.useRef)(null),q=(0,o.useRef)({x:0,y:0}),r=(0,o.useRef)(null),s=(0,o.useRef)(!1),t=(0,o.useRef)(!1),u=(0,o.useRef)(!1),v=(h=ca(),(0,o.useCallback)(({sourceEvent:a})=>{let{transform:b,snapGrid:c,snapToGrid:d}=h.getState(),e=a.touches?a.touches[0].clientX:a.clientX,f=a.touches?a.touches[0].clientY:a.clientY,g={x:(e-b[0])/b[2],y:(f-b[1])/b[2]};return{xSnapped:d?c[0]*Math.round(g.x/c[0]):g.x,ySnapped:d?c[1]*Math.round(g.y/c[1]):g.y,...g}},[]));return(0,o.useEffect)(()=>{if(a?.current){let h=aq(a.current),j=({x:a,y:b})=>{let{nodeInternals:c,onNodeDrag:d,onSelectionDrag:f,updateNodePositions:g,nodeExtent:h,snapGrid:j,snapToGrid:n,nodeOrigin:o,onError:p}=i.getState();m.current={x:a,y:b};let q=!1,s={x:0,y:0,x2:0,y2:0};if(l.current.length>1&&h&&(s=cl(cU(l.current,o))),l.current=l.current.map(d=>{let e={x:a-d.distance.x,y:b-d.distance.y};n&&(e.x=j[0]*Math.round(e.x/j[0]),e.y=j[1]*Math.round(e.y/j[1]));let f=[[h[0][0],h[0][1]],[h[1][0],h[1][1]]];l.current.length>1&&h&&!d.extent&&(f[0][0]=d.positionAbsolute.x-s.x+h[0][0],f[1][0]=d.positionAbsolute.x+(d.width??0)-s.x2+h[1][0],f[0][1]=d.positionAbsolute.y-s.y+h[0][1],f[1][1]=d.positionAbsolute.y+(d.height??0)-s.y2+h[1][1]);let g=d_(d,e,c,f,o,p);return q=q||d.position.x!==g.position.x||d.position.y!==g.position.y,d.position=g.position,d.positionAbsolute=g.positionAbsolute,d}),!q)return;g(l.current,!0,!0),k(!0);let t=e?d:d4(f);if(t&&r.current){let[a,b]=d0({nodeId:e,dragItems:l.current,nodeInternals:c});t(r.current,a,b)}},o=()=>{if(!p.current)return;let[a,b]=cj(q.current,p.current);if(0!==a||0!==b){let{transform:c,panBy:d}=i.getState();m.current.x=(m.current.x??0)-a/c[2],m.current.y=(m.current.y??0)-b/c[2],d({x:a,y:b})&&j(m.current)}n.current=requestAnimationFrame(o)},w=b=>{let{nodeInternals:c,multiSelectionActive:d,nodesDraggable:h,unselectNodesAndEdges:j,onNodeDragStart:k,onSelectionDragStart:n}=i.getState();t.current=!0;let o=e?k:d4(n);g&&f||d||!e||c.get(e)?.selected||j(),e&&f&&g&&d3({id:e,store:i,nodeRef:a});let p=v(b);if(m.current=p,l.current=Array.from(c.values()).filter(a=>(a.selected||a.id===e)&&(!a.parentNode||a.parentId||!function a(b,c){let d=b.parentNode||b.parentId;if(!d)return!1;let e=c.get(d);return!!e&&(!!e.selected||a(e,c))}(a,c))&&(a.draggable||h&&void 0===a.draggable)).map(a=>({id:a.id,position:a.position||{x:0,y:0},positionAbsolute:a.positionAbsolute||{x:0,y:0},distance:{x:p.x-(a.positionAbsolute?.x??0),y:p.y-(a.positionAbsolute?.y??0)},delta:{x:0,y:0},extent:a.extent,parentNode:a.parentNode||a.parentId,parentId:a.parentNode||a.parentId,width:a.width,height:a.height,expandParent:a.expandParent})),o&&l.current){let[a,d]=d0({nodeId:e,dragItems:l.current,nodeInternals:c});o(b.sourceEvent,a,d)}};if(b)h.on(".drag",null);else{let b=(function(){var a,b,c,d,e=b1,f=b2,g=b3,h=b4,i={},j=A("start","drag","end"),k=0,l=0;function m(a){a.on("mousedown.drag",n).filter(h).on("touchstart.drag",q).on("touchmove.drag",r,ar).on("touchend.drag touchcancel.drag",s).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function n(g,h){if(!d&&e.call(this,g,h)){var i=t(this,f.call(this,g,h),g,h,"mouse");i&&(aq(g.view).on("mousemove.drag",o,as).on("mouseup.drag",p,as),av(g.view),at(g),c=!1,a=g.clientX,b=g.clientY,i("start",g))}}function o(d){if(au(d),!c){var e=d.clientX-a,f=d.clientY-b;c=e*e+f*f>l}i.mouse("drag",d)}function p(a){aq(a.view).on("mousemove.drag mouseup.drag",null),aw(a.view,c),au(a),i.mouse("end",a)}function q(a,b){if(e.call(this,a,b)){var c,d,g=a.changedTouches,h=f.call(this,a,b),i=g.length;for(c=0;c<i;++c)(d=t(this,h,a,b,g[c].identifier,g[c]))&&(at(a),d("start",a,g[c]))}}function r(a){var b,c,d=a.changedTouches,e=d.length;for(b=0;b<e;++b)(c=i[d[b].identifier])&&(au(a),c("drag",a,d[b]))}function s(a){var b,c,e=a.changedTouches,f=e.length;for(d&&clearTimeout(d),d=setTimeout(function(){d=null},500),b=0;b<f;++b)(c=i[e[b].identifier])&&(at(a),c("end",a,e[b]))}function t(a,b,c,d,e,f){var h,l,n,o=j.copy(),p=az(f||c,b);if(null!=(n=g.call(a,new b0("beforestart",{sourceEvent:c,target:m,identifier:e,active:k,x:p[0],y:p[1],dx:0,dy:0,dispatch:o}),d)))return h=n.x-p[0]||0,l=n.y-p[1]||0,function c(f,g,j){var q,r=p;switch(f){case"start":i[e]=c,q=k++;break;case"end":delete i[e],--k;case"drag":p=az(j||g,b),q=k}o.call(f,a,new b0(f,{sourceEvent:g,subject:n,target:m,identifier:e,active:q,x:p[0]+h,y:p[1]+l,dx:p[0]-r[0],dy:p[1]-r[1],dispatch:o}),d)}}return m.filter=function(a){return arguments.length?(e="function"==typeof a?a:b_(!!a),m):e},m.container=function(a){return arguments.length?(f="function"==typeof a?a:b_(a),m):f},m.subject=function(a){return arguments.length?(g="function"==typeof a?a:b_(a),m):g},m.touchable=function(a){return arguments.length?(h="function"==typeof a?a:b_(!!a),m):h},m.on=function(){var a=j.on.apply(j,arguments);return a===j?m:a},m.clickDistance=function(a){return arguments.length?(l=(a*=1)*a,m):Math.sqrt(l)},m})().on("start",a=>{let{domNode:b,nodeDragThreshold:c}=i.getState();0===c&&w(a),u.current=!1,m.current=v(a),p.current=b?.getBoundingClientRect()||null,q.current=ct(a.sourceEvent,p.current)}).on("drag",a=>{let b=v(a),{autoPanOnNodeDrag:c,nodeDragThreshold:d}=i.getState();if("touchmove"===a.sourceEvent.type&&a.sourceEvent.touches.length>1&&(u.current=!0),!u.current){if(!s.current&&t.current&&c&&(s.current=!0,o()),!t.current){let c=b.xSnapped-(m?.current?.x??0),e=b.ySnapped-(m?.current?.y??0);Math.sqrt(c*c+e*e)>d&&w(a)}(m.current.x!==b.xSnapped||m.current.y!==b.ySnapped)&&l.current&&t.current&&(r.current=a.sourceEvent,q.current=ct(a.sourceEvent,p.current),j(b))}}).on("end",a=>{if(t.current&&!u.current&&(k(!1),s.current=!1,t.current=!1,cancelAnimationFrame(n.current),l.current)){let{updateNodePositions:b,nodeInternals:c,onNodeDragStop:d,onSelectionDragStop:f}=i.getState(),g=e?d:d4(f);if(b(l.current,!1,!1),g){let[b,d]=d0({nodeId:e,dragItems:l.current,nodeInternals:c});g(a.sourceEvent,b,d)}}}).filter(b=>{let e=b.target;return!b.button&&(!c||!d$(e,`.${c}`,a))&&(!d||d$(e,d,a))});return h.call(b),()=>{h.on(".drag",null)}}}},[a,b,c,d,f,i,e,g,v]),j}function d6(){let a=ca();return(0,o.useCallback)(b=>{let{nodeInternals:c,nodeExtent:d,updateNodePositions:e,getNodes:f,snapToGrid:g,snapGrid:h,onError:i,nodesDraggable:j}=a.getState(),k=f().filter(a=>a.selected&&(a.draggable||j&&void 0===a.draggable)),l=g?h[0]:5,m=g?h[1]:5,n=b.isShiftPressed?4:1,o=b.x*l*n,p=b.y*m*n;e(k.map(a=>{if(a.positionAbsolute){let b={x:a.positionAbsolute.x+o,y:a.positionAbsolute.y+p};g&&(b.x=h[0]*Math.round(b.x/h[0]),b.y=h[1]*Math.round(b.y/h[1]));let{positionAbsolute:e,position:f}=d_(a,b,c,d,void 0,i);a.position=f,a.positionAbsolute=e}return a}),!0,!1)},[])}let d7={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};var d8=a=>{let b=({id:b,type:c,data:d,xPos:e,yPos:f,xPosOrigin:g,yPosOrigin:h,selected:i,onClick:j,onMouseEnter:k,onMouseMove:l,onMouseLeave:m,onContextMenu:n,onDoubleClick:q,style:r,className:s,isDraggable:t,isSelectable:u,isConnectable:v,isFocusable:w,selectNodesOnDrag:x,sourcePosition:y,targetPosition:z,hidden:A,resizeObserver:B,dragHandle:C,zIndex:D,isParent:E,noDragClassName:F,noPanClassName:G,initialized:H,disableKeyboardA11y:I,ariaLabel:J,rfId:K,hasHandleBounds:L})=>{let M=ca(),N=(0,o.useRef)(null),O=(0,o.useRef)(null),P=(0,o.useRef)(y),Q=(0,o.useRef)(z),R=(0,o.useRef)(c),S=u||t||j||k||l||m,T=d6(),U=d2(b,M.getState,k),V=d2(b,M.getState,l),W=d2(b,M.getState,m),X=d2(b,M.getState,n),Y=d2(b,M.getState,q);(0,o.useEffect)(()=>()=>{O.current&&(B?.unobserve(O.current),O.current=null)},[]),(0,o.useEffect)(()=>{if(N.current&&!A){let a=N.current;H&&L&&O.current===a||(O.current&&B?.unobserve(O.current),B?.observe(a),O.current=a)}},[A,H,L]),(0,o.useEffect)(()=>{let a=R.current!==c,d=P.current!==y,e=Q.current!==z;N.current&&(a||d||e)&&(a&&(R.current=c),d&&(P.current=y),e&&(Q.current=z),M.getState().updateNodeDimensions([{id:b,nodeElement:N.current,forceUpdate:!0}]))},[b,c,y,z]);let Z=d5({nodeRef:N,disabled:A||!t,noDragClassName:F,handleSelector:C,nodeId:b,isSelectable:u,selectNodesOnDrag:x});return A?null:o.default.createElement("div",{className:p(["react-flow__node",`react-flow__node-${c}`,{[G]:t},s,{selected:i,selectable:u,parent:E,dragging:Z}]),ref:N,style:{zIndex:D,transform:`translate(${g}px,${h}px)`,pointerEvents:S?"all":"none",visibility:H?"visible":"hidden",...r},"data-id":b,"data-testid":`rf__node-${b}`,onMouseEnter:U,onMouseMove:V,onMouseLeave:W,onContextMenu:X,onClick:a=>{let{nodeDragThreshold:c}=M.getState();if(u&&(!x||!t||c>0)&&d3({id:b,store:M,nodeRef:N}),j){let c=M.getState().nodeInternals.get(b);c&&j(a,{...c})}},onDoubleClick:Y,onKeyDown:w?a=>{cs(a)||!I&&(cq.includes(a.key)&&u?d3({id:b,store:M,unselect:"Escape"===a.key,nodeRef:N}):t&&i&&Object.prototype.hasOwnProperty.call(d7,a.key)&&(M.setState({ariaLiveMessage:`Moved selected node ${a.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~e}, y: ${~~f}`}),T({x:d7[a.key].x,y:d7[a.key].y,isShiftPressed:a.shiftKey})))}:void 0,tabIndex:w?0:void 0,role:w?"button":void 0,"aria-describedby":I?void 0:`${ds}-${K}`,"aria-label":J},o.default.createElement(cO,{value:b},o.default.createElement(a,{id:b,data:d,type:c,xPos:e,yPos:f,selected:i,isConnectable:v,sourcePosition:y,targetPosition:z,dragging:Z,dragHandle:C,zIndex:D})))};return b.displayName="NodeWrapper",(0,o.memo)(b)};let d9=a=>({...cU(a.getNodes().filter(a=>a.selected),a.nodeOrigin),transformString:`translate(${a.transform[0]}px,${a.transform[1]}px) scale(${a.transform[2]})`,userSelectionActive:a.userSelectionActive});var ea=(0,o.memo)(function({onSelectionContextMenu:a,noPanClassName:b,disableKeyboardA11y:c}){let d=ca(),{width:e,height:f,x:g,y:h,transformString:i,userSelectionActive:j}=b9(d9,y),k=d6(),l=(0,o.useRef)(null);if((0,o.useEffect)(()=>{c||l.current?.focus({preventScroll:!0})},[c]),d5({nodeRef:l}),j||!e||!f)return null;let m=a?b=>{a(b,d.getState().getNodes().filter(a=>a.selected))}:void 0;return o.default.createElement("div",{className:p(["react-flow__nodesselection","react-flow__container",b]),style:{transform:i}},o.default.createElement("div",{ref:l,className:"react-flow__nodesselection-rect",onContextMenu:m,tabIndex:c?void 0:-1,onKeyDown:c?void 0:a=>{Object.prototype.hasOwnProperty.call(d7,a.key)&&k({x:d7[a.key].x,y:d7[a.key].y,isShiftPressed:a.shiftKey})},style:{width:e,height:f,top:h,left:g}}))});let eb=a=>a.nodesSelectionActive,ec=({children:a,onPaneClick:b,onPaneMouseEnter:c,onPaneMouseMove:d,onPaneMouseLeave:e,onPaneContextMenu:f,onPaneScroll:g,deleteKeyCode:h,onMove:i,onMoveStart:j,onMoveEnd:k,selectionKeyCode:l,selectionOnDrag:m,selectionMode:n,onSelectionStart:p,onSelectionEnd:q,multiSelectionKeyCode:r,panActivationKeyCode:s,zoomActivationKeyCode:t,elementsSelectable:u,zoomOnScroll:v,zoomOnPinch:w,panOnScroll:x,panOnScrollSpeed:y,panOnScrollMode:z,zoomOnDoubleClick:A,panOnDrag:B,defaultViewport:C,translateExtent:D,minZoom:E,maxZoom:F,preventScrolling:G,onSelectionContextMenu:H,noWheelClassName:I,noPanClassName:J,disableKeyboardA11y:K})=>{let L=b9(eb),M=dx(l),N=dx(s),O=N||B,P=N||x,Q=M||m&&!0!==O;return(({deleteKeyCode:a,multiSelectionKeyCode:b})=>{let c=ca(),{deleteElements:d}=dH(),e=dx(a,dI),f=dx(b);(0,o.useEffect)(()=>{if(e){let{edges:a,getNodes:b}=c.getState();d({nodes:b().filter(a=>a.selected),edges:a.filter(a=>a.selected)}),c.setState({nodesSelectionActive:!1})}},[e]),(0,o.useEffect)(()=>{c.setState({multiSelectionActive:f})},[f])})({deleteKeyCode:h,multiSelectionKeyCode:r}),o.default.createElement(dP,{onMove:i,onMoveStart:j,onMoveEnd:k,onPaneContextMenu:f,elementsSelectable:u,zoomOnScroll:v,zoomOnPinch:w,panOnScroll:P,panOnScrollSpeed:y,panOnScrollMode:z,zoomOnDoubleClick:A,panOnDrag:!M&&O,defaultViewport:C,translateExtent:D,minZoom:E,maxZoom:F,zoomActivationKeyCode:t,preventScrolling:G,noWheelClassName:I,noPanClassName:J},o.default.createElement(dZ,{onSelectionStart:p,onSelectionEnd:q,onPaneClick:b,onPaneMouseEnter:c,onPaneMouseMove:d,onPaneMouseLeave:e,onPaneContextMenu:f,onPaneScroll:g,panOnDrag:O,isSelecting:!!Q,selectionMode:n},a,L&&o.default.createElement(ea,{onSelectionContextMenu:H,noPanClassName:J,disableKeyboardA11y:K})))};ec.displayName="FlowRenderer";var ed=(0,o.memo)(ec);function ee(a){let b={input:d8(a.input||db),default:d8(a.default||c9),output:d8(a.output||dd),group:d8(a.group||de)},c=Object.keys(a).filter(a=>!["input","default","output","group"].includes(a)).reduce((b,c)=>(b[c]=d8(a[c]||c9),b),{});return{...b,...c}}let ef=a=>({nodesDraggable:a.nodesDraggable,nodesConnectable:a.nodesConnectable,nodesFocusable:a.nodesFocusable,elementsSelectable:a.elementsSelectable,updateNodeDimensions:a.updateNodeDimensions,onError:a.onError}),eg=a=>{var b;let{nodesDraggable:c,nodesConnectable:d,nodesFocusable:e,elementsSelectable:f,updateNodeDimensions:g,onError:h}=b9(ef,y),i=(b=a.onlyRenderVisibleElements,b9((0,o.useCallback)(a=>b?cV(a.nodeInternals,{x:0,y:0,width:a.width,height:a.height},a.transform,!0):a.getNodes(),[b]))),j=(0,o.useRef)(),k=(0,o.useMemo)(()=>{if("undefined"==typeof ResizeObserver)return null;let a=new ResizeObserver(a=>{g(a.map(a=>({id:a.target.getAttribute("data-id"),nodeElement:a.target,forceUpdate:!0})))});return j.current=a,a},[]);return(0,o.useEffect)(()=>()=>{j?.current?.disconnect()},[]),o.default.createElement("div",{className:"react-flow__nodes",style:dJ},i.map(b=>{let g,i=b.type||"default";a.nodeTypes[i]||(h?.("003",(g=i,`Node type "${g}" not found. Using fallback type "default".`)),i="default");let j=a.nodeTypes[i]||a.nodeTypes.default,l=!!(b.draggable||c&&void 0===b.draggable),m=!!(b.selectable||f&&void 0===b.selectable),p=!!(b.connectable||d&&void 0===b.connectable),q=!!(b.focusable||e&&void 0===b.focusable),r=a.nodeExtent?ch(b.positionAbsolute,a.nodeExtent):b.positionAbsolute,s=r?.x??0,t=r?.y??0,u=(({x:a,y:b,width:c,height:d,origin:e})=>!c||!d||e[0]<0||e[1]<0||e[0]>1||e[1]>1?{x:a,y:b}:{x:a-c*e[0],y:b-d*e[1]})({x:s,y:t,width:b.width??0,height:b.height??0,origin:a.nodeOrigin});return o.default.createElement(j,{key:b.id,id:b.id,className:b.className,style:b.style,type:i,data:b.data,sourcePosition:b.sourcePosition||n.Bottom,targetPosition:b.targetPosition||n.Top,hidden:b.hidden,xPos:s,yPos:t,xPosOrigin:u.x,yPosOrigin:u.y,selectNodesOnDrag:a.selectNodesOnDrag,onClick:a.onNodeClick,onMouseEnter:a.onNodeMouseEnter,onMouseMove:a.onNodeMouseMove,onMouseLeave:a.onNodeMouseLeave,onContextMenu:a.onNodeContextMenu,onDoubleClick:a.onNodeDoubleClick,selected:!!b.selected,isDraggable:l,isSelectable:m,isConnectable:p,isFocusable:q,resizeObserver:k,dragHandle:b.dragHandle,zIndex:b[cp]?.z??0,isParent:!!b[cp]?.isParent,noDragClassName:a.noDragClassName,noPanClassName:a.noPanClassName,initialized:!!b.width&&!!b.height,rfId:a.rfId,disableKeyboardA11y:a.disableKeyboardA11y,ariaLabel:b.ariaLabel,hasHandleBounds:!!b[cp]?.handleBounds})}))};eg.displayName="NodeRenderer";var eh=(0,o.memo)(eg);let ei="react-flow__edgeupdater",ej=({position:a,centerX:b,centerY:c,radius:d=10,onMouseDown:e,onMouseEnter:f,onMouseOut:g,type:h})=>o.default.createElement("circle",{onMouseDown:e,onMouseEnter:f,onMouseOut:g,className:p([ei,`${ei}-${h}`]),cx:a===n.Left?b-d:a===n.Right?b+d:b,cy:a===n.Top?c-d:a===n.Bottom?c+d:c,r:d,stroke:"transparent",fill:"transparent"}),ek=()=>!0;var el=a=>{let b=({id:b,className:c,type:d,data:e,onClick:f,onEdgeDoubleClick:g,selected:h,animated:i,label:j,labelStyle:k,labelShowBg:l,labelBgStyle:m,labelBgPadding:n,labelBgBorderRadius:q,style:r,source:s,target:t,sourceX:u,sourceY:v,targetX:w,targetY:x,sourcePosition:y,targetPosition:z,elementsSelectable:A,hidden:B,sourceHandleId:C,targetHandleId:D,onContextMenu:E,onMouseEnter:F,onMouseMove:G,onMouseLeave:H,reconnectRadius:I,onReconnect:J,onReconnectStart:K,onReconnectEnd:L,markerEnd:M,markerStart:N,rfId:O,ariaLabel:P,isFocusable:Q,isReconnectable:R,pathOptions:S,interactionWidth:T,disableKeyboardA11y:U})=>{let V=(0,o.useRef)(null),[W,X]=(0,o.useState)(!1),[Y,Z]=(0,o.useState)(!1),$=ca(),_=(0,o.useMemo)(()=>`url('#${cP(N,O)}')`,[N,O]),aa=(0,o.useMemo)(()=>`url('#${cP(M,O)}')`,[M,O]);if(B)return null;let ab=cw(b,$.getState,g),ac=cw(b,$.getState,E),ad=cw(b,$.getState,F),ae=cw(b,$.getState,G),af=cw(b,$.getState,H),ag=(a,c)=>{if(0!==a.button)return;let{edges:d,isValidConnection:e}=$.getState(),f=c?t:s,g=(c?D:C)||null,h=c?"target":"source",i=d.find(a=>a.id===b);Z(!0),K?.(a,i,h),c3({event:a,handleId:g,nodeId:f,onConnect:a=>J?.(i,a),isTarget:c,getState:$.getState,setState:$.setState,isValidConnection:e||ek,edgeUpdaterType:h,onReconnectEnd:a=>{Z(!1),L?.(a,i,h)}})},ah=()=>X(!0),ai=()=>X(!1);return o.default.createElement("g",{className:p(["react-flow__edge",`react-flow__edge-${d}`,c,{selected:h,animated:i,inactive:!A&&!f,updating:W}]),onClick:a=>{let{edges:c,addSelectedEdges:d,unselectNodesAndEdges:e,multiSelectionActive:g}=$.getState(),h=c.find(a=>a.id===b);h&&(A&&($.setState({nodesSelectionActive:!1}),h.selected&&g?(e({nodes:[],edges:[h]}),V.current?.blur()):d([b])),f&&f(a,h))},onDoubleClick:ab,onContextMenu:ac,onMouseEnter:ad,onMouseMove:ae,onMouseLeave:af,onKeyDown:Q?a=>{if(!U&&cq.includes(a.key)&&A){let{unselectNodesAndEdges:c,addSelectedEdges:d,edges:e}=$.getState();"Escape"===a.key?(V.current?.blur(),c({edges:[e.find(a=>a.id===b)]})):d([b])}}:void 0,tabIndex:Q?0:void 0,role:Q?"button":"img","data-testid":`rf__edge-${b}`,"aria-label":null===P?void 0:P||`Edge from ${s} to ${t}`,"aria-describedby":Q?`${dt}-${O}`:void 0,ref:V},!Y&&o.default.createElement(a,{id:b,source:s,target:t,selected:h,animated:i,label:j,labelStyle:k,labelShowBg:l,labelBgStyle:m,labelBgPadding:n,labelBgBorderRadius:q,data:e,style:r,sourceX:u,sourceY:v,targetX:w,targetY:x,sourcePosition:y,targetPosition:z,sourceHandleId:C,targetHandleId:D,markerStart:_,markerEnd:aa,pathOptions:S,interactionWidth:T}),R&&o.default.createElement(o.default.Fragment,null,("source"===R||!0===R)&&o.default.createElement(ej,{position:y,centerX:u,centerY:v,radius:I,onMouseDown:a=>ag(a,!0),onMouseEnter:ah,onMouseOut:ai,type:"source"}),("target"===R||!0===R)&&o.default.createElement(ej,{position:z,centerX:w,centerY:x,radius:I,onMouseDown:a=>ag(a,!1),onMouseEnter:ah,onMouseOut:ai,type:"target"})))};return b.displayName="EdgeWrapper",(0,o.memo)(b)};function em(a){let b={default:el(a.default||cM),straight:el(a.bezier||cI),step:el(a.step||cH),smoothstep:el(a.step||cG),simplebezier:el(a.simplebezier||cB)},c=Object.keys(a).filter(a=>!["default","bezier"].includes(a)).reduce((b,c)=>(b[c]=el(a[c]||cM),b),{});return{...b,...c}}function en(a,b,c=null){let d=(c?.x||0)+b.x,e=(c?.y||0)+b.y,f=c?.width||b.width,g=c?.height||b.height;switch(a){case n.Top:return{x:d+f/2,y:e};case n.Right:return{x:d+f,y:e+g/2};case n.Bottom:return{x:d+f/2,y:e+g};case n.Left:return{x:d,y:e+g/2}}}function eo(a,b){return a?1!==a.length&&b?b&&a.find(a=>a.id===b)||null:a[0]:null}function ep(a){let b=a?.[cp]?.handleBounds||null,c=b&&a?.width&&a?.height&&void 0!==a?.positionAbsolute?.x&&void 0!==a?.positionAbsolute?.y;return[{x:a?.positionAbsolute?.x||0,y:a?.positionAbsolute?.y||0,width:a?.width||0,height:a?.height||0},b,!!c]}let eq=[{level:0,isMaxLevel:!0,edges:[]}],er={[m.Arrow]:({color:a="none",strokeWidth:b=1})=>o.default.createElement("polyline",{style:{stroke:a,strokeWidth:b},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"}),[m.ArrowClosed]:({color:a="none",strokeWidth:b=1})=>o.default.createElement("polyline",{style:{stroke:a,fill:a,strokeWidth:b},strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"})},es=({id:a,type:b,color:c,width:d=12.5,height:e=12.5,markerUnits:f="strokeWidth",strokeWidth:g,orient:h="auto-start-reverse"})=>{let i,j=(i=ca(),(0,o.useMemo)(()=>{let a;return Object.prototype.hasOwnProperty.call(er,b)?er[b]:(i.getState().onError?.("009",(a=b,`Marker type "${a}" doesn't exist.`)),null)},[b]));return j?o.default.createElement("marker",{className:"react-flow__arrowhead",id:a,markerWidth:`${d}`,markerHeight:`${e}`,viewBox:"-10 -10 20 20",markerUnits:f,orient:h,refX:"0",refY:"0"},o.default.createElement(j,{color:c,strokeWidth:g})):null},et=({defaultColor:a,rfId:b})=>{let c=b9((0,o.useCallback)((({defaultColor:a,rfId:b})=>c=>{let d=[];return c.edges.reduce((c,e)=>([e.markerStart,e.markerEnd].forEach(e=>{if(e&&"object"==typeof e){let f=cP(e,b);d.includes(f)||(c.push({id:f,color:e.color||a,...e}),d.push(f))}}),c),[]).sort((a,b)=>a.id.localeCompare(b.id))})({defaultColor:a,rfId:b}),[a,b]),(a,b)=>!(a.length!==b.length||a.some((a,c)=>a.id!==b[c].id)));return o.default.createElement("defs",null,c.map(a=>o.default.createElement(es,{id:a.id,key:a.id,type:a.type,color:a.color,width:a.width,height:a.height,markerUnits:a.markerUnits,strokeWidth:a.strokeWidth,orient:a.orient})))};et.displayName="MarkerDefinitions";var eu=(0,o.memo)(et);let ev=a=>({nodesConnectable:a.nodesConnectable,edgesFocusable:a.edgesFocusable,edgesUpdatable:a.edgesUpdatable,elementsSelectable:a.elementsSelectable,width:a.width,height:a.height,connectionMode:a.connectionMode,nodeInternals:a.nodeInternals,onError:a.onError}),ew=({defaultMarkerColor:a,onlyRenderVisibleElements:b,elevateEdgesOnSelect:c,rfId:d,edgeTypes:e,noPanClassName:f,onEdgeContextMenu:g,onEdgeMouseEnter:h,onEdgeMouseMove:j,onEdgeMouseLeave:k,onEdgeClick:l,onEdgeDoubleClick:m,onReconnect:q,onReconnectStart:r,onReconnectEnd:s,reconnectRadius:t,children:u,disableKeyboardA11y:v})=>{let{edgesFocusable:w,edgesUpdatable:x,elementsSelectable:z,width:A,height:B,connectionMode:C,nodeInternals:D,onError:E}=b9(ev,y),F=function(a,b,c=!1){let d=-1,e=Object.entries(a.reduce((a,e)=>{let f=co(e.zIndex),g=f?e.zIndex:0;if(c){let a=b.get(e.target),c=b.get(e.source),d=e.selected||a?.selected||c?.selected,h=Math.max(c?.[cp]?.z||0,a?.[cp]?.z||0,1e3);g=(f?e.zIndex:0)+(d?h:0)}return a[g]?a[g].push(e):a[g]=[e],d=g>d?g:d,a},{})).map(([a,b])=>{let c=+a;return{edges:b,level:c,isMaxLevel:c===d}});return 0===e.length?eq:e}(b9((0,o.useCallback)(a=>b?a.edges.filter(b=>{let c=D.get(b.source),d=D.get(b.target);return c?.width&&c?.height&&d?.width&&d?.height&&function({sourcePos:a,targetPos:b,sourceWidth:c,sourceHeight:d,targetWidth:e,targetHeight:f,width:g,height:h,transform:i}){let j={x:Math.min(a.x,b.x),y:Math.min(a.y,b.y),x2:Math.max(a.x+c,b.x+e),y2:Math.max(a.y+d,b.y+f)};j.x===j.x2&&(j.x2+=1),j.y===j.y2&&(j.y2+=1);let k=cl({x:(0-i[0])/i[2],y:(0-i[1])/i[2],width:g/i[2],height:h/i[2]});return Math.ceil(Math.max(0,Math.min(k.x2,j.x2)-Math.max(k.x,j.x))*Math.max(0,Math.min(k.y2,j.y2)-Math.max(k.y,j.y)))>0}({sourcePos:c.positionAbsolute||{x:0,y:0},targetPos:d.positionAbsolute||{x:0,y:0},sourceWidth:c.width,sourceHeight:c.height,targetWidth:d.width,targetHeight:d.height,width:a.width,height:a.height,transform:a.transform})}):a.edges,[b,D])),D,c);return A?o.default.createElement(o.default.Fragment,null,F.map(({level:b,edges:c,isMaxLevel:u})=>o.default.createElement("svg",{key:b,style:{zIndex:b},width:A,height:B,className:"react-flow__edges react-flow__container"},u&&o.default.createElement(eu,{defaultColor:a,rfId:d}),o.default.createElement("g",null,c.map(a=>{let b,c,u,[y,A,B]=ep(D.get(a.source)),[F,G,H]=ep(D.get(a.target));if(!B||!H)return null;let I=a.type||"default";e[I]||(E?.("011",(b=I,`Edge type "${b}" not found. Using fallback type "default".`)),I="default");let J=e[I]||e.default,K=C===i.Strict?G.target:(G.target??[]).concat(G.source??[]),L=eo(A.source,a.sourceHandle),M=eo(K,a.targetHandle),N=L?.position||n.Bottom,O=M?.position||n.Top,P=!!(a.focusable||w&&void 0===a.focusable),Q=a.reconnectable||a.updatable;if(!L||!M){let b,c;return E?.("008",(b=L,c=a,`Couldn't create edge for ${!b?"source":"target"} handle id: "${!b?c.sourceHandle:c.targetHandle}", edge id: ${c.id}.`)),null}let{sourceX:R,sourceY:S,targetX:T,targetY:U}=(c=en(N,y,L),u=en(O,F,M),{sourceX:c.x,sourceY:c.y,targetX:u.x,targetY:u.y});return o.default.createElement(J,{key:a.id,id:a.id,className:p([a.className,f]),type:I,data:a.data,selected:!!a.selected,animated:!!a.animated,hidden:!!a.hidden,label:a.label,labelStyle:a.labelStyle,labelShowBg:a.labelShowBg,labelBgStyle:a.labelBgStyle,labelBgPadding:a.labelBgPadding,labelBgBorderRadius:a.labelBgBorderRadius,style:a.style,source:a.source,target:a.target,sourceHandleId:a.sourceHandle,targetHandleId:a.targetHandle,markerEnd:a.markerEnd,markerStart:a.markerStart,sourceX:R,sourceY:S,targetX:T,targetY:U,sourcePosition:N,targetPosition:O,elementsSelectable:z,onContextMenu:g,onMouseEnter:h,onMouseMove:j,onMouseLeave:k,onClick:l,onEdgeDoubleClick:m,onReconnect:q,onReconnectStart:r,onReconnectEnd:s,reconnectRadius:t,rfId:d,ariaLabel:a.ariaLabel,isFocusable:P,isReconnectable:void 0!==q&&(Q||x&&void 0===Q),pathOptions:"pathOptions"in a?a.pathOptions:void 0,interactionWidth:a.interactionWidth,disableKeyboardA11y:v})})))),u):null};ew.displayName="EdgeRenderer";var ex=(0,o.memo)(ew);let ey=a=>`translate(${a.transform[0]}px,${a.transform[1]}px) scale(${a.transform[2]})`;function ez({children:a}){let b=b9(ey);return o.default.createElement("div",{className:"react-flow__viewport react-flow__container",style:{transform:b}},a)}let eA={[n.Left]:n.Right,[n.Right]:n.Left,[n.Top]:n.Bottom,[n.Bottom]:n.Top},eB=({nodeId:a,handleType:b,style:c,type:d=l.Bezier,CustomComponent:e,connectionStatus:f})=>{let{fromNode:g,handleId:h,toX:j,toY:k,connectionMode:m}=b9((0,o.useCallback)(b=>({fromNode:b.nodeInternals.get(a),handleId:b.connectionHandleId,toX:(b.connectionPosition.x-b.transform[0])/b.transform[2],toY:(b.connectionPosition.y-b.transform[1])/b.transform[2],connectionMode:b.connectionMode}),[a]),y),n=g?.[cp]?.handleBounds,p=n?.[b];if(m===i.Loose&&(p=p||n?.["source"===b?"target":"source"]),!g||!p)return null;let q=h?p.find(a=>a.id===h):p[0],r=q?q.x+q.width/2:(g.width??0)/2,s=q?q.y+q.height/2:g.height??0,t=(g.positionAbsolute?.x??0)+r,u=(g.positionAbsolute?.y??0)+s,v=q?.position,w=v?eA[v]:null;if(!v||!w)return null;if(e)return o.default.createElement(e,{connectionLineType:d,connectionLineStyle:c,fromNode:g,fromHandle:q,fromX:t,fromY:u,toX:j,toY:k,fromPosition:v,toPosition:w,connectionStatus:f});let x="",z={sourceX:t,sourceY:u,sourcePosition:v,targetX:j,targetY:k,targetPosition:w};return d===l.Bezier?[x]=cL(z):d===l.Step?[x]=cF({...z,borderRadius:0}):d===l.SmoothStep?[x]=cF(z):d===l.SimpleBezier?[x]=cA(z):x=`M${t},${u} ${j},${k}`,o.default.createElement("path",{d:x,fill:"none",className:"react-flow__connection-path",style:c})};eB.displayName="ConnectionLine";let eC=a=>({nodeId:a.connectionNodeId,handleType:a.connectionHandleType,nodesConnectable:a.nodesConnectable,connectionStatus:a.connectionStatus,width:a.width,height:a.height});function eD({containerStyle:a,style:b,type:c,component:d}){let{nodeId:e,handleType:f,nodesConnectable:g,width:h,height:i,connectionStatus:j}=b9(eC,y);return e&&f&&h&&g?o.default.createElement("svg",{style:a,width:h,height:i,className:"react-flow__edges react-flow__connectionline react-flow__container"},o.default.createElement("g",{className:p(["react-flow__connection",j])},o.default.createElement(eB,{nodeId:e,handleType:f,style:b,type:c,CustomComponent:d,connectionStatus:j}))):null}function eE(a,b){return(0,o.useRef)(null),ca(),(0,o.useMemo)(()=>b(a),[a])}let eF=({nodeTypes:a,edgeTypes:b,onMove:c,onMoveStart:d,onMoveEnd:e,onInit:f,onNodeClick:g,onEdgeClick:h,onNodeDoubleClick:i,onEdgeDoubleClick:j,onNodeMouseEnter:k,onNodeMouseMove:l,onNodeMouseLeave:m,onNodeContextMenu:n,onSelectionContextMenu:p,onSelectionStart:q,onSelectionEnd:r,connectionLineType:s,connectionLineStyle:t,connectionLineComponent:u,connectionLineContainerStyle:v,selectionKeyCode:w,selectionOnDrag:x,selectionMode:y,multiSelectionKeyCode:z,panActivationKeyCode:A,zoomActivationKeyCode:B,deleteKeyCode:C,onlyRenderVisibleElements:D,elementsSelectable:E,selectNodesOnDrag:F,defaultViewport:G,translateExtent:H,minZoom:I,maxZoom:J,preventScrolling:K,defaultMarkerColor:L,zoomOnScroll:M,zoomOnPinch:N,panOnScroll:O,panOnScrollSpeed:P,panOnScrollMode:Q,zoomOnDoubleClick:R,panOnDrag:S,onPaneClick:T,onPaneMouseEnter:U,onPaneMouseMove:V,onPaneMouseLeave:W,onPaneScroll:X,onPaneContextMenu:Y,onEdgeContextMenu:Z,onEdgeMouseEnter:$,onEdgeMouseMove:_,onEdgeMouseLeave:aa,onReconnect:ab,onReconnectStart:ac,onReconnectEnd:ad,reconnectRadius:ae,noDragClassName:af,noWheelClassName:ag,noPanClassName:ah,elevateEdgesOnSelect:ai,disableKeyboardA11y:aj,nodeOrigin:ak,nodeExtent:al,rfId:am})=>{let an,ao,ap=eE(a,ee),aq=eE(b,em);return an=dH(),ao=(0,o.useRef)(!1),(0,o.useEffect)(()=>{!ao.current&&an.viewportInitialized&&f&&(setTimeout(()=>f(an),1),ao.current=!0)},[f,an.viewportInitialized]),o.default.createElement(ed,{onPaneClick:T,onPaneMouseEnter:U,onPaneMouseMove:V,onPaneMouseLeave:W,onPaneContextMenu:Y,onPaneScroll:X,deleteKeyCode:C,selectionKeyCode:w,selectionOnDrag:x,selectionMode:y,onSelectionStart:q,onSelectionEnd:r,multiSelectionKeyCode:z,panActivationKeyCode:A,zoomActivationKeyCode:B,elementsSelectable:E,onMove:c,onMoveStart:d,onMoveEnd:e,zoomOnScroll:M,zoomOnPinch:N,zoomOnDoubleClick:R,panOnScroll:O,panOnScrollSpeed:P,panOnScrollMode:Q,panOnDrag:S,defaultViewport:G,translateExtent:H,minZoom:I,maxZoom:J,onSelectionContextMenu:p,preventScrolling:K,noDragClassName:af,noWheelClassName:ag,noPanClassName:ah,disableKeyboardA11y:aj},o.default.createElement(ez,null,o.default.createElement(ex,{edgeTypes:aq,onEdgeClick:h,onEdgeDoubleClick:j,onlyRenderVisibleElements:D,onEdgeContextMenu:Z,onEdgeMouseEnter:$,onEdgeMouseMove:_,onEdgeMouseLeave:aa,onReconnect:ab,onReconnectStart:ac,onReconnectEnd:ad,reconnectRadius:ae,defaultMarkerColor:L,noPanClassName:ah,elevateEdgesOnSelect:!!ai,disableKeyboardA11y:aj,rfId:am},o.default.createElement(eD,{style:t,type:s,component:u,containerStyle:v})),o.default.createElement("div",{className:"react-flow__edgelabel-renderer"}),o.default.createElement(eh,{nodeTypes:ap,onNodeClick:g,onNodeDoubleClick:i,onNodeMouseEnter:k,onNodeMouseMove:l,onNodeMouseLeave:m,onNodeContextMenu:n,selectNodesOnDrag:F,onlyRenderVisibleElements:D,noPanClassName:ah,noDragClassName:af,disableKeyboardA11y:aj,nodeOrigin:ak,nodeExtent:al,rfId:am})))};eF.displayName="GraphView";var eG=(0,o.memo)(eF);let eH=[[-1/0,-1/0],[1/0,1/0]],eI={rfId:"1",width:0,height:0,transform:[0,0,1],nodeInternals:new Map,edges:[],onNodesChange:null,onEdgesChange:null,hasDefaultNodes:!1,hasDefaultEdges:!1,d3Zoom:null,d3Selection:null,d3ZoomHandler:void 0,minZoom:.5,maxZoom:2,translateExtent:eH,nodeExtent:eH,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionNodeId:null,connectionHandleId:null,connectionHandleType:"source",connectionPosition:{x:0,y:0},connectionStatus:null,connectionMode:i.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:[0,0],nodeDragThreshold:0,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesUpdatable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,fitViewOnInit:!1,fitViewOnInitDone:!1,fitViewOnInitOptions:void 0,onSelectionChange:[],multiSelectionActive:!1,connectionStartHandle:null,connectionEndHandle:null,connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,connectionRadius:20,onError:cr,isValidConnection:void 0},eJ=({children:a})=>{let b,c,d=(0,o.useRef)(null);return d.current||(b=(a,b)=>({...eI,setNodes:c=>{let{nodeInternals:d,nodeOrigin:e,elevateNodesOnSelect:f}=b();a({nodeInternals:dB(c,d,e,f)})},getNodes:()=>Array.from(b().nodeInternals.values()),setEdges:c=>{let{defaultEdgeOptions:d={}}=b();a({edges:c.map(a=>({...d,...a}))})},setDefaultNodesAndEdges:(c,d)=>{let e=void 0!==c,f=void 0!==d;a({nodeInternals:e?dB(c,new Map,b().nodeOrigin,b().elevateNodesOnSelect):new Map,edges:f?d:[],hasDefaultNodes:e,hasDefaultEdges:f})},updateNodeDimensions:c=>{let{onNodesChange:d,nodeInternals:e,fitViewOnInit:f,fitViewOnInitDone:g,fitViewOnInitOptions:h,domNode:i,nodeOrigin:j}=b(),k=i?.querySelector(".react-flow__viewport");if(!k)return;let l=window.getComputedStyle(k),{m22:m}=new window.DOMMatrixReadOnly(l.transform),n=c.reduce((a,b)=>{let c=e.get(b.id);if(c?.hidden)e.set(c.id,{...c,[cp]:{...c[cp],handleBounds:void 0}});else if(c){let d=cf(b.nodeElement);d.width&&d.height&&(c.width!==d.width||c.height!==d.height||b.forceUpdate)&&(e.set(c.id,{...c,[cp]:{...c[cp],handleBounds:{source:d1(".source",b.nodeElement,m,j),target:d1(".target",b.nodeElement,m,j)}},...d}),a.push({id:c.id,type:"dimensions",dimensions:d}))}return a},[]);dA(e,j);let o=g||f&&!g&&dC(b,{initial:!0,...h});a({nodeInternals:new Map(e),fitViewOnInitDone:o}),n?.length>0&&d?.(n)},updateNodePositions:(a,c=!0,d=!1)=>{let{triggerNodeChanges:e}=b();e(a.map(a=>{let b={id:a.id,type:"position",dragging:d};return c&&(b.positionAbsolute=a.positionAbsolute,b.position=a.position),b}))},triggerNodeChanges:c=>{let{onNodesChange:d,nodeInternals:e,hasDefaultNodes:f,nodeOrigin:g,getNodes:h,elevateNodesOnSelect:i}=b();c?.length&&(f&&a({nodeInternals:dB(dU(c,h()),e,g,i)}),d?.(c))},addSelectedNodes:c=>{let d,{multiSelectionActive:e,edges:f,getNodes:g}=b(),h=null;e?d=c.map(a=>dV(a,!0)):(d=dW(g(),c),h=dW(f,[])),dD({changedNodes:d,changedEdges:h,get:b,set:a})},addSelectedEdges:c=>{let d,{multiSelectionActive:e,edges:f,getNodes:g}=b(),h=null;e?d=c.map(a=>dV(a,!0)):(d=dW(f,c),h=dW(g(),[])),dD({changedNodes:h,changedEdges:d,get:b,set:a})},unselectNodesAndEdges:({nodes:c,edges:d}={})=>{let{edges:e,getNodes:f}=b();dD({changedNodes:(c||f()).map(a=>(a.selected=!1,dV(a.id,!1))),changedEdges:(d||e).map(a=>dV(a.id,!1)),get:b,set:a})},setMinZoom:c=>{let{d3Zoom:d,maxZoom:e}=b();d?.scaleExtent([c,e]),a({minZoom:c})},setMaxZoom:c=>{let{d3Zoom:d,minZoom:e}=b();d?.scaleExtent([e,c]),a({maxZoom:c})},setTranslateExtent:c=>{b().d3Zoom?.translateExtent(c),a({translateExtent:c})},resetSelectedElements:()=>{let{edges:c,getNodes:d}=b();dD({changedNodes:d().filter(a=>a.selected).map(a=>dV(a.id,!1)),changedEdges:c.filter(a=>a.selected).map(a=>dV(a.id,!1)),get:b,set:a})},setNodeExtent:c=>{let{nodeInternals:d}=b();d.forEach(a=>{a.positionAbsolute=ch(a.position,c)}),a({nodeExtent:c,nodeInternals:new Map(d)})},panBy:a=>{let{transform:c,width:d,height:e,d3Zoom:f,d3Selection:g,translateExtent:h}=b();if(!f||!g||!a.x&&!a.y)return!1;let i=bS.translate(c[0]+a.x,c[1]+a.y).scale(c[2]),j=f?.constrain()(i,[[0,0],[d,e]],h);return f.transform(g,j),c[0]!==j.x||c[1]!==j.y||c[2]!==j.k},cancelConnection:()=>a({connectionNodeId:eI.connectionNodeId,connectionHandleId:eI.connectionHandleId,connectionHandleType:eI.connectionHandleType,connectionStatus:eI.connectionStatus,connectionStartHandle:eI.connectionStartHandle,connectionEndHandle:eI.connectionEndHandle}),reset:()=>a({...eI})}),c=Object.is,d.current=b?x(b,c):x),o.default.createElement(b7,{value:d.current},a)};eJ.displayName="ReactFlowProvider";let eK=({children:a})=>(0,o.useContext)(b6)?o.default.createElement(o.default.Fragment,null,a):o.default.createElement(eJ,null,a);eK.displayName="ReactFlowWrapper";let eL={input:db,default:c9,output:dd,group:de},eM={default:cM,straight:cI,step:cH,smoothstep:cG,simplebezier:cB},eN=[0,0],eO=[15,15],eP={x:0,y:0,zoom:1},eQ={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0},eR=(0,o.forwardRef)(({nodes:a,edges:b,defaultNodes:c,defaultEdges:d,className:e,nodeTypes:f=eL,edgeTypes:g=eM,onNodeClick:h,onEdgeClick:m,onInit:n,onMove:q,onMoveStart:r,onMoveEnd:s,onConnect:t,onConnectStart:u,onConnectEnd:v,onClickConnectStart:w,onClickConnectEnd:x,onNodeMouseEnter:y,onNodeMouseMove:z,onNodeMouseLeave:A,onNodeContextMenu:B,onNodeDoubleClick:C,onNodeDragStart:D,onNodeDrag:E,onNodeDragStop:F,onNodesDelete:G,onEdgesDelete:H,onSelectionChange:I,onSelectionDragStart:J,onSelectionDrag:K,onSelectionDragStop:L,onSelectionContextMenu:M,onSelectionStart:N,onSelectionEnd:O,connectionMode:P=i.Strict,connectionLineType:Q=l.Bezier,connectionLineStyle:R,connectionLineComponent:S,connectionLineContainerStyle:T,deleteKeyCode:U="Backspace",selectionKeyCode:V="Shift",selectionOnDrag:W=!1,selectionMode:X=k.Full,panActivationKeyCode:Y="Space",multiSelectionKeyCode:Z=cu()?"Meta":"Control",zoomActivationKeyCode:$=cu()?"Meta":"Control",snapToGrid:_=!1,snapGrid:aa=eO,onlyRenderVisibleElements:ab=!1,selectNodesOnDrag:ac=!0,nodesDraggable:ad,nodesConnectable:ae,nodesFocusable:af,nodeOrigin:ag=eN,edgesFocusable:ah,edgesUpdatable:ai,elementsSelectable:aj,defaultViewport:ak=eP,minZoom:al=.5,maxZoom:am=2,translateExtent:an=eH,preventScrolling:ao=!0,nodeExtent:ap,defaultMarkerColor:aq="#b1b1b7",zoomOnScroll:ar=!0,zoomOnPinch:as=!0,panOnScroll:at=!1,panOnScrollSpeed:au=.5,panOnScrollMode:av=j.Free,zoomOnDoubleClick:aw=!0,panOnDrag:ax=!0,onPaneClick:ay,onPaneMouseEnter:az,onPaneMouseMove:aA,onPaneMouseLeave:aB,onPaneScroll:aC,onPaneContextMenu:aD,children:aE,onEdgeContextMenu:aF,onEdgeDoubleClick:aG,onEdgeMouseEnter:aH,onEdgeMouseMove:aI,onEdgeMouseLeave:aJ,onEdgeUpdate:aK,onEdgeUpdateStart:aL,onEdgeUpdateEnd:aM,onReconnect:aN,onReconnectStart:aO,onReconnectEnd:aP,reconnectRadius:aQ=10,edgeUpdaterRadius:aR=10,onNodesChange:aS,onEdgesChange:aT,noDragClassName:aU="nodrag",noWheelClassName:aV="nowheel",noPanClassName:aW="nopan",fitView:aX=!1,fitViewOptions:aY,connectOnClick:aZ=!0,attributionPosition:a$,proOptions:a_,defaultEdgeOptions:a0,elevateNodesOnSelect:a1=!0,elevateEdgesOnSelect:a2=!1,disableKeyboardA11y:a3=!1,autoPanOnConnect:a4=!0,autoPanOnNodeDrag:a5=!0,connectionRadius:a6=20,isValidConnection:a7,onError:a8,style:a9,id:ba,nodeDragThreshold:bb,...bc},bd)=>{let be=ba||"1";return o.default.createElement("div",{...bc,style:{...a9,...eQ},ref:bd,className:p(["react-flow",e]),"data-testid":"rf__wrapper",id:ba},o.default.createElement(eK,null,o.default.createElement(eG,{onInit:n,onMove:q,onMoveStart:r,onMoveEnd:s,onNodeClick:h,onEdgeClick:m,onNodeMouseEnter:y,onNodeMouseMove:z,onNodeMouseLeave:A,onNodeContextMenu:B,onNodeDoubleClick:C,nodeTypes:f,edgeTypes:g,connectionLineType:Q,connectionLineStyle:R,connectionLineComponent:S,connectionLineContainerStyle:T,selectionKeyCode:V,selectionOnDrag:W,selectionMode:X,deleteKeyCode:U,multiSelectionKeyCode:Z,panActivationKeyCode:Y,zoomActivationKeyCode:$,onlyRenderVisibleElements:ab,selectNodesOnDrag:ac,defaultViewport:ak,translateExtent:an,minZoom:al,maxZoom:am,preventScrolling:ao,zoomOnScroll:ar,zoomOnPinch:as,zoomOnDoubleClick:aw,panOnScroll:at,panOnScrollSpeed:au,panOnScrollMode:av,panOnDrag:ax,onPaneClick:ay,onPaneMouseEnter:az,onPaneMouseMove:aA,onPaneMouseLeave:aB,onPaneScroll:aC,onPaneContextMenu:aD,onSelectionContextMenu:M,onSelectionStart:N,onSelectionEnd:O,onEdgeContextMenu:aF,onEdgeDoubleClick:aG,onEdgeMouseEnter:aH,onEdgeMouseMove:aI,onEdgeMouseLeave:aJ,onReconnect:aN??aK,onReconnectStart:aO??aL,onReconnectEnd:aP??aM,reconnectRadius:aQ??aR,defaultMarkerColor:aq,noDragClassName:aU,noWheelClassName:aV,noPanClassName:aW,elevateEdgesOnSelect:a2,rfId:be,disableKeyboardA11y:a3,nodeOrigin:ag,nodeExtent:ap}),o.default.createElement(dp,{nodes:a,edges:b,defaultNodes:c,defaultEdges:d,onConnect:t,onConnectStart:u,onConnectEnd:v,onClickConnectStart:w,onClickConnectEnd:x,nodesDraggable:ad,nodesConnectable:ae,nodesFocusable:af,edgesFocusable:ah,edgesUpdatable:ai,elementsSelectable:aj,elevateNodesOnSelect:a1,minZoom:al,maxZoom:am,nodeExtent:ap,onNodesChange:aS,onEdgesChange:aT,snapToGrid:_,snapGrid:aa,connectionMode:P,translateExtent:an,connectOnClick:aZ,defaultEdgeOptions:a0,fitView:aX,fitViewOptions:aY,onNodesDelete:G,onEdgesDelete:H,onNodeDragStart:D,onNodeDrag:E,onNodeDragStop:F,onSelectionDrag:K,onSelectionDragStart:J,onSelectionDragStop:L,noPanClassName:aW,nodeOrigin:ag,rfId:be,autoPanOnConnect:a4,autoPanOnNodeDrag:a5,onError:a8,connectionRadius:a6,isValidConnection:a7,nodeDragThreshold:bb}),o.default.createElement(dk,{onSelectionChange:I}),aE,o.default.createElement(cd,{proOptions:a_,position:a$}),o.default.createElement(dw,{rfId:be,disableKeyboardA11y:a3})))});eR.displayName="ReactFlow";let eS=a=>a.domNode?.querySelector(".react-flow__edgelabel-renderer");function eT({children:a}){let b=b9(eS);return b?(0,b5.createPortal)(a,b):null}let eU=a=>a.edges;function eV(){return b9(eU,y)}function eW(a){return b=>{let[c,d]=(0,o.useState)(b),e=(0,o.useCallback)(b=>d(c=>a(b,c)),[]);return[c,d,e]}}let eX=eW(dU),eY=eW(function(a,b){return dT(a,b)});a.s(["EdgeLabelRenderer",()=>eT,"Handle",()=>c7,"MarkerType",()=>m,"Panel",()=>cc,"Position",()=>n,"ReactFlow",()=>eR,"ReactFlowProvider",()=>eJ,"SelectionMode",()=>k,"addEdge",()=>cQ,"getBezierPath",()=>cL,"useEdges",()=>eV,"useEdgesState",()=>eY,"useNodesState",()=>eX,"useReactFlow",()=>dH,"useStore",()=>b9],12998);var eZ=a.i(70279),e$=a.i(70246),e_=a.i(42447);function e0({initialNodes:a=[],initialEdges:b=[],workflowId:c}){let[d,e,f]=eX(a),[g,h,i]=eY(b),{fitView:j,zoomIn:k,zoomOut:l,getNodes:n}=dH(),{toast:p}=(0,e$.useToast)(),{data:q=[]}=(0,eZ.useNodeTypes)(),[r,s]=(0,o.useState)({items:[],index:-1}),t=(0,o.useRef)(!1),[u,v]=(0,o.useState)(null),w=(0,o.useCallback)((a,b)=>{if(t.current){t.current=!1;return}let c=JSON.parse(JSON.stringify({nodes:a,edges:b}));s(a=>{let b=[...a.items.slice(0,a.index+1),c];return{items:b.slice(-50),index:Math.min(b.length-1,49)+1}})},[]),x=(0,o.useCallback)(()=>{s(a=>{if(a.index>0){t.current=!0;let b=a.index-1,c=a.items[b];return e(c.nodes),h(c.edges),{...a,index:b}}return a})},[e,h]),y=(0,o.useCallback)(()=>{s(a=>{if(a.index<a.items.length-1){t.current=!0;let b=a.index+1,c=a.items[b];return e(c.nodes),h(c.edges),{...a,index:b}}return a})},[e,h]),[z,A]=(0,o.useState)("editor"),[B,C]=(0,o.useState)(!1),[D,E]=(0,o.useState)(!1),[F,G]=(0,o.useState)(null),[H,I]=(0,o.useState)(!1),{data:J}=(0,eZ.useWorkflow)(c||""),[K,L]=(0,o.useState)(null),[M,N]=(0,o.useState)(null),[O,P]=(0,o.useState)(null),[Q,R]=(0,o.useState)(null),[S,T]=(0,o.useState)(!1),U=(0,eZ.useActivateWorkflow)(),V=(0,eZ.useDeactivateWorkflow)(),W=(0,o.useCallback)(a=>{L(a.meta||null),N(a.execution||null),P(a.observability||null),R(a.ai||null),T(a.meta?.status==="active");let b=a.graph?.nodes?.map(a=>{let b=a.spec?.node_name;return q?.find(a=>a.name===b),a.spec&&a.ui&&a.ui.position||console.error("CRITICAL: Malformed node data from backend",a),{id:a.id,type:b&&"unknown"!==b?b:"default",position:a.ui.position,data:{id:a.id,label:a.ui.label,node_name:b,type:a.kind,config:a.spec.config,settings:a.spec.settings,spec:a.spec,workflowId:c,executeNode:b=>aH(b||a.id)}}})||[],d=a.graph?.edges?.map(a=>({...a,id:a.id||`edge-${a.source}-${a.target}`,sourceHandle:a.source_handle||a.sourceHandle||a.condition?.toLowerCase()||void 0,targetHandle:a.target_handle||a.targetHandle||void 0,label:a.condition}))||[];e(b),h(d),w(b,d),setTimeout(()=>j(),100)},[c,j,e,h,w,q]),X=(0,o.useRef)(null);(0,o.useEffect)(()=>{J&&c!==X.current&&(W(J),X.current=c||"new")},[J,c,W]);let Y=(0,o.useCallback)(a=>{h(b=>{let c=cQ({...a,type:"custom",animated:!1,style:{stroke:"#9ca3af",strokeWidth:3},markerEnd:{type:m.ArrowClosed,color:"#9ca3af",width:14,height:14},deletable:!0},b);return w(d,c),c})},[d,h,w]),Z=(0,o.useCallback)((a,b)=>{w(d,g)},[d,g,w]),$=(0,o.useCallback)((a,b)=>{G(b),E(!1)},[]),_=(0,o.useCallback)((a,b)=>{G(b),I(!0)},[]),aa=(0,o.useCallback)((a,b)=>{e(c=>{let d=c.map(c=>{if(c.id===a){let d={...c.data,...b};d.spec={...d.spec,config:d.config,settings:d.settings};let e={...c,data:d};return G(b=>b?.id===a?e:b),e}return c});return w(d,g),d})},[g,e,w,G]),ab=(0,o.useCallback)(a=>{let b=d.filter(b=>b.id!==a),c=g.filter(b=>b.source!==a&&b.target!==a);e(b),h(c),w(b,c),F?.id===a&&G(null)},[d,g,e,h,w,F]),[ac,ad]=(0,o.useState)(null),[ae,af]=(0,o.useState)(null),ag=(0,o.useCallback)(a=>{let b=a.inputs?.reduce((a,b)=>(void 0!==b.default&&(a[b.name]=b.default),a),{})||{},f={id:`${a.name}-${Date.now()}`,type:a.name,position:{x:500,y:300},data:{id:`${a.name}-${Date.now()}`,label:a.label,type:a.type,node_name:a.name,config:b,spec:{node_name:a.name,runtime:{type:"internal"},config:b,settings:{}},workflowId:c,executeNode:a=>aH(a||f.id)}};f.data.id=f.id;let i=[...d,f],j=[...g];if(ac){let a=g.find(a=>a.id===ac.edgeId);a&&(f.position={x:ac.x-70,y:ac.y-70},j=g.filter(a=>a.id!==ac.edgeId).concat([{id:`edge-${a.source}-${f.id}`,source:a.source,target:f.id,type:"custom"},{id:`edge-${f.id}-${a.target}`,source:f.id,target:a.target,type:"custom"}])),ad(null)}else ae&&(f.position={x:ae.x+150,y:ae.y-40},j=[...g,{id:`edge-${ae.source}-${f.id}`,source:ae.source,sourceHandle:ae.handleId,target:f.id,type:"custom"}],af(null));e(i),h(j),w(i,j),E(!1)},[d,g,ac,ae,c,e,h,w]),ah=(0,eZ.useGenerateWorkflowWithAI)(),[ai,aj]=(0,o.useState)(""),[ak,al]=(0,o.useState)(!1),[am,an]=(0,o.useState)([]),ao=(0,o.useCallback)(async()=>{if(ai.trim()){aj(""),an(a=>[...a,{role:"user",message:ai}]),al(!0);try{let a=d.map(a=>({id:a.id,kind:a.data?.type||"action",ui:{label:a.data?.label||"Node",icon:a.data?.spec?.ui?.icon,position:a.position},spec:{...a.data?.spec,config:a.data?.config||{},settings:a.data?.settings||{}}})),b=g.map(a=>({id:a.id,source:a.source,target:a.target,sourceHandle:a.sourceHandle,targetHandle:a.targetHandle,condition:"string"==typeof a.label?a.label:void 0})),f=await ah.mutateAsync({prompt:ai,current_nodes:a,current_edges:b}),i=f.suggestions?.join("\n")||"Workflow updated with generated nodes.";an(a=>[...a,{role:"ai",message:i}]),f.nodes&&f.edges&&(e(a=>[...a,...f.nodes.map((a,b)=>({id:a.id,type:a.spec.node_name,position:a.ui.position,data:{id:a.id,label:a.ui.label,type:a.kind,node_name:a.spec.node_name,config:a.spec.config,settings:a.spec.settings,spec:a.spec,workflowId:c,executeNode:b=>aH(b||a.id)}}))]),h(a=>[...a,...f.edges.map(a=>({id:a.id,source:a.source,target:a.target,label:a.condition}))]))}catch(a){an(a=>[...a,{role:"ai",message:"Error generating workflow."}])}finally{al(!1)}}},[ai,d,g,ah,W]),[ap,aq]=(0,o.useState)([]),[ar,as]=(0,o.useState)([]),at=(0,o.useCallback)(({nodes:a})=>{aq(a),1===a.length?G(a[0]):0===a.length&&(G(null),E(!1))},[]),au=(0,o.useCallback)(()=>{0!==ap.length&&(as(JSON.parse(JSON.stringify(ap))),p({title:"Copied",description:`${ap.length} node${ap.length>1?"s":""} copied to clipboard`}))},[ap,p]),av=(0,o.useCallback)(()=>{if(0===ar.length)return;let a=Date.now(),b=ar.map(b=>{let c=`${b.data.node_name}-${a}-${Math.random().toString(36).substr(2,6)}`;return{...b,id:c,position:{x:b.position.x+50,y:b.position.y+50},selected:!0,data:{...b.data,id:c}}});b.forEach(a=>a.data.id=a.id);let c=[...d.map(a=>({...a,selected:!1})),...b];e(c),aq(b),1===b.length&&G(b[0]),w(c,g),p({title:"Pasted",description:`Pasted ${b.length} node${b.length>1?"s":""}`})},[ar,d,g,e,p,w]),aw=(0,eZ.useExecuteWorkflow)(),ax=(0,eZ.useExecuteNode)(),[ay,az]=(0,o.useState)(!1),[aA,aB]=(0,o.useState)(null),{logs:aC,setLogs:aD,handleMessage:aE}=function(a,b,c){let[d,e]=(0,o.useState)([]),f=(0,o.useRef)(a);(0,o.useEffect)(()=>{f.current=a},[a]);let g=(0,o.useCallback)(a=>{if(!a)return;let d=new Date().toISOString(),g=f.current;if("node_started"===a.type){let{node_id:c,input_data:f}=a.data;b(a=>a.map(a=>a.id===c||a.data.node_id===c?{...a,data:{...a.data,status:"running"}}:a));let h=g.find(a=>a.id===c||a.data.node_id===c);e(a=>[...a,{id:Math.random().toString(36).substring(7),timestamp:d,type:"info",message:`Starting node: ${h?.data?.label||c}`,nodeId:c,data:f}])}else if("node_completed"===a.type){let{node_id:c,result:f}=a.data;b(a=>a.map(a=>a.id===c||a.data.node_id===c?{...a,data:{...a.data,status:"success",output:f}}:a));let h=g.find(a=>a.id===c||a.data.node_id===c);e(a=>[...a,{id:Math.random().toString(36).substring(7),timestamp:d,type:"success",message:`Node completed: ${h?.data?.label||c}`,nodeId:c,data:f}])}else if("node_failed"===a.type){let{node_id:f,error:h,error_category:i,error_suggestion:j,is_retryable:k}=a.data;b(a=>a.map(a=>a.id===f||a.data.node_id===f?{...a,data:{...a.data,status:"failed",error:h,errorCategory:i,errorSuggestion:j}}:a));let l=g.find(a=>a.id===f||a.data.node_id===f),m=`Node failed: ${l?.data?.label||f}`;i&&"unknown"!==i&&(m+=` [${i.replace(/_/g," ")}]`),m+=`. ${h}`,e(a=>[...a,{id:Math.random().toString(36),timestamp:d,type:"error",message:m,nodeId:f,data:j?{suggestion:j,is_retryable:k}:void 0}]),j&&c({title:` Suggestion`,description:j,variant:"default"})}else if("node_retrying"===a.type){let{node_id:b,attempt:c,max_attempts:f,delay_seconds:h}=a.data,i=g.find(a=>a.id===b||a.data.node_id===b);e(a=>[...a,{id:Math.random().toString(36),timestamp:d,type:"warning",message:`Retrying node: ${i?.data?.label||b} (attempt ${c}/${f}, waiting ${h}s)`,nodeId:b}])}else if("node_continued"===a.type){let{node_id:c,error:f}=a.data,h=g.find(a=>a.id===c||a.data.node_id===c);b(a=>a.map(a=>a.id===c||a.data.node_id===c?{...a,data:{...a.data,status:"warning",error:f}}:a)),e(a=>[...a,{id:Math.random().toString(36),timestamp:d,type:"warning",message:`Node failed but workflow continues: ${h?.data?.label||c}. Error: ${f}`,nodeId:c}])}else"workflow_completed"===a.type?(c({title:"Workflow Completed",description:"All nodes executed successfully."}),e(a=>[...a,{id:Math.random().toString(36),timestamp:d,type:"success",message:"Workflow execution completed successfully."}])):"workflow_failed"===a.type?(c({title:"Workflow Failed",description:a.data.error,variant:"destructive"}),e(b=>[...b,{id:Math.random().toString(36),timestamp:d,type:"error",message:`Workflow execution failed. Error: ${a.data.error}`}])):"workflow_started"===a.type&&e(a=>[...a,{id:Math.random().toString(36),timestamp:d,type:"info",message:"Workflow execution started."}])},[b,c]);return{logs:d,setLogs:e,handleMessage:g}}(d,e,p),{isConnected:aF}=function(a,b){let[c,d]=(0,o.useState)(!1),e=(0,o.useRef)(null),f=(0,o.useRef)(b);return(0,o.useEffect)(()=>{f.current=b},[b]),(0,o.useEffect)(()=>{if(!a)return;e.current&&e.current.close();let b=new WebSocket(`ws://localhost:8000/api/v1/workflows/ws/${a}`);return e.current=b,b.onopen=()=>{e_.wsLogger.debug("Connected",{executionId:a}),d(!0)},b.onmessage=a=>{try{let b=JSON.parse(a.data);f.current&&f.current(b)}catch(a){e_.wsLogger.error("Failed to parse message",a)}},b.onclose=()=>{e_.wsLogger.debug("Disconnected",{executionId:a}),d(!1)},b.onerror=a=>{e_.wsLogger.error("Connection error",a)},()=>{b.close()}},[a]),{isConnected:c}}(aA,(0,o.useCallback)(a=>{aE(a),("workflow_completed"===a.type||"workflow_failed"===a.type)&&az(!1)},[aE])),aG=(0,o.useCallback)(async()=>{if(c){az(!0),aD([]),e(a=>a.map(a=>({...a,data:{...a.data,status:"pending"}})));try{let a=await aw.mutateAsync(c);aB(a.id),p({title:"Workflow Started",description:"The workflow execution has been queued."})}catch(a){az(!1),p({title:"Execution Failed",description:"Failed to start workflow execution.",variant:"destructive"})}}},[c,aw,p,e,aD]),aH=(0,o.useCallback)(async(a,b,d={})=>{if(!c)return;az(!0);let f=b||n().find(b=>b.id===a)?.data?.config||{};e_.workflowLogger.debug(`Executing node ${a}`,{config:f,inputData:d}),e(b=>b.map(b=>b.id===a?{...b,data:{...b.data,status:"pending"}}:b));try{let b={input_data:d,config:f};e_.workflowLogger.debug("Sending payload",b);let g=await ax.mutateAsync({workflowId:c,nodeId:a,inputData:b});e(b=>{let c=b.map(b=>b.id===a?{...b,data:{...b.data,status:"success",output:g,lastResult:g}}:b),d=c.find(b=>b.id===a);return d&&G(b=>b?.id===a?d:b),c}),az(!1),p({title:"Node Executed",description:"The node execution completed successfully."})}catch(b){console.error("DEBUG: Node execution failed",b),e(c=>{let d=c.map(c=>c.id===a?{...c,data:{...c.data,status:"failed",error:b.message||"Failed to execute node."}}:c),e=d.find(b=>b.id===a);return e&&G(b=>b?.id===a?e:b),d}),az(!1),p({title:"Node Execution Failed",description:b.message||"Failed to execute node.",variant:"destructive"})}},[c,ax,p,e,n]),{saveStatus:aI,isDirty:aJ,isSaving:aK,handleSave:aL}=function({workflowId:a,nodes:b,edges:c,meta:d,execution:e,observability:f,aiMetadata:g,onSaveSuccess:h,onSaveError:i,autoSaveDelay:j=3e3,autoSaveEnabled:k=!0}){let[l,m]=(0,o.useState)("idle"),[n,p]=(0,o.useState)(!1),[q,r]=(0,o.useState)(""),s=(0,o.useRef)(null),t=(0,o.useRef)(null),u=(0,eZ.useSaveWorkflow)(),v=(0,o.useCallback)(()=>JSON.stringify({nodes:b,edges:c,meta:d,execution:e,observability:f}),[b,c,d,e,f]);(0,o.useEffect)(()=>{let a=v();q&&a!==q&&(p(!0),m("idle"))},[b,c,d,e,f,q,v]);let w=(0,o.useCallback)(async(j=!1)=>{if(a){m("saving"),p(!1);try{let i=[],k=[],l=b.map(a=>{let b=a.data,c=b.node_name,d=a.position;return("unknown"===c||"default"===c)&&i.push({id:a.id,name:c}),d||k.push(a.id),{id:a.id,kind:b.type,ui:{label:b.label,position:d},spec:{...b.spec,node_name:c,config:b.config,settings:b.settings}}});if((i.length>0||k.length>0)&&j){let a={unknownTypeNodes:i,missingPositionNodes:k,sampleProblematicNodes:b.filter(a=>i.some(b=>b.id===a.id)||k.includes(a.id)).slice(0,3).map(a=>({id:a.id,type:a.type,hasPosition:!!a.position,dataKeys:Object.keys(a.data||{}),nodeName:a.data?.node_name,specNodeName:a.data?.spec?.node_name}))};console.warn("[Save] Skipping auto-save due to invalid node state:",a),m("idle");return}let n=c.map(a=>({id:a.id,source:a.source,target:a.target,sourceHandle:a.sourceHandle,targetHandle:a.targetHandle,condition:"string"==typeof a.label?a.label:void 0})),o={mode:"async",timeout_seconds:300,retry:{max_attempts:3,strategy:"exponential"},concurrency:1},p=e?{...o,...e,retry:{...o.retry,...e.retry||{}}}:o;await u.mutateAsync({workflow_id:a,meta:d||{id:a,name:"Workflow",status:"draft",version:"1.0.0",tags:[]},graph:{nodes:l,edges:n},execution:p,observability:f||{logging:!0,metrics:!0,tracing:!1},ai:g||{generated_by:"ui"}});let q=v();r(q),m("saved"),h?.(j),t.current&&clearTimeout(t.current),t.current=setTimeout(()=>{m("idle")},3e3)}catch(a){m("error"),p(!0),i?.(a)}}},[a,b,c,d,e,f,g,u,h,i,v]);return(0,o.useEffect)(()=>{if(n&&a&&k)return s.current&&clearTimeout(s.current),s.current=setTimeout(()=>{w(!0)},j),()=>{s.current&&clearTimeout(s.current)}},[n,a,w,j,k]),(0,o.useEffect)(()=>()=>{s.current&&clearTimeout(s.current),t.current&&clearTimeout(t.current)},[]),(0,o.useEffect)(()=>{!q&&b.length>0&&r(v())},[b,c,q,v]),{saveStatus:l,isDirty:n,isSaving:"saving"===l,handleSave:w}}({workflowId:c||"",nodes:d,edges:g,meta:K||void 0,execution:M||void 0,observability:O||void 0,aiMetadata:Q||void 0,autoSaveEnabled:!0,autoSaveDelay:1500}),aM=(0,o.useCallback)(a=>{L(b=>b?{...b,...a}:b)},[]),aN=(0,o.useCallback)(async()=>{if(c)try{S?(await V.mutateAsync(c),T(!1),aM({status:"inactive"}),p({title:"Workflow Deactivated",description:"Triggers are now disabled."})):(await U.mutateAsync(c),T(!0),aM({status:"active"}),p({title:"Workflow Activated",description:"Triggers are now listening!"}))}catch(a){p({title:"Error",description:"Failed to toggle workflow status.",variant:"destructive"})}},[c,S,U,V,aM,p]);return{nodes:d,edges:g,onNodesChange:f,onEdgesChange:i,onConnect:Y,onNodeClick:$,onNodeDoubleClick:_,onNodeDragStop:Z,onNodeDrag:()=>{},selectedNode:F,setSelectedNode:G,selectedNodes:ap,onSelectionChange:at,activeTab:z,setActiveTab:A,showChat:B,setShowChat:C,showNodePanel:D,setShowNodePanel:E,isDetailsModalOpen:H,setIsDetailsModalOpen:I,isActive:S,toggleActive:aN,workflowMeta:K,executionConfig:M,observabilityConfig:O,aiMetadata:Q,updateWorkflowMeta:aM,loadV2Workflow:W,availableNodeTypes:q,onNodeUpdate:aa,onNodeDelete:ab,handleAddNode:ag,undo:x,redo:y,copyNode:au,pasteNode:av,canUndo:r.index>0,canRedo:r.index<r.items.length-1,chatMessage:ai,setChatMessage:aj,chatHistory:am,isAiLoading:ak,handleSendChat:ao,fitView:j,zoomIn:k,zoomOut:l,handleExecute:aG,handleExecuteNode:aH,isExecuting:ay,logs:aC,setLogs:aD,splitEdge:ac,setSplitEdge:ad,pendingConnection:ae,setPendingConnection:af,saveStatus:aI,isDirty:aJ,isSaving:aK,handleSave:aL}}a.s(["useWorkflowBuilder",()=>e0],27875);var e1=a.i(87924),e2=a.i(60137);let e3=(0,e2.default)("chevron-down",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);a.s(["ChevronDown",()=>e3],5784);var e4=a.i(46271),e5=a.i(62036),e6=a.i(97895),e7=a.i(15618);function e8({nodeId:a,handleId:b,position:c="right",color:d="#3b82f6",style:e}){let{getNode:f}=dH();return eV().some(c=>{if(c.source!==a)return!1;let d=c.sourceHandle||c.source_handle||c.condition,e=b?.toString().toLowerCase();if(!b)return!0;{if(d?.toString().toLowerCase()===e)return!0;let a="true"===b||"output"===b||"default"===b;return!d&&!!a}})?null:(0,e1.jsxs)(e4.motion.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},className:"absolute z-10 flex items-center pointer-events-none group/add",style:{top:e?.top||"50%",left:"100%",transform:"translateY(-50%)",height:"0px",...e},children:[(0,e1.jsx)("div",{className:"h-[2px] w-10 opacity-30 group-hover/node:opacity-60 transition-all duration-300",style:{background:`linear-gradient(to right, ${d} 0%, ${d} 60%, transparent 100%)`}}),(0,e1.jsx)(e4.motion.button,{whileHover:{scale:1.25},whileTap:{scale:.9},onClick:c=>{c.stopPropagation();let d=f(a);if(!d)return;let e=new CustomEvent("addNodeAfter",{detail:{source:a,handleId:b,x:d.position.x+(d.width||100)+40,y:d.position.y+(d.height||80)/2}});window.dispatchEvent(e)},className:"flex items-center justify-center w-6 h-6 rounded-full bg-card/95 backdrop-blur-xl border-2 border-border shadow-xl cursor-pointer pointer-events-auto transition-all group/plus active:shadow-inner -ml-2",style:{borderColor:`${d}40`},children:(0,e1.jsx)(e7.Plus,{className:"h-3.5 w-3.5 text-muted-foreground group-hover/plus:text-primary transition-colors"})})]})}function e9(a,b={},c={},d){let e=[],f={...c?.config,...b};if(!d)return{isValid:!0,warnings:[],hasCredentialIssue:!1,hasRequiredFieldIssue:!1};for(let a of d.inputs?.filter(a=>"credential"===a.type)||[])if(a.required){let b=f[a.name];b&&""!==b&&"dummy_cred"!==b&&null!==b||e.push({type:"credential_missing",field:a.name,message:`${a.label||"Credential"} is required`,severity:"warning"})}for(let a of d.inputs?.filter(a=>"credential"!==a.type&&a.required&&"node_name"!==a.name)||[]){let b=f[a.name];(null==b||""===b)&&e.push({type:"required_field_missing",field:a.name,message:`${a.label} is required`,severity:"warning"})}return{isValid:0===e.length,warnings:e,hasCredentialIssue:e.some(a=>"credential_missing"===a.type),hasRequiredFieldIssue:e.some(a=>"required_field_missing"===a.type)}}let fa=(0,o.memo)(({type:a,position:b,isConnectable:c=!0,color:d="#9ca3af",handleId:e,style:f})=>{let[g,h]=(0,o.useState)(!1),i={...b===n.Left&&{left:"-8px",top:"50%",transform:"translateY(-50%)"},...b===n.Right&&{right:"-8px",top:"50%",transform:"translateY(-50%)"},...b===n.Top&&{top:"-8px",left:"50%",transform:"translateX(-50%)"},...b===n.Bottom&&{bottom:"-8px",left:"50%",transform:"translateX(-50%)"},...f};return(0,e1.jsx)(c7,{type:a,position:b,id:e,isConnectable:c,className:"!w-4 !h-4 !bg-transparent !border-none z-50 p-0",style:i,onMouseEnter:()=>h(!0),onMouseLeave:()=>h(!1),children:(0,e1.jsxs)(e4.motion.div,{className:"w-full h-full relative flex items-center justify-center pointer-events-none",animate:g?"hover":"initial",initial:"initial",children:[(0,e1.jsx)(e4.motion.div,{variants:{initial:{scale:1,opacity:0},hover:{scale:2,opacity:.4,transition:{repeat:1/0,duration:1}}},className:"absolute inset-0 rounded-full",style:{backgroundColor:d}}),(0,e1.jsx)(e4.motion.div,{variants:{initial:{scale:1},hover:{scale:1.25}},className:"w-full h-full rounded-full border-2 border-white dark:border-slate-700 shadow-md relative z-10",style:{backgroundColor:d},children:(0,e1.jsx)("div",{className:"absolute top-0.5 left-0.5 w-[30%] h-[30%] bg-white rounded-full opacity-40"})})]})})});fa.displayName="NodeHandle";var fb=a.i(81560);let fc=(0,e2.default)("play",[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]]);a.s(["Play",()=>fc],25015);let fd=(0,e2.default)("circle-pause",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"10",x2:"10",y1:"15",y2:"9",key:"c1nkhi"}],["line",{x1:"14",x2:"14",y1:"15",y2:"9",key:"h65svq"}]]);a.s(["PauseCircle",()=>fd],22617);var fe=a.i(96221);let ff=(0,o.memo)(({show:a,isRunning:b=!1,isPending:c=!1,isPaused:d=!1,onExecute:e,onTogglePause:f,onDelete:g,position:h="top"})=>(0,e1.jsx)(e5.AnimatePresence,{children:a&&(0,e1.jsxs)(e4.motion.div,{initial:{opacity:0,scale:.9,y:"top"===h?5:-5},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:"top"===h?5:-5},className:`${"top"===h?"absolute -top-12 left-1/2 -translate-x-1/2":"absolute -bottom-12 left-1/2 -translate-x-1/2"} flex items-center gap-1 p-1 bg-card/95 backdrop-blur-md border border-border rounded-lg shadow-xl z-50 min-w-max`,children:[e&&(0,e1.jsx)("button",{onClick:a=>{a.stopPropagation(),e()},disabled:b||c,className:"p-1.5 hover:bg-emerald-500/10 rounded-md transition-all group disabled:opacity-50",title:b?"Running...":"Run this node",children:b||c?(0,e1.jsx)(fe.Loader2,{className:"h-3.5 w-3.5 text-muted-foreground animate-spin"}):(0,e1.jsx)(fc,{className:"h-3.5 w-3.5 text-muted-foreground group-hover:text-emerald-500 group-hover:fill-emerald-500"})}),f&&(0,e1.jsxs)(e1.Fragment,{children:[(0,e1.jsx)("div",{className:"w-[1px] h-4 bg-border/50"}),(0,e1.jsx)("button",{onClick:a=>{a.stopPropagation(),f()},className:`p-1.5 rounded-md transition-all group ${d?"hover:bg-emerald-500/10":"hover:bg-amber-500/10"}`,title:d?"Activate":"Deactivate",children:d?(0,e1.jsx)(fc,{className:"h-3.5 w-3.5 text-muted-foreground group-hover:text-emerald-500 group-hover:fill-emerald-500"}):(0,e1.jsx)(fd,{className:"h-3.5 w-3.5 text-muted-foreground group-hover:text-amber-500"})})]}),g&&(0,e1.jsxs)(e1.Fragment,{children:[(0,e1.jsx)("div",{className:"w-[1px] h-4 bg-border/50"}),(0,e1.jsx)("button",{onClick:a=>{a.stopPropagation(),g()},className:"p-1.5 hover:bg-destructive/10 rounded-md transition-all group",title:"Delete",children:(0,e1.jsx)(fb.Trash2,{className:"h-3.5 w-3.5 text-muted-foreground group-hover:text-destructive"})})]})]})}));ff.displayName="NodeToolbar";var fg=a.i(73570);let fh=(0,o.memo)(({warnings:a,position:b="top-right",size:c="md"})=>{let[d,e]=(0,o.useState)(!1);return 0===a.length?null:(0,e1.jsx)("div",{className:`${{"top-right":"absolute -top-2 -right-2","top-left":"absolute -top-2 -left-2","bottom-right":"absolute -bottom-2 -right-2","bottom-left":"absolute -bottom-2 -left-2"}[b]} z-20`,onMouseEnter:()=>e(!0),onMouseLeave:()=>e(!1),children:(0,e1.jsxs)("div",{className:"relative",children:[(0,e1.jsx)("div",{className:`bg-amber-500 text-white ${{sm:"p-0.5",md:"p-1"}[c]} rounded-full shadow-lg cursor-help animate-pulse`,children:(0,e1.jsx)(fg.AlertTriangle,{className:"sm"===c?"h-3 w-3":"h-3.5 w-3.5"})}),(0,e1.jsx)(e5.AnimatePresence,{children:d&&(0,e1.jsxs)(e4.motion.div,{initial:{opacity:0,y:5,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:5,scale:.95},className:"absolute top-full left-1/2 -translate-x-1/2 mt-2 z-50",children:[(0,e1.jsxs)("div",{className:"bg-slate-900 text-white text-xs rounded-lg px-3 py-2 shadow-xl min-w-[160px] max-w-[220px]",children:[(0,e1.jsxs)("div",{className:"font-semibold text-amber-400 mb-1.5 flex items-center gap-1.5",children:[(0,e1.jsx)(fg.AlertTriangle,{className:"h-3 w-3"}),"Configuration Needed"]}),(0,e1.jsx)("ul",{className:"space-y-1 text-slate-300",children:a.map((a,b)=>(0,e1.jsxs)("li",{className:"flex items-start gap-1.5",children:[(0,e1.jsx)("span",{className:"text-amber-400 mt-0.5",children:""}),(0,e1.jsx)("span",{children:a.message})]},b))})]}),(0,e1.jsx)("div",{className:"absolute -top-1 left-1/2 -translate-x-1/2 w-2 h-2 bg-slate-900 rotate-45"})]})})]})})});fh.displayName="ValidationBadge";let fi=(0,e2.default)("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);a.s(["Check",()=>fi],33441);var fj=a.i(33508);let fk=(0,o.memo)(({status:a,variant:b="dot",size:c="sm",className:d=""})=>{if("idle"===a)return null;let e={sm:{dot:"h-2 w-2",icon:"h-3 w-3"},md:{dot:"h-3 w-3",icon:"h-4 w-4"}};return"dot"===b?"running"===a||"pending"===a?(0,e1.jsxs)("span",{className:`relative flex ${e[c].dot} ${d}`,children:[(0,e1.jsx)("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-primary opacity-75"}),(0,e1.jsx)("span",{className:"relative inline-flex rounded-full h-full w-full bg-primary"})]}):(0,e1.jsx)("div",{className:`${e[c].dot} rounded-full ${{success:"bg-emerald-500",failed:"bg-destructive",warning:"bg-amber-500",idle:"bg-muted",pending:"bg-primary",running:"bg-primary"}[a]} shadow-sm ${d}`}):"icon"===b?"running"===a||"pending"===a?(0,e1.jsx)(fe.Loader2,{className:`${e[c].icon} animate-spin text-primary ${d}`}):"success"===a?(0,e1.jsx)(fi,{className:`${e[c].icon} text-emerald-500 ${d}`}):"failed"===a?(0,e1.jsx)(fj.X,{className:`${e[c].icon} text-destructive ${d}`}):null:"bar"===b?(0,e1.jsx)("div",{className:`h-1 w-full ${{success:"bg-emerald-500",failed:"bg-destructive",warning:"bg-amber-500",running:"bg-primary",pending:"bg-primary",idle:"bg-transparent"}[a]} ${d}`}):null});fk.displayName="StatusIndicator";let fl=(0,o.memo)(({color:a,borderRadius:b="14px",isRunning:c})=>c?(0,e1.jsx)("div",{className:"absolute inset-[-2px] overflow-hidden z-0 pointer-events-none",style:{borderRadius:b},children:(0,e1.jsx)(e4.motion.div,{className:"absolute inset-[-250%]",animate:{rotate:[0,360]},transition:{duration:3,repeat:1/0,ease:"linear"},style:{background:`conic-gradient(from 0deg, transparent 0deg, ${a} 15deg, transparent 30deg, ${a} 180deg, transparent 195deg)`}})}):null);fl.displayName="RunningBorder";let fm=(0,e2.default)("file-text",[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);a.s(["FileText",()=>fm],4720);let fn=(0,o.memo)(({notes:a,displayInFlow:b=!1,maxWidth:c="200px",marginTop:d="mt-3"})=>b&&a?(0,e1.jsx)("div",{className:`absolute top-full ${d} left-1/2 -translate-x-1/2 w-full min-w-[120px] z-0`,style:{maxWidth:c},children:(0,e1.jsx)("div",{className:"bg-amber-50/50 dark:bg-amber-900/20 backdrop-blur-sm border border-amber-200/50 dark:border-amber-700/30 rounded-lg p-2 shadow-sm animate-in fade-in slide-in-from-top-1 duration-300",children:(0,e1.jsxs)("div",{className:"flex items-start gap-1.5",children:[(0,e1.jsx)(fm,{className:"w-2.5 h-2.5 text-amber-500/50 mt-0.5 shrink-0"}),(0,e1.jsx)("p",{className:"text-[9px] text-amber-900/70 dark:text-amber-100/50 font-medium leading-relaxed italic line-clamp-3",children:a})]})})}):null);fn.displayName="NodeNotes";let fo=(0,o.memo)(a=>{let{data:b,isConnectable:c,selected:d,id:e,config:f}=a,[g,h]=(0,o.useState)(!1),[i,j]=(0,o.useState)(!1),[k,l]=(0,o.useState)(!1),{setNodes:m,setEdges:p}=dH(),{toast:q}=(0,e$.useToast)(),{data:r=[]}=(0,eZ.useNodeTypes)(),s=r.find(a=>a.name===b.node_name),t="running"===b.status,u="success"===b.status,v="failed"===b.status,w="pending"===b.status,x=(0,o.useMemo)(()=>e9(b.node_name||"",b.config||{},b.spec||{},s),[b.node_name,b.config,b.spec,s]),y=f.icon,z=async()=>{b.executeNode?await b.executeNode(e):q({title:"Error",description:"Execute function not available",variant:"destructive"})};return(0,e1.jsxs)("div",{className:"relative",onMouseEnter:()=>h(!0),onMouseLeave:()=>h(!1),children:[(0,e1.jsx)(ff,{show:g,isRunning:t,isPending:w,isPaused:k,onExecute:z,onTogglePause:()=>l(!k),onDelete:()=>{m(a=>a.filter(a=>a.id!==e)),p(a=>a.filter(a=>a.source!==e&&a.target!==e))}}),(0,e1.jsxs)("div",{className:"flex flex-col items-center gap-2 group/node",children:[(0,e1.jsxs)("div",{className:"relative",children:[(0,e1.jsxs)("div",{className:(0,e6.cn)("relative w-20 h-20 bg-card/90 backdrop-blur-xl border-2 transition-all duration-300 overflow-hidden",d?"border-primary ring-4 ring-primary/20":"border-border hover:border-border-strong",u&&"border-emerald-500 ring-4 ring-emerald-500/10",v&&"border-destructive ring-4 ring-destructive/10",t?"border-primary shadow-[0_0_20px_rgba(59,130,246,0.3)]":"shadow-xl"),style:{borderRadius:"44px 12px 12px 44px",background:"linear-gradient(135deg, hsl(var(--card)) 0%, hsl(var(--card)/0.95) 100%)"},children:[(0,e1.jsx)(fl,{color:f.color,borderRadius:"46px 14px 14px 46px",isRunning:t}),(0,e1.jsxs)("div",{className:(0,e6.cn)("w-full h-full flex items-center justify-center relative overflow-hidden z-10 bg-card/90",t&&"m-[1px] w-[calc(100%-2px)] h-[calc(100%-2px)]"),style:{borderRadius:"42px 10px 10px 42px"},children:[(0,e1.jsx)("div",{className:"absolute inset-0 opacity-[0.03]",style:{backgroundColor:f.color}}),(0,e1.jsx)(e4.motion.div,{animate:t?{scale:[1,1.1,1]}:{},transition:{duration:1.5,repeat:1/0},children:(0,e1.jsx)(y,{className:"h-9 w-9",style:{color:f.color}})})]}),(u||v)&&(0,e1.jsx)("div",{className:"absolute -top-1 -right-1 flex items-center justify-center",children:(0,e1.jsx)(fk,{status:b.status||"idle"})}),f.detailsContent&&(0,e1.jsx)("button",{onClick:a=>{a.stopPropagation(),j(!i)},className:"absolute bottom-1.5 left-2 p-1 rounded-full hover:bg-background/20 transition-colors z-20",children:(0,e1.jsx)(e3,{className:(0,e6.cn)("h-3 w-3 text-muted-foreground transition-transform duration-300",i&&"rotate-180")})})]}),!x.isValid&&!t&&!u&&(0,e1.jsx)(fh,{warnings:x.warnings,position:"top-right",size:"sm"}),(0,e1.jsx)(fa,{type:"source",position:n.Right,handleId:"output",isConnectable:c,color:f.color}),(0,e1.jsx)(e8,{nodeId:e,color:f.color})]}),(0,e1.jsxs)("div",{className:"flex flex-col items-center px-1 max-w-[120px]",children:[(0,e1.jsx)("span",{className:"text-[11px] font-bold text-foreground text-center line-clamp-1",children:b.label}),b.node_name&&(0,e1.jsx)("span",{className:"text-[9px] text-muted-foreground uppercase tracking-wider font-mono opacity-60",children:b.node_name.split(".")[0]})]}),(0,e1.jsx)(e5.AnimatePresence,{children:i&&f.detailsContent&&(0,e1.jsx)(e4.motion.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"w-full max-w-[140px] mt-2 overflow-hidden",children:(0,e1.jsx)("div",{className:"p-2.5 rounded-xl border border-border bg-card/50 backdrop-blur-sm shadow-sm space-y-2",children:f.detailsContent(b)})})})]}),(0,e1.jsx)(fn,{notes:b.settings?.notes,displayInFlow:b.settings?.displayNoteInFlow,marginTop:"mt-10"})]})});fo.displayName="BaseTriggerNode";let fp=(0,e2.default)("copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);a.s(["Copy",()=>fp],5151);let fq=({className:a,style:b})=>(0,e1.jsx)("svg",{className:a,style:b,viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:(0,e1.jsx)("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413Z"})}),fr=({className:a,style:b})=>(0,e1.jsxs)("svg",{className:a,style:b,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",xmlns:"http://www.w3.org/2000/svg",children:[(0,e1.jsx)("rect",{x:"2",y:"4",width:"20",height:"16",rx:"2"}),(0,e1.jsx)("path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7"})]}),fs=({data:a})=>{let[b,c]=(0,o.useState)(!1);return(0,e1.jsxs)("div",{className:"space-y-3",children:[a.config?.phone_number_id&&(0,e1.jsxs)("div",{children:[(0,e1.jsx)("div",{className:"text-[9px] text-muted-foreground uppercase tracking-wider mb-1",children:"Phone ID"}),(0,e1.jsx)("div",{className:"text-[10px] font-mono bg-background/50 rounded px-1.5 py-1 border border-border/50 truncate",children:a.config.phone_number_id})]}),a.config?.webhook_url&&(0,e1.jsxs)("div",{children:[(0,e1.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,e1.jsx)("span",{className:"text-[9px] text-muted-foreground uppercase tracking-wider",children:"Webhook URL"}),(0,e1.jsx)("button",{onClick:b=>{b.stopPropagation(),a.config?.webhook_url&&(navigator.clipboard.writeText(a.config.webhook_url),c(!0),setTimeout(()=>c(!1),2e3))},className:"p-1 hover:bg-emerald-500/10 rounded transition-colors",children:b?(0,e1.jsx)(fi,{className:"h-3 w-3 text-emerald-500"}):(0,e1.jsx)(fp,{className:"h-3 w-3 text-muted-foreground"})})]}),(0,e1.jsx)("div",{className:"text-[10px] font-mono bg-background/50 rounded px-1.5 py-1 border border-border/50 truncate",children:a.config.webhook_url})]})]})},ft=(0,o.memo)(a=>(0,e1.jsx)(fo,{...a,config:{icon:fq,color:"#25D366",detailsContent:a=>(0,e1.jsx)(fs,{data:a}),isConnected:a=>!!(a.config?.phone_number_id&&a.config?.verify_token)}}));ft.displayName="WhatsAppTriggerNode",a.s(["WhatsAppTriggerNode",0,ft],28345);let fu=({data:a})=>(0,e1.jsxs)("div",{className:"space-y-3",children:[a.config?.email_address&&(0,e1.jsxs)("div",{children:[(0,e1.jsx)("div",{className:"text-[9px] text-muted-foreground uppercase tracking-wider mb-1",children:"Email Address"}),(0,e1.jsx)("div",{className:"text-[10px] font-mono bg-background/50 rounded px-1.5 py-1 border border-border/50 truncate",children:a.config.email_address})]}),a.config?.imap_server&&(0,e1.jsxs)("div",{children:[(0,e1.jsx)("div",{className:"text-[9px] text-muted-foreground uppercase tracking-wider mb-1",children:"IMAP Server"}),(0,e1.jsxs)("div",{className:"text-[10px] font-mono bg-background/50 rounded px-1.5 py-1 border border-border/50 truncate",children:[a.config.imap_server,":",a.config.port||993]})]})]}),fv=(0,o.memo)(a=>(0,e1.jsx)(fo,{...a,config:{icon:fr,color:"#3b82f6",detailsContent:a=>(0,e1.jsx)(fu,{data:a}),isConnected:a=>!!(a.config?.email_address&&a.config?.imap_server)}}));fv.displayName="EmailTriggerNode",a.s(["EmailTriggerNode",0,fv],41135);var fw=a.i(1027),fx=a.i(92258);let fy=(0,e2.default)("webhook",[["path",{d:"M18 16.98h-5.99c-1.1 0-1.95.94-2.48 1.9A4 4 0 0 1 2 17c.01-.7.2-1.4.57-2",key:"q3hayz"}],["path",{d:"m6 17 3.13-5.78c.53-.97.1-2.18-.5-3.1a4 4 0 1 1 6.89-4.06",key:"1go1hn"}],["path",{d:"m12 6 3.13 5.73C15.66 12.7 16.9 13 18 13a4 4 0 0 1 0 8",key:"qlwsc0"}]]);a.s(["Webhook",()=>fy],59407);let fz=(0,e2.default)("timer",[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]]);a.s(["Timer",()=>fz],14753);let fA=(0,e2.default)("rss",[["path",{d:"M4 11a9 9 0 0 1 9 9",key:"pv89mb"}],["path",{d:"M4 4a16 16 0 0 1 16 16",key:"k0647b"}],["circle",{cx:"5",cy:"19",r:"1",key:"bfqh0e"}]]);a.s(["Rss",()=>fA],31953);let fB=(0,o.memo)(a=>{let b,c,{data:d}=a,e={icon:(b=d.node_name||"",({"schedule.cron":fz,"webhook.receive":fy,"email.receive":fx.Mail,"whatsapp.receive":fw.Zap,"rss.read":fA,"manual.trigger":fw.Zap})[b]||fw.Zap),color:(c=d.node_name?.toLowerCase()||"").includes("schedule")||c.includes("cron")?"#10b981":c.includes("webhook")?"#f59e0b":c.includes("email")||c.includes("mail")?"#f97316":c.includes("trigger")||c.includes("manual")?"#f43f5e":"#ef4444"};return(0,e1.jsx)(fo,{...a,config:e})});fB.displayName="GenericTriggerNode",a.s(["GenericTriggerNode",0,fB],16707),a.s([],27015);var fC=a.i(92759);let fD=(0,o.memo)(a=>{let{data:b,isConnectable:c,selected:d,id:e,config:f}=a,[g,h]=(0,o.useState)(!1),[i,j]=(0,o.useState)(!1),[k,l]=(0,o.useState)(!1),{setNodes:m,setEdges:p}=dH(),{toast:q}=(0,e$.useToast)(),{data:r=[]}=(0,eZ.useNodeTypes)(),s=r.find(a=>a.name===b.node_name),t="running"===b.status,u="success"===b.status,v="failed"===b.status,w="pending"===b.status,x=(0,o.useMemo)(()=>e9(b.node_name||"",b.config||{},b.spec||{},s),[b.node_name,b.config,b.spec,s]),y=f.icon,z=async()=>{b.executeNode?await b.executeNode(e):q({title:"Error",description:"Execute function not available",variant:"destructive"})};return(0,e1.jsxs)("div",{className:"relative",onMouseEnter:()=>h(!0),onMouseLeave:()=>h(!1),children:[(0,e1.jsx)(ff,{show:g,isRunning:t,isPending:w,isPaused:k,onExecute:z,onTogglePause:()=>l(!k),onDelete:()=>{m(a=>a.filter(a=>a.id!==e)),p(a=>a.filter(a=>a.source!==e&&a.target!==e))}}),(0,e1.jsxs)("div",{className:"flex flex-col items-center gap-2 group/node",children:[(0,e1.jsxs)("div",{className:"relative",children:[(0,e1.jsxs)("div",{className:(0,e6.cn)("relative w-20 h-20 bg-card/90 backdrop-blur-xl border-2 transition-all duration-300 shadow-xl overflow-hidden",d?"border-primary ring-4 ring-primary/20":"border-border hover:border-border-strong",k&&"opacity-60",t&&"border-primary shadow-[0_0_20px_rgba(59,130,246,0.3)]",u&&"border-emerald-500 ring-4 ring-emerald-500/10",v&&"border-destructive ring-4 ring-destructive/10"),style:{borderRadius:"24px",background:"linear-gradient(145deg, hsl(var(--card)) 0%, hsl(var(--card)/0.95) 100%)"},children:[(0,e1.jsx)(fl,{color:f.color,borderRadius:"26px",isRunning:t}),(0,e1.jsxs)("div",{className:"w-full h-full flex items-center justify-center relative z-10",children:[(0,e1.jsx)("div",{className:"absolute inset-0 opacity-[0.05]",style:{backgroundColor:f.color}}),(0,e1.jsx)(y,{className:"h-9 w-9 relative z-10",style:{color:f.color}})]}),(0,e1.jsxs)("div",{className:"absolute top-2 right-2",children:[(0,e1.jsx)(fk,{status:b.status||"idle"}),k&&(0,e1.jsx)("div",{className:"h-2 w-2 rounded-full bg-amber-500 shadow-sm"})]}),f.detailsContent&&(0,e1.jsx)("button",{onClick:a=>{a.stopPropagation(),j(!i)},className:"absolute -bottom-1 left-1/2 -translate-x-1/2 p-1 bg-background border border-border rounded-full shadow-sm hover:bg-accent transition-colors z-20",children:(0,e1.jsx)(e3,{className:(0,e6.cn)("h-3 w-3 text-muted-foreground transition-transform duration-300",i&&"rotate-180")})})]}),!x.isValid&&!t&&!u&&(0,e1.jsx)(fh,{warnings:x.warnings}),(0,e1.jsx)(fa,{type:"target",position:n.Left,handleId:"input",isConnectable:c,color:"#9ca3af"}),(0,e1.jsx)(fa,{type:"source",position:n.Right,handleId:"output",isConnectable:c,color:f.color}),(0,e1.jsx)(e8,{nodeId:e,color:f.color})]}),(0,e1.jsxs)("div",{className:"flex flex-col items-center px-1 max-w-[120px]",children:[(0,e1.jsx)("span",{className:"text-[11px] font-bold text-foreground text-center line-clamp-1 group-hover:text-primary transition-colors",children:b.label}),(0,e1.jsx)("span",{className:"text-[9px] text-muted-foreground uppercase tracking-widest font-mono opacity-50",children:b.node_name?.split(".")[0]||"Action"})]}),(0,e1.jsx)(e5.AnimatePresence,{children:i&&f.detailsContent&&(0,e1.jsx)(e4.motion.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"w-full max-w-[140px] mt-1 overflow-hidden",children:(0,e1.jsx)("div",{className:"p-2.5 rounded-xl border border-border bg-card/50 backdrop-blur-sm shadow-sm",children:f.detailsContent(b)})})})]})]})});fD.displayName="BaseActionNode";let fE=(0,o.memo)(a=>{let b={icon:fx.Mail,color:"#3b82f6",detailsContent:a=>(0,e1.jsxs)("div",{className:"space-y-1.5",children:[(0,e1.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,e1.jsx)(fC.Send,{className:"h-3 w-3 text-blue-500"}),(0,e1.jsx)("span",{className:"text-[10px] text-muted-foreground uppercase font-mono tracking-tight",children:"Recipients"})]}),(0,e1.jsx)("div",{className:"text-xs font-medium text-foreground truncate pl-4",children:a.config?.to||"No recipient set"}),a.config?.subject&&(0,e1.jsxs)("div",{className:"text-[10px] text-muted-foreground italic truncate pl-4",children:["Re: ",a.config.subject]})]})};return(0,e1.jsx)(fD,{...a,config:b})});fE.displayName="EmailActionNode",a.s(["EmailActionNode",0,fE],57544);var fF=a.i(21161);let fG=(0,e2.default)("bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]);a.s(["Bot",()=>fG],82434);let fH=(0,e2.default)("message-square",[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]]);a.s(["MessageSquare",()=>fH],21601);let fI=(0,e2.default)("database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);a.s(["Database",()=>fI],20494);let fJ=(0,e2.default)("globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);a.s(["Globe",()=>fJ],44494);let fK=(0,e2.default)("code",[["path",{d:"m16 18 6-6-6-6",key:"eg8j8"}],["path",{d:"m8 6-6 6 6 6",key:"ppft3o"}]]);a.s(["Code",()=>fK],54074);let fL=(0,e2.default)("brain",[["path",{d:"M12 18V5",key:"adv99a"}],["path",{d:"M15 13a4.17 4.17 0 0 1-3-4 4.17 4.17 0 0 1-3 4",key:"1e3is1"}],["path",{d:"M17.598 6.5A3 3 0 1 0 12 5a3 3 0 1 0-5.598 1.5",key:"1gqd8o"}],["path",{d:"M17.997 5.125a4 4 0 0 1 2.526 5.77",key:"iwvgf7"}],["path",{d:"M18 18a4 4 0 0 0 2-7.464",key:"efp6ie"}],["path",{d:"M19.967 17.483A4 4 0 1 1 12 18a4 4 0 1 1-7.967-.517",key:"1gq6am"}],["path",{d:"M6 18a4 4 0 0 1-2-7.464",key:"k1g0md"}],["path",{d:"M6.003 5.125a4 4 0 0 0-2.526 5.77",key:"q97ue3"}]]),fM=(0,e2.default)("share-2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);a.s(["Share2",()=>fM],53569),(0,e2.default)("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]]),(0,e2.default)("upload",[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]]);let fN=(0,e2.default)("square-pen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);a.s(["Edit",()=>fN],24569);let fO=(0,e2.default)("shuffle",[["path",{d:"m18 14 4 4-4 4",key:"10pe0f"}],["path",{d:"m18 2 4 4-4 4",key:"pucp1d"}],["path",{d:"M2 18h1.973a4 4 0 0 0 3.3-1.7l5.454-8.6a4 4 0 0 1 3.3-1.7H22",key:"1ailkh"}],["path",{d:"M2 6h1.972a4 4 0 0 1 3.6 2.2",key:"km57vx"}],["path",{d:"M22 18h-6.041a4 4 0 0 1-3.3-1.8l-.359-.45",key:"os18l9"}]]);a.s(["Shuffle",()=>fO],31462);var fP=a.i(8406);let fQ=({className:a,style:b})=>(0,e1.jsxs)("svg",{viewBox:"0 0 48 48",className:a,style:b,fill:"currentColor",children:[(0,e1.jsx)("path",{fill:"#0F9D58",d:"M37,45H11c-1.657,0-3-1.343-3-3V6c0-1.657,1.343-3,3-3h19l10,10v29C40,43.657,38.657,45,37,45z"}),(0,e1.jsx)("path",{fill:"#C8E6C9",d:"M40 13L30 13 30 3z"}),(0,e1.jsx)("path",{fill:"#E8F5E9",d:"M31,23H17c-1.105,0-2,0.895-2,2v2c0,1.105,0.895,2,2,2h14c1.105,0,2-0.895,2-2v-2C33,23.895,32.105,23,31,23z"}),(0,e1.jsx)("rect",{x:"15",y:"25",width:"18",height:"2",fill:"#0F9D58",opacity:"0.3"}),(0,e1.jsx)("path",{fill:"#E8F5E9",d:"M31,31H17c-1.105,0-2,0.895-2,2v2c0,1.105,0.895,2,2,2h14c1.105,0,2-0.895,2-2v-2C33,31.895,32.105,31,31,31z"}),(0,e1.jsx)("rect",{x:"15",y:"33",width:"18",height:"2",fill:"#0F9D58",opacity:"0.3"}),(0,e1.jsx)("path",{fill:"#E8F5E9",d:"M31,15H17c-1.105,0-2,0.895-2,2v2c0,1.105,0.895,2,2,2h14c1.105,0,2-0.895,2-2v-2C33,15.895,32.105,15,31,15z"}),(0,e1.jsx)("rect",{x:"15",y:"17",width:"18",height:"2",fill:"#0F9D58",opacity:"0.3"})]}),fR=({className:a,style:b})=>(0,e1.jsxs)("svg",{viewBox:"0 0 32 32",className:a,style:b,fill:"currentColor",children:[(0,e1.jsx)("path",{fill:"#25D366",d:"M16 2C8.27 2 2 8.27 2 16c0 2.5.65 4.88 1.83 6.95L3 29l6.23-1.63A13.9 13.9 0 0016 30c7.73 0 14-6.27 14-14S23.73 2 16 2zm0 25.5c-2.3 0-4.5-.6-6.42-1.74l-.46-.28-4.75 1.25 1.27-4.63-.3-.48A11.45 11.45 0 014.5 16C4.5 9.66 9.66 4.5 16 4.5S27.5 9.66 27.5 16 22.34 27.5 16 27.5z"}),(0,e1.jsx)("path",{fill:"#FFFFFF",d:"M22.54 18.06c-.36-.18-2.13-1.05-2.46-1.17-.33-.12-.57-.18-.81.18-.24.36-.93 1.17-1.14 1.41-.21.24-.42.27-.78.09-1.85-.92-3.08-1.58-4.29-3.66-.15-.26-.01-.39.16-.57.16-.16.36-.42.54-.63.18-.21.24-.36.36-.6.12-.24.06-.45-.03-.63-.09-.18-.81-1.95-1.11-2.67-.29-.7-.59-.6-.81-.61-.21-.01-.45-.01-.69-.01-.24 0-.63.09-.96.45-.33.36-1.26 1.23-1.26 3s1.29 3.48 1.47 3.72c.18.24 2.54 3.88 6.15 5.44.86.37 1.53.6 2.06.77 1.37.44 2.62.38 3.63.23.86-.13 2.13-.87 2.43-1.71.3-.84.3-1.56.21-1.71-.09-.15-.33-.24-.69-.42z"})]}),fS=({className:a,style:b})=>(0,e1.jsxs)("svg",{viewBox:"0 0 32 32",className:a,style:b,fill:"currentColor",children:[(0,e1.jsx)("path",{fill:"#3776AB",d:"M16 2.5c2.9 0 3.2.3 4.4.5 1.2.2 2.6.8 2.6 3.6v.9h-5.4v1.8h7.9c.9 0 2.2.4 2.7 1.2.6.9.5 2.5.5 2.5l-.1 4.3c-.1 1.7-1.3 3-3 3h-2.1v-2.7c0-1.7-1.4-3.1-3.2-3.1H14c-1.8 0-3.1 1.4-3.1 3.1v2.7H8.8c-1.7 0-3.1-1.4-3.1-3.1v-4.3c0-1.8.4-2.8.9-3.6.6-.8 2-1.2 2.7-1.2h.5V5.5c-1.7 0-3.1-1.3-3.1-3s1.4-3 3.1-3H16zm-5 1.5c-.8 0-1.5.7-1.5 1.5s.7 1.5 1.5 1.5 1.5-.7 1.5-1.5-.7-1.5-1.5-1.5z"}),(0,e1.jsx)("path",{fill:"#FFD43B",d:"M16 29.5c-2.9 0-3.2-.3-4.4-.5-1.2-.2-2.6-.8-2.6-3.6v-.9h5.4v-1.8H6.5c-.9 0-2.2-.4-2.7-1.2-.6-.9-.5-2.5-.5-2.5l.1-4.3c.1-1.7 1.3-3 3-3h2.1v2.7c0 1.7 1.4 3.1 3.2 3.1h6.4c1.8 0 3.1-1.4 3.1-3.1v-2.7h2.1c1.7 0 3.1 1.4 3.1 3.1v4.3c0 1.8-.4 2.8-.9 3.6-.6.8-2 1.2-2.7 1.2h-.5v2.7c1.7 0 3.1 1.3 3.1 3s-1.4 3-3.1 3H16zm5-1.5c.8 0 1.5-.7 1.5-1.5s-.7-1.5-1.5-1.5-1.5.7-1.5 1.5.7 1.5 1.5 1.5z"})]});a.s(["LogoGoogleSheets",0,fQ,"LogoPython",0,fS,"LogoWhatsApp",0,fR],24007),fw.Zap,fF.Settings,fx.Mail,fC.Send,fb.Trash2;let fT=(0,o.memo)(a=>{let b,c,{data:d}=a,e={icon:(b=d.node_name||"",({"data.set":fN,"data.transform":fO,"slack.send":fH,"discord.send":fH,"whatsapp.send":fR,"email.send":fx.Mail,"http.request":fJ,"ai.llm":fP.Sparkles,"ai.agent":fG,"data.store":fI,"google_sheets.read":fQ,"google_sheets.write":fQ})[b]||fF.Settings),color:(c=d.node_name?.toLowerCase()||"").includes("ai")?"#8b5cf6":c.includes("discord")?"#5865F2":c.includes("whatsapp")||c.includes("slack")?"#25d366":c.includes("email")||c.includes("mail")?"#3b82f6":c.includes("db")||c.includes("database")||c.includes("google_sheets")?"#f59e0b":"#3b82f6"};return(0,e1.jsx)(fD,{...a,config:e})});fT.displayName="GenericActionNode",a.s(["GenericActionNode",0,fT],95828);let fU=({className:a,style:b})=>(0,e1.jsxs)("svg",{viewBox:"0 0 48 48",className:a,style:b,fill:"currentColor",children:[(0,e1.jsx)("path",{fill:"#0F9D58",d:"M37,45H11c-1.657,0-3-1.343-3-3V6c0-1.657,1.343-3,3-3h19l10,10v29C40,43.657,38.657,45,37,45z"}),(0,e1.jsx)("path",{fill:"#C8E6C9",d:"M40 13L30 13 30 3z"}),(0,e1.jsx)("path",{fill:"#E8F5E9",d:"M31,23H17c-1.105,0-2,0.895-2,2v2c0,1.105,0.895,2,2,2h14c1.105,0,2-0.895,2-2v-2C33,23.895,32.105,23,31,23z"}),(0,e1.jsx)("rect",{x:"15",y:"25",width:"18",height:"2",fill:"#0F9D58",opacity:"0.3"}),(0,e1.jsx)("path",{fill:"#E8F5E9",d:"M31,31H17c-1.105,0-2,0.895-2,2v2c0,1.105,0.895,2,2,2h14c1.105,0,2-0.895,2-2v-2C33,31.895,32.105,31,31,31z"}),(0,e1.jsx)("rect",{x:"15",y:"33",width:"18",height:"2",fill:"#0F9D58",opacity:"0.3"}),(0,e1.jsx)("path",{fill:"#E8F5E9",d:"M31,15H17c-1.105,0-2,0.895-2,2v2c0,1.105,0.895,2,2,2h14c1.105,0,2-0.895,2-2v-2C33,15.895,32.105,15,31,15z"}),(0,e1.jsx)("rect",{x:"15",y:"17",width:"18",height:"2",fill:"#0F9D58",opacity:"0.3"})]}),fV=(0,o.memo)(a=>(0,e1.jsx)(fD,{...a,config:{icon:fU,color:"#0F9D58",detailsContent:a=>(0,e1.jsxs)("div",{className:"space-y-1",children:[(0,e1.jsx)("div",{className:"text-[10px] text-muted-foreground uppercase font-mono",children:"Action"}),(0,e1.jsx)("div",{className:"text-xs font-medium text-emerald-600 dark:text-emerald-400",children:a.config?.action==="write"?"Write Data":a.config?.action==="append"?"Append Row":"Read Sheets"})]})}}));fV.displayName="GoogleSheetsNode",a.s(["GoogleSheetsNode",0,fV],39876);let fW=(0,e2.default)("terminal",[["path",{d:"M12 19h8",key:"baeox8"}],["path",{d:"m4 17 6-6-6-6",key:"1yngyt"}]]);a.s(["Terminal",()=>fW],80386);let fX=(0,e2.default)("file-code",[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 12.5 8 15l2 2.5",key:"1tg20x"}],["path",{d:"m14 12.5 2 2.5-2 2.5",key:"yinavb"}]]),fY=(0,o.memo)(a=>(0,e1.jsx)(fD,{...a,config:{icon:fX,color:"#ffde57",detailsContent:a=>(0,e1.jsxs)("div",{className:"space-y-1",children:[(0,e1.jsx)("div",{className:"text-[10px] text-muted-foreground uppercase font-mono",children:"Environment"}),(0,e1.jsxs)("div",{className:"text-xs font-medium text-amber-600 dark:text-amber-400 flex items-center gap-1",children:[(0,e1.jsx)(fW,{className:"h-3 w-3"})," Python 3.10"]})]})}}));fY.displayName="PythonCodeNode",a.s(["PythonCodeNode",0,fY],42068),a.s([],98592);let fZ=(0,e2.default)("split",[["path",{d:"M16 3h5v5",key:"1806ms"}],["path",{d:"M8 3H3v5",key:"15dfkv"}],["path",{d:"M12 22v-8.3a4 4 0 0 0-1.172-2.872L3 3",key:"1qrqzj"}],["path",{d:"m15 9 6-6",key:"ko1vev"}]]);a.s(["Split",()=>fZ],74788);let f$=(0,e2.default)("git-branch",[["line",{x1:"6",x2:"6",y1:"3",y2:"15",key:"17qcm7"}],["circle",{cx:"18",cy:"6",r:"3",key:"1h7g24"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M18 9a9 9 0 0 1-9 9",key:"n2h4wq"}]]);a.s(["GitBranch",()=>f$],10948),(0,e2.default)("funnel",[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]]),(0,e2.default)("list-filter",[["path",{d:"M2 5h20",key:"1fs1ex"}],["path",{d:"M6 12h12",key:"8npq4p"}],["path",{d:"M9 19h6",key:"456am0"}]]);let f_=(0,e2.default)("git-merge",[["circle",{cx:"18",cy:"18",r:"3",key:"1xkwt0"}],["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["path",{d:"M6 21V9a9 9 0 0 0 9 9",key:"7kw0sc"}]]);a.s(["GitMerge",()=>f_],60252);let f0=(0,e2.default)("rotate-cw",[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]]);a.s(["RotateCw",()=>f0],41815);var f1=a.i(41710),f2=a.i(90669);let f3=(0,o.memo)(a=>{let{data:b,isConnectable:c,selected:d,id:e,config:f={}}=a,[g,h]=(0,o.useState)(!1),[i,j]=(0,o.useState)(!1),[k,l]=(0,o.useState)(!1),{setNodes:m,setEdges:p}=dH(),{data:q=[]}=(0,eZ.useNodeTypes)(),r=q.find(a=>a.name===b.node_name),s=e9(b.node_name||"",b.config||{},b.spec||{},r),t=f.icon||fZ,u=f.color||"#8b5cf6",v=b.node_name?.includes("condition")||b.node_name?.includes("if")||b.node_name?.includes("switch")||b.node_name?.includes("parallel"),w="running"===b.status,x="pending"===b.status;return(0,e1.jsxs)("div",{className:"relative",onMouseEnter:()=>h(!0),onMouseLeave:()=>h(!1),children:[(0,e1.jsx)(ff,{show:g,isRunning:w,isPending:x,isPaused:k,onExecute:()=>{},onTogglePause:()=>l(!k),onDelete:()=>{m(a=>a.filter(a=>a.id!==e)),p(a=>a.filter(a=>a.source!==e&&a.target!==e))}}),(0,e1.jsx)(fh,{warnings:s.warnings}),(0,e1.jsxs)("div",{className:"flex flex-col items-center gap-2 group/node",children:[(0,e1.jsxs)("div",{className:"relative",children:[(0,e1.jsxs)("div",{className:(0,e6.cn)("relative w-24 h-24 bg-card/90 backdrop-blur-xl border-2 transition-all duration-300 shadow-xl overflow-hidden",d?"border-primary ring-4 ring-primary/20":"border-border hover:border-border-strong",k&&"opacity-60",w&&"border-primary shadow-[0_0_25px_rgba(139,92,246,0.3)]"),style:{borderRadius:"28px",background:"linear-gradient(135deg, hsl(var(--card)) 0%, hsl(var(--card)/0.95) 100%)"},children:[(0,e1.jsx)(fl,{color:u,borderRadius:"30px",isRunning:w}),(0,e1.jsxs)("div",{className:"w-full h-full flex flex-col items-center justify-center relative overflow-hidden rounded-[26px] z-10",children:[(0,e1.jsx)("div",{className:"absolute inset-0 opacity-[0.08]",style:{backgroundColor:u}}),(0,e1.jsx)(e4.motion.div,{animate:w?{scale:[1,1.1,1]}:{},transition:{duration:1.5,repeat:1/0},children:(0,e1.jsx)(t,{className:"h-10 w-10 relative z-10",style:{color:u}})}),(b.node_name?.includes("condition")||b.node_name?.includes("if")||b.node_name?.includes("switch"))&&(0,e1.jsxs)("div",{className:"absolute inset-y-0 right-1 flex flex-col justify-around py-4 opacity-40 group-hover/node:opacity-100 transition-opacity",children:[(0,e1.jsx)(fi,{className:"h-3 w-3 text-emerald-500"}),(0,e1.jsx)(fj.X,{className:"h-3 w-3 text-rose-500"})]})]}),f.detailsContent&&(0,e1.jsx)("button",{onClick:a=>{a.stopPropagation(),j(!i)},className:"absolute -bottom-1.5 left-1/2 -translate-x-1/2 p-1 bg-background border border-border rounded-full shadow-sm hover:bg-accent transition-colors z-20",children:(0,e1.jsx)(e3,{className:(0,e6.cn)("h-3 w-3 text-muted-foreground transition-transform duration-300",i&&"rotate-180")})})]}),(0,e1.jsx)(fa,{type:"target",position:n.Left,handleId:"input",isConnectable:c,color:"#9ca3af"}),v?(0,e1.jsxs)(e1.Fragment,{children:[(0,e1.jsx)(fa,{type:"source",position:n.Right,handleId:"true",isConnectable:c,color:"#10b981",style:{top:"30%",transform:"translateY(-50%)"}}),(0,e1.jsx)(fa,{type:"source",position:n.Right,handleId:"false",isConnectable:c,color:"#f43f5e",style:{top:"70%",transform:"translateY(-50%)"}}),(0,e1.jsx)(e8,{nodeId:e,handleId:"true",color:"#10b981",style:{top:"30%"}}),(0,e1.jsx)(e8,{nodeId:e,handleId:"false",color:"#f43f5e",style:{top:"70%"}})]}):(0,e1.jsxs)(e1.Fragment,{children:[(0,e1.jsx)(fa,{type:"source",position:n.Right,handleId:"true",isConnectable:c,color:"#9ca3af"}),(0,e1.jsx)(e8,{nodeId:e,handleId:"true",color:u,style:{top:"50%"}})]})]}),(0,e1.jsxs)("div",{className:"flex flex-col items-center px-1 max-w-[140px]",children:[(0,e1.jsx)("span",{className:"text-[11px] font-bold text-foreground text-center line-clamp-1",children:b.label}),(0,e1.jsx)("span",{className:"text-[9px] text-muted-foreground uppercase tracking-widest font-mono opacity-50",children:b.node_name?.split(".")[0]||"Condition"})]}),(0,e1.jsx)(e5.AnimatePresence,{children:i&&f.detailsContent&&(0,e1.jsx)(e4.motion.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"w-full max-w-[150px] mt-1 overflow-hidden",children:(0,e1.jsx)("div",{className:"p-2.5 rounded-xl border border-border bg-card/50 backdrop-blur-sm shadow-sm",children:f.detailsContent(b)})})})]})]})});f3.displayName="BaseLogicNode";let f4=(0,o.memo)(a=>{let b,{data:c}=a,d={icon:(b=c.node_name||"",({"condition.if":fZ,"logic.parallel":f$,"logic.merge":f_,"logic.delay":f1.Clock,"logic.loop":f0,"logic.switch":fO,"condition.switch":fO,"logic.pause":fd,"execution.pause":fd,"utility.noop":f2.Activity})[b]||fZ),color:"#8b5cf6"};return(0,e1.jsx)(f3,{...a,config:d})});f4.displayName="GenericLogicNode",a.s(["GenericLogicNode",0,f4],86005),(0,o.memo)(a=>(0,e1.jsx)(f3,{...a,config:{icon:f$,color:"#8b5cf6",detailsContent:a=>(0,e1.jsxs)("div",{className:"space-y-1",children:[(0,e1.jsx)("div",{className:"text-[10px] text-muted-foreground uppercase font-mono",children:"Condition"}),(0,e1.jsx)("div",{className:"text-xs font-medium text-foreground truncate",children:a.config?.condition||"If [value] equals..."})]})}})).displayName="IfConditionNode",(0,o.memo)(a=>(0,e1.jsx)(f3,{...a,config:{icon:fL,color:"#8b5cf6"}})).displayName="SwitchNode",a.s([],70978);let f5=(0,e2.default)("circle-play",[["path",{d:"M9 9.003a1 1 0 0 1 1.517-.859l4.997 2.997a1 1 0 0 1 0 1.718l-4.997 2.997A1 1 0 0 1 9 14.996z",key:"kmsa83"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);a.s(["PlayCircle",()=>f5],34012);let f6=(0,e2.default)("inbox",[["polyline",{points:"22 12 16 12 14 15 10 15 8 12 2 12",key:"o97t9d"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}]]);a.s(["Inbox",()=>f6],19521);let f7=(0,e2.default)("pen-line",[["path",{d:"M13 21h8",key:"1jsn5i"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);a.s(["Edit3",()=>f7],68976);let f8=(0,o.memo)(a=>{let{data:b,isConnectable:c,selected:d,id:e}=a,[f,g]=(0,o.useState)(!1),[h,i]=(0,o.useState)(!1),[j,k]=(0,o.useState)(!1),[l,m]=(0,o.useState)(!1),[p,q]=(0,o.useState)(!1),{setNodes:r,setEdges:s}=dH(),t="running"===b.status,u="success"===b.status,v="failed"===b.status,w="pending"===b.status,x="warning"===b.status,{data:y=[]}=(0,eZ.useNodeTypes)(),z=y.find(a=>a.name===b.node_name),A=(0,o.useMemo)(()=>e9(b.node_name||"",b.config||{},b.spec||{},z),[b.node_name,b.config,b.spec,z]);(0,o.useMemo)(()=>(function(a){if(a.isValid)return"";let b=[];if(a.hasCredentialIssue&&b.push("Credential needed"),a.hasRequiredFieldIssue){let c=a.warnings.filter(a=>"required_field_missing"===a.type).length;b.push(`${c} required field${c>1?"s":""}`)}return b.join(", ")})(A),[A]);let{toast:B}=(0,e$.useToast)(),C=async a=>{a.stopPropagation(),b.executeNode?await b.executeNode(e):B({title:"Error",description:"Execute function not available",variant:"destructive"})},D=a.color||("trigger"===b.type?"#ef4444":"#3b82f6");return(0,e1.jsxs)("div",{className:"relative",onMouseEnter:()=>g(!0),onMouseLeave:()=>g(!1),children:[(0,e1.jsx)(e5.AnimatePresence,{children:f&&(0,e1.jsxs)(e4.motion.div,{initial:{opacity:0,y:-5},animate:{opacity:1,y:0},exit:{opacity:0,y:-5},className:"absolute -top-12 left-1/2 -translate-x-1/2 flex items-center gap-1 bg-white dark:bg-slate-800 border border-border rounded-lg px-2 py-1.5 shadow-xl z-50",children:[(0,e1.jsx)("button",{onClick:C,disabled:t||w,className:"p-1.5 hover:bg-green-50 dark:hover:bg-green-900/20 rounded-md transition-colors text-muted-foreground hover:text-green-600 disabled:opacity-50",title:t?"Running...":"Run this node",children:t||w?(0,e1.jsx)(fe.Loader2,{className:"h-4 w-4 animate-spin"}):(0,e1.jsx)(fc,{className:"h-4 w-4"})}),(0,e1.jsx)("div",{className:"w-px h-4 bg-border"}),(0,e1.jsx)("button",{onClick:a=>{a.stopPropagation(),r(a=>a.filter(a=>a.id!==e)),s(a=>a.filter(a=>a.source!==e&&a.target!==e))},className:"p-1.5 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-md transition-colors text-muted-foreground hover:text-red-600",title:"Delete",children:(0,e1.jsx)(fb.Trash2,{className:"h-4 w-4"})})]})}),(0,e1.jsxs)("div",{className:(0,e6.cn)("min-w-[180px] bg-white dark:bg-slate-900 border-2 rounded-xl shadow-sm transition-all relative",d?"border-primary shadow-md":"border-border",t&&"border-transparent shadow-xl ring-1 ring-primary/10",w&&"border-blue-400 border-dashed",u&&"border-green-500 shadow-[0_0_15px_rgba(34,197,94,0.25)]",v&&"border-red-500 shadow-[0_0_15px_rgba(239,68,68,0.25)]",x&&"border-amber-400 shadow-[0_0_15px_rgba(245,158,11,0.2)]",!A.isValid&&!u&&!v&&!t&&"border-amber-300"),children:[v&&(0,e1.jsx)("div",{className:"absolute -top-2 -right-2 z-20",onMouseEnter:()=>q(!0),onMouseLeave:()=>q(!1),children:(0,e1.jsxs)("div",{className:"relative",children:[(0,e1.jsx)("div",{className:"bg-red-500 text-white p-1 rounded-full shadow-lg cursor-help",children:(0,e1.jsx)(fg.AlertTriangle,{className:"h-3.5 w-3.5"})}),(0,e1.jsx)(e5.AnimatePresence,{children:p&&(0,e1.jsxs)(e4.motion.div,{initial:{opacity:0,y:5,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:5,scale:.95},className:"absolute top-full right-0 mt-2 z-50",children:[(0,e1.jsxs)("div",{className:"bg-slate-900 text-white text-xs rounded-lg px-3 py-2 shadow-xl min-w-[200px] max-w-[280px]",children:[(0,e1.jsxs)("div",{className:"font-semibold text-red-400 mb-1.5 flex items-center gap-1.5",children:[(0,e1.jsx)(fg.AlertTriangle,{className:"h-3 w-3"}),"Execution Failed"]}),(0,e1.jsx)("div",{className:"text-slate-200 mb-2 whitespace-pre-wrap leading-relaxed",children:b.error||"An unexpected error occurred during execution."}),b.errorSuggestion&&(0,e1.jsxs)("div",{className:"mt-2 pt-2 border-t border-slate-700/50",children:[(0,e1.jsxs)("div",{className:"text-blue-400 font-medium mb-1 flex items-center gap-1.5 text-[10px] uppercase tracking-wider",children:[(0,e1.jsx)(fP.Sparkles,{className:"h-2.5 w-2.5"}),"Suggestion"]}),(0,e1.jsx)("div",{className:"text-slate-300 italic",children:b.errorSuggestion})]})]}),(0,e1.jsx)("div",{className:"absolute -top-1 right-3 w-2 h-2 bg-slate-900 rotate-45"})]})})]})}),!A.isValid&&!t&&!u&&!v&&(0,e1.jsx)("div",{className:"absolute -top-2 -right-2 z-20",onMouseEnter:()=>m(!0),onMouseLeave:()=>m(!1),children:(0,e1.jsxs)("div",{className:"relative",children:[(0,e1.jsx)("div",{className:"bg-amber-500 text-white p-1 rounded-full shadow-lg cursor-help animate-pulse",children:(0,e1.jsx)(fg.AlertTriangle,{className:"h-3.5 w-3.5"})}),(0,e1.jsx)(e5.AnimatePresence,{children:l&&(0,e1.jsxs)(e4.motion.div,{initial:{opacity:0,y:5,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:5,scale:.95},className:"absolute top-full right-0 mt-2 z-50",children:[(0,e1.jsxs)("div",{className:"bg-slate-900 text-white text-xs rounded-lg px-3 py-2 shadow-xl min-w-[160px] max-w-[220px]",children:[(0,e1.jsxs)("div",{className:"font-semibold text-amber-400 mb-1.5 flex items-center gap-1.5",children:[(0,e1.jsx)(fg.AlertTriangle,{className:"h-3 w-3"}),"Configuration Needed"]}),(0,e1.jsx)("ul",{className:"space-y-1 text-slate-300",children:A.warnings.map((a,b)=>(0,e1.jsxs)("li",{className:"flex items-start gap-1.5",children:[(0,e1.jsx)("span",{className:"text-amber-400 mt-0.5",children:""}),(0,e1.jsx)("span",{children:a.message})]},b))})]}),(0,e1.jsx)("div",{className:"absolute -top-1 right-3 w-2 h-2 bg-slate-900 rotate-45"})]})})]})}),t&&(0,e1.jsx)("div",{className:"absolute inset-[-2px] overflow-hidden rounded-[14px] z-0 pointer-events-none",children:(0,e1.jsx)(e4.motion.div,{className:"absolute inset-[-250%]",animate:{rotate:[0,360]},transition:{duration:3,repeat:1/0,ease:"linear"},style:{background:`conic-gradient(from 0deg, transparent 0deg, ${D} 15deg, transparent 30deg, ${D} 180deg, transparent 195deg)`}})}),(0,e1.jsxs)("div",{className:(0,e6.cn)("flex items-center gap-3 p-3 relative z-10 rounded-xl bg-white dark:bg-slate-900",t&&"m-[1px] p-[11px]"),children:[(0,e1.jsx)("div",{className:"p-2 rounded-lg flex items-center justify-center text-white shrink-0",style:{backgroundColor:D},children:(()=>{if(a.icon)return(0,e1.jsx)(a.icon,{className:"h-5 w-5"});let c=b.node_name||"",d={"manual.trigger":f5,"schedule.cron":fz,"webhook.receive":fy,"whatsapp.trigger":fR,"email.trigger":f6,"rss.trigger":fA,"ai.llm":fP.Sparkles,"ai.agent":fG,"data.set":f7,"data.transform":fO,"slack.send":fH,"whatsapp.send":fR,"google_sheets.write":fQ,"google_sheets.read":fQ,"http.request":fJ,"code.python":fS,"code.javascript":fK,"email.send":fC.Send,"discord.send":fC.Send,"condition.if":fZ,"logic.parallel":f$,"logic.merge":f_,"logic.delay":f1.Clock,"logic.loop":f0,"logic.switch":fO,"logic.pause":fd,"utility.noop":f2.Activity}[c]||("trigger"===b.type?fw.Zap:fF.Settings);return(0,e1.jsx)(d,{className:"h-5 w-5"})})()}),(0,e1.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,e1.jsx)("div",{className:"text-sm font-semibold truncate leading-tight",children:b.label}),(0,e1.jsx)("div",{className:"text-[10px] text-muted-foreground truncate uppercase tracking-wider font-medium mt-0.5",children:b.node_name||b.type||"Action"})]}),t&&(0,e1.jsx)("div",{className:"flex space-x-0.5",children:(0,e1.jsx)(e4.motion.div,{animate:{opacity:[.4,1,.4],scale:[1,1.2,1]},transition:{repeat:1/0,duration:2},className:"w-2 h-2 rounded-full bg-blue-500 shadow-[0_0_8px_rgba(59,130,246,0.5)]"})})]}),(u||v)&&(0,e1.jsx)("div",{className:(0,e6.cn)("h-1 w-full",u?"bg-green-500":"bg-red-500")}),"trigger"!==b.type&&(0,e1.jsx)(c7,{type:"target",position:n.Left,isConnectable:c,className:"!w-4 !h-4 !bg-transparent !border-none z-50 p-0",style:{left:"-8px",top:"50%",transform:"translateY(-50%)"},onMouseEnter:()=>i(!0),onMouseLeave:()=>i(!1),children:(0,e1.jsxs)(e4.motion.div,{className:"w-full h-full relative flex items-center justify-center pointer-events-none",animate:h?"hover":"initial",initial:"initial",children:[(0,e1.jsx)(e4.motion.div,{variants:{initial:{scale:1,opacity:0},hover:{scale:2,opacity:.4,transition:{repeat:1/0,duration:1}}},className:"absolute inset-0 rounded-full bg-slate-400"}),(0,e1.jsx)(e4.motion.div,{variants:{initial:{scale:1},hover:{scale:1.25}},className:"w-full h-full rounded-full border-2 border-white dark:border-slate-700 bg-slate-400 shadow-md relative z-10",children:(0,e1.jsx)("div",{className:"absolute top-0.5 left-0.5 w-[30%] h-[30%] bg-white rounded-full opacity-40"})})]})}),(0,e1.jsx)(e8,{nodeId:e,color:D}),(0,e1.jsx)(c7,{type:"source",position:n.Right,isConnectable:c,className:"!w-4 !h-4 !bg-transparent !border-none z-50 p-0",style:{right:"-8px",top:"50%",transform:"translateY(-50%)"},onMouseEnter:()=>k(!0),onMouseLeave:()=>k(!1),children:(0,e1.jsxs)(e4.motion.div,{className:"w-full h-full relative flex items-center justify-center pointer-events-none",animate:j?"hover":"initial",initial:"initial",children:[(0,e1.jsx)(e4.motion.div,{variants:{initial:{scale:1,opacity:0},hover:{scale:2,opacity:.4,transition:{repeat:1/0,duration:1}}},className:"absolute inset-0 rounded-full",style:{backgroundColor:D}}),(0,e1.jsx)(e4.motion.div,{variants:{initial:{scale:1},hover:{scale:1.25}},className:"w-full h-full rounded-full border-2 border-white dark:border-slate-700 shadow-md relative z-10",style:{backgroundColor:D},children:(0,e1.jsx)("div",{className:"absolute top-0.5 left-0.5 w-[30%] h-[30%] bg-white rounded-full opacity-40"})})]})})]}),b.settings?.displayNoteInFlow&&b.settings?.notes&&(0,e1.jsx)("div",{className:"absolute top-full mt-3 left-1/2 -translate-x-1/2 w-full min-w-[120px] max-w-[200px] z-0",children:(0,e1.jsx)("div",{className:"bg-amber-50/50 dark:bg-amber-900/20 backdrop-blur-sm border border-amber-200/50 dark:border-amber-700/30 rounded-lg p-2 shadow-sm animate-in fade-in slide-in-from-top-1 duration-300",children:(0,e1.jsxs)("div",{className:"flex items-start gap-1.5",children:[(0,e1.jsx)(fm,{className:"w-2.5 h-2.5 text-amber-500/50 mt-0.5 shrink-0"}),(0,e1.jsx)("p",{className:"text-[9px] text-amber-900/70 dark:text-amber-100/50 font-medium leading-relaxed italic line-clamp-3",children:b.settings.notes})]})})})]})});f8.displayName="BaseNode",a.s(["BaseNode",0,f8],59923);var f9=a.i(18544),ga=a.i(41579),gb=a.i(33791),gc=a.i(42871);function gd(a,b){let c=new Set(b);return a.filter(a=>!c.has(a))}var ge=class extends gb.Subscribable{#a;#b;#c;#d;#e;#f;#g;#h;#i=[];constructor(a,b,c){super(),this.#a=a,this.#d=c,this.#c=[],this.#e=[],this.#b=[],this.setQueries(b)}onSubscribe(){1===this.listeners.size&&this.#e.forEach(a=>{a.subscribe(b=>{this.#j(a,b)})})}onUnsubscribe(){this.listeners.size||this.destroy()}destroy(){this.listeners=new Set,this.#e.forEach(a=>{a.destroy()})}setQueries(a,b){this.#c=a,this.#d=b,f9.notifyManager.batch(()=>{let a=this.#e,b=this.#k(this.#c);this.#i=b,b.forEach(a=>a.observer.setOptions(a.defaultedQueryOptions));let c=b.map(a=>a.observer),d=c.map(a=>a.getCurrentResult()),e=a.length!==c.length,f=c.some((b,c)=>b!==a[c]),g=e||f,h=!!g||d.some((a,b)=>{let c=this.#b[b];return!c||!(0,gc.shallowEqualObjects)(a,c)});(g||h)&&(g&&(this.#e=c),this.#b=d,this.hasListeners()&&(g&&(gd(a,c).forEach(a=>{a.destroy()}),gd(c,a).forEach(a=>{a.subscribe(b=>{this.#j(a,b)})})),this.#l()))})}getCurrentResult(){return this.#b}getQueries(){return this.#e.map(a=>a.getCurrentQuery())}getObservers(){return this.#e}getOptimisticResult(a,b){let c=this.#k(a),d=c.map(a=>a.observer.getOptimisticResult(a.defaultedQueryOptions));return[d,a=>this.#m(a??d,b),()=>this.#n(d,c)]}#n(a,b){return b.map((c,d)=>{let e=a[d];return c.defaultedQueryOptions.notifyOnChangeProps?e:c.observer.trackResult(e,a=>{b.forEach(b=>{b.observer.trackProp(a)})})})}#m(a,b){return b?(this.#f&&this.#b===this.#h&&b===this.#g||(this.#g=b,this.#h=this.#b,this.#f=(0,gc.replaceEqualDeep)(this.#f,b(a))),this.#f):a}#k(a){let b=new Map;this.#e.forEach(a=>{let c=a.options.queryHash;if(!c)return;let d=b.get(c);d?d.push(a):b.set(c,[a])});let c=[];return a.forEach(a=>{let d=this.#a.defaultQueryOptions(a),e=b.get(d.queryHash)?.shift()??new ga.QueryObserver(this.#a,d);c.push({defaultedQueryOptions:d,observer:e})}),c}#j(a,b){let c=this.#e.indexOf(a);if(-1!==c){var d;let a;this.#b=(d=this.#b,(a=d.slice(0))[c]=b,a),this.#l()}}#l(){if(this.hasListeners()){let a=this.#f,b=this.#n(this.#b,this.#i);a!==this.#m(b,this.#d?.combine)&&f9.notifyManager.batch(()=>{this.listeners.forEach(a=>{a(this.#b)})})}}},gf=a.i(37927),gg=a.i(45232),gh=a.i(7967),gi=a.i(84184),gj=a.i(52170);function gk({queries:a,...b},c){let d=(0,gf.useQueryClient)(c),e=(0,gg.useIsRestoring)(),f=(0,gh.useQueryErrorResetBoundary)(),g=o.useMemo(()=>a.map(a=>{let b=d.defaultQueryOptions(a);return b._optimisticResults=e?"isRestoring":"optimistic",b}),[a,d,e]);g.forEach(a=>{(0,gj.ensureSuspenseTimers)(a),(0,gi.ensurePreventErrorBoundaryRetry)(a,f)}),(0,gi.useClearResetErrorBoundary)(f);let[h]=o.useState(()=>new ge(d,g,b)),[i,j,k]=h.getOptimisticResult(g,b.combine),l=!e&&!1!==b.subscribed;o.useSyncExternalStore(o.useCallback(a=>l?h.subscribe(f9.notifyManager.batchCalls(a)):gc.noop,[h,l]),()=>h.getCurrentResult(),()=>h.getCurrentResult()),o.useEffect(()=>{h.setQueries(g,b)},[g,b,h]);let m=i.some((a,b)=>(0,gj.shouldSuspend)(g[b],a))?i.flatMap((a,b)=>{let c=g[b];if(c){let b=new ga.QueryObserver(d,c);if((0,gj.shouldSuspend)(c,a))return(0,gj.fetchOptimistic)(c,b,f);(0,gj.willFetch)(a,e)&&(0,gj.fetchOptimistic)(c,b,f)}return[]}):[];if(m.length>0)throw Promise.all(m);let n=i.find((a,b)=>{let c=g[b];return c&&(0,gi.getHasError)({result:a,errorResetBoundary:f,throwOnError:c.throwOnError,query:d.getQueryCache().get(c.queryHash),suspense:c.suspense})});if(n?.error)throw n.error;return j(k())}a.s(["useQueries",()=>gk],49651);let gl=(0,e2.default)("info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);a.s(["Info",()=>gl],97063);let gm=(0,e2.default)("type",[["path",{d:"M12 4v16",key:"1654pz"}],["path",{d:"M4 7V5a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1v2",key:"e0r10z"}],["path",{d:"M9 20h6",key:"s66wpe"}]]);a.s(["Type",()=>gm],34148);let gn=(0,e2.default)("hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]);a.s(["Hash",()=>gn],2835)},51747,60246,26228,41675,98294,a=>{"use strict";let b;var c,d,e,f,g,h=a.i(87924),i=a.i(72131),j=a.i(12998),k=a.i(62036),l=a.i(27875);a.i(27015),a.i(98592),a.i(70978);var m=a.i(59923),n=a.i(49651),o=a.i(33508),p=a.i(97063),q=a.i(5784),r=a.i(34148),s=a.i(2835),t=a.i(67329),u=a.i(54074),v=a.i(20494),w=a.i(81402),x=a.i(1027),y=a.i(21161),z=a.i(60137);(0,z.default)("circle-question-mark",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);var A=a.i(92e3);a.i(4720);var B=a.i(15618);let C=(0,z.default)("trash",[["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]);var D=a.i(21601),E=a.i(25015),F=a.i(46271),G=a.i(97895),H=a.i(12466),I=a.i(96221),J=a.i(43108);let K=(0,z.default)("link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]),L=(0,z.default)("shield-check",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);var M=a.i(44494),N=a.i(81560),O=a.i(68976);let P=(0,z.default)("external-link",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);var Q=a.i(90200),R=a.i(22812),S=a.i(37927),T=a.i(24007),U=a.i(42447);let V={google_sheets:{fields:[{name:"client_id",label:"Client ID",type:"text",required:!0,placeholder:"Enter your Client ID"},{name:"client_secret",label:"Client Secret",type:"password",required:!0,placeholder:"Enter your Client Secret"}],help:"You can find these in your Google Cloud Console under APIs & Services > Credentials."},slack:{fields:[{name:"client_id",label:"Client ID",type:"text",required:!0,placeholder:"Enter your Client ID"},{name:"client_secret",label:"Client Secret",type:"password",required:!0,placeholder:"Enter your Client Secret"},{name:"bot_token",label:"Bot User OAuth Token",type:"password",required:!0,placeholder:"xoxb-..."},{name:"refresh_token",label:"Refresh Token (Optional)",type:"password",placeholder:"xoxe-..."}],help:'Create a Slack App and look for these in the "Basic Information" and "OAuth & Permissions" sections.'},discord:{fields:[{name:"bot_token",label:"Discord Bot Token",type:"password",required:!0,placeholder:"Enter your bot token"}],help:'Generate this token in the Discord Developer Portal under the "Bot" tab of your application.'},generic:{fields:[{name:"api_key",label:"API Key",type:"password",required:!0,placeholder:"Enter your API key"}]},ai_provider:{fields:[{name:"provider",label:"Provider",type:"select",required:!0,options:[{label:"OpenRouter",value:"openrouter"},{label:"OpenAI",value:"openai"},{label:"Anthropic",value:"anthropic"},{label:"Gemini",value:"gemini"},{label:"Custom (OpenAI Compatible)",value:"ai_provider"}],default:"openrouter"},{name:"api_key",label:"API Key",type:"password",required:!0,placeholder:"sk-..."},{name:"base_url",label:"Base URL (Optional)",type:"text",placeholder:"https://openrouter.ai/api/v1"}],help:"Provide your AI platform credentials. For OpenRouter, use https://openrouter.ai/api/v1 as Base URL."}},W=({value:a,onChange:b,credentialType:c,label:d})=>{let e=(0,S.useQueryClient)(),{data:f=[],isLoading:g}=(0,R.useCredentialsByType)(c),j=(0,R.useCreateCredential)(),l=(0,R.useDeleteCredential)(),[m,n]=(0,i.useState)(!1),[r,s]=(0,i.useState)(!1),[t,u]=(0,i.useState)("oauth"),[v,y]=(0,i.useState)({name:""}),[z,A]=(0,i.useState)(null),C=["google_sheets","slack","discord"].includes(c),D=V[c]||V.generic,E=f.find(b=>b.id===a),W=(0,i.useCallback)(()=>{let a={name:""};return D.fields.forEach(b=>{b.default&&(a[b.name]=b.default)}),a},[D]);(0,i.useEffect)(()=>{C?u("oauth"):u("manual")},[c,C]),(0,i.useEffect)(()=>{m&&(y(W()),A(null))},[m,W]);let X=async()=>{if(!v.name)return void A("Please provide a name for this account");A(null);let{name:a,...d}=v;j.mutate({name:a,type:c,data:d},{onSuccess:a=>{b(a.id),n(!1),y(W())},onError:a=>{A(a instanceof Error?a.message:"Failed to create credential")}})},Y=async(c,d)=>{d.stopPropagation(),confirm("Are you sure you want to delete this credential?")&&l.mutate(c,{onSuccess:()=>{a===c&&b("")},onError:a=>{U.workflowLogger.error("Failed to delete credential",a)}})};return(0,h.jsxs)("div",{className:"relative w-full",children:[(0,h.jsx)("div",{className:"space-y-1.5",children:(0,h.jsxs)("div",{onClick:()=>!m&&s(!r),className:(0,G.cn)("group flex items-center justify-between w-full h-10 px-4 bg-muted/20 border border-border rounded-md cursor-pointer transition-all hover:border-primary/50",r&&"ring-1 ring-primary/50 border-primary/50",m&&"opacity-50 pointer-events-none"),children:[(0,h.jsxs)("div",{className:"flex items-center gap-3 overflow-hidden",children:[(0,h.jsx)("div",{className:"p-1 px-1.5 rounded bg-primary/10 text-primary",children:(0,h.jsx)(w.Key,{className:"w-3.5 h-3.5"})}),E?(0,h.jsx)("span",{className:"text-[11px] font-bold truncate",children:E.name}):(0,h.jsxs)("span",{className:"text-[11px] text-muted-foreground/60 font-bold uppercase tracking-widest",children:["Select ",d||"Account"]})]}),(0,h.jsxs)("div",{className:"flex items-center gap-2",children:[g&&(0,h.jsx)(I.Loader2,{className:"w-3 h-3 animate-spin text-primary/50"}),(0,h.jsx)(q.ChevronDown,{className:(0,G.cn)("w-3.5 h-3.5 text-muted-foreground transition-transform",r&&"rotate-180")})]})]})}),(0,h.jsx)(k.AnimatePresence,{children:r&&(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)("div",{className:"fixed inset-0 z-[110]",onClick:()=>s(!1)}),(0,h.jsxs)(F.motion.div,{initial:{opacity:0,y:4,scale:.98},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:4,scale:.98},className:"absolute top-full mt-2 left-0 w-full bg-background border border-border rounded-md shadow-2xl z-[120] overflow-hidden",children:[(0,h.jsxs)("div",{className:"max-h-[240px] overflow-y-auto p-1.5 space-y-1 custom-scrollbar",children:[0===f.length&&!g&&(0,h.jsxs)("div",{className:"py-8 text-center opacity-30 flex flex-col items-center gap-2",children:[(0,h.jsx)(L,{className:"w-6 h-6 stroke-1"}),(0,h.jsx)("span",{className:"text-[9px] font-bold uppercase",children:"No Accounts Added"})]}),f.map(c=>(0,h.jsxs)("div",{onClick:()=>{b(c.id),s(!1)},className:(0,G.cn)("flex items-center justify-between px-3 py-2 rounded-sm cursor-pointer transition-all group/item",a===c.id?"bg-primary/10 text-primary border border-primary/20":"hover:bg-muted/50 border border-transparent"),children:[(0,h.jsxs)("div",{className:"flex items-center gap-3",children:[(0,h.jsx)("div",{className:(0,G.cn)("h-1.5 w-1.5 rounded-full",a===c.id?"bg-primary":"bg-muted-foreground/30")}),(0,h.jsx)("span",{className:"text-[10px] font-bold",children:c.name})]}),(0,h.jsx)("button",{onClick:a=>Y(c.id,a),className:"opacity-0 group-hover/item:opacity-100 p-1.5 hover:bg-destructive/10 hover:text-destructive rounded-sm transition-all",children:(0,h.jsx)(N.Trash2,{className:"w-3 h-3"})})]},c.id))]}),(0,h.jsx)("div",{className:"p-1.5 bg-muted/20 border-t border-border mt-1",children:(0,h.jsxs)("button",{onClick:()=>{n(!0),s(!1)},className:"flex items-center justify-center gap-2 w-full py-2.5 rounded-sm bg-primary/5 hover:bg-primary/10 text-primary transition-all border border-primary/20 border-dashed",children:[(0,h.jsx)(B.Plus,{className:"w-3.5 h-3.5"}),(0,h.jsx)("span",{className:"text-[10px] font-black uppercase tracking-widest",children:"Connect New Account"})]})})]})]})}),(0,h.jsx)(k.AnimatePresence,{children:m&&(0,h.jsx)("div",{className:"fixed inset-0 z-[150] flex items-center justify-center p-6 bg-background/90 backdrop-blur-xl",children:(0,h.jsxs)(F.motion.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},className:"w-[500px] bg-background border border-border rounded-lg shadow-[0_32px_128px_-32px_rgba(0,0,0,0.5)] overflow-hidden flex flex-col",children:[(0,h.jsxs)("header",{className:"px-6 py-5 border-b border-border bg-muted/20 flex items-center justify-between",children:[(0,h.jsxs)("div",{className:"flex items-center gap-3",children:[(0,h.jsx)("div",{className:"h-10 w-10 rounded-md bg-primary/10 text-primary flex items-center justify-center border border-primary/20",children:(0,h.jsx)(M.Globe,{className:"w-5 h-5"})}),(0,h.jsxs)("div",{children:[(0,h.jsxs)("h3",{className:"text-sm font-black uppercase tracking-widest leading-none mb-1",children:["New ",d||"Account"]}),(0,h.jsxs)("p",{className:"text-[9px] text-muted-foreground/50 uppercase font-bold tracking-tighter",children:["Connection Bridge / ",c]})]})]}),(0,h.jsx)("button",{onClick:()=>n(!1),className:"p-2 hover:bg-destructive/10 hover:text-destructive rounded-md transition-all",children:(0,h.jsx)(o.X,{className:"w-4 h-4"})})]}),(0,h.jsxs)("div",{className:"p-8 space-y-6",children:[C&&(0,h.jsxs)("div",{className:"flex p-1 bg-muted/20 border border-border rounded-md shrink-0",children:[(0,h.jsxs)("button",{onClick:()=>u("oauth"),className:(0,G.cn)("flex-1 flex items-center justify-center gap-2 py-2 rounded-sm text-[10px] font-black uppercase tracking-widest transition-all","oauth"===t?"bg-background text-primary shadow-sm":"text-muted-foreground hover:text-foreground"),children:[(0,h.jsx)(x.Zap,{className:"w-3 h-3"}),"OAuth 2.0"]}),(0,h.jsxs)("button",{onClick:()=>u("manual"),className:(0,G.cn)("flex-1 flex items-center justify-center gap-2 py-2 rounded-sm text-[10px] font-black uppercase tracking-widest transition-all","manual"===t?"bg-background text-primary shadow-sm":"text-muted-foreground hover:text-foreground"),children:[(0,h.jsx)(O.Edit3,{className:"w-3 h-3"}),"Manual Setup"]})]}),(0,h.jsx)(k.AnimatePresence,{mode:"wait",children:"oauth"===t?(0,h.jsx)(F.motion.div,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},exit:{opacity:0,x:10},className:"space-y-6",children:(0,h.jsxs)("div",{className:"p-6 rounded-md border border-dashed border-border flex flex-col items-center gap-4 text-center",children:[(0,h.jsxs)("div",{className:"h-16 w-16 rounded-xl bg-muted/50 flex items-center justify-center shadow-inner",children:["google_sheets"===c&&(0,h.jsx)(T.LogoGoogleSheets,{className:"w-8 h-8"}),"slack"===c&&(0,h.jsx)(x.Zap,{className:"w-8 h-8 text-[#E01E5A]"}),"discord"===c&&(0,h.jsx)(x.Zap,{className:"w-8 h-8 text-[#5865F2]"})]}),(0,h.jsxs)("div",{className:"space-y-1",children:[(0,h.jsx)("h4",{className:"text-xs font-bold uppercase tracking-wider",children:"Fast Authentication"}),(0,h.jsxs)("p",{className:"text-[10px] text-muted-foreground leading-relaxed max-w-[280px]",children:["We'll handle the connection securely via ",c.replace("_"," "),"'s official OAuth portal."]})]}),(0,h.jsxs)(H.Button,{onClick:()=>{A(null);let a=`${Q.API_V1}/credentials/oauth/${c}/authorize`,d=window.screen.width/2-300,f=window.screen.height/2-350;if(!window.open(a,`Connect ${c}`,`width=600,height=700,left=${d},top=${f},scrollbars=yes,resizable=yes`))return void A("Popup blocked. Please allow popups.");let g=a=>{if(a.data?.type==="OAUTH_SUCCESS"){let{credentialId:d}=a.data;e.invalidateQueries({queryKey:R.credentialKeys.byType(c)}),b(d),n(!1),window.removeEventListener("message",g)}};window.addEventListener("message",g)},className:"w-full h-12 rounded-md bg-primary text-primary-foreground font-black uppercase tracking-widest text-[10px] shadow-lg shadow-primary/20 flex items-center justify-center gap-3",children:[(0,h.jsx)(P,{className:"w-4 h-4"}),"Sign in to ",c.replace("_"," ").replace(/\b\w/g,a=>a.toUpperCase())]})]})},"oauth"):(0,h.jsxs)(F.motion.div,{initial:{opacity:0,x:10},animate:{opacity:1,x:0},exit:{opacity:0,x:-10},className:"space-y-6",children:[D.help&&(0,h.jsxs)("div",{className:"p-4 rounded-md bg-amber-500/5 border border-amber-500/10 flex gap-3",children:[(0,h.jsx)(p.Info,{className:"w-4 h-4 text-amber-500 shrink-0"}),(0,h.jsx)("p",{className:"text-[10px] text-muted-foreground leading-relaxed",children:D.help})]}),(0,h.jsxs)("div",{className:"space-y-4",children:[(0,h.jsxs)("div",{className:"space-y-2",children:[(0,h.jsx)("label",{className:"text-[10px] font-black text-muted-foreground uppercase tracking-widest ml-1",children:"Account Label"}),(0,h.jsx)("input",{className:"w-full h-11 px-4 bg-muted/20 border border-border rounded-md text-xs focus:ring-1 focus:ring-primary/50 outline-none transition-all placeholder:text-muted-foreground/30 font-bold",placeholder:"e.g. Primary Workspace",value:v.name,onChange:a=>y({...v,name:a.target.value}),autoFocus:!0})]}),D.fields.map(a=>(0,h.jsxs)("div",{className:"space-y-2",children:[(0,h.jsxs)("label",{className:"text-[10px] font-black text-muted-foreground uppercase tracking-widest ml-1",children:[a.label,a.required&&(0,h.jsx)("span",{className:"text-primary ml-1",children:"*"})]}),(0,h.jsxs)("div",{className:"relative group/input",children:[(0,h.jsx)("div",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-muted-foreground/40 pointer-events-none group-focus-within/input:text-primary transition-colors",children:"password"===a.type?(0,h.jsx)(J.Lock,{className:"w-3.5 h-3.5"}):"select"===a.type?(0,h.jsx)(M.Globe,{className:"w-3.5 h-3.5"}):(0,h.jsx)(K,{className:"w-3.5 h-3.5"})}),"select"===a.type?(0,h.jsxs)("select",{className:"w-full h-11 pl-10 pr-10 bg-muted/20 border border-border rounded-md text-xs focus:ring-1 focus:ring-primary/50 outline-none transition-all appearance-none font-bold",value:v[a.name]||a.default||"",onChange:b=>y({...v,[a.name]:b.target.value}),children:[(0,h.jsx)("option",{value:"",disabled:!0,children:"Select Provider..."}),a.options?.map(a=>(0,h.jsx)("option",{value:a.value,children:a.label},a.value))]}):(0,h.jsx)("input",{type:a.type,className:"w-full h-11 pl-10 pr-4 bg-muted/20 border border-border rounded-md text-xs focus:ring-1 focus:ring-primary/50 outline-none transition-all placeholder:text-muted-foreground/20 font-mono",placeholder:a.placeholder,value:v[a.name]||"",onChange:b=>y({...v,[a.name]:b.target.value})}),"select"===a.type&&(0,h.jsx)("div",{className:"absolute right-4 top-1/2 -translate-y-1/2 text-muted-foreground/30 pointer-events-none",children:(0,h.jsx)(q.ChevronDown,{className:"w-3.5 h-3.5"})})]})]},a.name))]})]},"manual")}),z&&(0,h.jsxs)("div",{className:"p-3 rounded-md bg-destructive/10 border border-destructive/20 text-destructive text-[10px] font-bold flex items-center gap-2",children:[(0,h.jsx)(o.X,{className:"w-3 h-3"}),z]})]}),(0,h.jsxs)("footer",{className:"px-6 py-5 border-t border-border bg-muted/10 flex items-center justify-between",children:[(0,h.jsx)(H.Button,{variant:"ghost",onClick:()=>n(!1),className:"px-6 h-10 rounded-md text-[10px] font-black uppercase tracking-widest",children:"Cancel"}),"manual"===t&&(0,h.jsxs)(H.Button,{onClick:X,disabled:j.isPending||!v.name,className:"px-8 h-10 rounded-md bg-primary text-primary-foreground font-black uppercase tracking-widest text-[10px] shadow-lg shadow-primary/20 hover:scale-[1.02] active:scale-95 transition-all flex items-center gap-2",children:[j.isPending?(0,h.jsx)(I.Loader2,{className:"w-3.5 h-3.5 animate-spin"}):(0,h.jsx)(L,{className:"w-3.5 h-3.5"}),j.isPending?"Creating...":"Securely Connect"]})]})]})})})]})};function X(a,b){(null==b||b>a.length)&&(b=a.length);for(var c=0,d=Array(b);c<b;c++)d[c]=a[c];return d}function Y(a,b){var c=Object.keys(a);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(a);b&&(d=d.filter(function(b){return Object.getOwnPropertyDescriptor(a,b).enumerable})),c.push.apply(c,d)}return c}function Z(a){for(var b=1;b<arguments.length;b++){var c=null!=arguments[b]?arguments[b]:{};b%2?Y(Object(c),!0).forEach(function(b){var d;d=c[b],b in a?Object.defineProperty(a,b,{value:d,enumerable:!0,configurable:!0,writable:!0}):a[b]=d}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(c)):Y(Object(c)).forEach(function(b){Object.defineProperty(a,b,Object.getOwnPropertyDescriptor(c,b))})}return a}function $(a){return function b(){for(var c=this,d=arguments.length,e=Array(d),f=0;f<d;f++)e[f]=arguments[f];return e.length>=a.length?a.apply(this,e):function(){for(var a=arguments.length,d=Array(a),f=0;f<a;f++)d[f]=arguments[f];return b.apply(c,[].concat(e,d))}}}function _(a){return({}).toString.call(a).includes("Object")}function aa(a){return"function"==typeof a}var ab=$(function(a,b){throw Error(a[b]||a.default)})({initialIsRequired:"initial state is required",initialType:"initial state should be an object",initialContent:"initial state shouldn't be an empty object",handlerType:"handler should be an object or a function",handlersType:"all handlers should be a functions",selectorType:"selector should be a function",changeType:"provided value of changes should be an object",changeField:'it seams you want to change a field in the state which is not specified in the "initial" state',default:"an unknown error accured in `state-local` package"}),ac=function(a,b){return _(b)||ab("changeType"),Object.keys(b).some(function(b){return!Object.prototype.hasOwnProperty.call(a,b)})&&ab("changeField"),b},ad=function(a){aa(a)||ab("selectorType")},ae=function(a){aa(a)||_(a)||ab("handlerType"),_(a)&&Object.values(a).some(function(a){return!aa(a)})&&ab("handlersType")},af=function(a){a||ab("initialIsRequired"),_(a)||ab("initialType"),Object.keys(a).length||ab("initialContent")};function ag(a,b){return aa(b)?b(a.current):b}function ah(a,b){return a.current=Z(Z({},a.current),b),b}function ai(a,b,c){return aa(b)?b(a.current):Object.keys(c).forEach(function(c){var d;return null==(d=b[c])?void 0:d.call(b,a.current[c])}),c}var aj={configIsRequired:"the configuration object is required",configType:"the configuration object should be an object",default:"an unknown error accured in `@monaco-editor/loader` package",deprecation:"Deprecation warning!\n    You are using deprecated way of configuration.\n\n    Instead of using\n      monaco.config({ urls: { monacoBase: '...' } })\n    use\n      monaco.config({ paths: { vs: '...' } })\n\n    For more please check the link https://github.com/suren-atoyan/monaco-loader#config\n  "},ak=(c=function(a,b){throw Error(a[b]||a.default)},function a(){for(var b=this,d=arguments.length,e=Array(d),f=0;f<d;f++)e[f]=arguments[f];return e.length>=c.length?c.apply(this,e):function(){for(var c=arguments.length,d=Array(c),f=0;f<c;f++)d[f]=arguments[f];return a.apply(b,[].concat(e,d))}})(aj),al=function(){for(var a=arguments.length,b=Array(a),c=0;c<a;c++)b[c]=arguments[c];return function(a){return b.reduceRight(function(a,b){return b(a)},a)}},am={type:"cancelation",msg:"operation is manually canceled"};function an(a){var b=!1,c=new Promise(function(c,d){a.then(function(a){return b?d(am):c(a)}),a.catch(d)});return c.cancel=function(){return b=!0},c}var ao=function(a){if(Array.isArray(a))return a}(d=({create:function(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};af(a),ae(b);var c={current:a},d=$(ai)(c,b),e=$(ah)(c),f=$(ac)(a),g=$(ag)(c);return[function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(a){return a};return ad(a),a(c.current)},function(a){(function(){for(var a=arguments.length,b=Array(a),c=0;c<a;c++)b[c]=arguments[c];return function(a){return b.reduceRight(function(a,b){return b(a)},a)}})(d,e,f,g)(a)}]}}).create({config:{paths:{vs:"https://cdn.jsdelivr.net/npm/monaco-editor@0.55.1/min/vs"}},isInitialized:!1,resolve:null,reject:null,monaco:null}))||function(a,b){var c=null==a?null:"undefined"!=typeof Symbol&&a[Symbol.iterator]||a["@@iterator"];if(null!=c){var d,e,f,g,h=[],i=!0,j=!1;try{f=(c=c.call(a)).next,!1;for(;!(i=(d=f.call(c)).done)&&(h.push(d.value),2!==h.length);i=!0);}catch(a){j=!0,e=a}finally{try{if(!i&&null!=c.return&&(g=c.return(),Object(g)!==g))return}finally{if(j)throw e}}return h}}(d,2)||function(a,b){if(a){if("string"==typeof a)return X(a,2);var c=({}).toString.call(a).slice(8,-1);return"Object"===c&&a.constructor&&(c=a.constructor.name),"Map"===c||"Set"===c?Array.from(a):"Arguments"===c||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c)?X(a,2):void 0}}(d,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),ap=ao[0],aq=ao[1];function ar(a){return document.body.appendChild(a)}function as(a){var b,c,d=ap(function(a){return{config:a.config,reject:a.reject}}),e=(b="".concat(d.config.paths.vs,"/loader.js"),c=document.createElement("script"),b&&(c.src=b),c);return e.onload=function(){return a()},e.onerror=d.reject,e}function at(){var a=ap(function(a){return{config:a.config,resolve:a.resolve,reject:a.reject}}),b=window.require;b.config(a.config),b(["vs/editor/editor.main"],function(b){var c=b.m||b;au(c),a.resolve(c)},function(b){a.reject(b)})}function au(a){ap().monaco||aq({monaco:a})}var av=new Promise(function(a,b){return aq({resolve:a,reject:b})}),aw=function(){var a=ap(function(a){return{monaco:a.monaco,isInitialized:a.isInitialized,resolve:a.resolve}});if(!a.isInitialized){if(aq({isInitialized:!0}),a.monaco)return a.resolve(a.monaco),an(av);if(window.monaco&&window.monaco.editor)return au(window.monaco),a.resolve(window.monaco),an(av);al(ar,as)(at)}return an(av)},ax={display:"flex",position:"relative",textAlign:"initial"},ay={width:"100%"},az={display:"none"},aA={display:"flex",height:"100%",width:"100%",justifyContent:"center",alignItems:"center"},aB=function({children:a}){return i.default.createElement("div",{style:aA},a)},aC=(0,i.memo)(function({width:a,height:b,isEditorReady:c,loading:d,_ref:e,className:f,wrapperProps:g}){return i.default.createElement("section",{style:{...ax,width:a,height:b},...g},!c&&i.default.createElement(aB,null,d),i.default.createElement("div",{ref:e,style:{...ay,...!c&&az},className:f}))}),aD=function(a){(0,i.useEffect)(a,[])},aE=function(a,b,c=!0){let d=(0,i.useRef)(!0);(0,i.useEffect)(d.current||!c?()=>{d.current=!1}:a,b)};function aF(){}function aG(a,b,c,d){var e,f,g,h,i,j;return e=a,f=d,e.editor.getModel(aH(e,f))||(g=a,h=b,i=c,j=d,g.editor.createModel(h,i,j?aH(g,j):void 0))}function aH(a,b){return a.Uri.parse(b)}(0,i.memo)(function({original:a,modified:b,language:c,originalLanguage:d,modifiedLanguage:e,originalModelPath:f,modifiedModelPath:g,keepCurrentOriginalModel:h=!1,keepCurrentModifiedModel:j=!1,theme:k="light",loading:l="Loading...",options:m={},height:n="100%",width:o="100%",className:p,wrapperProps:q={},beforeMount:r=aF,onMount:s=aF}){let[t,u]=(0,i.useState)(!1),[v,w]=(0,i.useState)(!0),x=(0,i.useRef)(null),y=(0,i.useRef)(null),z=(0,i.useRef)(null),A=(0,i.useRef)(s),B=(0,i.useRef)(r),C=(0,i.useRef)(!1);aD(()=>{let a=aw();return a.then(a=>(y.current=a)&&w(!1)).catch(a=>a?.type!=="cancelation"&&console.error("Monaco initialization: error:",a)),()=>{let b;return x.current?(b=x.current?.getModel(),void(h||b?.original?.dispose(),j||b?.modified?.dispose(),x.current?.dispose())):a.cancel()}}),aE(()=>{if(x.current&&y.current){let b=x.current.getOriginalEditor(),e=aG(y.current,a||"",d||c||"text",f||"");e!==b.getModel()&&b.setModel(e)}},[f],t),aE(()=>{if(x.current&&y.current){let a=x.current.getModifiedEditor(),d=aG(y.current,b||"",e||c||"text",g||"");d!==a.getModel()&&a.setModel(d)}},[g],t),aE(()=>{let a=x.current.getModifiedEditor();a.getOption(y.current.editor.EditorOption.readOnly)?a.setValue(b||""):b!==a.getValue()&&(a.executeEdits("",[{range:a.getModel().getFullModelRange(),text:b||"",forceMoveMarkers:!0}]),a.pushUndoStop())},[b],t),aE(()=>{x.current?.getModel()?.original.setValue(a||"")},[a],t),aE(()=>{let{original:a,modified:b}=x.current.getModel();y.current.editor.setModelLanguage(a,d||c||"text"),y.current.editor.setModelLanguage(b,e||c||"text")},[c,d,e],t),aE(()=>{y.current?.editor.setTheme(k)},[k],t),aE(()=>{x.current?.updateOptions(m)},[m],t);let D=(0,i.useCallback)(()=>{if(!y.current)return;B.current(y.current);let h=aG(y.current,a||"",d||c||"text",f||""),i=aG(y.current,b||"",e||c||"text",g||"");x.current?.setModel({original:h,modified:i})},[c,b,e,a,d,f,g]),E=(0,i.useCallback)(()=>{!C.current&&z.current&&(x.current=y.current.editor.createDiffEditor(z.current,{automaticLayout:!0,...m}),D(),y.current?.editor.setTheme(k),u(!0),C.current=!0)},[m,k,D]);return(0,i.useEffect)(()=>{t&&A.current(x.current,y.current)},[t]),(0,i.useEffect)(()=>{v||t||E()},[v,t,E]),i.default.createElement(aC,{width:o,height:n,isEditorReady:t,loading:l,_ref:z,className:p,wrapperProps:q})});var aI=function(a){let b=(0,i.useRef)();return(0,i.useEffect)(()=>{b.current=a},[a]),b.current},aJ=new Map,aK=(0,i.memo)(function({defaultValue:a,defaultLanguage:b,defaultPath:c,value:d,language:e,path:f,theme:g="light",line:h,loading:j="Loading...",options:k={},overrideServices:l={},saveViewState:m=!0,keepCurrentModel:n=!1,width:o="100%",height:p="100%",className:q,wrapperProps:r={},beforeMount:s=aF,onMount:t=aF,onChange:u,onValidate:v=aF}){let[w,x]=(0,i.useState)(!1),[y,z]=(0,i.useState)(!0),A=(0,i.useRef)(null),B=(0,i.useRef)(null),C=(0,i.useRef)(null),D=(0,i.useRef)(t),E=(0,i.useRef)(s),F=(0,i.useRef)(),G=(0,i.useRef)(d),H=aI(f),I=(0,i.useRef)(!1),J=(0,i.useRef)(!1);aD(()=>{let a=aw();return a.then(a=>(A.current=a)&&z(!1)).catch(a=>a?.type!=="cancelation"&&console.error("Monaco initialization: error:",a)),()=>B.current?void(F.current?.dispose(),n?m&&aJ.set(f,B.current.saveViewState()):B.current.getModel()?.dispose(),B.current.dispose()):a.cancel()}),aE(()=>{let g=aG(A.current,a||d||"",b||e||"",f||c||"");g!==B.current?.getModel()&&(m&&aJ.set(H,B.current?.saveViewState()),B.current?.setModel(g),m&&B.current?.restoreViewState(aJ.get(f)))},[f],w),aE(()=>{B.current?.updateOptions(k)},[k],w),aE(()=>{B.current&&void 0!==d&&(B.current.getOption(A.current.editor.EditorOption.readOnly)?B.current.setValue(d):d!==B.current.getValue()&&(J.current=!0,B.current.executeEdits("",[{range:B.current.getModel().getFullModelRange(),text:d,forceMoveMarkers:!0}]),B.current.pushUndoStop(),J.current=!1))},[d],w),aE(()=>{let a=B.current?.getModel();a&&e&&A.current?.editor.setModelLanguage(a,e)},[e],w),aE(()=>{void 0!==h&&B.current?.revealLine(h)},[h],w),aE(()=>{A.current?.editor.setTheme(g)},[g],w);let K=(0,i.useCallback)(()=>{if(!(!C.current||!A.current)&&!I.current){E.current(A.current);let i=f||c,j=aG(A.current,d||a||"",b||e||"",i||"");B.current=A.current?.editor.create(C.current,{model:j,automaticLayout:!0,...k},l),m&&B.current.restoreViewState(aJ.get(i)),A.current.editor.setTheme(g),void 0!==h&&B.current.revealLine(h),x(!0),I.current=!0}},[a,b,c,d,e,f,k,l,m,g,h]);return(0,i.useEffect)(()=>{w&&D.current(B.current,A.current)},[w]),(0,i.useEffect)(()=>{y||w||K()},[y,w,K]),G.current=d,(0,i.useEffect)(()=>{w&&u&&(F.current?.dispose(),F.current=B.current?.onDidChangeModelContent(a=>{J.current||u(B.current.getValue(),a)}))},[w,u]),(0,i.useEffect)(()=>{if(w){let a=A.current.editor.onDidChangeMarkers(a=>{let b=B.current.getModel()?.uri;if(b&&a.find(a=>a.path===b.path)){let a=A.current.editor.getModelMarkers({resource:b});v?.(a)}});return()=>{a?.dispose()}}return()=>{}},[w,v]),i.default.createElement(aC,{width:o,height:p,isEditorReady:w,loading:j,_ref:C,className:q,wrapperProps:r})}),aL=a.i(16201),aM=a.i(62722);let aN=(0,z.default)("maximize-2",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"m21 3-7 7",key:"1l2asr"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M9 21H3v-6",key:"wtvkvv"}]]),aO=(0,z.default)("minimize-2",[["path",{d:"m14 10 7-7",key:"oa77jy"}],["path",{d:"M20 10h-6V4",key:"mjg0md"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M4 14h6v6",key:"rmj7iw"}]]);var aP=a.i(70279);let aQ=({value:a,onChange:b,language:c,height:d="400px",nodeId:e,workflowId:f})=>{let g=(0,aP.useExecuteCode)(),[j,k]=(0,i.useState)(""),[l,m]=(0,i.useState)(""),[n,o]=(0,i.useState)(!1),p=async()=>{k(""),m(""),g.mutate({code:a,language:c,inputData:e||f?{node_id:e,workflow_id:f}:void 0},{onSuccess:a=>{k(a.output||"Code executed successfully!")},onError:a=>{m(a.message||"Failed to execute code")}})};return(0,h.jsxs)("div",{className:`relative ${n?"fixed inset-0 z-50 bg-background p-4":""}`,children:[(0,h.jsxs)("div",{className:"flex items-center justify-between mb-2 px-1",children:[(0,h.jsxs)("div",{className:"flex items-center gap-2",children:[(0,h.jsx)("span",{className:"text-xs font-bold text-muted-foreground uppercase tracking-wider",children:"python"===c?" Python":" JavaScript"}),(0,h.jsxs)("span",{className:"text-xs text-muted-foreground",children:[a.split("\n").length," lines"]})]}),(0,h.jsxs)("div",{className:"flex items-center gap-2",children:[(0,h.jsx)(H.Button,{size:"sm",variant:"ghost",onClick:()=>o(!n),className:"h-7 px-2",children:n?(0,h.jsx)(aO,{className:"h-3.5 w-3.5"}):(0,h.jsx)(aN,{className:"h-3.5 w-3.5"})}),(0,h.jsx)(H.Button,{size:"sm",onClick:p,disabled:g.isPending||!a.trim(),className:"h-7 px-3",children:g.isPending?(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(I.Loader2,{className:"h-3.5 w-3.5 mr-1.5 animate-spin"}),"Running..."]}):(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(E.Play,{className:"h-3.5 w-3.5 mr-1.5"}),"Test Run"]})})]})]}),(0,h.jsx)("div",{className:"border border-border rounded-xl overflow-hidden shadow-lg",children:(0,h.jsx)(aK,{height:n?"calc(100vh - 200px)":d,defaultLanguage:c,language:c,value:a||("python"===c?`# Python Script
# Available variables:
# - input_data: Data from previous node
# - context: Workflow context

def main(input_data, context):
    # Your code here
    result = {
        "message": "Hello from Python!",
        "input": input_data
    }
    return result

# Return value will be passed to next node
return main(input_data, context)`:`// JavaScript Script
// Available variables:
// - inputData: Data from previous node
// - context: Workflow context

function main(inputData, context) {
    // Your code here
    const result = {
        message: "Hello from JavaScript!",
        input: inputData
    };
    return result;
}

// Return value will be passed to next node
return main(inputData, context);`),onChange:a=>{b(a||"")},theme:"vs-dark",options:{minimap:{enabled:!n},fontSize:14,lineNumbers:"on",roundedSelection:!0,scrollBeyondLastLine:!1,automaticLayout:!0,tabSize:"python"===c?4:2,insertSpaces:!0,wordWrap:"on",theme:"vs-dark",padding:{top:16,bottom:16}},loading:(0,h.jsx)("div",{className:"flex items-center justify-center h-full bg-slate-950",children:(0,h.jsx)(I.Loader2,{className:"h-8 w-8 animate-spin text-primary"})})})}),(j||l)&&(0,h.jsxs)("div",{className:"mt-3 border border-border rounded-xl overflow-hidden",children:[(0,h.jsx)("div",{className:`px-4 py-2 flex items-center gap-2 text-sm font-semibold ${l?"bg-destructive/10 text-destructive":"bg-emerald-500/10 text-emerald-500"}`,children:l?(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(aM.XCircle,{className:"h-4 w-4"}),"Execution Failed"]}):(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(aL.CheckCircle,{className:"h-4 w-4"}),"Execution Successful"]})}),(0,h.jsx)("div",{className:"p-4 bg-slate-950 text-slate-100 font-mono text-sm max-h-48 overflow-auto",children:(0,h.jsx)("pre",{className:"whitespace-pre-wrap",children:l||j})})]}),(0,h.jsxs)("div",{className:"mt-2 px-1 text-xs text-muted-foreground",children:[" Tip: Use ",(0,h.jsx)("code",{className:"px-1 py-0.5 bg-muted rounded",children:"input_data"})," to access data from the previous node. Press ",(0,h.jsx)("code",{className:"px-1 py-0.5 bg-muted rounded",children:"Ctrl/Cmd + S"})," to save."]})]})};var aR=a.i(11021);let aS=(0,z.default)("file-braces",[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 12a1 1 0 0 0-1 1v1a1 1 0 0 1-1 1 1 1 0 0 1 1 1v1a1 1 0 0 0 1 1",key:"1oajmo"}],["path",{d:"M14 18a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1 1 1 0 0 1-1-1v-1a1 1 0 0 0-1-1",key:"mpwhp6"}]]);var aT=a.i(90669);let aU=(0,z.default)("cpu",[["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M17 20v2",key:"1rnc9c"}],["path",{d:"M17 2v2",key:"11trls"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M2 17h2",key:"7oei6x"}],["path",{d:"M2 7h2",key:"asdhe0"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"M20 17h2",key:"1fpfkl"}],["path",{d:"M20 7h2",key:"1o8tra"}],["path",{d:"M7 20v2",key:"4gnj0m"}],["path",{d:"M7 2v2",key:"1i4yhu"}],["rect",{x:"4",y:"4",width:"16",height:"16",rx:"2",key:"1vbyd7"}],["rect",{x:"8",y:"8",width:"8",height:"8",rx:"1",key:"z9xiuo"}]]);var aV=a.i(34012),aW=a.i(59407),aX=a.i(19521),aY=a.i(31953),aZ=a.i(92759),a$=a.i(74788),a_=a.i(31462),a0=a.i(60252),a1=a.i(41815),a2=a.i(22617),a3=a.i(41710),a4=a.i(14753);let a5=(0,z.default)("sliders-vertical",[["path",{d:"M10 8h4",key:"1sr2af"}],["path",{d:"M12 21v-9",key:"17s77i"}],["path",{d:"M12 8V3",key:"13r4qs"}],["path",{d:"M17 16h4",key:"h1uq16"}],["path",{d:"M19 12V3",key:"o1uvq1"}],["path",{d:"M19 21v-5",key:"qua636"}],["path",{d:"M3 14h4",key:"bcjad9"}],["path",{d:"M5 10V3",key:"cb8scm"}],["path",{d:"M5 21v-7",key:"1w1uti"}]]),a6=(0,z.default)("table",[["path",{d:"M12 3v18",key:"108xh3"}],["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}]]),a7=(0,z.default)("braces",[["path",{d:"M8 3H7a2 2 0 0 0-2 2v5a2 2 0 0 1-2 2 2 2 0 0 1 2 2v5c0 1.1.9 2 2 2h1",key:"ezmyqa"}],["path",{d:"M16 21h1a2 2 0 0 0 2-2v-5c0-1.1.9-2 2-2a2 2 0 0 1-2-2V5a2 2 0 0 0-2-2h-1",key:"e1hn23"}]]),a8=(0,z.default)("binary",[["rect",{x:"14",y:"14",width:"4",height:"6",rx:"2",key:"p02svl"}],["rect",{x:"6",y:"4",width:"4",height:"6",rx:"2",key:"xm4xkj"}],["path",{d:"M6 20h4",key:"1i6q5t"}],["path",{d:"M14 10h4",key:"ru81e7"}],["path",{d:"M6 14h2v6",key:"16z9wg"}],["path",{d:"M14 4h2v6",key:"1idq9u"}]]);var a9=a.i(10948),ba=a.i(8406),bb=a.i(82434),bc=a.i(33441);let bd=({value:a,onChange:b,options:c,placeholder:d="Select...",disabled:e,className:f,itemIcon:g})=>{let[j,l]=(0,i.useState)(!1),m=(0,i.useRef)(null),n=c.find(b=>b.value===a);return(0,i.useEffect)(()=>{let a=a=>{m.current&&!m.current.contains(a.target)&&l(!1)};return document.addEventListener("mousedown",a),()=>document.removeEventListener("mousedown",a)},[]),(0,h.jsxs)("div",{className:(0,G.cn)("relative",f),ref:m,children:[(0,h.jsxs)("button",{type:"button",onClick:()=>!e&&l(!j),disabled:e,className:(0,G.cn)("w-full h-10 px-3 bg-muted/20 border border-border rounded-md text-xs text-left flex items-center justify-between transition-all focus:ring-1 focus:ring-primary/50 outline-none hover:bg-muted/30",e&&"opacity-50 cursor-not-allowed",j&&"ring-1 ring-primary/50 border-primary/50"),children:[(0,h.jsxs)("div",{className:"flex items-center gap-2 min-w-0 flex-1",children:[g&&(0,h.jsx)(g,{className:"w-3.5 h-3.5 shrink-0 opacity-70"}),(0,h.jsxs)("div",{className:"flex flex-col truncate",children:[(0,h.jsx)("span",{className:(0,G.cn)("font-medium truncate",!n&&"text-muted-foreground"),children:n?n.label:d}),n?.description&&(0,h.jsxs)("span",{className:"text-[9px] text-muted-foreground/70 truncate -mt-0.5",children:[n.description.split("")[0]," "]})]})]}),(0,h.jsx)(q.ChevronDown,{className:(0,G.cn)("w-3.5 h-3.5 text-muted-foreground transition-transform duration-200",j&&"rotate-180")})]}),(0,h.jsx)(k.AnimatePresence,{children:j&&(0,h.jsx)(F.motion.div,{initial:{opacity:0,y:5},animate:{opacity:1,y:0},exit:{opacity:0,y:5},transition:{duration:.15},className:"absolute top-full left-0 right-0 mt-1 z-50 bg-popover/95 backdrop-blur-xl border border-border shadow-2xl rounded-md overflow-hidden max-h-[300px] overflow-y-auto custom-scrollbar",children:0===c.length?(0,h.jsx)("div",{className:"p-3 text-[10px] text-muted-foreground text-center",children:"No options available"}):(0,h.jsx)("div",{className:"p-1 space-y-0.5",children:c.map(c=>(0,h.jsxs)("button",{onClick:()=>{b(c.value),l(!1)},className:(0,G.cn)("w-full text-left p-2 rounded-sm flex items-start gap-2 hover:bg-accent transition-colors group",c.value===a&&"bg-primary/10"),children:[(0,h.jsxs)("div",{className:"flex items-center gap-2 min-w-0 flex-1 overflow-hidden",children:[g&&(0,h.jsx)(g,{className:"w-3.5 h-3.5 opacity-70 shrink-0"}),(0,h.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,h.jsx)("div",{className:(0,G.cn)("text-xs font-medium truncate",c.value===a?"text-primary":"text-foreground"),children:c.label}),c.description&&(0,h.jsx)("div",{className:"text-[10px] text-muted-foreground truncate opacity-70 group-hover:opacity-100",children:c.description})]})]}),c.value===a&&(0,h.jsx)(bc.Check,{className:"w-3.5 h-3.5 text-primary shrink-0 mt-0.5"})]},c.value))})})})]})},be={"manual.trigger":aV.PlayCircle,"schedule.cron":a4.Timer,"webhook.receive":aW.Webhook,"whatsapp.trigger":T.LogoWhatsApp,"email.trigger":aX.Inbox,"rss.trigger":aY.Rss,"ai.llm":ba.Sparkles,"ai.agent":bb.Bot,"data.set":O.Edit3,"data.transform":a_.Shuffle,"slack.send":D.MessageSquare,"whatsapp.send":T.LogoWhatsApp,"google_sheets.write":T.LogoGoogleSheets,"google_sheets.read":T.LogoGoogleSheets,"http.request":M.Globe,"code.python":T.LogoPython,"code.javascript":u.Code,"email.send":aZ.Send,"discord.send":aZ.Send,"condition.if":a$.Split,"logic.parallel":a9.GitBranch,"logic.merge":a0.GitMerge,"logic.delay":a3.Clock,"logic.loop":a1.RotateCw,"logic.switch":a_.Shuffle,"logic.pause":a2.PauseCircle,"execution.pause":a2.PauseCircle,"utility.noop":aT.Activity},bf=({data:a,mode:b})=>{if(!a||0===Object.keys(a).length)return(0,h.jsxs)("div",{className:"h-full flex flex-col items-center justify-center text-muted-foreground/20 opacity-40 py-10",children:[(0,h.jsx)(v.Database,{className:"w-8 h-8 mb-2 stroke-1"}),(0,h.jsx)("span",{className:"text-[10px] font-bold uppercase tracking-widest",children:"No Data Recorded"})]});if("json"===b)return(0,h.jsx)("pre",{className:"text-[9px] font-mono text-emerald-400/60 leading-tight",children:JSON.stringify(a,null,2)});if("schema"===b){let b=(a,c="")=>a&&"object"==typeof a?Object.entries(a).flatMap(([a,d])=>{let e=c?`${c}.${a}`:a,f=Array.isArray(d)?"array":typeof d,g=[{path:e,type:f}];return"object"!==f||null===d||Array.isArray(d)?g:[...g,...b(d,e)]}):[],c=b(a);return(0,h.jsx)("div",{className:"space-y-1",children:c.map((a,b)=>(0,h.jsxs)("div",{className:"flex items-center justify-between py-1 px-2 bg-white/2 border border-white/5 rounded-sm",children:[(0,h.jsx)("span",{className:"text-[9px] font-mono text-muted-foreground",children:a.path}),(0,h.jsx)("span",{className:"text-[8px] font-bold uppercase text-primary/50 tracking-tighter",children:a.type})]},b))})}if("table"===b){let b=Array.isArray(a)?a:[a],c=Array.from(new Set(b.flatMap(a=>Object.keys(a))));return(0,h.jsx)("div",{className:"overflow-auto border border-border rounded-sm",children:(0,h.jsxs)("table",{className:"w-full text-left text-[9px] border-collapse",children:[(0,h.jsx)("thead",{className:"bg-muted/50 sticky top-0",children:(0,h.jsx)("tr",{children:c.map(a=>(0,h.jsx)("th",{className:"px-2 py-1.5 border-b border-border font-black uppercase text-muted-foreground/60",children:a},a))})}),(0,h.jsx)("tbody",{children:b.map((a,b)=>(0,h.jsx)("tr",{className:"border-b border-white/5 hover:bg-white/2",children:c.map(b=>(0,h.jsx)("td",{className:"px-2 py-1.5 font-mono text-muted-foreground truncate max-w-[120px]",children:"object"==typeof a[b]?"{...}":String(a[b])},b))},b))})]})})}return null},bg=({node:a,onSelect:b,direction:c})=>{let d=be[a.data.node_name||""]||("trigger"===a.data.type?x.Zap:y.Settings);return(0,h.jsxs)(F.motion.button,{whileHover:{scale:1.1,backgroundColor:"rgba(var(--primary), 0.1)"},whileTap:{scale:.9},onClick:()=>b(a),className:"h-10 w-10 shrink-0 bg-card border border-border rounded-md flex items-center justify-center shadow-lg hover:border-primary/50 transition-all group relative",title:`${c}: ${a.data.label}`,children:[(0,h.jsx)(d,{className:"w-4 h-4 text-muted-foreground group-hover:text-primary"}),(0,h.jsx)("div",{className:"absolute left-full ml-2 px-2 py-1 bg-popover text-[8px] font-bold text-popover-foreground rounded-sm border border-border opacity-0 group-hover:opacity-100 pointer-events-none whitespace-nowrap z-[110]",children:a.data.label})]})},bh=({checked:a,onChange:b})=>(0,h.jsx)("div",{className:(0,G.cn)("relative w-8 h-4.5 rounded-full transition-all duration-300 cursor-pointer",a?"bg-primary":"bg-muted-foreground/20 hover:bg-muted-foreground/30"),onClick:()=>b(!a),children:(0,h.jsx)(F.motion.div,{animate:{x:a?16:2},initial:!1,transition:{type:"spring",stiffness:500,damping:30},className:"absolute top-0.75 w-3 h-3 rounded-full bg-white shadow-sm"})}),bi=({node:a,schema:b,allNodes:c,edges:d,onSelectNode:e,onClose:f,onUpdate:g,onExecute:j,saveStatus:l="idle",isDirty:m=!1})=>{let z,[J,K]=(0,i.useState)(a.data.config||{}),[L,M]=(0,i.useState)(a.data.settings||{}),[N,O]=(0,i.useState)("parameters"),P=(0,n.useQueries)({queries:b.inputs.map(a=>{let c=a.dynamic_options,d=a.dynamic_options,e=a.dynamic_dependencies||[],f={};e.forEach(a=>{f[a]=J[a]});let g=c&&Object.values(f).some(a=>void 0!==a&&""!==a&&null!==a);return{queryKey:["node-options",b.name,a.name,f],queryFn:async()=>await aR.workflowApi.getNodeOptions(b.name,d,f),enabled:!!g,staleTime:3e5}})}),[Q,R]=(0,i.useState)("json"),[S,U]=(0,i.useState)("json"),[V,X]=(0,i.useState)(280),[Y,Z]=(0,i.useState)(320),$=(0,i.useRef)(null),_=(0,i.useRef)(null),aa=a=>b=>{_.current=a,document.body.style.cursor="col-resize",document.body.style.userSelect="none"},ab=(0,i.useCallback)(a=>{if(!_.current||!$.current)return;let b=$.current.getBoundingClientRect();if("left"===_.current){let c=a.clientX-b.left;c>220&&c<.45*b.width&&X(c)}else if("right"===_.current){let c=b.right-a.clientX;c>220&&c<.45*b.width&&Z(c)}},[]),ac=(0,i.useCallback)(()=>{_.current=null,document.body.style.cursor="default",document.body.style.userSelect="auto"},[]);(0,i.useEffect)(()=>(window.addEventListener("mousemove",ab),window.addEventListener("mouseup",ac),()=>{window.removeEventListener("mousemove",ab),window.removeEventListener("mouseup",ac)}),[ab,ac]);let ad=(0,i.useRef)(null);(0,i.useEffect)(()=>{a.id!==ad.current&&(K(a.data.config||{}),M(a.data.settings||{}),ad.current=a.id)},[a.id,a.data.config,a.data.settings]);let ae=(b,c)=>{let d={...J,[b]:c};K(d),g(a.id,{...a.data,config:d})},af=(b,c)=>{let d={...L,[b]:c};M(d),g(a.id,{...a.data,settings:d})},{previousNodes:ag,nextNodes:ah}=(0,i.useMemo)(()=>{let b=d.filter(b=>b.target===a.id).map(a=>a.source),e=d.filter(b=>b.source===a.id).map(a=>a.target);return{previousNodes:c.filter(a=>b.includes(a.id)),nextNodes:c.filter(a=>e.includes(a.id))}},[a.id,c,d]),ai=(0,i.useMemo)(()=>{let b=a.data.input;if(b&&Object.keys(b).length>0)return b;if(0===ag.length)return{};if(1===ag.length)return ag[0].data.output||ag[0].data.lastResult||{};let c={};return ag.forEach(a=>{c[a.id]=a.data.output||a.data.lastResult||{}}),c},[a.data,ag]);return(0,h.jsxs)("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-background/80 backdrop-blur-md pointer-events-auto",children:[(0,h.jsx)("div",{className:"absolute left-6 top-1/2 -translate-y-1/2 flex flex-col gap-3",children:ag.map(a=>(0,h.jsx)(bg,{node:a,onSelect:e,direction:"Prev"},a.id))}),(0,h.jsx)("div",{className:"absolute right-6 top-1/2 -translate-y-1/2 flex flex-col gap-3",children:ah.map(a=>(0,h.jsx)(bg,{node:a,onSelect:e,direction:"Next"},a.id))}),(0,h.jsxs)(F.motion.div,{ref:$,layoutId:`node-modal-${a.id}`,className:"w-[1520px] h-[92vh] max-w-[96vw] bg-background border border-border shadow-2xl rounded-lg flex flex-col overflow-hidden ring-1 ring-white/5",children:[(0,h.jsxs)("header",{className:"h-14 px-6 border-b border-border bg-muted/10 flex items-center justify-between shrink-0",children:[(0,h.jsxs)("div",{className:"flex items-center gap-3",children:[(0,h.jsx)("div",{className:"h-8 w-8 rounded bg-primary/10 text-primary flex items-center justify-center border border-primary/20",children:(z=be[a.data.node_name||""]||("trigger"===a.data.type?x.Zap:y.Settings),(0,h.jsx)(z,{className:"w-4 h-4 fill-current"}))}),(0,h.jsx)("input",{value:a.data.label,onChange:b=>g(a.id,{...a.data,label:b.target.value}),className:"text-sm font-bold bg-transparent border-none focus:outline-none focus:ring-1 focus:ring-primary/20 rounded-sm px-1 -ml-1 w-96 hover:bg-white/5"}),(0,h.jsx)("span",{className:"text-[10px] font-black uppercase tracking-widest text-muted-foreground/40 px-2 py-0.5 rounded-sm border border-border/50",children:b.label})]}),(0,h.jsx)("div",{className:"flex items-center gap-2",children:(0,h.jsx)(H.Button,{variant:"ghost",size:"icon",onClick:f,className:"rounded-md h-8 w-8",children:(0,h.jsx)(o.X,{className:"w-4 h-4"})})})]}),(0,h.jsxs)("div",{className:"flex-1 flex overflow-hidden",children:[(0,h.jsxs)("aside",{style:{width:V},className:"border-r border-border bg-muted/5 flex flex-col overflow-hidden shrink-0",children:[(0,h.jsxs)("div",{className:"px-4 py-3 border-b border-border bg-muted/10 flex items-center justify-between shrink-0",children:[(0,h.jsxs)("div",{className:"flex items-center gap-2",children:[(0,h.jsx)(aT.Activity,{className:"w-3 h-3 text-muted-foreground"}),(0,h.jsx)("span",{className:"text-[9px] font-black uppercase tracking-widest",children:"Input"})]}),(0,h.jsx)("div",{className:"flex p-0.5 bg-background rounded-sm border border-border/50",children:[{id:"json",icon:a7},{id:"table",icon:a6},{id:"schema",icon:a8}].map(a=>(0,h.jsx)("button",{onClick:()=>R(a.id),className:(0,G.cn)("p-1 rounded-sm transition-all",Q===a.id?"bg-muted text-primary":"text-muted-foreground/40 hover:text-muted-foreground"),children:(0,h.jsx)(a.icon,{className:"w-2.5 h-2.5"})},a.id))})]}),(0,h.jsx)("div",{className:"flex-1 overflow-auto p-4 custom-scrollbar bg-black/10",children:(0,h.jsx)(bf,{data:ai,mode:Q})})]}),(0,h.jsx)("div",{onMouseDown:aa("left"),className:"w-1.5 -mx-0.75 hover:bg-primary/50 cursor-col-resize transition-all shrink-0 z-20 flex items-center justify-center group",children:(0,h.jsx)("div",{className:"h-8 w-1 rounded-full bg-border group-hover:bg-primary/50"})}),(0,h.jsxs)("main",{className:"flex-1 flex flex-col bg-background overflow-y-auto custom-scrollbar",children:[(0,h.jsxs)("div",{className:"sticky top-0 z-10 bg-background/80 backdrop-blur-md px-6 py-3 border-b border-border/50 flex items-center justify-between",children:[(0,h.jsxs)("div",{className:"flex bg-muted/30 p-1 rounded-md shrink-0",children:[(0,h.jsxs)("button",{onClick:()=>O("parameters"),className:(0,G.cn)("flex items-center gap-2 px-4 py-1.5 rounded-sm transition-all text-[10px] font-bold uppercase tracking-wider","parameters"===N?"bg-background text-primary shadow-sm":"text-muted-foreground hover:text-foreground"),children:[(0,h.jsx)(a5,{className:"w-3.5 h-3.5"}),"Parameters"]}),(0,h.jsxs)("button",{onClick:()=>O("settings"),className:(0,G.cn)("flex items-center gap-2 px-4 py-1.5 rounded-sm transition-all text-[10px] font-bold uppercase tracking-wider","settings"===N?"bg-background text-primary shadow-sm":"text-muted-foreground hover:text-foreground"),children:[(0,h.jsx)(y.Settings,{className:"w-3.5 h-3.5"}),"Settings"]})]}),(0,h.jsxs)(H.Button,{size:"sm",onClick:()=>j?.(a.id,J,ai),className:"h-8 px-4 rounded-md bg-primary text-primary-foreground font-black uppercase tracking-widest text-[9px] shadow-lg shadow-primary/20 hover:scale-[1.02] transition-transform flex items-center gap-2",children:[(0,h.jsx)(E.Play,{className:"w-2.5 h-2.5 fill-current"}),"Run Step"]})]}),(0,h.jsx)("div",{className:"max-w-3xl mx-auto w-full p-10 space-y-8",children:(0,h.jsx)(k.AnimatePresence,{mode:"wait",children:"parameters"===N?(0,h.jsx)(F.motion.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"space-y-6",children:0===b.inputs.length?(0,h.jsxs)("div",{className:"py-20 text-center text-muted-foreground/30 flex flex-col items-center gap-4",children:[(0,h.jsx)("div",{className:"p-6 rounded border border-dashed border-border",children:(0,h.jsx)(aU,{className:"w-10 h-10"})}),(0,h.jsx)("p",{className:"text-[10px] uppercase font-bold tracking-widest",children:"Default Configuration Only"})]}):b.inputs.map(c=>c.show_if&&!Object.entries(c.show_if).every(([a,b])=>J[a]===b)?null:(0,h.jsxs)("div",{className:"space-y-2",children:[(0,h.jsxs)("label",{className:"text-[10px] font-bold text-muted-foreground uppercase tracking-widest flex items-center gap-2",children:[(a=>{switch(a){case"number":return(0,h.jsx)(s.Hash,{className:"w-3 h-3"});case"select":return(0,h.jsx)(t.List,{className:"w-3 h-3"});case"json":return(0,h.jsx)(v.Database,{className:"w-3 h-3"});case"code":return(0,h.jsx)(u.Code,{className:"w-3 h-3"});case"credential":return(0,h.jsx)(w.Key,{className:"w-3 h-3"});case"messages":return(0,h.jsx)(D.MessageSquare,{className:"w-3 h-3"});default:return(0,h.jsx)(r.Type,{className:"w-3 h-3"})}})(c.type),c.label]}),"messages"===c.type?(0,h.jsx)("div",{className:"space-y-4",children:(0,h.jsxs)("div",{className:"space-y-3",children:[(J[c.name]||c.default||[]).map((a,b)=>(0,h.jsxs)("div",{className:"relative group/msg p-4 bg-muted/10 border border-border rounded-xl space-y-3 transition-all hover:bg-muted/20",children:[(0,h.jsxs)("div",{className:"flex items-center justify-between",children:[(0,h.jsxs)("div",{className:"relative",children:[(0,h.jsxs)("select",{value:a.role,onChange:a=>{let d=[...J[c.name]||c.default||[]];d[b]={...d[b],role:a.target.value},ae(c.name,d)},className:"pl-3 pr-8 py-1.5 bg-background border border-border rounded-lg text-[10px] font-bold uppercase tracking-wider appearance-none focus:outline-none focus:ring-1 focus:ring-primary/20",children:[(0,h.jsx)("option",{value:"system",children:"System (Goal)"}),(0,h.jsx)("option",{value:"user",children:"User (Request)"}),(0,h.jsx)("option",{value:"assistant",children:"AI (Response)"})]}),(0,h.jsx)(q.ChevronDown,{className:"absolute right-2 top-1/2 -translate-y-1/2 w-3 h-3 text-muted-foreground/40 pointer-events-none"})]}),(0,h.jsx)("button",{onClick:()=>{let a=(J[c.name]||c.default||[]).filter((a,c)=>c!==b);ae(c.name,a)},className:"p-1.5 text-muted-foreground/20 hover:text-destructive hover:bg-destructive/10 rounded-lg transition-all",children:(0,h.jsx)(C,{className:"w-3.5 h-3.5"})})]}),(0,h.jsx)("textarea",{value:a.content,onChange:a=>{let d=[...J[c.name]||c.default||[]];d[b]={...d[b],content:a.target.value},ae(c.name,d)},className:"w-full bg-transparent border-none text-xs placeholder:text-muted-foreground/30 focus:outline-none resize-none custom-scrollbar min-h-[60px]",placeholder:"Type instructions or message... {{use_variables}}"})]},b)),(0,h.jsxs)("button",{onClick:()=>{let a=J[c.name]||c.default||[];ae(c.name,[...a,{role:"user",content:""}])},className:"w-full py-3 border border-dashed border-border rounded-xl text-[10px] font-bold text-muted-foreground/50 hover:text-primary hover:border-primary/40 hover:bg-primary/5 transition-all flex items-center justify-center gap-2 group",children:[(0,h.jsx)(B.Plus,{className:"w-3.5 h-3.5 group-hover:scale-110 transition-transform"}),"Add Interaction Step"]})]})}):"code"===c.type?(0,h.jsx)("div",{className:"rounded-md overflow-hidden border border-border shadow-inner bg-black/20",children:(0,h.jsx)(aQ,{value:J[c.name]||c.default||"",onChange:a=>ae(c.name,a),language:b.name.includes("python")?"python":"javascript",height:"400px",nodeId:a.id})}):"select"===c.type?(0,h.jsx)(bd,{value:J[c.name]||c.default||"",onChange:a=>ae(c.name,a),options:P[b.inputs.indexOf(c)]?.data||c.options||[],placeholder:`Select ${c.label.toLowerCase()}...`,disabled:P[b.inputs.indexOf(c)]?.isLoading,className:"w-full",itemIcon:"spreadsheet_id"===c.name?T.LogoGoogleSheets:void 0}):"credential"===c.type?(0,h.jsx)(W,{value:J[c.name],onChange:a=>ae(c.name,a),credentialType:c.credential_type||"generic",label:c.label}):"json"===c.type?(0,h.jsxs)("div",{className:"relative rounded-md overflow-hidden border border-border bg-slate-950 shadow-lg",children:[(0,h.jsx)("div",{className:"absolute top-2 right-2 flex gap-1 z-10",children:(0,h.jsx)("span",{className:"text-[8px] font-bold text-slate-500 uppercase tracking-widest bg-slate-900/80 px-2 py-0.5 rounded border border-slate-800",children:"JSON"})}),(0,h.jsx)("textarea",{value:J[c.name]&&"object"==typeof J[c.name]?JSON.stringify(J[c.name],null,2):J[c.name]||"",onChange:a=>{try{let b=JSON.parse(a.target.value);ae(c.name,b)}catch{ae(c.name,a.target.value)}},className:"w-full px-4 py-4 bg-transparent text-slate-300 font-mono text-[11px] h-32 focus:outline-none transition-all shadow-inner resize-none custom-scrollbar",placeholder:"{}"})]}):(0,h.jsx)("input",{className:"w-full h-10 px-4 bg-muted/20 border border-border rounded-md text-xs focus:ring-1 focus:ring-primary/50 outline-none transition-all placeholder:text-muted-foreground/20",value:J[c.name]||"",onChange:a=>ae(c.name,a.target.value),placeholder:`Enter ${c.label.toLowerCase()}...`})]},c.name))},"p"):(0,h.jsxs)(F.motion.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"space-y-6",children:[(0,h.jsxs)("div",{className:"p-6 rounded-md bg-amber-500/5 border border-amber-500/10 flex gap-4",children:[(0,h.jsx)(p.Info,{className:"w-5 h-5 text-amber-500 shrink-0"}),(0,h.jsx)("p",{className:"text-[11px] text-muted-foreground leading-relaxed",children:"System-level orchestration: Configure retries, error handling, and timeout behavior for this internal node execution."})]}),(0,h.jsxs)("div",{className:"space-y-4",children:[(0,h.jsxs)("div",{className:"flex items-center justify-between p-4 rounded-md border border-border bg-card/50",children:[(0,h.jsxs)("div",{className:"space-y-1",children:[(0,h.jsx)("div",{className:"text-xs font-bold uppercase tracking-wider",children:"Always Output Data"}),(0,h.jsx)("div",{className:"text-[10px] text-muted-foreground",children:"Return empty object if no results"})]}),(0,h.jsx)(bh,{checked:L.alwaysOutputData,onChange:a=>af("alwaysOutputData",a)})]}),(0,h.jsxs)("div",{className:"flex items-center justify-between p-4 rounded-md border border-border bg-card/50",children:[(0,h.jsxs)("div",{className:"space-y-1",children:[(0,h.jsx)("div",{className:"text-xs font-bold uppercase tracking-wider",children:"Execute Once"}),(0,h.jsx)("div",{className:"text-[10px] text-muted-foreground",children:"Only run first time in a loop"})]}),(0,h.jsx)(bh,{checked:L.executeOnce,onChange:a=>af("executeOnce",a)})]}),(0,h.jsxs)("div",{className:"space-y-4 p-4 rounded-md border border-border bg-card/50",children:[(0,h.jsxs)("div",{className:"flex items-center justify-between",children:[(0,h.jsxs)("div",{className:"space-y-1",children:[(0,h.jsx)("div",{className:"text-xs font-bold uppercase tracking-wider",children:"Retry On Fail"}),(0,h.jsx)("div",{className:"text-[10px] text-muted-foreground",children:"Automatically retry if node fails"})]}),(0,h.jsx)(bh,{checked:L.retryOnFail,onChange:a=>af("retryOnFail",a)})]}),L.retryOnFail&&(0,h.jsx)(F.motion.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},className:"pt-4 space-y-4 border-t border-border/50",children:(0,h.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,h.jsxs)("div",{className:"space-y-1.5",children:[(0,h.jsx)("label",{className:"text-[10px] font-bold text-muted-foreground uppercase tracking-widest ml-1",children:"Max Retries"}),(0,h.jsx)("input",{type:"number",value:L.maxRetries??3,onChange:a=>af("maxRetries",Number(a.target.value)),className:"w-full h-10 px-4 bg-muted/20 border border-border rounded-md text-xs focus:ring-1 focus:ring-primary/50 outline-none transition-all"})]}),(0,h.jsxs)("div",{className:"space-y-1.5",children:[(0,h.jsx)("label",{className:"text-[10px] font-bold text-muted-foreground uppercase tracking-widest ml-1",children:"Retry Delay (s)"}),(0,h.jsx)("input",{type:"number",value:L.retryDelay??5,onChange:a=>af("retryDelay",Number(a.target.value)),className:"w-full h-10 px-4 bg-muted/20 border border-border rounded-md text-xs focus:ring-1 focus:ring-primary/50 outline-none transition-all"})]})]})})]}),(0,h.jsxs)("div",{className:"space-y-2",children:[(0,h.jsx)("label",{className:"text-[10px] font-bold text-muted-foreground uppercase tracking-widest ml-1",children:"On Error"}),(0,h.jsxs)("div",{className:"relative",children:[(0,h.jsxs)("select",{value:L.onError||"stop",onChange:a=>af("onError",a.target.value),className:"w-full h-10 px-4 bg-muted/20 border border-border rounded-md text-xs focus:ring-1 focus:ring-primary/50 outline-none transition-all appearance-none",children:[(0,h.jsx)("option",{value:"stop",children:"Stop Workflow"}),(0,h.jsx)("option",{value:"continue",children:"Continue (Ignore Error)"}),(0,h.jsx)("option",{value:"retry",children:"Retry and Stop"})]}),(0,h.jsx)(q.ChevronDown,{className:"absolute right-4 top-1/2 -translate-y-1/2 w-3.5 h-3.5 text-muted-foreground pointer-events-none"})]})]}),(0,h.jsxs)("div",{className:"space-y-2",children:[(0,h.jsx)("label",{className:"text-[10px] font-bold text-muted-foreground uppercase tracking-widest ml-1",children:"Notes"}),(0,h.jsx)("textarea",{value:L.notes||"",onChange:a=>af("notes",a.target.value),className:"w-full px-4 py-3 bg-muted/20 border border-border rounded-md text-xs transition-all focus:ring-1 focus:ring-primary/50 outline-none h-32 resize-none custom-scrollbar",placeholder:"Add notes about what this node does..."})]}),(0,h.jsxs)("div",{className:"flex items-center justify-between p-4 rounded-md border border-border bg-card/50",children:[(0,h.jsxs)("div",{className:"space-y-1",children:[(0,h.jsx)("div",{className:"text-xs font-bold uppercase tracking-wider",children:"Display Note in Flow"}),(0,h.jsx)("div",{className:"text-[10px] text-muted-foreground",children:"Show this note on the canvas"})]}),(0,h.jsx)(bh,{checked:L.displayNoteInFlow,onChange:a=>af("displayNoteInFlow",a)})]})]})]},"s")})})]}),(0,h.jsx)("div",{onMouseDown:aa("right"),className:"w-1.5 -mx-0.75 hover:bg-primary/50 cursor-col-resize transition-all shrink-0 z-20 flex items-center justify-center group",children:(0,h.jsx)("div",{className:"h-8 w-1 rounded-full bg-border group-hover:bg-primary/50"})}),(0,h.jsxs)("aside",{style:{width:Y},className:"border-l border-border bg-muted/5 flex flex-col overflow-hidden shrink-0 relative",children:["pending"===a.data.status&&(0,h.jsxs)("div",{className:"absolute inset-0 bg-background/50 backdrop-blur-sm z-50 flex flex-col items-center justify-center gap-3",children:[(0,h.jsx)(I.Loader2,{className:"w-8 h-8 animate-spin text-primary"}),(0,h.jsx)("span",{className:"text-xs font-bold uppercase tracking-widest text-muted-foreground",children:"Executing..."})]}),(0,h.jsxs)("div",{className:"px-4 py-3 border-b border-border bg-muted/10 flex items-center justify-between shrink-0",children:[(0,h.jsxs)("div",{className:"flex items-center gap-2",children:[(0,h.jsx)(aS,{className:"w-3 h-3 text-muted-foreground"}),(0,h.jsx)("span",{className:"text-[9px] font-black uppercase tracking-widest",children:"Output"})]}),(0,h.jsx)("div",{className:"flex p-0.5 bg-background rounded-sm border border-border/50",children:[{id:"json",icon:a7},{id:"table",icon:a6},{id:"schema",icon:a8}].map(a=>(0,h.jsx)("button",{onClick:()=>U(a.id),className:(0,G.cn)("p-1 rounded-sm transition-all",S===a.id?"bg-muted text-primary":"text-muted-foreground/40 hover:text-muted-foreground"),children:(0,h.jsx)(a.icon,{className:"w-2.5 h-2.5"})},a.id))})]}),(0,h.jsxs)("div",{className:"flex-1 overflow-auto p-4 custom-scrollbar bg-black/10 flex flex-col gap-4",children:["failed"===a.data.status&&a.data.error?(0,h.jsxs)("div",{className:"p-4 rounded-md border border-destructive/50 bg-destructive/10 text-destructive text-xs font-mono break-words shrink-0",children:[(0,h.jsxs)("div",{className:"flex items-center gap-2 mb-2 font-bold uppercase tracking-wider",children:[(0,h.jsx)(A.AlertCircle,{className:"w-4 h-4"}),"Execution Failed"]}),a.data.error]}):null,(0,h.jsx)(bf,{data:a.data.output,mode:S})]})]})]}),(0,h.jsxs)("footer",{className:"h-14 px-6 border-t border-border bg-card flex items-center justify-between shrink-0",children:[(0,h.jsxs)("div",{className:"flex items-center gap-4",children:[(0,h.jsxs)("div",{className:"flex items-center gap-2",children:[(0,h.jsx)("div",{className:(0,G.cn)("w-1.5 h-1.5 rounded-full transition-all duration-500","saving"===l?"bg-amber-500 shadow-[0_0_8px_rgba(245,158,11,0.5)] animate-pulse":m?"bg-blue-500 shadow-[0_0_8px_rgba(59,130,246,0.3)]":"bg-emerald-500 shadow-[0_0_8px_rgba(16,185,129,0.5)]")}),(0,h.jsx)("span",{className:"text-[10px] text-muted-foreground uppercase tracking-widest font-bold",children:"saving"===l?"Saving changes...":m?"Unsaved changes":"All changes saved"})]}),(0,h.jsx)("div",{className:"h-4 w-px bg-border/50 mx-2"}),(0,h.jsxs)("div",{className:"flex items-center gap-2 opacity-30 grayscale pointer-events-none",children:[(0,h.jsx)(T.LogoPython,{className:"w-4 h-4 shadow-sm"}),(0,h.jsx)("span",{className:"text-[9px] font-black uppercase tracking-[0.2em]",children:"Engine Instance Ready"})]})]}),(0,h.jsxs)("div",{className:"text-[8px] font-black uppercase tracking-widest text-muted-foreground/30",children:["Node ID: ",a.id]})]})]},a.id)]})};var bj=a.i(16707),bk=a.i(28345),bl=a.i(41135),bm=a.i(95828),bn=a.i(39876),bo=a.i(57544),bp=a.i(42068),bq=a.i(86005);let br={"manual.trigger":bj.GenericTriggerNode,"schedule.cron":bj.GenericTriggerNode,"webhook.receive":bj.GenericTriggerNode,"email.receive":bl.EmailTriggerNode,"form.submit":bj.GenericTriggerNode,"rss.read":bj.GenericTriggerNode,"whatsapp.receive":bk.WhatsAppTriggerNode,"google_sheets.read":bn.GoogleSheetsNode,"google_sheets.write":bn.GoogleSheetsNode,"email.send":bo.EmailActionNode,"code.python":bp.PythonCodeNode,"code.javascript":bp.PythonCodeNode,"discord.send":bm.GenericActionNode,"slack.send":bm.GenericActionNode,"whatsapp.send":bm.GenericActionNode,"http.request":bm.GenericActionNode,"data.store":bm.GenericActionNode,"data.set":bm.GenericActionNode,"data.transform":bm.GenericActionNode,"ai.agent":bm.GenericActionNode,"ai.llm":bm.GenericActionNode,"condition.if":bq.GenericLogicNode,"condition.switch":bq.GenericLogicNode,"execution.pause":bq.GenericLogicNode,"logic.loop":bq.GenericLogicNode,"logic.delay":bq.GenericLogicNode,"logic.merge":bq.GenericLogicNode,"logic.parallel":bq.GenericLogicNode,"utility.noop":bq.GenericLogicNode,trigger:bj.GenericTriggerNode,action:bm.GenericActionNode,logic:bq.GenericLogicNode,default:m.BaseNode};var bs=a.i(80386),bt=a.i(73570);let bu=(0,z.default)("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);var bv=a.i(5151);function bw({logs:a,isOpen:b,onClose:c,onClear:d}){let e=(0,i.useRef)(null),[f,g]=(0,i.useState)(320),[j,k]=(0,i.useState)(!1),[l,m]=(0,i.useState)(!1);return((0,i.useEffect)(()=>{let a=a=>{if(!j)return;let b=window.innerHeight-a.clientY;b>100&&b<.8*window.innerHeight&&g(b)},b=()=>{k(!1)};return j&&(window.addEventListener("mousemove",a),window.addEventListener("mouseup",b)),()=>{window.removeEventListener("mousemove",a),window.removeEventListener("mouseup",b)}},[j]),(0,i.useEffect)(()=>{e.current&&(e.current.scrollTop=e.current.scrollHeight)},[a,b]),b)?(0,h.jsxs)(F.motion.div,{initial:{height:0,opacity:0,y:20},animate:{height:f,opacity:1,y:0,transition:j?{duration:0}:{type:"spring",damping:25,stiffness:300}},exit:{height:0,opacity:0,y:20},style:{height:f},className:(0,G.cn)("fixed bottom-0 left-0 right-0 border-t border-border/50 bg-card/80 backdrop-blur-xl flex flex-col shadow-[0_-10px_40px_rgba(0,0,0,0.1)] z-50 overflow-hidden",j&&"transition-none select-none"),children:[(0,h.jsx)("div",{onMouseDown:a=>{k(!0),a.preventDefault()},className:"absolute top-0 left-0 right-0 h-1.5 cursor-ns-resize hover:bg-primary/30 transition-colors z-40 group flex items-center justify-center",children:(0,h.jsx)("div",{className:"w-12 h-1 rounded-full bg-border group-hover:bg-primary/50"})}),(0,h.jsxs)("div",{className:"flex items-center justify-between px-6 py-3 border-b border-border/50 bg-muted/40 backdrop-blur-md shrink-0",children:[(0,h.jsxs)("div",{className:"flex items-center gap-3",children:[(0,h.jsx)("div",{className:"flex items-center justify-center h-8 w-8 rounded-lg bg-primary/10 border border-primary/20",children:(0,h.jsx)(bs.Terminal,{className:"h-4 w-4 text-primary"})}),(0,h.jsx)("div",{children:(0,h.jsxs)("div",{className:"flex items-center gap-2",children:[(0,h.jsx)("h3",{className:"text-sm font-semibold tracking-tight",children:"Execution logs"}),(0,h.jsxs)("div",{className:"flex items-center gap-1.5 px-2 py-0.5 rounded-full bg-emerald-500/10 border border-emerald-500/20",children:[(0,h.jsx)("span",{className:"h-1.5 w-1.5 rounded-full bg-emerald-500 animate-pulse"}),(0,h.jsx)("span",{className:"text-[10px] font-medium text-emerald-600 dark:text-emerald-400 uppercase tracking-wider",children:"Live"})]})]})})]}),(0,h.jsxs)("div",{className:"flex items-center gap-3",children:[(0,h.jsxs)("div",{className:"flex items-center p-1 bg-background/80 backdrop-blur-sm rounded-xl border border-border shadow-sm",children:[(0,h.jsxs)(H.Button,{variant:"ghost",size:"sm",onClick:()=>{let b=a.map(a=>`[${new Date(a.timestamp).toLocaleString()}] ${a.type.toUpperCase()}: ${a.message}${a.data?"\nData: "+JSON.stringify(a.data,null,2):""}`).join("\n\n");navigator.clipboard.writeText(b),m(!0),setTimeout(()=>m(!1),2e3)},className:(0,G.cn)("h-8 text-[11px] font-bold transition-all px-3 gap-2 rounded-lg",l?"bg-emerald-500/20 text-emerald-600":"hover:bg-primary/10 text-primary"),children:[l?(0,h.jsx)(aL.CheckCircle,{className:"h-3.5 w-3.5"}):(0,h.jsx)(bv.Copy,{className:"h-3.5 w-3.5"}),(0,h.jsx)("span",{children:"Copy All"})]}),(0,h.jsx)("div",{className:"w-px h-4 bg-border mx-1"}),(0,h.jsxs)(H.Button,{variant:"ghost",size:"sm",onClick:d,className:"h-8 text-[11px] font-bold text-muted-foreground hover:text-destructive hover:bg-destructive/10 transition-all px-3 gap-2 rounded-lg",children:[(0,h.jsx)(bs.Terminal,{className:"h-3.5 w-3.5"}),(0,h.jsx)("span",{children:"Clear Logs"})]})]}),(0,h.jsx)("div",{className:"w-px h-4 bg-border mx-1"}),(0,h.jsx)("button",{onClick:c,className:"h-8 w-8 flex items-center justify-center rounded-full hover:bg-muted transition-colors text-muted-foreground hover:text-foreground",children:(0,h.jsx)(o.X,{className:"h-4 w-4"})})]})]}),(0,h.jsx)("div",{ref:e,className:"flex-1 overflow-y-auto p-6 space-y-1.5 font-mono text-[10px] custom-scrollbar",style:{scrollBehavior:"smooth"},children:0===a.length?(0,h.jsxs)("div",{className:"flex flex-col items-center justify-center py-12 text-center space-y-3 opacity-50",children:[(0,h.jsx)(bs.Terminal,{className:"h-8 w-8 stroke-1"}),(0,h.jsx)("p",{className:"max-w-[200px] text-xs leading-relaxed italic",children:"No active logs. Start a workflow to monitor execution in real-time."})]}):(0,h.jsx)("div",{className:"space-y-1",children:a.map(a=>(0,h.jsx)(bx,{log:a},a.id))})})]}):null}function bx({log:a}){let[b,c]=(0,i.useState)(!1),[d,e]=(0,i.useState)(!1),f=a.data&&Object.keys(a.data).length>0;return(0,h.jsxs)("div",{className:(0,G.cn)("flex flex-col gap-1 p-1.5 rounded transition-all border border-transparent group",f&&"cursor-pointer hover:bg-accent/40 hover:border-border/50",b&&"bg-accent/30 border-border/50 shadow-sm"),onClick:()=>f&&c(!b),children:[(0,h.jsxs)("div",{className:"flex gap-3 items-start",children:[(0,h.jsx)("span",{className:"text-muted-foreground/50 w-20 shrink-0 select-none pt-0.5",children:new Date(a.timestamp).toLocaleTimeString()}),(0,h.jsxs)("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[f&&(0,h.jsx)("button",{className:"p-0.5 hover:bg-muted rounded transition-colors shrink-0",children:b?(0,h.jsx)(q.ChevronDown,{className:"h-3 w-3"}):(0,h.jsx)(bu,{className:"h-3 w-3"})}),"success"===a.type&&(0,h.jsx)(aL.CheckCircle,{className:"h-3 w-3 text-green-500 shrink-0"}),"error"===a.type&&(0,h.jsx)(bt.AlertTriangle,{className:"h-3 w-3 text-destructive shrink-0"}),"info"===a.type&&(0,h.jsx)(p.Info,{className:"h-3 w-3 text-blue-500 shrink-0"}),(0,h.jsx)("span",{className:(0,G.cn)("font-medium text-[10px] break-all whitespace-pre-wrap leading-tight","error"===a.type?"text-destructive":"success"===a.type?"text-green-600 dark:text-green-400":"text-foreground"),children:a.message}),a.nodeId&&(0,h.jsx)("span",{className:"text-[10px] px-1.5 py-0.5 rounded bg-muted border border-border text-muted-foreground font-sans shrink-0",children:a.nodeId}),(0,h.jsx)("button",{onClick:b=>{b.stopPropagation(),navigator.clipboard.writeText(`[${new Date(a.timestamp).toLocaleTimeString()}] ${a.message}`),e(!0),setTimeout(()=>e(!1),2e3)},className:"ml-auto p-1.5 hover:bg-muted rounded-md transition-all shrink-0 border border-transparent hover:border-border text-muted-foreground/50 hover:text-foreground",title:"Copy message",children:d?(0,h.jsx)(aL.CheckCircle,{className:"h-3 w-3 text-emerald-500"}):(0,h.jsx)(bv.Copy,{className:"h-3 w-3 text-muted-foreground/50"})})]})]}),(0,h.jsx)(k.AnimatePresence,{children:b&&f&&(0,h.jsx)(F.motion.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"ml-[92px] mt-2 overflow-hidden",onClick:a=>a.stopPropagation(),children:(0,h.jsxs)("div",{className:"relative group/json",children:[(0,h.jsx)("pre",{className:"p-3 rounded-lg bg-slate-950 text-slate-300 overflow-x-auto text-[9px] border border-border/50 leading-relaxed shadow-inner",children:JSON.stringify(a.data,null,2)}),(0,h.jsx)("button",{onClick:b=>{b.stopPropagation(),navigator.clipboard.writeText(JSON.stringify(a.data,null,2))},className:"absolute top-2 right-2 p-1.5 bg-slate-800 hover:bg-slate-700 rounded-md opacity-0 group-hover/json:opacity-100 transition-opacity text-slate-400",title:"Copy JSON",children:(0,h.jsx)(bv.Copy,{className:"h-3 w-3"})})]})})})]})}let by=(0,z.default)("ghost",[["path",{d:"M9 10h.01",key:"qbtxuw"}],["path",{d:"M15 10h.01",key:"1qmjsl"}],["path",{d:"M12 2a8 8 0 0 0-8 8v12l3-3 2.5 2.5L12 19l2.5 2.5L17 19l3 3V10a8 8 0 0 0-8-8z",key:"uwwb07"}]]);function bz({isOpen:a,onClose:b,messages:c,isLoading:d,input:e,onInputChange:f,onSend:g}){let j=(0,i.useRef)(null);return(0,i.useEffect)(()=>{j.current?.scrollIntoView({behavior:"smooth"})},[c,d]),(0,h.jsx)(k.AnimatePresence,{children:a&&(0,h.jsxs)(F.motion.div,{initial:{opacity:0,y:20,scale:.9},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,scale:.9,y:20},className:"absolute bottom-6 right-6 w-[400px] h-[550px] bg-card border border-border rounded-lg shadow-2xl flex flex-col z-[100] overflow-hidden",children:[(0,h.jsxs)("header",{className:"p-5 flex items-center justify-between border-b border-border bg-muted/30 shrink-0 select-none",children:[(0,h.jsxs)("div",{className:"flex items-center gap-3",children:[(0,h.jsx)("div",{className:"h-10 w-10 rounded-md bg-gradient-to-tr from-indigo-500 via-primary to-emerald-400 flex items-center justify-center shadow-lg shadow-primary/20 animate-gradient-xy",children:(0,h.jsx)(ba.Sparkles,{className:"h-5 w-5 text-white"})}),(0,h.jsxs)("div",{children:[(0,h.jsx)("h3",{className:"font-bold text-sm tracking-tight text-foreground",children:"AI Architect"}),(0,h.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,h.jsx)("div",{className:"h-1 w-1 rounded-full bg-emerald-500 animate-pulse"}),(0,h.jsx)("p",{className:"text-[10px] font-bold text-muted-foreground uppercase tracking-widest opacity-60",children:"Neural Engine Active"})]})]})]}),(0,h.jsx)(H.Button,{variant:"ghost",size:"icon",className:"h-8 w-8 rounded-md hover:bg-white/10 transition-colors",onClick:b,children:(0,h.jsx)(o.X,{className:"h-4 w-4 text-muted-foreground"})})]}),(0,h.jsxs)("div",{className:"flex-1 overflow-y-auto p-6 space-y-6 custom-scrollbar scroll-smooth",children:[0===c.length&&(0,h.jsxs)("div",{className:"h-full flex flex-col items-center justify-center text-center p-4",children:[(0,h.jsx)(F.motion.div,{initial:{scale:0},animate:{scale:1},className:"h-16 w-16 rounded-lg bg-primary/10 flex items-center justify-center mb-6 shadow-inner",children:(0,h.jsx)(by,{className:"h-8 w-8 text-primary/40"})}),(0,h.jsx)("h4",{className:"font-bold text-base mb-2 tracking-tight",children:"I'm your Workflow Assistant"}),(0,h.jsx)("p",{className:"text-xs text-muted-foreground max-w-[240px] leading-relaxed opacity-60",children:'"Create a workflow that sends Slack alerts when my website goes down"'})]}),c.map((a,b)=>(0,h.jsx)(F.motion.div,{initial:{opacity:0,x:"user"===a.role?10:-10,y:5},animate:{opacity:1,x:0,y:0},className:(0,G.cn)("flex w-full","user"===a.role?"justify-end":"justify-start"),children:(0,h.jsx)("div",{className:(0,G.cn)("max-w-[85%] px-4 py-3 rounded-md text-xs leading-relaxed font-medium shadow-lg transition-all","user"===a.role?"bg-primary text-primary-foreground rounded-tr-none shadow-primary/10":"bg-white/5 text-foreground border border-white/5 rounded-tl-none backdrop-blur-sm"),children:a.message})},b)),d&&(0,h.jsx)("div",{className:"flex justify-start",children:(0,h.jsx)("div",{className:"bg-white/5 border border-white/5 px-4 py-3 rounded-md rounded-tl-none",children:(0,h.jsxs)("div",{className:"flex gap-1.5",children:[(0,h.jsx)("div",{className:"w-1.5 h-1.5 bg-primary/60 rounded-full animate-bounce",style:{animationDelay:"0ms"}}),(0,h.jsx)("div",{className:"w-1.5 h-1.5 bg-primary/60 rounded-full animate-bounce",style:{animationDelay:"200ms"}}),(0,h.jsx)("div",{className:"w-1.5 h-1.5 bg-primary/60 rounded-full animate-bounce",style:{animationDelay:"400ms"}})]})})}),(0,h.jsx)("div",{ref:j})]}),(0,h.jsxs)("div",{className:"p-6 pt-2 shrink-0",children:[(0,h.jsxs)("div",{className:"relative flex items-center group",children:[(0,h.jsx)("input",{type:"text",value:e,onChange:a=>f(a.target.value),onKeyDown:a=>"Enter"===a.key&&!a.shiftKey&&g(),placeholder:"Command your workflow...",className:"w-full bg-white/5 border border-white/5 rounded-md pl-5 pr-14 py-4 text-xs focus:outline-none focus:ring-1 focus:ring-primary/40 focus:bg-white/10 transition-all shadow-inner placeholder:text-muted-foreground/30 font-bold tracking-tight",autoFocus:!0}),(0,h.jsx)("div",{className:"absolute right-2 flex items-center gap-1.5",children:(0,h.jsx)(H.Button,{size:"icon",onClick:g,disabled:!e.trim()||d,className:(0,G.cn)("h-9 w-9 rounded-md transition-all shadow-lg",e.trim()?"opacity-100 scale-100 bg-primary shadow-primary/20":"opacity-0 scale-90 pointer-events-none"),children:(0,h.jsx)(aZ.Send,{className:"h-4 w-4"})})})]}),(0,h.jsx)("p",{className:"mt-4 text-[9px] text-center text-muted-foreground/40 font-bold uppercase tracking-[0.2em]",children:"Alpha Neural Interface 1.0"})]}),(0,h.jsx)("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-indigo-500 via-primary to-emerald-400 opacity-60"}),(0,h.jsx)("div",{className:"absolute -bottom-24 -left-24 w-48 h-48 bg-primary/20 rounded-full blur-[60px] pointer-events-none"})]})})}let bA=(0,z.default)("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);var bB=a.i(53569),bC=a.i(72692);let bD=(0,i.memo)(({workflowMeta:a,updateWorkflowMeta:b,activeTab:c,setActiveTab:d,showLogs:e,setShowLogs:f,isActive:g,toggleActive:i,onSave:j,isSaving:k,saveStatus:l,isDirty:m,showNavSidebar:n,setShowNavSidebar:o})=>(0,h.jsxs)("header",{className:"h-14 border-b border-border bg-card/80 backdrop-blur-xl flex items-center justify-between px-4 z-10 shrink-0",children:[(0,h.jsxs)("div",{className:"flex items-center gap-4",children:[(0,h.jsx)("button",{onClick:()=>o(!n),className:"p-2 hover:bg-accent rounded-lg transition-colors","aria-label":"Toggle navigation",children:(0,h.jsx)(bC.Menu,{className:"h-5 w-5"})}),(0,h.jsxs)("div",{className:"flex flex-col",children:[(0,h.jsx)("input",{value:a?.name||"",onChange:a=>b({name:a.target.value}),placeholder:"Untitled Workflow",className:"font-semibold text-lg bg-transparent border-none focus:outline-none focus:ring-1 focus:ring-primary/20 rounded px-1 -ml-1 w-64"}),(0,h.jsx)("input",{value:a?.description||"",onChange:a=>b({description:a.target.value}),placeholder:"Add description...",className:"text-xs text-muted-foreground bg-transparent border-none focus:outline-none focus:ring-1 focus:ring-primary/20 rounded px-1 -ml-1 w-96"})]})]}),(0,h.jsxs)("div",{className:"flex items-center gap-2",children:[(0,h.jsxs)("div",{className:"flex bg-muted rounded-lg p-1 mr-4",children:[(0,h.jsx)("button",{onClick:()=>d("editor"),className:`px-3 py-1 rounded-md text-xs font-medium transition-all ${"editor"===c?"bg-background text-foreground shadow-sm":"text-muted-foreground hover:text-foreground"}`,children:"Editor"}),(0,h.jsx)("button",{onClick:()=>d("executions"),className:`px-3 py-1 rounded-md text-xs font-medium transition-all ${"executions"===c?"bg-background text-foreground shadow-sm":"text-muted-foreground hover:text-foreground"}`,children:"Executions"})]}),(0,h.jsxs)(H.Button,{variant:"ghost",size:"sm",onClick:()=>f(!e),className:e?"bg-accent":"",children:[(0,h.jsx)(u.Code,{className:"h-4 w-4 mr-2"}),"Logs"]}),(0,h.jsx)("div",{className:"w-px h-6 bg-border mx-1"}),(0,h.jsxs)(H.Button,{variant:"outline",size:"sm",onClick:i,className:g?"border-primary/50 text-primary hover:bg-primary/10":"",children:[(0,h.jsx)(x.Zap,{className:"h-3 w-3 mr-2"}),g?"Active":"Activate"]}),(0,h.jsx)(H.Button,{size:"sm",variant:"outline",onClick:j,disabled:k,className:"saved"!==l||m?"":"border-green-500/50 text-green-600",children:k?(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)("div",{className:"h-3 w-3 mr-2 animate-spin rounded-full border-2 border-primary border-t-transparent"}),"Saving..."]}):"saved"!==l||m?"error"===l?(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(bA,{className:"h-3 w-3 mr-2"}),"Retry"]}):(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(bA,{className:"h-3 w-3 mr-2"}),m?"Save*":"Save"]}):(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(bA,{className:"h-3 w-3 mr-2"}),"Saved"]})}),(0,h.jsx)(H.Button,{variant:"ghost",size:"sm",children:(0,h.jsx)(bB.Share2,{className:"h-4 w-4"})})]})]}));bD.displayName="CanvasHeader";var bE=a.i(81010);let bF=(0,z.default)("panels-top-left",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M9 21V9",key:"1oto5p"}]]),bG=(0,i.memo)(({isOpen:a,onClose:b})=>(0,h.jsx)(k.AnimatePresence,{children:a&&(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(F.motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-background/80 backdrop-blur-sm z-40",onClick:b}),(0,h.jsxs)(F.motion.div,{initial:{x:-280},animate:{x:0},exit:{x:-280},transition:{type:"spring",damping:30,stiffness:300},className:"fixed left-0 top-0 bottom-0 w-64 bg-card border-r border-border z-50 flex flex-col",children:[(0,h.jsxs)("div",{className:"p-4 border-b border-border/50 flex items-center justify-between bg-muted/20",children:[(0,h.jsxs)("div",{className:"flex items-center gap-3",children:[(0,h.jsx)("div",{className:"h-9 w-9 rounded-xl bg-gradient-to-br from-primary to-primary/60 flex items-center justify-center shadow-lg shadow-primary/20",children:(0,h.jsx)(x.Zap,{className:"h-5 w-5 text-primary-foreground fill-white"})}),(0,h.jsxs)("div",{className:"flex flex-col",children:[(0,h.jsx)("span",{className:"font-bold text-base leading-none tracking-tight",children:"Antigravity"}),(0,h.jsx)("span",{className:"text-[10px] text-muted-foreground uppercase tracking-wider font-medium mt-1",children:"Workspace"})]})]}),(0,h.jsx)("button",{onClick:b,className:"p-1.5 hover:bg-accent rounded-lg transition-all text-muted-foreground hover:text-foreground",children:(0,h.jsx)(o.X,{className:"h-4 w-4"})})]}),(0,h.jsxs)("nav",{className:"flex-1 p-3 space-y-1.5",children:[(0,h.jsxs)("a",{href:"/dashboard",className:"flex items-center gap-3 px-3 py-2.5 rounded-xl text-sm font-medium text-muted-foreground hover:bg-muted/50 hover:text-foreground transition-all group",children:[(0,h.jsx)(bE.Home,{className:"h-4 w-4 text-muted-foreground/70 group-hover:text-foreground transition-colors"}),(0,h.jsx)("span",{children:"Dashboard"})]}),(0,h.jsxs)("a",{href:"/workflows",className:"flex items-center gap-3 px-3 py-2.5 rounded-xl text-sm font-medium bg-gradient-to-r from-primary/10 to-transparent text-primary transition-all border border-primary/10 shadow-sm",children:[(0,h.jsx)(bF,{className:"h-4 w-4"}),(0,h.jsx)("span",{children:"Workflows"})]}),(0,h.jsxs)("a",{href:"/settings",className:"flex items-center gap-3 px-3 py-2.5 rounded-xl text-sm font-medium text-muted-foreground hover:bg-muted/50 hover:text-foreground transition-all group",children:[(0,h.jsx)(y.Settings,{className:"h-4 w-4 text-muted-foreground/70 group-hover:text-foreground transition-colors"}),(0,h.jsx)("span",{children:"Settings"})]})]})]})]})}));bG.displayName="NavSidebar";let bH=(0,z.default)("users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]]);a.s(["Users",()=>bH],60246);let bI=(0,z.default)("bug",[["path",{d:"M12 20v-9",key:"1qisl0"}],["path",{d:"M14 7a4 4 0 0 1 4 4v3a6 6 0 0 1-12 0v-3a4 4 0 0 1 4-4z",key:"uouzyp"}],["path",{d:"M14.12 3.88 16 2",key:"qol33r"}],["path",{d:"M21 21a4 4 0 0 0-3.81-4",key:"1b0z45"}],["path",{d:"M21 5a4 4 0 0 1-3.55 3.97",key:"5cxbf6"}],["path",{d:"M22 13h-4",key:"1jl80f"}],["path",{d:"M3 21a4 4 0 0 1 3.81-4",key:"1fjd4g"}],["path",{d:"M3 5a4 4 0 0 0 3.55 3.97",key:"1d7oge"}],["path",{d:"M6 13H2",key:"82j7cp"}],["path",{d:"m8 2 1.88 1.88",key:"fmnt4t"}],["path",{d:"M9 7.13V6a3 3 0 1 1 6 0v1.13",key:"1vgav8"}]]);function bJ({onLoadWorkflow:a}){let[b,c]=(0,i.useState)(!1),{data:d=[],isLoading:e}=(0,aP.useDebugWorkflows)(),f=(0,aP.useLoadDebugWorkflow)(),g=e||f.isPending;return(0,h.jsxs)("div",{className:"relative",children:[(0,h.jsx)("button",{onClick:()=>c(!b),className:`p-2 rounded-lg transition-all hover:scale-110 active:scale-95 group ${b?"bg-amber-100 text-amber-600 ring-1 ring-amber-200":"text-muted-foreground hover:text-foreground hover:bg-accent"}`,title:"Debug Workflows",children:(0,h.jsx)(bI,{className:`h-5 w-5 transition-transform duration-300 ${b?"rotate-12 scale-110":""}`})}),(0,h.jsx)(k.AnimatePresence,{children:b&&(0,h.jsxs)(F.motion.div,{initial:{opacity:0,x:-10,scale:.95},animate:{opacity:1,x:0,scale:1},exit:{opacity:0,x:-10,scale:.95},className:"absolute top-0 left-12 w-72 bg-card/98 backdrop-blur-2xl border border-border rounded-2xl shadow-2xl overflow-hidden z-50 origin-left",children:[(0,h.jsx)("div",{className:"p-3 border-b border-border bg-slate-50 dark:bg-slate-800/50",children:(0,h.jsxs)("h3",{className:"text-[10px] font-bold uppercase tracking-widest text-muted-foreground flex items-center gap-2",children:[(0,h.jsx)(aS,{className:"h-3 w-3"}),"Dummy Workflows (",d.length,")"]})}),(0,h.jsx)("div",{className:"max-h-80 overflow-y-auto p-1",children:g?(0,h.jsx)("div",{className:"flex items-center justify-center py-8",children:(0,h.jsx)(I.Loader2,{className:"h-5 w-5 animate-spin text-primary"})}):d.length>0?d.map(b=>(0,h.jsxs)("button",{onClick:()=>{f.mutate(b,{onSuccess:b=>{a(b),c(!1)}})},className:"w-full text-left px-3 py-2 text-xs hover:bg-slate-100 dark:hover:bg-slate-800 rounded-lg transition-colors flex items-center justify-between group",children:[(0,h.jsx)("span",{className:"truncate pr-2",children:b.replace(".json","")}),(0,h.jsx)("span",{className:"text-[9px] opacity-0 group-hover:opacity-100 bg-primary/10 text-primary px-1.5 py-0.5 rounded uppercase font-bold transition-opacity",children:"Load"})]},b)):(0,h.jsx)("div",{className:"p-4 text-center text-xs text-muted-foreground italic",children:"No dummy workflows found"})})]})})]})}let bK=(0,i.memo)(({showChat:a,setShowChat:b,onLoadWorkflow:c})=>(0,h.jsxs)("div",{className:"w-14 border-r border-border bg-card/50 flex flex-col items-center py-4 gap-4 z-10",children:[(0,h.jsx)("button",{onClick:()=>window.location.href="/workflows/new",title:"New Workflow",className:"p-2 rounded-xl bg-primary text-primary-foreground shadow-lg hover:scale-105 transition-transform",children:(0,h.jsx)(B.Plus,{className:"h-5 w-5"})}),(0,h.jsx)("div",{className:"w-8 h-[1px] bg-border"}),(0,h.jsx)("button",{onClick:()=>b(!a),className:`p-2 rounded-lg transition-colors ${a?"bg-accent text-primary":"text-muted-foreground hover:text-foreground hover:bg-accent"}`,children:(0,h.jsx)(bb.Bot,{className:"h-5 w-5"})}),(0,h.jsx)("button",{className:"p-2 rounded-lg text-muted-foreground hover:text-foreground hover:bg-accent transition-colors",children:(0,h.jsx)(v.Database,{className:"h-5 w-5"})}),(0,h.jsx)(bJ,{onLoadWorkflow:c}),(0,h.jsxs)("div",{className:"mt-auto flex flex-col gap-4",children:[(0,h.jsx)("button",{className:"p-2 rounded-lg text-muted-foreground hover:text-foreground hover:bg-accent transition-colors",children:(0,h.jsx)(bH,{className:"h-5 w-5"})}),(0,h.jsx)("button",{className:"p-2 rounded-lg text-muted-foreground hover:text-foreground hover:bg-accent transition-colors",children:(0,h.jsx)(y.Settings,{className:"h-5 w-5"})})]})]}));bK.displayName="SidebarControls";var bL=a.i(87532);let bM={"manual.trigger":aV.PlayCircle,"schedule.cron":a4.Timer,"webhook.receive":aW.Webhook,"whatsapp.trigger":T.LogoWhatsApp,"email.trigger":aX.Inbox,"rss.trigger":aY.Rss,"ai.llm":ba.Sparkles,"ai.agent":bb.Bot,"data.set":O.Edit3,"data.transform":a_.Shuffle,"slack.send":D.MessageSquare,"whatsapp.send":T.LogoWhatsApp,"google_sheets.write":T.LogoGoogleSheets,"google_sheets.read":T.LogoGoogleSheets,"http.request":M.Globe,"code.python":T.LogoPython,"code.javascript":u.Code,"email.send":aZ.Send,"discord.send":aZ.Send,"condition.if":a$.Split,"logic.parallel":a9.GitBranch,"logic.merge":a0.GitMerge,"logic.delay":a3.Clock,"logic.loop":a1.RotateCw,"logic.switch":a_.Shuffle,"logic.pause":a2.PauseCircle,"execution.pause":a2.PauseCircle,"utility.noop":aT.Activity},bN=(0,i.memo)(({isOpen:a,onClose:b,searchQuery:c,setSearchQuery:d,availableNodeTypes:e,onAddNode:f})=>(0,h.jsx)(k.AnimatePresence,{children:a&&(0,h.jsxs)(F.motion.div,{initial:{x:320,opacity:0},animate:{x:0,opacity:1},exit:{x:320,opacity:0},className:"absolute right-4 top-4 bottom-4 w-80 bg-card/90 backdrop-blur-xl border border-border rounded-2xl shadow-2xl overflow-hidden flex flex-col z-20",children:[(0,h.jsxs)("div",{className:"p-4 bg-background/50 backdrop-blur-md border-b border-border flex items-center justify-between",children:[(0,h.jsxs)("div",{children:[(0,h.jsx)("h3",{className:"font-bold text-lg",children:"Add Node"}),(0,h.jsx)("p",{className:"text-xs text-muted-foreground",children:"Select a step to add to your flow"})]}),(0,h.jsx)(H.Button,{variant:"ghost",size:"icon",onClick:b,className:"rounded-full shadow-sm hover:bg-background/80 transition-all",children:(0,h.jsx)(o.X,{className:"h-4 w-4"})})]}),(0,h.jsxs)("div",{className:"flex-1 flex flex-col min-h-0 overflow-hidden",children:[(0,h.jsx)("div",{className:"p-4 border-b border-border bg-background/20",children:(0,h.jsxs)("div",{className:"relative group",children:[(0,h.jsx)(bL.Search,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground group-focus-within:text-primary transition-colors"}),(0,h.jsx)("input",{type:"text",autoFocus:!0,value:c,onChange:a=>d(a.target.value),placeholder:"Search tools & triggers...",className:"w-full bg-background/50 border border-border rounded-xl pl-10 pr-4 py-2.5 text-sm placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-primary/20 focus:border-primary transition-all shadow-inner"})]})}),(0,h.jsx)("div",{className:"flex-1 overflow-y-auto p-4 space-y-8 custom-scrollbar",children:["Trigger","Action","Logic","Transform"].map(a=>{let b=(e||[]).filter(b=>(b.category===a||"Action"===a&&"action"===b.type||"Trigger"===a&&"trigger"===b.type)&&("Trigger"===a?"schedule.cron"===b.name:""===c||b.label?.toLowerCase().includes(c.toLowerCase())||b.description?.toLowerCase().includes(c.toLowerCase())));return 0===b.length?null:(0,h.jsxs)("div",{className:"space-y-4",children:[(0,h.jsxs)("div",{className:"flex items-center gap-2 px-1",children:[(0,h.jsx)("span",{className:"text-[10px] font-bold text-muted-foreground/60 uppercase tracking-[0.2em]",children:a}),(0,h.jsx)("div",{className:"h-[1px] flex-1 bg-border/40"})]}),(0,h.jsx)("div",{className:"grid grid-cols-1 gap-2.5",children:b.map(a=>{let b;return(0,h.jsxs)("button",{className:"flex items-center gap-4 p-3.5 rounded-2xl bg-background/40 border border-border/40 hover:border-primary/40 hover:bg-background/80 hover:shadow-lg transition-all text-left group relative overflow-hidden",onClick:()=>{f(a),d("")},children:[(0,h.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-primary/5 via-transparent to-transparent opacity-0 group-hover:opacity-100 transition-opacity"}),(0,h.jsx)("div",{className:`
                                                        relative z-10 p-2.5 rounded-xl transition-all shadow-sm group-hover:scale-110 group-hover:shadow-md
                                                        ${"trigger"===a.type?"bg-rose-500/10 text-rose-500":"bg-indigo-500/10 text-indigo-500"}
                                                    `,children:(b=((a,b="action")=>bM[a]||("trigger"===b?x.Zap:y.Settings))(a.name,a.type),(0,h.jsx)(b,{className:"h-5 w-5"}))}),(0,h.jsxs)("div",{className:"relative z-10 flex-1 min-w-0",children:[(0,h.jsxs)("div",{className:"text-sm font-semibold text-foreground group-hover:text-primary transition-colors flex items-center justify-between",children:[a.label,(0,h.jsx)(bu,{className:"h-3 w-3 opacity-0 -translate-x-2 group-hover:opacity-100 group-hover:translate-x-0 transition-all text-primary"})]}),(0,h.jsx)("div",{className:"text-xs text-muted-foreground line-clamp-1 group-hover:text-muted-foreground/80 transition-colors",children:a.description})]})]},a.name)})})]},a)})})]})]})}));bN.displayName="NodePanel";var bO=a.i(30222),bP=a.i(31011);function bQ({color:a,dimensions:b,lineWidth:c}){return i.default.createElement("path",{stroke:a,strokeWidth:c,d:`M${b[0]/2} 0 V${b[1]} M0 ${b[1]/2} H${b[0]}`})}function bR({color:a,radius:b}){return i.default.createElement("circle",{cx:b,cy:b,r:b,fill:a})}(e=f||(f={})).Lines="lines",e.Dots="dots",e.Cross="cross";let bS={[f.Dots]:"#91919a",[f.Lines]:"#eee",[f.Cross]:"#e2e2e2"},bT={[f.Dots]:1,[f.Lines]:1,[f.Cross]:6},bU=a=>({transform:a.transform,patternId:`pattern-${a.rfId}`});function bV({id:a,variant:b=f.Dots,gap:c=20,size:d,lineWidth:e=1,offset:g=2,color:h,style:k,className:l}){let m=(0,i.useRef)(null),{transform:n,patternId:o}=(0,j.useStore)(bU,bP.shallow),p=h||bS[b],q=d||bT[b],r=b===f.Dots,s=b===f.Cross,t=Array.isArray(c)?c:[c,c],u=[t[0]*n[2]||1,t[1]*n[2]||1],v=q*n[2],w=s?[v,v]:u,x=r?[v/g,v/g]:[w[0]/g,w[1]/g];return i.default.createElement("svg",{className:(0,bO.default)(["react-flow__background",l]),style:{...k,position:"absolute",width:"100%",height:"100%",top:0,left:0},ref:m,"data-testid":"rf__background"},i.default.createElement("pattern",{id:o+a,x:n[0]%u[0],y:n[1]%u[1],width:u[0],height:u[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${x[0]},-${x[1]})`},r?i.default.createElement(bR,{color:p,radius:v/g}):i.default.createElement(bQ,{dimensions:w,color:p,lineWidth:e})),i.default.createElement("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${o+a})`}))}bV.displayName="Background";var bW=(0,i.memo)(bV);let bX=(0,z.default)("mouse-pointer-2",[["path",{d:"M4.037 4.688a.495.495 0 0 1 .651-.651l16 6.5a.5.5 0 0 1-.063.947l-6.124 1.58a2 2 0 0 0-1.438 1.435l-1.579 6.126a.5.5 0 0 1-.947.063z",key:"edeuup"}]]),bY=(0,z.default)("hand",[["path",{d:"M18 11V6a2 2 0 0 0-2-2a2 2 0 0 0-2 2",key:"1fvzgz"}],["path",{d:"M14 10V4a2 2 0 0 0-2-2a2 2 0 0 0-2 2v2",key:"1kc0my"}],["path",{d:"M10 10.5V6a2 2 0 0 0-2-2a2 2 0 0 0-2 2v8",key:"10h0bg"}],["path",{d:"M18 8a2 2 0 1 1 4 0v6a8 8 0 0 1-8 8h-2c-2.8 0-4.5-.86-5.99-2.34l-3.6-3.6a2 2 0 0 1 2.83-2.82L7 15",key:"1s1gnw"}]]),bZ=(0,z.default)("zoom-in",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]),b$=(0,z.default)("zoom-out",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]),b_=(0,z.default)("maximize",[["path",{d:"M8 3H5a2 2 0 0 0-2 2v3",key:"1dcmit"}],["path",{d:"M21 8V5a2 2 0 0 0-2-2h-3",key:"1e4gt3"}],["path",{d:"M3 16v3a2 2 0 0 0 2 2h3",key:"wsl5sc"}],["path",{d:"M16 21h3a2 2 0 0 0 2-2v-3",key:"18trek"}]]),b0=(0,i.memo)(({nodes:a,edges:b,onNodesChange:c,onEdgesChange:d,onConnect:e,onNodeClick:g,onNodeDoubleClick:i,onNodeDrag:k,onNodeDragStop:l,onPaneClick:m,nodeTypes:n,edgeTypes:o,defaultEdgeOptions:p,canvasMode:q,setCanvasMode:r,onSelectionChange:s,setShowNodePanel:t,isExecuting:u,onExecute:v,zoomIn:w,zoomOut:x,fitView:y})=>(0,h.jsx)("div",{className:"flex-1 relative bg-background flex flex-col h-full",children:(0,h.jsx)("div",{className:"flex-1 relative h-full",children:(0,h.jsxs)(j.ReactFlow,{nodes:a,edges:b,onNodesChange:c,onEdgesChange:d,onConnect:e,onNodeClick:g,onNodeDoubleClick:i,onNodeDrag:k,onNodeDragStop:l,onPaneClick:m,nodeTypes:n,edgeTypes:o,defaultEdgeOptions:p,fitView:!0,className:"bg-background",edgesUpdatable:!0,edgesFocusable:!0,nodesDraggable:!0,nodesConnectable:!0,elementsSelectable:!0,selectionOnDrag:"select"===q,panOnDrag:"pan"===q||[1,2],selectionMode:j.SelectionMode.Partial,multiSelectionKeyCode:["Meta","Control"],onSelectionChange:s,children:[(0,h.jsx)(bW,{variant:f.Dots,gap:16,size:1.5,color:"#d1d5db",className:"dark:opacity-30"}),(0,h.jsx)(j.Panel,{position:"bottom-left",className:"ml-4 mb-4",children:(0,h.jsxs)("div",{className:"flex flex-col items-center gap-2",children:[(0,h.jsxs)("div",{className:"flex flex-col items-center gap-1 p-1 bg-card/90 backdrop-blur-xl border border-border rounded-lg shadow-lg",children:[(0,h.jsx)("button",{onClick:()=>r("select"),className:`p-1.5 rounded-md transition-all active:scale-95 ${"select"===q?"bg-primary text-primary-foreground shadow-sm":"text-muted-foreground hover:text-foreground hover:bg-accent"}`,title:"Select Mode (V)",children:(0,h.jsx)(bX,{className:"h-3.5 w-3.5"})}),(0,h.jsx)("button",{onClick:()=>r("pan"),className:`p-1.5 rounded-md transition-all active:scale-95 ${"pan"===q?"bg-primary text-primary-foreground shadow-sm":"text-muted-foreground hover:text-foreground hover:bg-accent"}`,title:"Pan Mode (H)",children:(0,h.jsx)(bY,{className:"h-3.5 w-3.5"})})]}),(0,h.jsxs)("div",{className:"flex flex-col items-center gap-1 p-1 bg-card/90 backdrop-blur-xl border border-border rounded-lg shadow-lg",children:[(0,h.jsx)("button",{onClick:w,className:"p-1 hover:bg-accent rounded-md text-muted-foreground hover:text-foreground transition-all active:scale-95",title:"Zoom In",children:(0,h.jsx)(bZ,{className:"h-3.5 w-3.5"})}),(0,h.jsx)("button",{onClick:y,className:"p-1 hover:bg-accent rounded-md text-muted-foreground hover:text-foreground transition-all active:scale-95",title:"Fit View",children:(0,h.jsx)(b_,{className:"h-3.5 w-3.5"})}),(0,h.jsx)("button",{onClick:x,className:"p-1 hover:bg-accent rounded-md text-muted-foreground hover:text-foreground transition-all active:scale-95",title:"Zoom Out",children:(0,h.jsx)(b$,{className:"h-3.5 w-3.5"})})]})]})}),(0,h.jsx)(j.Panel,{position:"top-right",className:"mr-4 mt-4",children:(0,h.jsx)(H.Button,{onClick:()=>t(!0),className:"p-0 h-10 w-10 rounded-xl shadow-xl hover:scale-105 transition-transform",children:(0,h.jsx)(B.Plus,{className:"h-5 w-5"})})}),(0,h.jsx)(j.Panel,{position:"bottom-center",className:"mb-6",children:(0,h.jsx)(F.motion.div,{whileHover:{scale:1.02},whileTap:{scale:.98},children:(0,h.jsxs)(H.Button,{onClick:v,disabled:u,className:"rounded-xl px-6 py-2.5 bg-primary hover:bg-primary/90 border-b-2 border-primary-dark shadow-xl hover:shadow-primary/20 h-auto font-semibold text-sm flex items-center gap-2.5 transition-all duration-150 active:border-b-0 active:translate-y-[1px]",children:[u?(0,h.jsx)(I.Loader2,{className:"h-4 w-4 animate-spin"}):(0,h.jsx)(E.Play,{className:"h-3.5 w-3.5 fill-current"}),u?"Running...":"Execute Workflow"]})})}),0===a.length&&(0,h.jsx)("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:(0,h.jsxs)(F.motion.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"flex flex-col items-center gap-3 pointer-events-auto",children:[(0,h.jsxs)("button",{onClick:()=>t(!0),className:"group flex flex-col items-center gap-2 p-8 rounded-xl border-2 border-dashed border-border hover:border-primary hover:bg-primary/5 transition-all",children:[(0,h.jsx)("div",{className:"p-4 rounded-full bg-muted group-hover:bg-primary/10 transition-colors",children:(0,h.jsx)(B.Plus,{className:"h-8 w-8 text-muted-foreground group-hover:text-primary"})}),(0,h.jsx)("span",{className:"text-sm font-medium",children:"Add first step..."})]}),(0,h.jsx)("a",{href:"/workflows",className:"text-xs text-primary hover:underline",children:"or start from a template"})]})})]})})}));b0.displayName="FlowCanvas";let b1={custom:function({id:a,sourceX:b,sourceY:c,targetX:d,targetY:e,sourcePosition:f,targetPosition:g,style:i={},markerEnd:k}){let{setEdges:l,setNodes:m,getEdge:n}=(0,j.useReactFlow)(),[o,p,q]=(0,j.getBezierPath)({sourceX:b,sourceY:c,sourcePosition:f,targetX:d,targetY:e,targetPosition:g});return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)("path",{id:a,style:{...i,strokeWidth:3,stroke:"#9ca3af"},className:"react-flow__edge-path",d:o,markerEnd:k}),(0,h.jsx)(j.EdgeLabelRenderer,{children:(0,h.jsx)("div",{style:{position:"absolute",transform:`translate(-50%, -50%) translate(${p}px,${q}px)`,fontSize:12,pointerEvents:"all"},className:"nodrag nopan",children:(0,h.jsxs)("div",{className:"flex items-center gap-1.5 p-1 bg-background/80 backdrop-blur-sm border border-border rounded-full shadow-sm opacity-0 hover:opacity-100 transition-opacity duration-200",children:[(0,h.jsx)("button",{className:"w-5 h-5 flex items-center justify-center bg-primary text-primary-foreground rounded-full hover:scale-110 transition-transform",onClick:b=>{b.stopPropagation();let c=new CustomEvent("addNodeBetween",{detail:{edgeId:a,x:p,y:q}});window.dispatchEvent(c)},title:"Add node between",children:(0,h.jsx)(B.Plus,{size:12,strokeWidth:3})}),(0,h.jsx)("button",{className:"w-5 h-5 flex items-center justify-center bg-destructive text-destructive-foreground rounded-full hover:scale-110 transition-transform",onClick:b=>{b.stopPropagation(),l(b=>b.filter(b=>b.id!==a))},title:"Delete connection",children:(0,h.jsx)(N.Trash2,{size:12,strokeWidth:3})})]})})})]})}},b2={type:"custom",animated:!1,style:{stroke:"#9ca3af",strokeWidth:3},markerEnd:{type:j.MarkerType.ArrowClosed,color:"#9ca3af",width:14,height:14},deletable:!0};function b3({workflowId:a,workflowName:b,initialNodes:c=[],initialEdges:d=[],onNodesChange:e,onEdgesChange:f,onMetaChange:g,onExecutionChange:j,onObservabilityChange:m,onAiMetadataChange:n,onSave:o,saveStatus:p,isDirty:q,isSaving:r,onBack:s}){let[t,u]=(0,i.useState)(!1),[v,w]=(0,i.useState)(!1),[x,y]=(0,i.useState)("select"),[z,A]=(0,i.useState)(""),B=(0,i.useMemo)(()=>br,[]),C=(0,i.useMemo)(()=>b1,[]),{nodes:D,edges:E,onNodesChange:F,onEdgesChange:G,onConnect:H,onNodeClick:I,onNodeDoubleClick:J,onNodeDrag:K,onNodeDragStop:L,selectedNode:M,setSelectedNode:N,activeTab:O,setActiveTab:P,isActive:Q,toggleActive:R,showNodePanel:S,setShowNodePanel:T,showChat:U,setShowChat:V,isDetailsModalOpen:W,setIsDetailsModalOpen:X,undo:Y,redo:Z,copyNode:$,pasteNode:_,availableNodeTypes:aa,onNodeUpdate:ab,onNodeDelete:ac,handleAddNode:ad,chatMessage:ae,setChatMessage:af,chatHistory:ag,isAiLoading:ah,handleSendChat:ai,fitView:aj,zoomIn:ak,zoomOut:al,handleExecute:am,handleExecuteNode:an,isExecuting:ao,logs:ap,setLogs:aq,workflowMeta:ar,updateWorkflowMeta:as,loadV2Workflow:at,setSplitEdge:au,setPendingConnection:av,onSelectionChange:aw,saveStatus:ax,isDirty:ay,isSaving:az,handleSave:aA}=(0,l.useWorkflowBuilder)({initialNodes:c,initialEdges:d,workflowId:a}),aB=p||ax,aC=q||ay;return(0,h.jsxs)("div",{className:"h-screen flex flex-col bg-background text-foreground overflow-hidden",children:[(0,h.jsx)(bD,{workflowMeta:ar,updateWorkflowMeta:as,activeTab:O,setActiveTab:P,showLogs:v,setShowLogs:w,isActive:Q||!1,toggleActive:R,onSave:o||aA,isSaving:r||az,saveStatus:aB,isDirty:aC,showNavSidebar:t,setShowNavSidebar:u}),(0,h.jsx)(bG,{isOpen:t,onClose:()=>u(!1)}),(0,h.jsxs)("div",{className:"flex-1 relative flex",children:[(0,h.jsx)(bK,{showChat:U,setShowChat:V,onLoadWorkflow:at}),(0,h.jsx)(b0,{nodes:D,edges:E,onNodesChange:F,onEdgesChange:G,onConnect:H,onNodeClick:I,onNodeDoubleClick:J,onNodeDrag:K,onNodeDragStop:L,onPaneClick:()=>{N(null),T(!1),A("")},nodeTypes:B,edgeTypes:C,defaultEdgeOptions:b2,canvasMode:x,setCanvasMode:y,onSelectionChange:aw,setShowNodePanel:T,isExecuting:ao,onExecute:am,zoomIn:ak,zoomOut:al,fitView:aj}),(0,h.jsx)(k.AnimatePresence,{children:v&&(0,h.jsx)(bw,{logs:ap,isOpen:v,onClose:()=>w(!1),onClear:()=>aq([])})}),(0,h.jsx)(bN,{isOpen:S,onClose:()=>{T(!1),au(null),av(null)},searchQuery:z,setSearchQuery:A,availableNodeTypes:aa,onAddNode:ad}),(0,h.jsx)(k.AnimatePresence,{children:W&&M&&(0,h.jsx)(bi,{node:M,schema:(aa||[]).find(a=>{let b=M.data?.node_name||M.type;return a.name===b})||{name:M.type||"unknown",label:M.data?.label||"Node",type:M.data?.type||"action",icon:"Settings",description:"",inputs:[],outputs:[],category:"Custom"},allNodes:D,edges:E,onSelectNode:a=>{N(a),X(!0)},onClose:()=>X(!1),onUpdate:ab,onExecute:an,saveStatus:ax,isDirty:ay})})]}),(0,h.jsx)(bz,{isOpen:U,onClose:()=>V(!1),messages:ag,isLoading:ah,input:ae,onInputChange:af,onSend:ai})]})}a.s(["WorkflowBuilder",()=>b3],26228);let b4=(0,z.default)("ellipsis-vertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]),b5=(0,z.default)("pause",[["rect",{x:"14",y:"3",width:"5",height:"18",rx:"1",key:"kaeet6"}],["rect",{x:"5",y:"3",width:"5",height:"18",rx:"1",key:"1wsw3u"}]]);var b6=a.i(24569),b7=a.i(67453);let b8=(0,z.default)("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);a.s(["Calendar",()=>b8],41675);var b9=a.i(34904),ca=a.i(7554),cb=a.i(70121),cc=a.i(50104),cd=a.i(25152),ce=a.i(35112);function cf(a){var b;let c,d=(b=a,(c=i.forwardRef((a,b)=>{let{children:c,...d}=a;if(i.isValidElement(c)){var e;let a,f,g=(e=c,(f=(a=Object.getOwnPropertyDescriptor(e.props,"ref")?.get)&&"isReactWarning"in a&&a.isReactWarning)?e.ref:(f=(a=Object.getOwnPropertyDescriptor(e,"ref")?.get)&&"isReactWarning"in a&&a.isReactWarning)?e.props.ref:e.props.ref||e.ref),h=function(a,b){let c={...b};for(let d in b){let e=a[d],f=b[d];/^on[A-Z]/.test(d)?e&&f?c[d]=(...a)=>{let b=f(...a);return e(...a),b}:e&&(c[d]=e):"style"===d?c[d]={...e,...f}:"className"===d&&(c[d]=[e,f].filter(Boolean).join(" "))}return{...a,...c}}(d,c.props);return c.type!==i.Fragment&&(h.ref=b?(0,cb.composeRefs)(b,g):g),i.cloneElement(c,h)}return i.Children.count(c)>1?i.Children.only(null):null})).displayName=`${b}.SlotClone`,c),e=i.forwardRef((a,b)=>{let{children:c,...e}=a,f=i.Children.toArray(c),g=f.find(ch);if(g){let a=g.props.children,c=f.map(b=>b!==g?b:i.Children.count(a)>1?i.Children.only(null):i.isValidElement(a)?a.props.children:null);return(0,h.jsx)(d,{...e,ref:b,children:i.isValidElement(a)?i.cloneElement(a,void 0,c):null})}return(0,h.jsx)(d,{...e,ref:b,children:c})});return e.displayName=`${a}.Slot`,e}var cg=Symbol("radix.slottable");function ch(a){return i.isValidElement(a)&&"function"==typeof a.type&&"__radixId"in a.type&&a.type.__radixId===cg}var ci=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((a,b)=>{let c=cf(`Primitive.${b}`),d=i.forwardRef((a,d)=>{let{asChild:e,...f}=a;return(0,h.jsx)(e?c:b,{...f,ref:d})});return d.displayName=`Primitive.${b}`,{...a,[b]:d}},{});function cj(a,b){a&&ce.flushSync(()=>a.dispatchEvent(b))}function ck(a){let b=a+"CollectionProvider",[c,d]=(0,cc.createContextScope)(b),[e,f]=c(b,{collectionRef:{current:null},itemMap:new Map}),g=a=>{let{scope:b,children:c}=a,d=i.default.useRef(null),f=i.default.useRef(new Map).current;return(0,h.jsx)(e,{scope:b,itemMap:f,collectionRef:d,children:c})};g.displayName=b;let j=a+"CollectionSlot",k=cf(j),l=i.default.forwardRef((a,b)=>{let{scope:c,children:d}=a,e=f(j,c),g=(0,cb.useComposedRefs)(b,e.collectionRef);return(0,h.jsx)(k,{ref:g,children:d})});l.displayName=j;let m=a+"CollectionItemSlot",n="data-radix-collection-item",o=cf(m),p=i.default.forwardRef((a,b)=>{let{scope:c,children:d,...e}=a,g=i.default.useRef(null),j=(0,cb.useComposedRefs)(b,g),k=f(m,c);return i.default.useEffect(()=>(k.itemMap.set(g,{ref:g,...e}),()=>void k.itemMap.delete(g))),(0,h.jsx)(o,{...{[n]:""},ref:j,children:d})});return p.displayName=m,[{Provider:g,Slot:l,ItemSlot:p},function(b){let c=f(a+"CollectionConsumer",b);return i.default.useCallback(()=>{let a=c.collectionRef.current;if(!a)return[];let b=Array.from(a.querySelectorAll(`[${n}]`));return Array.from(c.itemMap.values()).sort((a,c)=>b.indexOf(a.ref.current)-b.indexOf(c.ref.current))},[c.collectionRef,c.itemMap])},d]}var cl=new WeakMap;function cm(a,b){var c,d;let e,f,g;if("at"in Array.prototype)return Array.prototype.at.call(a,b);let h=(c=a,d=b,e=c.length,(g=(f=cn(d))>=0?f:e+f)<0||g>=e?-1:g);return -1===h?void 0:a[h]}function cn(a){return a!=a||0===a?0:Math.trunc(a)}(class a extends Map{#o;constructor(a){super(a),this.#o=[...super.keys()],cl.set(this,!0)}set(a,b){return cl.get(this)&&(this.has(a)?this.#o[this.#o.indexOf(a)]=a:this.#o.push(a)),super.set(a,b),this}insert(a,b,c){let d,e=this.has(b),f=this.#o.length,g=cn(a),h=g>=0?g:f+g,i=h<0||h>=f?-1:h;if(i===this.size||e&&i===this.size-1||-1===i)return this.set(b,c),this;let j=this.size+ +!e;g<0&&h++;let k=[...this.#o],l=!1;for(let a=h;a<j;a++)if(h===a){let f=k[a];k[a]===b&&(f=k[a+1]),e&&this.delete(b),d=this.get(f),this.set(b,c)}else{l||k[a-1]!==b||(l=!0);let c=k[l?a:a-1],e=d;d=this.get(c),this.delete(c),this.set(c,e)}return this}with(b,c,d){let e=new a(this);return e.insert(b,c,d),e}before(a){let b=this.#o.indexOf(a)-1;if(!(b<0))return this.entryAt(b)}setBefore(a,b,c){let d=this.#o.indexOf(a);return -1===d?this:this.insert(d,b,c)}after(a){let b=this.#o.indexOf(a);if(-1!==(b=-1===b||b===this.size-1?-1:b+1))return this.entryAt(b)}setAfter(a,b,c){let d=this.#o.indexOf(a);return -1===d?this:this.insert(d+1,b,c)}first(){return this.entryAt(0)}last(){return this.entryAt(-1)}clear(){return this.#o=[],super.clear()}delete(a){let b=super.delete(a);return b&&this.#o.splice(this.#o.indexOf(a),1),b}deleteAt(a){let b=this.keyAt(a);return void 0!==b&&this.delete(b)}at(a){let b=cm(this.#o,a);if(void 0!==b)return this.get(b)}entryAt(a){let b=cm(this.#o,a);if(void 0!==b)return[b,this.get(b)]}indexOf(a){return this.#o.indexOf(a)}keyAt(a){return cm(this.#o,a)}from(a,b){let c=this.indexOf(a);if(-1===c)return;let d=c+b;return d<0&&(d=0),d>=this.size&&(d=this.size-1),this.at(d)}keyFrom(a,b){let c=this.indexOf(a);if(-1===c)return;let d=c+b;return d<0&&(d=0),d>=this.size&&(d=this.size-1),this.keyAt(d)}find(a,b){let c=0;for(let d of this){if(Reflect.apply(a,b,[d,c,this]))return d;c++}}findIndex(a,b){let c=0;for(let d of this){if(Reflect.apply(a,b,[d,c,this]))return c;c++}return -1}filter(b,c){let d=[],e=0;for(let a of this)Reflect.apply(b,c,[a,e,this])&&d.push(a),e++;return new a(d)}map(b,c){let d=[],e=0;for(let a of this)d.push([a[0],Reflect.apply(b,c,[a,e,this])]),e++;return new a(d)}reduce(...a){let[b,c]=a,d=0,e=c??this.at(0);for(let c of this)e=0===d&&1===a.length?c:Reflect.apply(b,this,[e,c,d,this]),d++;return e}reduceRight(...a){let[b,c]=a,d=c??this.at(-1);for(let c=this.size-1;c>=0;c--){let e=this.at(c);d=c===this.size-1&&1===a.length?e:Reflect.apply(b,this,[d,e,c,this])}return d}toSorted(b){return new a([...this.entries()].sort(b))}toReversed(){let b=new a;for(let a=this.size-1;a>=0;a--){let c=this.keyAt(a),d=this.get(c);b.set(c,d)}return b}toSpliced(...b){let c=[...this.entries()];return c.splice(...b),new a(c)}slice(b,c){let d=new a,e=this.size-1;if(void 0===b)return d;b<0&&(b+=this.size),void 0!==c&&c>0&&(e=c-1);for(let a=b;a<=e;a++){let b=this.keyAt(a),c=this.get(b);d.set(b,c)}return d}every(a,b){let c=0;for(let d of this){if(!Reflect.apply(a,b,[d,c,this]))return!1;c++}return!0}some(a,b){let c=0;for(let d of this){if(Reflect.apply(a,b,[d,c,this]))return!0;c++}return!1}});var co=a.i(7827),cp=a.i(46872),cq=a.i(76549),cr="dismissableLayer.update",cs=i.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),ct=i.forwardRef((a,b)=>{let{disableOutsidePointerEvents:c=!1,onEscapeKeyDown:d,onPointerDownOutside:e,onFocusOutside:f,onInteractOutside:j,onDismiss:k,...l}=a,m=i.useContext(cs),[n,o]=i.useState(null),p=n?.ownerDocument??globalThis?.document,[,q]=i.useState({}),r=(0,cb.useComposedRefs)(b,a=>o(a)),s=Array.from(m.layers),[t]=[...m.layersWithOutsidePointerEventsDisabled].slice(-1),u=s.indexOf(t),v=n?s.indexOf(n):-1,w=m.layersWithOutsidePointerEventsDisabled.size>0,x=v>=u,y=function(a,b=globalThis?.document){let c=(0,cp.useCallbackRef)(a),d=i.useRef(!1),e=i.useRef(()=>{});return i.useEffect(()=>{let a=a=>{if(a.target&&!d.current){let d=function(){cv("dismissableLayer.pointerDownOutside",c,f,{discrete:!0})},f={originalEvent:a};"touch"===a.pointerType?(b.removeEventListener("click",e.current),e.current=d,b.addEventListener("click",e.current,{once:!0})):d()}else b.removeEventListener("click",e.current);d.current=!1},f=window.setTimeout(()=>{b.addEventListener("pointerdown",a)},0);return()=>{window.clearTimeout(f),b.removeEventListener("pointerdown",a),b.removeEventListener("click",e.current)}},[b,c]),{onPointerDownCapture:()=>d.current=!0}}(a=>{let b=a.target,c=[...m.branches].some(a=>a.contains(b));x&&!c&&(e?.(a),j?.(a),a.defaultPrevented||k?.())},p),z=function(a,b=globalThis?.document){let c=(0,cp.useCallbackRef)(a),d=i.useRef(!1);return i.useEffect(()=>{let a=a=>{a.target&&!d.current&&cv("dismissableLayer.focusOutside",c,{originalEvent:a},{discrete:!1})};return b.addEventListener("focusin",a),()=>b.removeEventListener("focusin",a)},[b,c]),{onFocusCapture:()=>d.current=!0,onBlurCapture:()=>d.current=!1}}(a=>{let b=a.target;![...m.branches].some(a=>a.contains(b))&&(f?.(a),j?.(a),a.defaultPrevented||k?.())},p);return(0,cq.useEscapeKeydown)(a=>{v===m.layers.size-1&&(d?.(a),!a.defaultPrevented&&k&&(a.preventDefault(),k()))},p),i.useEffect(()=>{if(n)return c&&(0===m.layersWithOutsidePointerEventsDisabled.size&&(g=p.body.style.pointerEvents,p.body.style.pointerEvents="none"),m.layersWithOutsidePointerEventsDisabled.add(n)),m.layers.add(n),cu(),()=>{c&&1===m.layersWithOutsidePointerEventsDisabled.size&&(p.body.style.pointerEvents=g)}},[n,p,c,m]),i.useEffect(()=>()=>{n&&(m.layers.delete(n),m.layersWithOutsidePointerEventsDisabled.delete(n),cu())},[n,m]),i.useEffect(()=>{let a=()=>q({});return document.addEventListener(cr,a),()=>document.removeEventListener(cr,a)},[]),(0,h.jsx)(ci.div,{...l,ref:r,style:{pointerEvents:w?x?"auto":"none":void 0,...a.style},onFocusCapture:(0,ca.composeEventHandlers)(a.onFocusCapture,z.onFocusCapture),onBlurCapture:(0,ca.composeEventHandlers)(a.onBlurCapture,z.onBlurCapture),onPointerDownCapture:(0,ca.composeEventHandlers)(a.onPointerDownCapture,y.onPointerDownCapture)})});function cu(){let a=new CustomEvent(cr);document.dispatchEvent(a)}function cv(a,b,c,{discrete:d}){let e=c.originalEvent.target,f=new CustomEvent(a,{bubbles:!1,cancelable:!0,detail:c});b&&e.addEventListener(a,b,{once:!0}),d?cj(e,f):e.dispatchEvent(f)}ct.displayName="DismissableLayer",i.forwardRef((a,b)=>{let c=i.useContext(cs),d=i.useRef(null),e=(0,cb.useComposedRefs)(b,d);return i.useEffect(()=>{let a=d.current;if(a)return c.branches.add(a),()=>{c.branches.delete(a)}},[c.branches]),(0,h.jsx)(ci.div,{...a,ref:e})}).displayName="DismissableLayerBranch";var cw=a.i(86228),cx="focusScope.autoFocusOnMount",cy="focusScope.autoFocusOnUnmount",cz={bubbles:!1,cancelable:!0},cA=i.forwardRef((a,b)=>{let{loop:c=!1,trapped:d=!1,onMountAutoFocus:e,onUnmountAutoFocus:f,...g}=a,[j,k]=i.useState(null),l=(0,cp.useCallbackRef)(e),m=(0,cp.useCallbackRef)(f),n=i.useRef(null),o=(0,cb.useComposedRefs)(b,a=>k(a)),p=i.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;i.useEffect(()=>{if(d){let a=function(a){if(p.paused||!j)return;let b=a.target;j.contains(b)?n.current=b:cD(n.current,{select:!0})},b=function(a){if(p.paused||!j)return;let b=a.relatedTarget;null!==b&&(j.contains(b)||cD(n.current,{select:!0}))};document.addEventListener("focusin",a),document.addEventListener("focusout",b);let c=new MutationObserver(function(a){if(document.activeElement===document.body)for(let b of a)b.removedNodes.length>0&&cD(j)});return j&&c.observe(j,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",a),document.removeEventListener("focusout",b),c.disconnect()}}},[d,j,p.paused]),i.useEffect(()=>{if(j){cE.add(p);let a=document.activeElement;if(!j.contains(a)){let b=new CustomEvent(cx,cz);j.addEventListener(cx,l),j.dispatchEvent(b),b.defaultPrevented||(function(a,{select:b=!1}={}){let c=document.activeElement;for(let d of a)if(cD(d,{select:b}),document.activeElement!==c)return}(cB(j).filter(a=>"A"!==a.tagName),{select:!0}),document.activeElement===a&&cD(j))}return()=>{j.removeEventListener(cx,l),setTimeout(()=>{let b=new CustomEvent(cy,cz);j.addEventListener(cy,m),j.dispatchEvent(b),b.defaultPrevented||cD(a??document.body,{select:!0}),j.removeEventListener(cy,m),cE.remove(p)},0)}}},[j,l,m,p]);let q=i.useCallback(a=>{if(!c&&!d||p.paused)return;let b="Tab"===a.key&&!a.altKey&&!a.ctrlKey&&!a.metaKey,e=document.activeElement;if(b&&e){var f;let b,d=a.currentTarget,[g,h]=[cC(b=cB(f=d),f),cC(b.reverse(),f)];g&&h?a.shiftKey||e!==h?a.shiftKey&&e===g&&(a.preventDefault(),c&&cD(h,{select:!0})):(a.preventDefault(),c&&cD(g,{select:!0})):e===d&&a.preventDefault()}},[c,d,p.paused]);return(0,h.jsx)(ci.div,{tabIndex:-1,...g,ref:o,onKeyDown:q})});function cB(a){let b=[],c=document.createTreeWalker(a,NodeFilter.SHOW_ELEMENT,{acceptNode:a=>{let b="INPUT"===a.tagName&&"hidden"===a.type;return a.disabled||a.hidden||b?NodeFilter.FILTER_SKIP:a.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;c.nextNode();)b.push(c.currentNode);return b}function cC(a,b){for(let c of a)if(!function(a,{upTo:b}){if("hidden"===getComputedStyle(a).visibility)return!0;for(;a&&(void 0===b||a!==b);){if("none"===getComputedStyle(a).display)return!0;a=a.parentElement}return!1}(c,{upTo:b}))return c}function cD(a,{select:b=!1}={}){if(a&&a.focus){var c;let d=document.activeElement;a.focus({preventScroll:!0}),a!==d&&(c=a)instanceof HTMLInputElement&&"select"in c&&b&&a.select()}}cA.displayName="FocusScope";var cE=(b=[],{add(a){let c=b[0];a!==c&&c?.pause(),(b=cF(b,a)).unshift(a)},remove(a){b=cF(b,a),b[0]?.resume()}});function cF(a,b){let c=[...a],d=c.indexOf(b);return -1!==d&&c.splice(d,1),c}var cG=a.i(92843);let cH=["top","right","bottom","left"],cI=Math.min,cJ=Math.max,cK=Math.round,cL=Math.floor,cM=a=>({x:a,y:a}),cN={left:"right",right:"left",bottom:"top",top:"bottom"},cO={start:"end",end:"start"};function cP(a,b){return"function"==typeof a?a(b):a}function cQ(a){return a.split("-")[0]}function cR(a){return a.split("-")[1]}function cS(a){return"x"===a?"y":"x"}function cT(a){return"y"===a?"height":"width"}let cU=new Set(["top","bottom"]);function cV(a){return cU.has(cQ(a))?"y":"x"}function cW(a){return a.replace(/start|end/g,a=>cO[a])}let cX=["left","right"],cY=["right","left"],cZ=["top","bottom"],c$=["bottom","top"];function c_(a){return a.replace(/left|right|bottom|top/g,a=>cN[a])}function c0(a){return"number"!=typeof a?{top:0,right:0,bottom:0,left:0,...a}:{top:a,right:a,bottom:a,left:a}}function c1(a){let{x:b,y:c,width:d,height:e}=a;return{width:d,height:e,top:c,left:b,right:b+d,bottom:c+e,x:b,y:c}}function c2(a,b,c){let d,{reference:e,floating:f}=a,g=cV(b),h=cS(cV(b)),i=cT(h),j=cQ(b),k="y"===g,l=e.x+e.width/2-f.width/2,m=e.y+e.height/2-f.height/2,n=e[i]/2-f[i]/2;switch(j){case"top":d={x:l,y:e.y-f.height};break;case"bottom":d={x:l,y:e.y+e.height};break;case"right":d={x:e.x+e.width,y:m};break;case"left":d={x:e.x-f.width,y:m};break;default:d={x:e.x,y:e.y}}switch(cR(b)){case"start":d[h]-=n*(c&&k?-1:1);break;case"end":d[h]+=n*(c&&k?-1:1)}return d}let c3=async(a,b,c)=>{let{placement:d="bottom",strategy:e="absolute",middleware:f=[],platform:g}=c,h=f.filter(Boolean),i=await (null==g.isRTL?void 0:g.isRTL(b)),j=await g.getElementRects({reference:a,floating:b,strategy:e}),{x:k,y:l}=c2(j,d,i),m=d,n={},o=0;for(let c=0;c<h.length;c++){let{name:f,fn:p}=h[c],{x:q,y:r,data:s,reset:t}=await p({x:k,y:l,initialPlacement:d,placement:m,strategy:e,middlewareData:n,rects:j,platform:g,elements:{reference:a,floating:b}});k=null!=q?q:k,l=null!=r?r:l,n={...n,[f]:{...n[f],...s}},t&&o<=50&&(o++,"object"==typeof t&&(t.placement&&(m=t.placement),t.rects&&(j=!0===t.rects?await g.getElementRects({reference:a,floating:b,strategy:e}):t.rects),{x:k,y:l}=c2(j,m,i)),c=-1)}return{x:k,y:l,placement:m,strategy:e,middlewareData:n}};async function c4(a,b){var c;void 0===b&&(b={});let{x:d,y:e,platform:f,rects:g,elements:h,strategy:i}=a,{boundary:j="clippingAncestors",rootBoundary:k="viewport",elementContext:l="floating",altBoundary:m=!1,padding:n=0}=cP(b,a),o=c0(n),p=h[m?"floating"===l?"reference":"floating":l],q=c1(await f.getClippingRect({element:null==(c=await (null==f.isElement?void 0:f.isElement(p)))||c?p:p.contextElement||await (null==f.getDocumentElement?void 0:f.getDocumentElement(h.floating)),boundary:j,rootBoundary:k,strategy:i})),r="floating"===l?{x:d,y:e,width:g.floating.width,height:g.floating.height}:g.reference,s=await (null==f.getOffsetParent?void 0:f.getOffsetParent(h.floating)),t=await (null==f.isElement?void 0:f.isElement(s))&&await (null==f.getScale?void 0:f.getScale(s))||{x:1,y:1},u=c1(f.convertOffsetParentRelativeRectToViewportRelativeRect?await f.convertOffsetParentRelativeRectToViewportRelativeRect({elements:h,rect:r,offsetParent:s,strategy:i}):r);return{top:(q.top-u.top+o.top)/t.y,bottom:(u.bottom-q.bottom+o.bottom)/t.y,left:(q.left-u.left+o.left)/t.x,right:(u.right-q.right+o.right)/t.x}}function c5(a,b){return{top:a.top-b.height,right:a.right-b.width,bottom:a.bottom-b.height,left:a.left-b.width}}function c6(a){return cH.some(b=>a[b]>=0)}let c7=new Set(["left","top"]);async function c8(a,b){let{placement:c,platform:d,elements:e}=a,f=await (null==d.isRTL?void 0:d.isRTL(e.floating)),g=cQ(c),h=cR(c),i="y"===cV(c),j=c7.has(g)?-1:1,k=f&&i?-1:1,l=cP(b,a),{mainAxis:m,crossAxis:n,alignmentAxis:o}="number"==typeof l?{mainAxis:l,crossAxis:0,alignmentAxis:null}:{mainAxis:l.mainAxis||0,crossAxis:l.crossAxis||0,alignmentAxis:l.alignmentAxis};return h&&"number"==typeof o&&(n="end"===h?-1*o:o),i?{x:n*k,y:m*j}:{x:m*j,y:n*k}}function c9(a){return function(a){return!1}(a)?(a.nodeName||"").toLowerCase():"#document"}function da(a){var b;return(null==a||null==(b=a.ownerDocument)?void 0:b.defaultView)||window}function db(a){var b;return null==(b=(function(a){return!1}(a)?a.ownerDocument:a.document)||window.document)?void 0:b.documentElement}function dc(a){return!1}let dd=new Set(["inline","contents"]);function de(a){let{overflow:b,overflowX:c,overflowY:d,display:e}=dq(a);return/auto|scroll|overlay|hidden|clip/.test(b+d+c)&&!dd.has(e)}let df=new Set(["table","td","th"]),dg=[":popover-open",":modal"];function dh(a){return dg.some(b=>{try{return a.matches(b)}catch(a){return!1}})}let di=["transform","translate","scale","rotate","perspective"],dj=["transform","translate","scale","rotate","perspective","filter"],dk=["paint","layout","strict","content"];function dl(a){let b=dm(),c=a;return di.some(a=>!!c[a]&&"none"!==c[a])||!!c.containerType&&"normal"!==c.containerType||!b&&!!c.backdropFilter&&"none"!==c.backdropFilter||!b&&!!c.filter&&"none"!==c.filter||dj.some(a=>(c.willChange||"").includes(a))||dk.some(a=>(c.contain||"").includes(a))}function dm(){return"undefined"!=typeof CSS&&!!CSS.supports&&CSS.supports("-webkit-backdrop-filter","none")}let dn=new Set(["html","body","#document"]);function dp(a){return dn.has(c9(a))}function dq(a){return da(a).getComputedStyle(a)}function dr(a){return{scrollLeft:a.scrollX,scrollTop:a.scrollY}}function ds(a){if("html"===c9(a))return a;let b=a.assignedSlot||a.parentNode||!1||db(a);return b}function dt(a,b,c){var d;void 0===b&&(b=[]),void 0===c&&(c=!0);let e=function a(b){let c=ds(b);return dp(c)?b.ownerDocument?b.ownerDocument.body:b.body:a(c)}(a),f=e===(null==(d=a.ownerDocument)?void 0:d.body),g=da(e);if(f){let a=du(g);return b.concat(g,g.visualViewport||[],de(e)?e:[],a&&c?dt(a):[])}return b.concat(e,dt(e,[],c))}function du(a){return a.parent&&Object.getPrototypeOf(a.parent)?a.frameElement:null}function dv(a){let b=dq(a),c=parseFloat(b.width)||0,d=parseFloat(b.height)||0,e=!1,f=e?a.offsetWidth:c,g=e?a.offsetHeight:d,h=cK(c)!==f||cK(d)!==g;return h&&(c=f,d=g),{width:c,height:d,$:h}}function dw(a){return 0,a.contextElement}function dx(a){let b=dw(a);1;return cM(1)}let dy=cM(0);function dz(a){let b=da(a);return dm()&&b.visualViewport?{x:b.visualViewport.offsetLeft,y:b.visualViewport.offsetTop}:dy}function dA(a,b,c,d){var e;void 0===b&&(b=!1),void 0===c&&(c=!1);let f=a.getBoundingClientRect(),g=dw(a),h=cM(1);b&&(d||(h=dx(a)));let i=(void 0===(e=c)&&(e=!1),d&&(!e||d===da(g))&&e)?dz(g):cM(0),j=(f.left+i.x)/h.x,k=(f.top+i.y)/h.y,l=f.width/h.x,m=f.height/h.y;if(g){let a=da(g),b=d,c=a,e=du(c);for(;e&&d&&b!==c;){let a=dx(e),b=e.getBoundingClientRect(),d=dq(e),f=b.left+(e.clientLeft+parseFloat(d.paddingLeft))*a.x,g=b.top+(e.clientTop+parseFloat(d.paddingTop))*a.y;j*=a.x,k*=a.y,l*=a.x,m*=a.y,j+=f,k+=g,e=du(c=da(e))}}return c1({width:l,height:m,x:j,y:k})}function dB(a,b){let c=dr(a).scrollLeft;return b?b.left+c:dA(db(a)).left+c}function dC(a,b){let c=a.getBoundingClientRect();return{x:c.left+b.scrollLeft-dB(a,c),y:c.top+b.scrollTop}}function dD(a,b,c){var d;let e;if("viewport"===b)e=function(a,b){let c=da(a),d=db(a),e=c.visualViewport,f=d.clientWidth,g=d.clientHeight,h=0,i=0;if(e){f=e.width,g=e.height;let a=dm();(!a||a&&"fixed"===b)&&(h=e.offsetLeft,i=e.offsetTop)}let j=dB(d);if(j<=0){let a=d.ownerDocument,b=a.body,c=getComputedStyle(b),e="CSS1Compat"===a.compatMode&&parseFloat(c.marginLeft)+parseFloat(c.marginRight)||0,g=Math.abs(d.clientWidth-b.clientWidth-e);g<=25&&(f-=g)}else j<=25&&(f+=j);return{width:f,height:g,x:h,y:i}}(a,c);else if("document"===b){let b,c,f,g,h,i,j;d=db(a),b=db(d),c=dr(d),f=d.ownerDocument.body,g=cJ(b.scrollWidth,b.clientWidth,f.scrollWidth,f.clientWidth),h=cJ(b.scrollHeight,b.clientHeight,f.scrollHeight,f.clientHeight),i=-c.scrollLeft+dB(d),j=-c.scrollTop,"rtl"===dq(f).direction&&(i+=cJ(b.clientWidth,f.clientWidth)-g),e={width:g,height:h,x:i,y:j}}else{1;{let c=dz(a);e={x:b.x-c.x,y:b.y-c.y,width:b.width,height:b.height}}}return c1(e)}function dE(a){return"static"===dq(a).position}function dF(a,b){1;return null}function dG(a,b){var c;let d=da(a);if(dh(a))return d;1;{let b=ds(a);for(;b&&!dp(b);){0;b=ds(b)}return d}}let dH=async function(a){let b=this.getOffsetParent||dG,c=this.getDimensions,d=await c(a.floating);return{reference:function(a,b,c){var d;let e=(d=0,!1),f=db(b),g="fixed"===c,h=dA(a,!0,g,b),i={scrollLeft:0,scrollTop:0},j=cM(0);if(e||!e&&!g)if(("body"!==c9(b)||de(f))&&(i=dr(b)),e){let a=dA(b,!0,g,b);j.x=a.x+b.clientLeft,j.y=a.y+b.clientTop}else f&&(j.x=dB(f));g&&!e&&f&&(j.x=dB(f));let k=!f||e||g?cM(0):dC(f,i);return{x:h.left+i.scrollLeft-j.x-k.x,y:h.top+i.scrollTop-j.y-k.y,width:h.width,height:h.height}}(a.reference,await b(a.floating),a.strategy),floating:{x:0,y:0,width:d.width,height:d.height}}},dI={convertOffsetParentRelativeRectToViewportRelativeRect:function(a){var b,c;let{elements:d,rect:e,offsetParent:f,strategy:g}=a,h="fixed"===g,i=db(f),j=!!d&&dh(d.floating);if(f===i||j&&h)return e;let k={scrollLeft:0,scrollTop:0},l=cM(1),m=cM(0),n=(b=0,!1);(n||!n&&!h)&&(("body"!==c9(f)||de(i))&&(k=dr(f)),c=0,0);let o=!i||n||h?cM(0):dC(i,k);return{width:e.width*l.x,height:e.height*l.y,x:e.x*l.x-k.scrollLeft*l.x+m.x+o.x,y:e.y*l.y-k.scrollTop*l.y+m.y+o.y}},getDocumentElement:db,getClippingRect:function(a){let{element:b,boundary:c,rootBoundary:d,strategy:e}=a,f=[..."clippingAncestors"===c?dh(b)?[]:function(a,b){var c;let d=b.get(a);if(d)return d;let e=dt(a,[],!1).filter(a=>{var b;return b=0,!1}),f="fixed"===dq(a).position,g=f?ds(a):a;return c=0,b.set(a,e),e}(b,this._c):[].concat(c),d],g=f[0],h=f.reduce((a,c)=>{let d=dD(b,c,e);return a.top=cJ(d.top,a.top),a.right=cI(d.right,a.right),a.bottom=cI(d.bottom,a.bottom),a.left=cJ(d.left,a.left),a},dD(b,g,e));return{width:h.right-h.left,height:h.bottom-h.top,x:h.left,y:h.top}},getOffsetParent:dG,getElementRects:dH,getClientRects:function(a){return Array.from(a.getClientRects())},getDimensions:function(a){let{width:b,height:c}=dv(a);return{width:b,height:c}},getScale:dx,isElement:dc,isRTL:function(a){return"rtl"===dq(a).direction}};function dJ(a,b){return a.x===b.x&&a.y===b.y&&a.width===b.width&&a.height===b.height}let dK=a=>({name:"arrow",options:a,async fn(b){let{x:c,y:d,placement:e,rects:f,platform:g,elements:h,middlewareData:i}=b,{element:j,padding:k=0}=cP(a,b)||{};if(null==j)return{};let l=c0(k),m={x:c,y:d},n=cS(cV(e)),o=cT(n),p=await g.getDimensions(j),q="y"===n,r=q?"clientHeight":"clientWidth",s=f.reference[o]+f.reference[n]-m[n]-f.floating[o],t=m[n]-f.reference[n],u=await (null==g.getOffsetParent?void 0:g.getOffsetParent(j)),v=u?u[r]:0;v&&await (null==g.isElement?void 0:g.isElement(u))||(v=h.floating[r]||f.floating[o]);let w=v/2-p[o]/2-1,x=cI(l[q?"top":"left"],w),y=cI(l[q?"bottom":"right"],w),z=v-p[o]-y,A=v/2-p[o]/2+(s/2-t/2),B=cJ(x,cI(A,z)),C=!i.arrow&&null!=cR(e)&&A!==B&&f.reference[o]/2-(A<x?x:y)-p[o]/2<0,D=C?A<x?A-x:A-z:0;return{[n]:m[n]+D,data:{[n]:B,centerOffset:A-B-D,...C&&{alignmentOffset:D}},reset:C}}});var dL="undefined"!=typeof document?i.useLayoutEffect:function(){};function dM(a,b){let c,d,e;if(a===b)return!0;if(typeof a!=typeof b)return!1;if("function"==typeof a&&a.toString()===b.toString())return!0;if(a&&b&&"object"==typeof a){if(Array.isArray(a)){if((c=a.length)!==b.length)return!1;for(d=c;0!=d--;)if(!dM(a[d],b[d]))return!1;return!0}if((c=(e=Object.keys(a)).length)!==Object.keys(b).length)return!1;for(d=c;0!=d--;)if(!({}).hasOwnProperty.call(b,e[d]))return!1;for(d=c;0!=d--;){let c=e[d];if(("_owner"!==c||!a.$$typeof)&&!dM(a[c],b[c]))return!1}return!0}return a!=a&&b!=b}function dN(a,b){let c=1;return Math.round(b*c)/c}function dO(a){let b=i.useRef(a);return dL(()=>{b.current=a}),b}var dP=i.forwardRef((a,b)=>{let{children:c,width:d=10,height:e=5,...f}=a;return(0,h.jsx)(ci.svg,{...f,ref:b,width:d,height:e,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:a.asChild?c:(0,h.jsx)("polygon",{points:"0,0 30,0 15,10"})})});dP.displayName="Arrow";var dQ=a.i(72752),dR="Popper",[dS,dT]=(0,cc.createContextScope)(dR),[dU,dV]=dS(dR),dW=a=>{let{__scopePopper:b,children:c}=a,[d,e]=i.useState(null);return(0,h.jsx)(dU,{scope:b,anchor:d,onAnchorChange:e,children:c})};dW.displayName=dR;var dX="PopperAnchor",dY=i.forwardRef((a,b)=>{let{__scopePopper:c,virtualRef:d,...e}=a,f=dV(dX,c),g=i.useRef(null),j=(0,cb.useComposedRefs)(b,g),k=i.useRef(null);return i.useEffect(()=>{let a=k.current;k.current=d?.current||g.current,a!==k.current&&f.onAnchorChange(k.current)}),d?null:(0,h.jsx)(ci.div,{...e,ref:j})});dY.displayName=dX;var dZ="PopperContent",[d$,d_]=dS(dZ),d0=i.forwardRef((a,b)=>{var c,d,e,f,g,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y;let{__scopePopper:z,side:A="bottom",sideOffset:B=0,align:C="center",alignOffset:D=0,arrowPadding:E=0,avoidCollisions:F=!0,collisionBoundary:G=[],collisionPadding:H=0,sticky:I="partial",hideWhenDetached:J=!1,updatePositionStrategy:K="optimized",onPlaced:L,...M}=a,N=dV(dZ,z),[O,P]=i.useState(null),Q=(0,cb.useComposedRefs)(b,a=>P(a)),[R,S]=i.useState(null),T=function(a){let[b,c]=i.useState(void 0);return(0,dQ.useLayoutEffect)(()=>{if(a){c({width:a.offsetWidth,height:a.offsetHeight});let b=new ResizeObserver(b=>{let d,e;if(!Array.isArray(b)||!b.length)return;let f=b[0];if("borderBoxSize"in f){let a=f.borderBoxSize,b=Array.isArray(a)?a[0]:a;d=b.inlineSize,e=b.blockSize}else d=a.offsetWidth,e=a.offsetHeight;c({width:d,height:e})});return b.observe(a,{box:"border-box"}),()=>b.unobserve(a)}c(void 0)},[a]),b}(R),U=T?.width??0,V=T?.height??0,W="number"==typeof H?H:{top:0,right:0,bottom:0,left:0,...H},X=Array.isArray(G)?G:[G],Y=X.length>0,Z={padding:W,boundary:X.filter(d4),altBoundary:Y},{refs:$,floatingStyles:_,placement:aa,isPositioned:ab,middlewareData:ac}=function(a){void 0===a&&(a={});let{placement:b="bottom",strategy:c="absolute",middleware:d=[],platform:e,elements:{reference:f,floating:g}={},transform:h=!0,whileElementsMounted:j,open:k}=a,[l,m]=i.useState({x:0,y:0,strategy:c,placement:b,middlewareData:{},isPositioned:!1}),[n,o]=i.useState(d);dM(n,d)||o(d);let[p,q]=i.useState(null),[r,s]=i.useState(null),t=i.useCallback(a=>{a!==x.current&&(x.current=a,q(a))},[]),u=i.useCallback(a=>{a!==y.current&&(y.current=a,s(a))},[]),v=f||p,w=g||r,x=i.useRef(null),y=i.useRef(null),z=i.useRef(l),A=null!=j,B=dO(j),C=dO(e),D=dO(k),E=i.useCallback(()=>{var a,d;let e,f,g;if(!x.current||!y.current)return;let h={placement:b,strategy:c,middleware:n};C.current&&(h.platform=C.current),(a=x.current,d=y.current,e=new Map,g={...(f={platform:dI,...h}).platform,_c:e},c3(a,d,{...f,platform:g})).then(a=>{let b={...a,isPositioned:!1!==D.current};F.current&&!dM(z.current,b)&&(z.current=b,ce.flushSync(()=>{m(b)}))})},[n,b,c,C,D]);dL(()=>{!1===k&&z.current.isPositioned&&(z.current.isPositioned=!1,m(a=>({...a,isPositioned:!1})))},[k]);let F=i.useRef(!1);dL(()=>(F.current=!0,()=>{F.current=!1}),[]),dL(()=>{if(v&&(x.current=v),w&&(y.current=w),v&&w){if(B.current)return B.current(v,w,E);E()}},[v,w,E,B,A]);let G=i.useMemo(()=>({reference:x,floating:y,setReference:t,setFloating:u}),[t,u]),H=i.useMemo(()=>({reference:v,floating:w}),[v,w]),I=i.useMemo(()=>{let a={position:c,left:0,top:0};if(!H.floating)return a;let b=dN(H.floating,l.x),d=dN(H.floating,l.y);if(h)return{...a,transform:"translate("+b+"px, "+d+"px)",...(H.floating,false)};return{position:c,left:b,top:d}},[c,h,H.floating,l.x,l.y]);return i.useMemo(()=>({...l,update:E,refs:G,elements:H,floatingStyles:I}),[l,E,G,H,I])}({strategy:"fixed",placement:A+("center"!==C?"-"+C:""),whileElementsMounted:(...a)=>(function(a,b,c,d){let e;void 0===d&&(d={});let{ancestorScroll:f=!0,ancestorResize:g=!0,elementResize:h="function"==typeof ResizeObserver,layoutShift:i="function"==typeof IntersectionObserver,animationFrame:j=!1}=d,k=dw(a),l=f||g?[...k?dt(k):[],...dt(b)]:[];l.forEach(a=>{f&&a.addEventListener("scroll",c,{passive:!0}),g&&a.addEventListener("resize",c)});let m=k&&i?function(a,b){let c,d=null,e=db(a);function f(){var a;clearTimeout(c),null==(a=d)||a.disconnect(),d=null}return!function g(h,i){void 0===h&&(h=!1),void 0===i&&(i=1),f();let j=a.getBoundingClientRect(),{left:k,top:l,width:m,height:n}=j;if(h||b(),!m||!n)return;let o={rootMargin:-cL(l)+"px "+-cL(e.clientWidth-(k+m))+"px "+-cL(e.clientHeight-(l+n))+"px "+-cL(k)+"px",threshold:cJ(0,cI(1,i))||1},p=!0;function q(b){let d=b[0].intersectionRatio;if(d!==i){if(!p)return g();d?g(!1,d):c=setTimeout(()=>{g(!1,1e-7)},1e3)}1!==d||dJ(j,a.getBoundingClientRect())||g(),p=!1}try{d=new IntersectionObserver(q,{...o,root:e.ownerDocument})}catch(a){d=new IntersectionObserver(q,o)}d.observe(a)}(!0),f}(k,c):null,n=-1,o=null;h&&(o=new ResizeObserver(a=>{let[d]=a;d&&d.target===k&&o&&(o.unobserve(b),cancelAnimationFrame(n),n=requestAnimationFrame(()=>{var a;null==(a=o)||a.observe(b)})),c()}),k&&!j&&o.observe(k),o.observe(b));let p=j?dA(a):null;return j&&function b(){let d=dA(a);p&&!dJ(p,d)&&c(),p=d,e=requestAnimationFrame(b)}(),c(),()=>{var a;l.forEach(a=>{f&&a.removeEventListener("scroll",c),g&&a.removeEventListener("resize",c)}),null==m||m(),null==(a=o)||a.disconnect(),o=null,j&&cancelAnimationFrame(e)}})(...a,{animationFrame:"always"===K}),elements:{reference:N.anchor},middleware:[{...{name:"offset",options:e=c={mainAxis:B+V,alignmentAxis:D},async fn(a){var b,c;let{x:d,y:f,placement:g,middlewareData:h}=a,i=await c8(a,e);return g===(null==(b=h.offset)?void 0:b.placement)&&null!=(c=h.arrow)&&c.alignmentOffset?{}:{x:d+i.x,y:f+i.y,data:{...i,placement:g}}}},options:[c,d]},F&&{...{name:"shift",options:m=k={mainAxis:!0,crossAxis:!1,limiter:"partial"===I?{...(void 0===(j=f)&&(j={}),{options:j,fn(a){let{x:b,y:c,placement:d,rects:e,middlewareData:f}=a,{offset:g=0,mainAxis:h=!0,crossAxis:i=!0}=cP(j,a),k={x:b,y:c},l=cV(d),m=cS(l),n=k[m],o=k[l],p=cP(g,a),q="number"==typeof p?{mainAxis:p,crossAxis:0}:{mainAxis:0,crossAxis:0,...p};if(h){let a="y"===m?"height":"width",b=e.reference[m]-e.floating[a]+q.mainAxis,c=e.reference[m]+e.reference[a]-q.mainAxis;n<b?n=b:n>c&&(n=c)}if(i){var r,s;let a="y"===m?"width":"height",b=c7.has(cQ(d)),c=e.reference[l]-e.floating[a]+(b&&(null==(r=f.offset)?void 0:r[l])||0)+(b?0:q.crossAxis),g=e.reference[l]+e.reference[a]+(b?0:(null==(s=f.offset)?void 0:s[l])||0)-(b?q.crossAxis:0);o<c?o=c:o>g&&(o=g)}return{[m]:n,[l]:o}}}),options:[f,g]}:void 0,...Z},async fn(a){let{x:b,y:c,placement:d}=a,{mainAxis:e=!0,crossAxis:f=!1,limiter:g={fn:a=>{let{x:b,y:c}=a;return{x:b,y:c}}},...h}=cP(m,a),i={x:b,y:c},j=await c4(a,h),k=cV(cQ(d)),l=cS(k),n=i[l],o=i[k];if(e){let a="y"===l?"top":"left",b="y"===l?"bottom":"right",c=n+j[a],d=n-j[b];n=cJ(c,cI(n,d))}if(f){let a="y"===k?"top":"left",b="y"===k?"bottom":"right",c=o+j[a],d=o-j[b];o=cJ(c,cI(o,d))}let p=g.fn({...a,[l]:n,[k]:o});return{...p,data:{x:p.x-b,y:p.y-c,enabled:{[l]:e,[k]:f}}}}},options:[k,l]},F&&{...{name:"flip",options:p=n={...Z},async fn(a){var b,c,d,e,f,g,h,i;let j,k,l,{placement:m,middlewareData:n,rects:o,initialPlacement:q,platform:r,elements:s}=a,{mainAxis:t=!0,crossAxis:u=!0,fallbackPlacements:v,fallbackStrategy:w="bestFit",fallbackAxisSideDirection:x="none",flipAlignment:y=!0,...z}=cP(p,a);if(null!=(b=n.arrow)&&b.alignmentOffset)return{};let A=cQ(m),B=cV(q),C=cQ(q)===q,D=await (null==r.isRTL?void 0:r.isRTL(s.floating)),E=v||(C||!y?[c_(q)]:(j=c_(q),[cW(q),j,cW(j)])),F="none"!==x;!v&&F&&E.push(...(k=cR(q),l=function(a,b,c){switch(a){case"top":case"bottom":if(c)return b?cY:cX;return b?cX:cY;case"left":case"right":return b?cZ:c$;default:return[]}}(cQ(q),"start"===x,D),k&&(l=l.map(a=>a+"-"+k),y&&(l=l.concat(l.map(cW)))),l));let G=[q,...E],H=await c4(a,z),I=[],J=(null==(c=n.flip)?void 0:c.overflows)||[];if(t&&I.push(H[A]),u){let a,b,c,d,e=(g=m,h=o,void 0===(i=D)&&(i=!1),a=cR(g),c=cT(b=cS(cV(g))),d="x"===b?a===(i?"end":"start")?"right":"left":"start"===a?"bottom":"top",h.reference[c]>h.floating[c]&&(d=c_(d)),[d,c_(d)]);I.push(H[e[0]],H[e[1]])}if(J=[...J,{placement:m,overflows:I}],!I.every(a=>a<=0)){let a=((null==(d=n.flip)?void 0:d.index)||0)+1,b=G[a];if(b&&("alignment"!==u||B===cV(b)||J.every(a=>cV(a.placement)!==B||a.overflows[0]>0)))return{data:{index:a,overflows:J},reset:{placement:b}};let c=null==(e=J.filter(a=>a.overflows[0]<=0).sort((a,b)=>a.overflows[1]-b.overflows[1])[0])?void 0:e.placement;if(!c)switch(w){case"bestFit":{let a=null==(f=J.filter(a=>{if(F){let b=cV(a.placement);return b===B||"y"===b}return!0}).map(a=>[a.placement,a.overflows.filter(a=>a>0).reduce((a,b)=>a+b,0)]).sort((a,b)=>a[1]-b[1])[0])?void 0:f[0];a&&(c=a);break}case"initialPlacement":c=q}if(m!==c)return{reset:{placement:c}}}return{}}},options:[n,o]},{...{name:"size",options:s=q={...Z,apply:({elements:a,rects:b,availableWidth:c,availableHeight:d})=>{let{width:e,height:f}=b.reference,g=a.floating.style;g.setProperty("--radix-popper-available-width",`${c}px`),g.setProperty("--radix-popper-available-height",`${d}px`),g.setProperty("--radix-popper-anchor-width",`${e}px`),g.setProperty("--radix-popper-anchor-height",`${f}px`)}},async fn(a){var b,c;let d,e,{placement:f,rects:g,platform:h,elements:i}=a,{apply:j=()=>{},...k}=cP(s,a),l=await c4(a,k),m=cQ(f),n=cR(f),o="y"===cV(f),{width:p,height:q}=g.floating;"top"===m||"bottom"===m?(d=m,e=n===(await (null==h.isRTL?void 0:h.isRTL(i.floating))?"start":"end")?"left":"right"):(e=m,d="end"===n?"top":"bottom");let r=q-l.top-l.bottom,t=p-l.left-l.right,u=cI(q-l[d],r),v=cI(p-l[e],t),w=!a.middlewareData.shift,x=u,y=v;if(null!=(b=a.middlewareData.shift)&&b.enabled.x&&(y=t),null!=(c=a.middlewareData.shift)&&c.enabled.y&&(x=r),w&&!n){let a=cJ(l.left,0),b=cJ(l.right,0),c=cJ(l.top,0),d=cJ(l.bottom,0);o?y=p-2*(0!==a||0!==b?a+b:cJ(l.left,l.right)):x=q-2*(0!==c||0!==d?c+d:cJ(l.top,l.bottom))}await j({...a,availableWidth:y,availableHeight:x});let z=await h.getDimensions(i.floating);return p!==z.width||q!==z.height?{reset:{rects:!0}}:{}}},options:[q,r]},R&&{...{name:"arrow",options:v=t={element:R,padding:E},fn(a){let{element:b,padding:c}="function"==typeof v?v(a):v;return b&&({}).hasOwnProperty.call(b,"current")?null!=b.current?dK({element:b.current,padding:c}).fn(a):{}:b?dK({element:b,padding:c}).fn(a):{}}},options:[t,u]},d5({arrowWidth:U,arrowHeight:V}),J&&{...{name:"hide",options:y=w={strategy:"referenceHidden",...Z},async fn(a){let{rects:b}=a,{strategy:c="referenceHidden",...d}=cP(y,a);switch(c){case"referenceHidden":{let c=c5(await c4(a,{...d,elementContext:"reference"}),b.reference);return{data:{referenceHiddenOffsets:c,referenceHidden:c6(c)}}}case"escaped":{let c=c5(await c4(a,{...d,altBoundary:!0}),b.floating);return{data:{escapedOffsets:c,escaped:c6(c)}}}default:return{}}}},options:[w,x]}]}),[ad,ae]=d6(aa),af=(0,cp.useCallbackRef)(L);(0,dQ.useLayoutEffect)(()=>{ab&&af?.()},[ab,af]);let ag=ac.arrow?.x,ah=ac.arrow?.y,ai=ac.arrow?.centerOffset!==0,[aj,ak]=i.useState();return(0,dQ.useLayoutEffect)(()=>{O&&ak(window.getComputedStyle(O).zIndex)},[O]),(0,h.jsx)("div",{ref:$.setFloating,"data-radix-popper-content-wrapper":"",style:{..._,transform:ab?_.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:aj,"--radix-popper-transform-origin":[ac.transformOrigin?.x,ac.transformOrigin?.y].join(" "),...ac.hide?.referenceHidden&&{visibility:"hidden",pointerEvents:"none"}},dir:a.dir,children:(0,h.jsx)(d$,{scope:z,placedSide:ad,onArrowChange:S,arrowX:ag,arrowY:ah,shouldHideArrow:ai,children:(0,h.jsx)(ci.div,{"data-side":ad,"data-align":ae,...M,ref:Q,style:{...M.style,animation:ab?void 0:"none"}})})})});d0.displayName=dZ;var d1="PopperArrow",d2={top:"bottom",right:"left",bottom:"top",left:"right"},d3=i.forwardRef(function(a,b){let{__scopePopper:c,...d}=a,e=d_(d1,c),f=d2[e.placedSide];return(0,h.jsx)("span",{ref:e.onArrowChange,style:{position:"absolute",left:e.arrowX,top:e.arrowY,[f]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[e.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[e.placedSide],visibility:e.shouldHideArrow?"hidden":void 0},children:(0,h.jsx)(dP,{...d,ref:b,style:{...d.style,display:"block"}})})});function d4(a){return null!==a}d3.displayName=d1;var d5=a=>({name:"transformOrigin",options:a,fn(b){let{placement:c,rects:d,middlewareData:e}=b,f=e.arrow?.centerOffset!==0,g=f?0:a.arrowWidth,h=f?0:a.arrowHeight,[i,j]=d6(c),k={start:"0%",center:"50%",end:"100%"}[j],l=(e.arrow?.x??0)+g/2,m=(e.arrow?.y??0)+h/2,n="",o="";return"bottom"===i?(n=f?k:`${l}px`,o=`${-h}px`):"top"===i?(n=f?k:`${l}px`,o=`${d.floating.height+h}px`):"right"===i?(n=`${-h}px`,o=f?k:`${m}px`):"left"===i&&(n=`${d.floating.width+h}px`,o=f?k:`${m}px`),{data:{x:n,y:o}}}});function d6(a){let[b,c="center"]=a.split("-");return[b,c]}var d7=i.forwardRef((a,b)=>{let{container:c,...d}=a,[e,f]=i.useState(!1);(0,dQ.useLayoutEffect)(()=>f(!0),[]);let g=c||e&&globalThis?.document?.body;return g?ce.default.createPortal((0,h.jsx)(ci.div,{...d,ref:b}),g):null});d7.displayName="Portal";var d8=a=>{var b;let c,d,{present:e,children:f}=a,g=function(a){var b,c;let[d,e]=i.useState(),f=i.useRef(null),g=i.useRef(a),h=i.useRef("none"),[j,k]=(b=a?"mounted":"unmounted",c={mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}},i.useReducer((a,b)=>c[a][b]??a,b));return i.useEffect(()=>{let a=d9(f.current);h.current="mounted"===j?a:"none"},[j]),(0,dQ.useLayoutEffect)(()=>{let b=f.current,c=g.current;if(c!==a){let d=h.current,e=d9(b);a?k("MOUNT"):"none"===e||b?.display==="none"?k("UNMOUNT"):c&&d!==e?k("ANIMATION_OUT"):k("UNMOUNT"),g.current=a}},[a,k]),(0,dQ.useLayoutEffect)(()=>{if(d){let a,b=d.ownerDocument.defaultView??window,c=c=>{let e=d9(f.current).includes(CSS.escape(c.animationName));if(c.target===d&&e&&(k("ANIMATION_END"),!g.current)){let c=d.style.animationFillMode;d.style.animationFillMode="forwards",a=b.setTimeout(()=>{"forwards"===d.style.animationFillMode&&(d.style.animationFillMode=c)})}},e=a=>{a.target===d&&(h.current=d9(f.current))};return d.addEventListener("animationstart",e),d.addEventListener("animationcancel",c),d.addEventListener("animationend",c),()=>{b.clearTimeout(a),d.removeEventListener("animationstart",e),d.removeEventListener("animationcancel",c),d.removeEventListener("animationend",c)}}k("ANIMATION_END")},[d,k]),{isPresent:["mounted","unmountSuspended"].includes(j),ref:i.useCallback(a=>{f.current=a?getComputedStyle(a):null,e(a)},[])}}(e),h="function"==typeof f?f({present:g.isPresent}):i.Children.only(f),j=(0,cb.useComposedRefs)(g.ref,(b=h,(d=(c=Object.getOwnPropertyDescriptor(b.props,"ref")?.get)&&"isReactWarning"in c&&c.isReactWarning)?b.ref:(d=(c=Object.getOwnPropertyDescriptor(b,"ref")?.get)&&"isReactWarning"in c&&c.isReactWarning)?b.props.ref:b.props.ref||b.ref));return"function"==typeof f||g.isPresent?i.cloneElement(h,{ref:j}):null};function d9(a){return a?.animationName||"none"}d8.displayName="Presence";var ea="rovingFocusGroup.onEntryFocus",eb={bubbles:!1,cancelable:!0},ec="RovingFocusGroup",[ed,ee,ef]=ck(ec),[eg,eh]=(0,cc.createContextScope)(ec,[ef]),[ei,ej]=eg(ec),ek=i.forwardRef((a,b)=>(0,h.jsx)(ed.Provider,{scope:a.__scopeRovingFocusGroup,children:(0,h.jsx)(ed.Slot,{scope:a.__scopeRovingFocusGroup,children:(0,h.jsx)(el,{...a,ref:b})})}));ek.displayName=ec;var el=i.forwardRef((a,b)=>{let{__scopeRovingFocusGroup:c,orientation:d,loop:e=!1,dir:f,currentTabStopId:g,defaultCurrentTabStopId:j,onCurrentTabStopIdChange:k,onEntryFocus:l,preventScrollOnEntryFocus:m=!1,...n}=a,o=i.useRef(null),p=(0,cb.useComposedRefs)(b,o),q=(0,co.useDirection)(f),[r,s]=(0,cd.useControllableState)({prop:g,defaultProp:j??null,onChange:k,caller:ec}),[t,u]=i.useState(!1),v=(0,cp.useCallbackRef)(l),w=ee(c),x=i.useRef(!1),[y,z]=i.useState(0);return i.useEffect(()=>{let a=o.current;if(a)return a.addEventListener(ea,v),()=>a.removeEventListener(ea,v)},[v]),(0,h.jsx)(ei,{scope:c,orientation:d,dir:q,loop:e,currentTabStopId:r,onItemFocus:i.useCallback(a=>s(a),[s]),onItemShiftTab:i.useCallback(()=>u(!0),[]),onFocusableItemAdd:i.useCallback(()=>z(a=>a+1),[]),onFocusableItemRemove:i.useCallback(()=>z(a=>a-1),[]),children:(0,h.jsx)(ci.div,{tabIndex:t||0===y?-1:0,"data-orientation":d,...n,ref:p,style:{outline:"none",...a.style},onMouseDown:(0,ca.composeEventHandlers)(a.onMouseDown,()=>{x.current=!0}),onFocus:(0,ca.composeEventHandlers)(a.onFocus,a=>{let b=!x.current;if(a.target===a.currentTarget&&b&&!t){let b=new CustomEvent(ea,eb);if(a.currentTarget.dispatchEvent(b),!b.defaultPrevented){let a=w().filter(a=>a.focusable);ep([a.find(a=>a.active),a.find(a=>a.id===r),...a].filter(Boolean).map(a=>a.ref.current),m)}}x.current=!1}),onBlur:(0,ca.composeEventHandlers)(a.onBlur,()=>u(!1))})})}),em="RovingFocusGroupItem",en=i.forwardRef((a,b)=>{let{__scopeRovingFocusGroup:c,focusable:d=!0,active:e=!1,tabStopId:f,children:g,...j}=a,k=(0,cG.useId)(),l=f||k,m=ej(em,c),n=m.currentTabStopId===l,o=ee(c),{onFocusableItemAdd:p,onFocusableItemRemove:q,currentTabStopId:r}=m;return i.useEffect(()=>{if(d)return p(),()=>q()},[d,p,q]),(0,h.jsx)(ed.ItemSlot,{scope:c,id:l,focusable:d,active:e,children:(0,h.jsx)(ci.span,{tabIndex:n?0:-1,"data-orientation":m.orientation,...j,ref:b,onMouseDown:(0,ca.composeEventHandlers)(a.onMouseDown,a=>{d?m.onItemFocus(l):a.preventDefault()}),onFocus:(0,ca.composeEventHandlers)(a.onFocus,()=>m.onItemFocus(l)),onKeyDown:(0,ca.composeEventHandlers)(a.onKeyDown,a=>{if("Tab"===a.key&&a.shiftKey)return void m.onItemShiftTab();if(a.target!==a.currentTarget)return;let b=function(a,b,c){var d;let e=(d=a.key,"rtl"!==c?d:"ArrowLeft"===d?"ArrowRight":"ArrowRight"===d?"ArrowLeft":d);if(!("vertical"===b&&["ArrowLeft","ArrowRight"].includes(e))&&!("horizontal"===b&&["ArrowUp","ArrowDown"].includes(e)))return eo[e]}(a,m.orientation,m.dir);if(void 0!==b){if(a.metaKey||a.ctrlKey||a.altKey||a.shiftKey)return;a.preventDefault();let e=o().filter(a=>a.focusable).map(a=>a.ref.current);if("last"===b)e.reverse();else if("prev"===b||"next"===b){var c,d;"prev"===b&&e.reverse();let f=e.indexOf(a.currentTarget);e=m.loop?(c=e,d=f+1,c.map((a,b)=>c[(d+b)%c.length])):e.slice(f+1)}setTimeout(()=>ep(e))}}),children:"function"==typeof g?g({isCurrentTabStop:n,hasTabStop:null!=r}):g})})});en.displayName=em;var eo={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function ep(a,b=!1){let c=document.activeElement;for(let d of a)if(d===c||(d.focus({preventScroll:b}),document.activeElement!==c))return}var eq=a.i(41852),er=a.i(52081),es=["Enter"," "],et=["ArrowUp","PageDown","End"],eu=["ArrowDown","PageUp","Home",...et],ev={ltr:[...es,"ArrowRight"],rtl:[...es,"ArrowLeft"]},ew={ltr:["ArrowLeft"],rtl:["ArrowRight"]},ex="Menu",[ey,ez,eA]=ck(ex),[eB,eC]=(0,cc.createContextScope)(ex,[eA,dT,eh]),eD=dT(),eE=eh(),[eF,eG]=eB(ex),[eH,eI]=eB(ex),eJ=a=>{let{__scopeMenu:b,open:c=!1,children:d,dir:e,onOpenChange:f,modal:g=!0}=a,j=eD(b),[k,l]=i.useState(null),m=i.useRef(!1),n=(0,cp.useCallbackRef)(f),o=(0,co.useDirection)(e);return i.useEffect(()=>{let a=()=>{m.current=!0,document.addEventListener("pointerdown",b,{capture:!0,once:!0}),document.addEventListener("pointermove",b,{capture:!0,once:!0})},b=()=>m.current=!1;return document.addEventListener("keydown",a,{capture:!0}),()=>{document.removeEventListener("keydown",a,{capture:!0}),document.removeEventListener("pointerdown",b,{capture:!0}),document.removeEventListener("pointermove",b,{capture:!0})}},[]),(0,h.jsx)(dW,{...j,children:(0,h.jsx)(eF,{scope:b,open:c,onOpenChange:n,content:k,onContentChange:l,children:(0,h.jsx)(eH,{scope:b,onClose:i.useCallback(()=>n(!1),[n]),isUsingKeyboardRef:m,dir:o,modal:g,children:d})})})};eJ.displayName=ex;var eK=i.forwardRef((a,b)=>{let{__scopeMenu:c,...d}=a,e=eD(c);return(0,h.jsx)(dY,{...e,...d,ref:b})});eK.displayName="MenuAnchor";var eL="MenuPortal",[eM,eN]=eB(eL,{forceMount:void 0}),eO=a=>{let{__scopeMenu:b,forceMount:c,children:d,container:e}=a,f=eG(eL,b);return(0,h.jsx)(eM,{scope:b,forceMount:c,children:(0,h.jsx)(d8,{present:c||f.open,children:(0,h.jsx)(d7,{asChild:!0,container:e,children:d})})})};eO.displayName=eL;var eP="MenuContent",[eQ,eR]=eB(eP),eS=i.forwardRef((a,b)=>{let c=eN(eP,a.__scopeMenu),{forceMount:d=c.forceMount,...e}=a,f=eG(eP,a.__scopeMenu),g=eI(eP,a.__scopeMenu);return(0,h.jsx)(ey.Provider,{scope:a.__scopeMenu,children:(0,h.jsx)(d8,{present:d||f.open,children:(0,h.jsx)(ey.Slot,{scope:a.__scopeMenu,children:g.modal?(0,h.jsx)(eT,{...e,ref:b}):(0,h.jsx)(eU,{...e,ref:b})})})})}),eT=i.forwardRef((a,b)=>{let c=eG(eP,a.__scopeMenu),d=i.useRef(null),e=(0,cb.useComposedRefs)(b,d);return i.useEffect(()=>{let a=d.current;if(a)return(0,eq.hideOthers)(a)},[]),(0,h.jsx)(eW,{...a,ref:e,trapFocus:c.open,disableOutsidePointerEvents:c.open,disableOutsideScroll:!0,onFocusOutside:(0,ca.composeEventHandlers)(a.onFocusOutside,a=>a.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>c.onOpenChange(!1)})}),eU=i.forwardRef((a,b)=>{let c=eG(eP,a.__scopeMenu);return(0,h.jsx)(eW,{...a,ref:b,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>c.onOpenChange(!1)})}),eV=cf("MenuContent.ScrollLock"),eW=i.forwardRef((a,b)=>{let{__scopeMenu:c,loop:d=!1,trapFocus:e,onOpenAutoFocus:f,onCloseAutoFocus:g,disableOutsidePointerEvents:j,onEntryFocus:k,onEscapeKeyDown:l,onPointerDownOutside:m,onFocusOutside:n,onInteractOutside:o,onDismiss:p,disableOutsideScroll:q,...r}=a,s=eG(eP,c),t=eI(eP,c),u=eD(c),v=eE(c),w=ez(c),[x,y]=i.useState(null),z=i.useRef(null),A=(0,cb.useComposedRefs)(b,z,s.onContentChange),B=i.useRef(0),C=i.useRef(""),D=i.useRef(0),E=i.useRef(null),F=i.useRef("right"),G=i.useRef(0),H=q?er.RemoveScroll:i.Fragment;i.useEffect(()=>()=>window.clearTimeout(B.current),[]),(0,cw.useFocusGuards)();let I=i.useCallback(a=>{var b,c;return F.current===E.current?.side&&(b=a,!!(c=E.current?.area)&&function(a,b){let{x:c,y:d}=a,e=!1;for(let a=0,f=b.length-1;a<b.length;f=a++){let g=b[a],h=b[f],i=g.x,j=g.y,k=h.x,l=h.y;j>d!=l>d&&c<(k-i)*(d-j)/(l-j)+i&&(e=!e)}return e}({x:b.clientX,y:b.clientY},c))},[]);return(0,h.jsx)(eQ,{scope:c,searchRef:C,onItemEnter:i.useCallback(a=>{I(a)&&a.preventDefault()},[I]),onItemLeave:i.useCallback(a=>{I(a)||(z.current?.focus(),y(null))},[I]),onTriggerLeave:i.useCallback(a=>{I(a)&&a.preventDefault()},[I]),pointerGraceTimerRef:D,onPointerGraceIntentChange:i.useCallback(a=>{E.current=a},[]),children:(0,h.jsx)(H,{...q?{as:eV,allowPinchZoom:!0}:void 0,children:(0,h.jsx)(cA,{asChild:!0,trapped:e,onMountAutoFocus:(0,ca.composeEventHandlers)(f,a=>{a.preventDefault(),z.current?.focus({preventScroll:!0})}),onUnmountAutoFocus:g,children:(0,h.jsx)(ct,{asChild:!0,disableOutsidePointerEvents:j,onEscapeKeyDown:l,onPointerDownOutside:m,onFocusOutside:n,onInteractOutside:o,onDismiss:p,children:(0,h.jsx)(ek,{asChild:!0,...v,dir:t.dir,orientation:"vertical",loop:d,currentTabStopId:x,onCurrentTabStopIdChange:y,onEntryFocus:(0,ca.composeEventHandlers)(k,a=>{t.isUsingKeyboardRef.current||a.preventDefault()}),preventScrollOnEntryFocus:!0,children:(0,h.jsx)(d0,{role:"menu","aria-orientation":"vertical","data-state":fk(s.open),"data-radix-menu-content":"",dir:t.dir,...u,...r,ref:A,style:{outline:"none",...r.style},onKeyDown:(0,ca.composeEventHandlers)(r.onKeyDown,a=>{let b=a.target.closest("[data-radix-menu-content]")===a.currentTarget,c=a.ctrlKey||a.altKey||a.metaKey,d=1===a.key.length;if(b){var e;let b,f,g,h,i,j;"Tab"===a.key&&a.preventDefault(),!c&&d&&(e=a.key,b=C.current+e,f=w().filter(a=>!a.disabled),g=document.activeElement,h=f.find(a=>a.ref.current===g)?.textValue,i=function(a,b,c){var d;let e=b.length>1&&Array.from(b).every(a=>a===b[0])?b[0]:b,f=c?a.indexOf(c):-1,g=(d=Math.max(f,0),a.map((b,c)=>a[(d+c)%a.length]));1===e.length&&(g=g.filter(a=>a!==c));let h=g.find(a=>a.toLowerCase().startsWith(e.toLowerCase()));return h!==c?h:void 0}(f.map(a=>a.textValue),b,h),j=f.find(a=>a.textValue===i)?.ref.current,function a(b){C.current=b,window.clearTimeout(B.current),""!==b&&(B.current=window.setTimeout(()=>a(""),1e3))}(b),j&&setTimeout(()=>j.focus()))}let f=z.current;if(a.target!==f||!eu.includes(a.key))return;a.preventDefault();let g=w().filter(a=>!a.disabled).map(a=>a.ref.current);et.includes(a.key)&&g.reverse(),function(a){let b=document.activeElement;for(let c of a)if(c===b||(c.focus(),document.activeElement!==b))return}(g)}),onBlur:(0,ca.composeEventHandlers)(a.onBlur,a=>{a.currentTarget.contains(a.target)||(window.clearTimeout(B.current),C.current="")}),onPointerMove:(0,ca.composeEventHandlers)(a.onPointerMove,fn(a=>{let b=a.target,c=G.current!==a.clientX;a.currentTarget.contains(b)&&c&&(F.current=a.clientX>G.current?"right":"left",G.current=a.clientX)}))})})})})})})});eS.displayName=eP;var eX=i.forwardRef((a,b)=>{let{__scopeMenu:c,...d}=a;return(0,h.jsx)(ci.div,{role:"group",...d,ref:b})});eX.displayName="MenuGroup";var eY=i.forwardRef((a,b)=>{let{__scopeMenu:c,...d}=a;return(0,h.jsx)(ci.div,{...d,ref:b})});eY.displayName="MenuLabel";var eZ="MenuItem",e$="menu.itemSelect",e_=i.forwardRef((a,b)=>{let{disabled:c=!1,onSelect:d,...e}=a,f=i.useRef(null),g=eI(eZ,a.__scopeMenu),j=eR(eZ,a.__scopeMenu),k=(0,cb.useComposedRefs)(b,f),l=i.useRef(!1);return(0,h.jsx)(e0,{...e,ref:k,disabled:c,onClick:(0,ca.composeEventHandlers)(a.onClick,()=>{let a=f.current;if(!c&&a){let b=new CustomEvent(e$,{bubbles:!0,cancelable:!0});a.addEventListener(e$,a=>d?.(a),{once:!0}),cj(a,b),b.defaultPrevented?l.current=!1:g.onClose()}}),onPointerDown:b=>{a.onPointerDown?.(b),l.current=!0},onPointerUp:(0,ca.composeEventHandlers)(a.onPointerUp,a=>{l.current||a.currentTarget?.click()}),onKeyDown:(0,ca.composeEventHandlers)(a.onKeyDown,a=>{let b=""!==j.searchRef.current;c||b&&" "===a.key||es.includes(a.key)&&(a.currentTarget.click(),a.preventDefault())})})});e_.displayName=eZ;var e0=i.forwardRef((a,b)=>{let{__scopeMenu:c,disabled:d=!1,textValue:e,...f}=a,g=eR(eZ,c),j=eE(c),k=i.useRef(null),l=(0,cb.useComposedRefs)(b,k),[m,n]=i.useState(!1),[o,p]=i.useState("");return i.useEffect(()=>{let a=k.current;a&&p((a.textContent??"").trim())},[f.children]),(0,h.jsx)(ey.ItemSlot,{scope:c,disabled:d,textValue:e??o,children:(0,h.jsx)(en,{asChild:!0,...j,focusable:!d,children:(0,h.jsx)(ci.div,{role:"menuitem","data-highlighted":m?"":void 0,"aria-disabled":d||void 0,"data-disabled":d?"":void 0,...f,ref:l,onPointerMove:(0,ca.composeEventHandlers)(a.onPointerMove,fn(a=>{d?g.onItemLeave(a):(g.onItemEnter(a),a.defaultPrevented||a.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:(0,ca.composeEventHandlers)(a.onPointerLeave,fn(a=>g.onItemLeave(a))),onFocus:(0,ca.composeEventHandlers)(a.onFocus,()=>n(!0)),onBlur:(0,ca.composeEventHandlers)(a.onBlur,()=>n(!1))})})})}),e1=i.forwardRef((a,b)=>{let{checked:c=!1,onCheckedChange:d,...e}=a;return(0,h.jsx)(e9,{scope:a.__scopeMenu,checked:c,children:(0,h.jsx)(e_,{role:"menuitemcheckbox","aria-checked":fl(c)?"mixed":c,...e,ref:b,"data-state":fm(c),onSelect:(0,ca.composeEventHandlers)(e.onSelect,()=>d?.(!!fl(c)||!c),{checkForDefaultPrevented:!1})})})});e1.displayName="MenuCheckboxItem";var e2="MenuRadioGroup",[e3,e4]=eB(e2,{value:void 0,onValueChange:()=>{}}),e5=i.forwardRef((a,b)=>{let{value:c,onValueChange:d,...e}=a,f=(0,cp.useCallbackRef)(d);return(0,h.jsx)(e3,{scope:a.__scopeMenu,value:c,onValueChange:f,children:(0,h.jsx)(eX,{...e,ref:b})})});e5.displayName=e2;var e6="MenuRadioItem",e7=i.forwardRef((a,b)=>{let{value:c,...d}=a,e=e4(e6,a.__scopeMenu),f=c===e.value;return(0,h.jsx)(e9,{scope:a.__scopeMenu,checked:f,children:(0,h.jsx)(e_,{role:"menuitemradio","aria-checked":f,...d,ref:b,"data-state":fm(f),onSelect:(0,ca.composeEventHandlers)(d.onSelect,()=>e.onValueChange?.(c),{checkForDefaultPrevented:!1})})})});e7.displayName=e6;var e8="MenuItemIndicator",[e9,fa]=eB(e8,{checked:!1}),fb=i.forwardRef((a,b)=>{let{__scopeMenu:c,forceMount:d,...e}=a,f=fa(e8,c);return(0,h.jsx)(d8,{present:d||fl(f.checked)||!0===f.checked,children:(0,h.jsx)(ci.span,{...e,ref:b,"data-state":fm(f.checked)})})});fb.displayName=e8;var fc=i.forwardRef((a,b)=>{let{__scopeMenu:c,...d}=a;return(0,h.jsx)(ci.div,{role:"separator","aria-orientation":"horizontal",...d,ref:b})});fc.displayName="MenuSeparator";var fd=i.forwardRef((a,b)=>{let{__scopeMenu:c,...d}=a,e=eD(c);return(0,h.jsx)(d3,{...e,...d,ref:b})});fd.displayName="MenuArrow";var[fe,ff]=eB("MenuSub"),fg="MenuSubTrigger",fh=i.forwardRef((a,b)=>{let c=eG(fg,a.__scopeMenu),d=eI(fg,a.__scopeMenu),e=ff(fg,a.__scopeMenu),f=eR(fg,a.__scopeMenu),g=i.useRef(null),{pointerGraceTimerRef:j,onPointerGraceIntentChange:k}=f,l={__scopeMenu:a.__scopeMenu},m=i.useCallback(()=>{g.current&&window.clearTimeout(g.current),g.current=null},[]);return i.useEffect(()=>m,[m]),i.useEffect(()=>{let a=j.current;return()=>{window.clearTimeout(a),k(null)}},[j,k]),(0,h.jsx)(eK,{asChild:!0,...l,children:(0,h.jsx)(e0,{id:e.triggerId,"aria-haspopup":"menu","aria-expanded":c.open,"aria-controls":e.contentId,"data-state":fk(c.open),...a,ref:(0,cb.composeRefs)(b,e.onTriggerChange),onClick:b=>{a.onClick?.(b),a.disabled||b.defaultPrevented||(b.currentTarget.focus(),c.open||c.onOpenChange(!0))},onPointerMove:(0,ca.composeEventHandlers)(a.onPointerMove,fn(b=>{f.onItemEnter(b),!b.defaultPrevented&&(a.disabled||c.open||g.current||(f.onPointerGraceIntentChange(null),g.current=window.setTimeout(()=>{c.onOpenChange(!0),m()},100)))})),onPointerLeave:(0,ca.composeEventHandlers)(a.onPointerLeave,fn(a=>{m();let b=c.content?.getBoundingClientRect();if(b){let d=c.content?.dataset.side,e="right"===d,g=b[e?"left":"right"],h=b[e?"right":"left"];f.onPointerGraceIntentChange({area:[{x:a.clientX+(e?-5:5),y:a.clientY},{x:g,y:b.top},{x:h,y:b.top},{x:h,y:b.bottom},{x:g,y:b.bottom}],side:d}),window.clearTimeout(j.current),j.current=window.setTimeout(()=>f.onPointerGraceIntentChange(null),300)}else{if(f.onTriggerLeave(a),a.defaultPrevented)return;f.onPointerGraceIntentChange(null)}})),onKeyDown:(0,ca.composeEventHandlers)(a.onKeyDown,b=>{let e=""!==f.searchRef.current;a.disabled||e&&" "===b.key||ev[d.dir].includes(b.key)&&(c.onOpenChange(!0),c.content?.focus(),b.preventDefault())})})})});fh.displayName=fg;var fi="MenuSubContent",fj=i.forwardRef((a,b)=>{let c=eN(eP,a.__scopeMenu),{forceMount:d=c.forceMount,...e}=a,f=eG(eP,a.__scopeMenu),g=eI(eP,a.__scopeMenu),j=ff(fi,a.__scopeMenu),k=i.useRef(null),l=(0,cb.useComposedRefs)(b,k);return(0,h.jsx)(ey.Provider,{scope:a.__scopeMenu,children:(0,h.jsx)(d8,{present:d||f.open,children:(0,h.jsx)(ey.Slot,{scope:a.__scopeMenu,children:(0,h.jsx)(eW,{id:j.contentId,"aria-labelledby":j.triggerId,...e,ref:l,align:"start",side:"rtl"===g.dir?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:a=>{g.isUsingKeyboardRef.current&&k.current?.focus(),a.preventDefault()},onCloseAutoFocus:a=>a.preventDefault(),onFocusOutside:(0,ca.composeEventHandlers)(a.onFocusOutside,a=>{a.target!==j.trigger&&f.onOpenChange(!1)}),onEscapeKeyDown:(0,ca.composeEventHandlers)(a.onEscapeKeyDown,a=>{g.onClose(),a.preventDefault()}),onKeyDown:(0,ca.composeEventHandlers)(a.onKeyDown,a=>{let b=a.currentTarget.contains(a.target),c=ew[g.dir].includes(a.key);b&&c&&(f.onOpenChange(!1),j.trigger?.focus(),a.preventDefault())})})})})})});function fk(a){return a?"open":"closed"}function fl(a){return"indeterminate"===a}function fm(a){return fl(a)?"indeterminate":a?"checked":"unchecked"}function fn(a){return b=>"mouse"===b.pointerType?a(b):void 0}fj.displayName=fi;var fo="DropdownMenu",[fp,fq]=(0,cc.createContextScope)(fo,[eC]),fr=eC(),[fs,ft]=fp(fo),fu=a=>{let{__scopeDropdownMenu:b,children:c,dir:d,open:e,defaultOpen:f,onOpenChange:g,modal:j=!0}=a,k=fr(b),l=i.useRef(null),[m,n]=(0,cd.useControllableState)({prop:e,defaultProp:f??!1,onChange:g,caller:fo});return(0,h.jsx)(fs,{scope:b,triggerId:(0,cG.useId)(),triggerRef:l,contentId:(0,cG.useId)(),open:m,onOpenChange:n,onOpenToggle:i.useCallback(()=>n(a=>!a),[n]),modal:j,children:(0,h.jsx)(eJ,{...k,open:m,onOpenChange:n,dir:d,modal:j,children:c})})};fu.displayName=fo;var fv="DropdownMenuTrigger",fw=i.forwardRef((a,b)=>{let{__scopeDropdownMenu:c,disabled:d=!1,...e}=a,f=ft(fv,c),g=fr(c);return(0,h.jsx)(eK,{asChild:!0,...g,children:(0,h.jsx)(ci.button,{type:"button",id:f.triggerId,"aria-haspopup":"menu","aria-expanded":f.open,"aria-controls":f.open?f.contentId:void 0,"data-state":f.open?"open":"closed","data-disabled":d?"":void 0,disabled:d,...e,ref:(0,cb.composeRefs)(b,f.triggerRef),onPointerDown:(0,ca.composeEventHandlers)(a.onPointerDown,a=>{!d&&0===a.button&&!1===a.ctrlKey&&(f.onOpenToggle(),f.open||a.preventDefault())}),onKeyDown:(0,ca.composeEventHandlers)(a.onKeyDown,a=>{!d&&(["Enter"," "].includes(a.key)&&f.onOpenToggle(),"ArrowDown"===a.key&&f.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(a.key)&&a.preventDefault())})})})});fw.displayName=fv;var fx=a=>{let{__scopeDropdownMenu:b,...c}=a,d=fr(b);return(0,h.jsx)(eO,{...d,...c})};fx.displayName="DropdownMenuPortal";var fy="DropdownMenuContent",fz=i.forwardRef((a,b)=>{let{__scopeDropdownMenu:c,...d}=a,e=ft(fy,c),f=fr(c),g=i.useRef(!1);return(0,h.jsx)(eS,{id:e.contentId,"aria-labelledby":e.triggerId,...f,...d,ref:b,onCloseAutoFocus:(0,ca.composeEventHandlers)(a.onCloseAutoFocus,a=>{g.current||e.triggerRef.current?.focus(),g.current=!1,a.preventDefault()}),onInteractOutside:(0,ca.composeEventHandlers)(a.onInteractOutside,a=>{let b=a.detail.originalEvent,c=0===b.button&&!0===b.ctrlKey,d=2===b.button||c;(!e.modal||d)&&(g.current=!0)}),style:{...a.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});fz.displayName=fy,i.forwardRef((a,b)=>{let{__scopeDropdownMenu:c,...d}=a,e=fr(c);return(0,h.jsx)(eX,{...e,...d,ref:b})}).displayName="DropdownMenuGroup";var fA=i.forwardRef((a,b)=>{let{__scopeDropdownMenu:c,...d}=a,e=fr(c);return(0,h.jsx)(eY,{...e,...d,ref:b})});fA.displayName="DropdownMenuLabel";var fB=i.forwardRef((a,b)=>{let{__scopeDropdownMenu:c,...d}=a,e=fr(c);return(0,h.jsx)(e_,{...e,...d,ref:b})});fB.displayName="DropdownMenuItem";var fC=i.forwardRef((a,b)=>{let{__scopeDropdownMenu:c,...d}=a,e=fr(c);return(0,h.jsx)(e1,{...e,...d,ref:b})});fC.displayName="DropdownMenuCheckboxItem",i.forwardRef((a,b)=>{let{__scopeDropdownMenu:c,...d}=a,e=fr(c);return(0,h.jsx)(e5,{...e,...d,ref:b})}).displayName="DropdownMenuRadioGroup";var fD=i.forwardRef((a,b)=>{let{__scopeDropdownMenu:c,...d}=a,e=fr(c);return(0,h.jsx)(e7,{...e,...d,ref:b})});fD.displayName="DropdownMenuRadioItem";var fE=i.forwardRef((a,b)=>{let{__scopeDropdownMenu:c,...d}=a,e=fr(c);return(0,h.jsx)(fb,{...e,...d,ref:b})});fE.displayName="DropdownMenuItemIndicator";var fF=i.forwardRef((a,b)=>{let{__scopeDropdownMenu:c,...d}=a,e=fr(c);return(0,h.jsx)(fc,{...e,...d,ref:b})});fF.displayName="DropdownMenuSeparator",i.forwardRef((a,b)=>{let{__scopeDropdownMenu:c,...d}=a,e=fr(c);return(0,h.jsx)(fd,{...e,...d,ref:b})}).displayName="DropdownMenuArrow";var fG=i.forwardRef((a,b)=>{let{__scopeDropdownMenu:c,...d}=a,e=fr(c);return(0,h.jsx)(fh,{...e,...d,ref:b})});fG.displayName="DropdownMenuSubTrigger";var fH=i.forwardRef((a,b)=>{let{__scopeDropdownMenu:c,...d}=a,e=fr(c);return(0,h.jsx)(fj,{...e,...d,ref:b,style:{...a.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});fH.displayName="DropdownMenuSubContent";let fI=(0,z.default)("circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);i.forwardRef(({className:a,inset:b,children:c,...d},e)=>(0,h.jsxs)(fG,{ref:e,className:(0,G.cn)("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",b&&"pl-8",a),...d,children:[c,(0,h.jsx)(bu,{className:"ml-auto h-4 w-4"})]})).displayName=fG.displayName,i.forwardRef(({className:a,...b},c)=>(0,h.jsx)(fH,{ref:c,className:(0,G.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a),...b})).displayName=fH.displayName;let fJ=i.forwardRef(({className:a,sideOffset:b=4,...c},d)=>(0,h.jsx)(fx,{children:(0,h.jsx)(fz,{ref:d,sideOffset:b,className:(0,G.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a),...c})}));fJ.displayName=fz.displayName;let fK=i.forwardRef(({className:a,inset:b,...c},d)=>(0,h.jsx)(fB,{ref:d,className:(0,G.cn)("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",b&&"pl-8",a),...c}));function fL({onEdit:a,onDuplicate:b,onDelete:c}){return(0,h.jsxs)(fu,{children:[(0,h.jsx)(fw,{asChild:!0,children:(0,h.jsx)(H.Button,{variant:"ghost",size:"icon",className:"h-8 w-8",children:(0,h.jsx)(b4,{className:"h-4 w-4"})})}),(0,h.jsxs)(fJ,{align:"end",children:[(0,h.jsxs)(fK,{onClick:a,children:[(0,h.jsx)(b6.Edit,{className:"h-4 w-4 mr-2"}),"Edit"]}),(0,h.jsxs)(fK,{onClick:b,children:[(0,h.jsx)(bv.Copy,{className:"h-4 w-4 mr-2"}),"Duplicate"]}),(0,h.jsxs)(fK,{onClick:c,className:"text-destructive focus:text-destructive",children:[(0,h.jsx)(N.Trash2,{className:"h-4 w-4 mr-2"}),"Delete"]})]})]})}fK.displayName=fB.displayName,i.forwardRef(({className:a,children:b,checked:c,...d},e)=>(0,h.jsxs)(fC,{ref:e,className:(0,G.cn)("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),checked:c,...d,children:[(0,h.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,h.jsx)(fE,{children:(0,h.jsx)(bc.Check,{className:"h-4 w-4"})})}),b]})).displayName=fC.displayName,i.forwardRef(({className:a,children:b,...c},d)=>(0,h.jsxs)(fD,{ref:d,className:(0,G.cn)("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),...c,children:[(0,h.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,h.jsx)(fE,{children:(0,h.jsx)(fI,{className:"h-2 w-2 fill-current"})})}),b]})).displayName=fD.displayName,i.forwardRef(({className:a,inset:b,...c},d)=>(0,h.jsx)(fA,{ref:d,className:(0,G.cn)("px-2 py-1.5 text-sm font-semibold",b&&"pl-8",a),...c})).displayName=fA.displayName,i.forwardRef(({className:a,...b},c)=>(0,h.jsx)(fF,{ref:c,className:(0,G.cn)("-mx-1 my-1 h-px bg-muted",a),...b})).displayName=fF.displayName,a.s(["WorkflowCard",0,({workflow:a,onEdit:b,onDelete:c,onToggle:d,onDuplicate:e,viewMode:f="grid"})=>{let g="active"===a.status;return(0,h.jsx)(F.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},whileHover:{y:-4},transition:{duration:.2},children:(0,h.jsxs)(b9.Card,{className:(0,G.cn)("group relative overflow-hidden transition-all hover:shadow-md border-border/50 hover:border-border","list"===f?"flex items-center gap-6":""),children:[(0,h.jsx)("div",{className:(0,G.cn)("absolute left-0 top-0 bottom-0 w-1 transition-colors",g?"bg-green-500":"bg-muted")}),(0,h.jsxs)("div",{className:(0,G.cn)("flex-1","list"===f?"flex items-center justify-between gap-6":""),children:[(0,h.jsx)("div",{className:(0,G.cn)("mb-4","list"===f&&"mb-0 flex-1"),children:(0,h.jsxs)("div",{className:"flex items-start justify-between",children:[(0,h.jsxs)("div",{children:[(0,h.jsx)("h3",{className:"text-lg font-semibold tracking-tight mb-1 group-hover:text-primary transition-colors",children:a.name}),a.description&&(0,h.jsx)("p",{className:"text-sm text-muted-foreground line-clamp-2",children:a.description})]}),"grid"===f&&(0,h.jsx)(fL,{onEdit:()=>b(a.id),onDuplicate:()=>e(a.id),onDelete:()=>c(a.id)})]})}),(0,h.jsxs)("div",{className:(0,G.cn)("flex items-center gap-4 text-sm text-muted-foreground","grid"===f?"mb-4 pb-4 border-b border-border/50":""),children:[(0,h.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,h.jsx)(b7.CheckCircle2,{className:"h-4 w-4"}),(0,h.jsxs)("span",{children:[a.nodes.length," steps"]})]}),(0,h.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,h.jsx)(b8,{className:"h-4 w-4"}),(0,h.jsx)("span",{children:new Date(a.updatedAt).toLocaleDateString()})]})]}),"grid"===f&&(0,h.jsxs)("div",{className:"flex items-center justify-between",children:[(0,h.jsxs)("div",{className:(0,G.cn)("inline-flex items-center gap-1.5 px-2.5 py-0.5 rounded-full text-xs font-medium",g?"bg-green-500/10 text-green-600 dark:text-green-400":"bg-muted text-muted-foreground"),children:[(0,h.jsx)("div",{className:(0,G.cn)("h-1.5 w-1.5 rounded-full",g?"bg-green-500":"bg-slate-400")}),g?"Active":"Inactive"]}),(0,h.jsxs)("div",{className:"flex items-center gap-2",children:[(0,h.jsxs)(H.Button,{variant:"ghost",size:"sm",onClick:()=>d(a.id),className:g?"text-orange-600 hover:text-orange-700 hover:bg-orange-50":"text-green-600 hover:text-green-700 hover:bg-green-50",children:[g?(0,h.jsx)(b5,{className:"h-4 w-4 mr-1"}):(0,h.jsx)(E.Play,{className:"h-4 w-4 mr-1"}),g?"Pause":"Run"]}),(0,h.jsx)(H.Button,{size:"sm",variant:"outline",onClick:()=>b(a.id),children:"Edit"})]})]}),"list"===f&&(0,h.jsxs)("div",{className:"flex items-center gap-2",children:[(0,h.jsx)(H.Button,{variant:"ghost",size:"icon",onClick:()=>d(a.id),children:g?(0,h.jsx)(b5,{className:"h-4 w-4"}):(0,h.jsx)(E.Play,{className:"h-4 w-4"})}),(0,h.jsx)(fL,{onEdit:()=>b(a.id),onDuplicate:()=>e(a.id),onDelete:()=>c(a.id)})]})]})]})})}],98294),a.s([],51747)}];

//# sourceMappingURL=_110467ef._.js.map