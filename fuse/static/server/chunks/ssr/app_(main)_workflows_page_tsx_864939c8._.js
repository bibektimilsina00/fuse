module.exports=[68322,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944),e=a.i(15618),f=a.i(6807),g=a.i(60137);let h=(0,g.default)("folder-open",[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]]);var i=a.i(62036),j=a.i(12466),k=a.i(84565),l=a.i(46271),m=a.i(33508),n=a.i(73570);function o({open:a,onOpenChange:c,title:d,description:e,confirmText:f="Confirm",cancelText:g="Cancel",onConfirm:h,variant:k="danger"}){let o={danger:{icon:"bg-red-100 dark:bg-red-900/20 text-red-600 dark:text-red-400",button:"bg-red-600 hover:bg-red-700 text-white"},warning:{icon:"bg-amber-100 dark:bg-amber-900/20 text-amber-600 dark:text-amber-400",button:"bg-amber-600 hover:bg-amber-700 text-white"},info:{icon:"bg-blue-100 dark:bg-blue-900/20 text-blue-600 dark:text-blue-400",button:"bg-blue-600 hover:bg-blue-700 text-white"}}[k];return(0,b.jsx)(i.AnimatePresence,{children:a&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(l.motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>c(!1),className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50"}),(0,b.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:(0,b.jsxs)(l.motion.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},transition:{type:"spring",duration:.3},className:"bg-white dark:bg-slate-900 rounded-xl shadow-2xl max-w-md w-full border border-border overflow-hidden",children:[(0,b.jsxs)("div",{className:"flex items-start gap-4 p-6 pb-4",children:[(0,b.jsx)("div",{className:`p-3 rounded-full ${o.icon}`,children:(0,b.jsx)(n.AlertTriangle,{className:"h-6 w-6"})}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("h2",{className:"text-lg font-semibold text-foreground mb-1",children:d}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:e})]}),(0,b.jsx)("button",{onClick:()=>c(!1),className:"text-muted-foreground hover:text-foreground transition-colors",children:(0,b.jsx)(m.X,{className:"h-5 w-5"})})]}),(0,b.jsxs)("div",{className:"flex items-center justify-end gap-3 px-6 py-4 bg-muted/30 border-t border-border",children:[(0,b.jsx)(j.Button,{variant:"outline",onClick:()=>c(!1),children:g}),(0,b.jsx)(j.Button,{onClick:()=>{h(),c(!1)},className:o.button,children:f})]})]})})]})})}var p=a.i(87532);let q=(0,g.default)("grid-3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]);var r=a.i(67329),s=a.i(18180),t=a.i(97895);function u({searchQuery:a,onSearchChange:c,viewMode:d,onViewModeChange:e}){return(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsxs)("div",{className:"relative flex-1 max-w-md",children:[(0,b.jsx)(p.Search,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),(0,b.jsx)(s.Input,{type:"text",placeholder:"Search workflows...",value:a,onChange:a=>c(a.target.value),className:"pl-9 w-full"})]}),(0,b.jsxs)("div",{className:"flex items-center gap-1 bg-muted/50 p-1 rounded-lg border border-border",children:[(0,b.jsx)(j.Button,{variant:"ghost",size:"icon",onClick:()=>e("grid"),className:(0,t.cn)("h-8 w-8","grid"===d?"bg-background shadow-sm":"hover:bg-transparent"),children:(0,b.jsx)(q,{className:"h-4 w-4"})}),(0,b.jsx)(j.Button,{variant:"ghost",size:"icon",onClick:()=>e("list"),className:(0,t.cn)("h-8 w-8","list"===d?"bg-background shadow-sm":"hover:bg-transparent"),children:(0,b.jsx)(r.List,{className:"h-4 w-4"})})]})]})}a.i(51747);var v=a.i(98294);let w=(0,g.default)("message-circle",[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]]);var x=a.i(92258);let y=(0,g.default)("shopping-cart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]);var z=a.i(60246),A=a.i(4720),B=a.i(1027);let C=(0,g.default)("trending-up",[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]]);var D=a.i(41675);let E=(0,g.default)("dollar-sign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]),F={whatsapp:w,email:x.Mail,ecommerce:y,leads:z.Users,documents:A.FileText,automation:B.Zap,analytics:C,scheduling:D.Calendar,payments:E},G=({onUseTemplate:a})=>(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsx)("div",{className:"flex items-center justify-between",children:(0,b.jsxs)("div",{children:[(0,b.jsx)("h2",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:"Template Library"}),(0,b.jsx)("p",{className:"text-slate-600 dark:text-slate-400 mt-1",children:"Start with a ready-made workflow and customize it"})]})}),(0,b.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[{id:"1",name:"WhatsApp Auto-Reply",description:"Automatically respond to WhatsApp messages based on keywords and intent",category:"whatsapp",nodes:[],edges:[]},{id:"2",name:"Lead Collection Bot",description:"Capture leads from WhatsApp, extract details, and save to Google Sheets",category:"leads",nodes:[],edges:[]},{id:"3",name:"Email Auto-Responder",description:"Send personalized email replies using AI when new emails arrive",category:"email",nodes:[],edges:[]},{id:"4",name:"Order Intake System",description:"Process orders from WhatsApp and log them to Google Sheets",category:"ecommerce",nodes:[],edges:[]},{id:"5",name:"FAQ Bot",description:"Answer common questions automatically using AI",category:"automation",nodes:[],edges:[]},{id:"6",name:"Payment Link Generator",description:"Create and send Stripe payment links when requested",category:"payments",nodes:[],edges:[]}].map((c,d)=>(0,b.jsx)(H,{template:c,index:d,onUse:()=>a(c)},c.id))})]}),H=({template:a,index:c,onUse:d})=>{let e=F[a.category]||B.Zap;return(0,b.jsxs)(l.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.05*c},whileHover:{y:-4},className:"group relative bg-white dark:bg-slate-800 rounded-xl border border-slate-200 dark:border-slate-700 p-6 hover:shadow-xl hover:shadow-slate-200 dark:hover:shadow-slate-900/50 transition-all overflow-hidden",children:[(0,b.jsx)("div",{className:"absolute top-0 right-0 w-32 h-32 bg-gradient-to-br from-purple-400/10 to-pink-400/10 dark:from-purple-600/10 dark:to-pink-600/10 rounded-full blur-3xl -translate-y-16 translate-x-16 group-hover:scale-150 transition-transform duration-500"}),(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)("div",{className:"flex items-start justify-between mb-4",children:(0,b.jsx)("div",{className:"p-3 bg-gradient-to-br from-purple-100 to-pink-100 dark:from-purple-900/30 dark:to-pink-900/30 rounded-xl",children:(0,b.jsx)(e,{className:"h-6 w-6 text-purple-600 dark:text-purple-400"})})}),(0,b.jsx)("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white mb-2 group-hover:text-purple-600 dark:group-hover:text-purple-400 transition-colors",children:a.name}),(0,b.jsx)("p",{className:"text-sm text-slate-600 dark:text-slate-400 mb-6 line-clamp-2",children:a.description}),(0,b.jsx)(j.Button,{onClick:d,className:"w-full bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700 shadow-lg shadow-purple-500/20",children:"Use Template"})]})]})};var I=a.i(70279),J=a.i(42447),K=a.i(87946);function L(){let a=(0,d.useSearchParams)(),{workflows:g,isLoading:l,error:m,searchQuery:n,setSearchQuery:p,viewMode:q,setViewMode:r,handleEdit:s,handleDelete:t,handleToggle:w,handleDuplicate:x,handleCreateNew:y,showAIDialog:z,handleOpenAIDialog:A,handleCloseAIDialog:B,handleGenerateWithAI:C,deleteConfirmOpen:D,setDeleteConfirmOpen:E,workflowToDelete:F,confirmDelete:H}=function(){let a=(0,d.useRouter)(),[b,e]=(0,c.useState)(""),[f,g]=(0,c.useState)("grid"),[h,i]=(0,c.useState)("workflows"),{data:j,isLoading:k,error:l}=(0,I.useWorkflows)(),m=Array.isArray(j)?j:[],n=(0,I.useDeleteWorkflow)(),o=(0,I.useUpdateWorkflow)(),p=(0,I.useCreateWorkflow)(),q=m.filter(a=>a.meta.name.toLowerCase().includes(b.toLowerCase())||a.meta.description?.toLowerCase().includes(b.toLowerCase())),[r,s]=(0,c.useState)(!1),[t,u]=(0,c.useState)(null),v=async()=>{t&&(await n.mutateAsync(t),u(null))},w=async a=>{let b=m.find(b=>b.id===a);b&&await o.mutateAsync({id:a,data:{status:"active"===b.meta.status?"inactive":"active"}})},x=async a=>{let b=m.find(b=>b.id===a);b&&await p.mutateAsync({name:`${b.meta.name} (Copy)`,description:b.meta.description})},y=async()=>{let b=await p.mutateAsync({name:"New Workflow",description:""});a.push(`/workflows/${b.id}`)},[z,A]=(0,c.useState)(!1),B=(0,I.useSaveWorkflow)(),C=(0,I.useGenerateWorkflowWithAI)();return{workflows:q,isLoading:k,error:l,searchQuery:b,setSearchQuery:e,viewMode:f,setViewMode:g,activeTab:h,setActiveTab:i,handleEdit:b=>{a.push(`/workflows/${b}`)},handleDelete:a=>{u(a),s(!0)},handleToggle:w,handleDuplicate:x,handleCreateNew:y,showAIDialog:z,handleOpenAIDialog:()=>{A(!0)},handleCloseAIDialog:()=>{A(!1)},handleGenerateWithAI:async b=>{try{let c=await C.mutateAsync({prompt:b});J.logger.info("AI Generation Result:",c);let d=await p.mutateAsync({name:"AI Generated Workflow",description:b});d&&d.id&&(c.nodes&&c.edges&&await B.mutateAsync({workflow_id:d.id,meta:{id:d.id,name:d.meta.name,description:d.meta.description,version:d.meta.version||"1.0.0",status:"draft",tags:[],created_at:d.meta.created_at,updated_at:new Date().toISOString()},graph:{nodes:c.nodes,edges:c.edges},execution:{mode:"sequential",timeout_seconds:300},observability:{logging:!0,metrics:!1},ai:{model:"default"}}),a.push(`/workflows/${d.id}`))}catch(a){throw J.logger.error("Failed to generate workflow:",a),a}},deleteConfirmOpen:r,setDeleteConfirmOpen:s,workflowToDelete:t,confirmDelete:v}}(),[L,M]=(0,c.useState)("workflows");return((0,c.useEffect)(()=>{"true"===a.get("openAI")&&A()},[a,A]),g.filter(a=>"active"===a.meta.status).length,g.length,l)?(0,b.jsx)("div",{className:"flex items-center justify-center min-h-[60vh]",children:(0,b.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600"})}):m?(0,b.jsxs)("div",{className:"flex flex-col items-center justify-center min-h-[60vh] space-y-4",children:[(0,b.jsx)("div",{className:"text-red-500 text-lg font-semibold",children:"Error loading workflows"}),(0,b.jsx)("div",{className:"text-sm text-muted-foreground",children:m.message}),(0,b.jsx)("div",{className:"text-xs text-muted-foreground bg-muted p-4 rounded-lg max-w-2xl",children:(0,b.jsx)("p",{className:"font-mono",children:JSON.stringify(m,null,2)})})]}):(0,b.jsxs)("div",{className:"space-y-8",children:[(0,b.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-3xl font-bold tracking-tight",children:"Workflows"}),(0,b.jsx)("p",{className:"text-muted-foreground mt-1",children:"Create and manage your automation workflows"})]}),(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)(K.AICreateDialog,{open:z,onOpenChange:B,onSubmit:C,className:"hidden md:flex"}),(0,b.jsxs)(j.Button,{onClick:y,variant:"outline",children:[(0,b.jsx)(e.Plus,{className:"h-4 w-4 mr-2"}),"New Workflow"]})]})]}),(0,b.jsxs)(k.Tabs,{value:L,onValueChange:M,className:"space-y-6",children:[(0,b.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[(0,b.jsxs)(k.TabsList,{children:[(0,b.jsxs)(k.TabsTrigger,{value:"workflows",className:"flex items-center gap-2",children:[(0,b.jsx)(f.Workflow,{className:"h-4 w-4"}),"My Workflows"]}),(0,b.jsxs)(k.TabsTrigger,{value:"templates",className:"flex items-center gap-2",children:[(0,b.jsx)(h,{className:"h-4 w-4"}),"Templates"]})]}),(0,b.jsx)(u,{searchQuery:n,onSearchChange:p,viewMode:q,onViewModeChange:r})]}),(0,b.jsx)(k.TabsContent,{value:"workflows",className:"space-y-6",children:0===g.length?(0,b.jsxs)("div",{className:"text-center py-12 bg-white dark:bg-slate-800 rounded-xl border border-dashed border-slate-300 dark:border-slate-700",children:[(0,b.jsx)("div",{className:"w-16 h-16 bg-slate-50 dark:bg-slate-900 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,b.jsx)(e.Plus,{className:"h-8 w-8 text-slate-400"})}),(0,b.jsx)("h3",{className:"text-lg font-medium text-slate-900 dark:text-white mb-2",children:"No workflows yet"}),(0,b.jsx)("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:"Create your first workflow to get started with automation"}),(0,b.jsxs)(j.Button,{onClick:y,children:[(0,b.jsx)(e.Plus,{className:"h-4 w-4 mr-2"}),"Create Workflow"]})]}):(0,b.jsx)("div",{className:"grid"===q?"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6":"space-y-4",children:(0,b.jsx)(i.AnimatePresence,{children:g.map(a=>(0,b.jsx)(v.WorkflowCard,{workflow:{id:a.id.toString(),name:a.meta.name,description:a.meta.description,status:a.meta.status,nodes:a.graph?.nodes||[],edges:a.graph?.edges||[],tags:a.meta.tags||[],createdAt:a.meta.created_at,updatedAt:a.meta.updated_at},viewMode:q,onEdit:()=>s(a.id),onDelete:()=>t(a.id),onToggle:()=>w(a.id),onDuplicate:()=>x(a.id)},a.id))})})}),(0,b.jsx)(k.TabsContent,{value:"templates",children:(0,b.jsx)(G,{onUseTemplate:a=>{J.logger.info("Using template:",a)}})})]}),(0,b.jsx)(o,{open:D,onOpenChange:E,title:"Delete Workflow",description:`Are you sure you want to delete "${g.find(a=>a.id===F)?.meta.name||"this workflow"}"? This action cannot be undone.`,confirmText:"Delete",cancelText:"Cancel",onConfirm:H,variant:"danger"})]})}function M(){return(0,b.jsx)(c.Suspense,{fallback:(0,b.jsx)("div",{className:"flex items-center justify-center min-h-[60vh]",children:(0,b.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600"})}),children:(0,b.jsx)(L,{})})}a.s(["default",()=>M],68322)}];

//# sourceMappingURL=app_%28main%29_workflows_page_tsx_864939c8._.js.map