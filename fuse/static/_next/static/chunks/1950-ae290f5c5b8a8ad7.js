"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1950],{21950:(e,t,r)=>{r.d(t,{X:()=>x});var s=r(95155),a=r(12115),i=r(9673),o=r(35625),n=r(48934),l=r(33210),d=r(61878),c=r(21362),u=r(6296),m=r(34426),h=r(36642),p=r(91337);let g=[{id:"ai_provider",name:"AI Provider",icon:"\uD83E\uDD16",description:"OpenAI, Anthropic, Gemini, etc.",category:"AI & ML",providers:[{id:"openai",label:"OpenAI",icon:"\uD83E\uDD16",needsBaseUrl:!0},{id:"anthropic",label:"Anthropic",icon:"\uD83E\uDDE0",needsBaseUrl:!1},{id:"gemini",label:"Google Gemini",icon:"\uD83D\uDC8E",needsBaseUrl:!1},{id:"openrouter",label:"OpenRouter",icon:"\uD83D\uDE80",needsBaseUrl:!0}]},{id:"google_sheets",name:"Google Sheets",icon:"\uD83D\uDCCA",description:"Spreadsheet automation",category:"Productivity",isOAuth:!0},{id:"slack",name:"Slack",icon:"\uD83D\uDCAC",description:"Team communication",category:"Communication",isOAuth:!0},{id:"discord",name:"Discord",icon:"\uD83C\uDFAE",description:"Community platform",category:"Communication",isOAuth:!0},{id:"github",name:"GitHub",icon:"\uD83D\uDC19",description:"Code repository",category:"Development",isOAuth:!0},{id:"webhook",name:"Webhook",icon:"\uD83D\uDD17",description:"HTTP webhooks",category:"Integration"},{id:"api_key",name:"Generic API Key",icon:"\uD83D\uDD11",description:"Any API key",category:"Integration"},{id:"database",name:"Database",icon:"\uD83D\uDDC4ï¸",description:"SQL/NoSQL databases",category:"Data"}];function x({isOpen:e,onClose:t,onSuccess:r,defaultType:x}){let y=(0,o.jE)(),[b,f]=(0,a.useState)("select-app"),[v,w]=(0,a.useState)(""),[j,k]=(0,a.useState)(null),[N,C]=(0,a.useState)(""),[A,$]=(0,a.useState)(""),[S,O]=(0,a.useState)(""),[R,T]=(0,a.useState)(""),I=(0,n.n)({mutationFn:e=>h.H.createCredential(e),onSuccess:e=>{y.invalidateQueries({queryKey:["credentials"]}),r&&r(e.id),P()}}),P=()=>{f("select-app"),w(""),k(null),C(""),O(""),T(""),$(""),t()},E=g.filter(e=>e.name.toLowerCase().includes(v.toLowerCase())||e.description.toLowerCase().includes(v.toLowerCase())||e.category.toLowerCase().includes(v.toLowerCase())),D=Array.from(new Set(g.map(e=>e.category)));return e?(0,s.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",onClick:P,children:(0,s.jsxs)(i.P.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"bg-card border border-border rounded-xl w-full max-w-2xl shadow-2xl max-h-[90vh] flex flex-col",onClick:e=>e.stopPropagation(),children:[(0,s.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-border shrink-0",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-lg font-semibold",children:"select-app"===b?"Select App":`Create ${j?.name} Credential`}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground mt-0.5",children:"select-app"===b?"Choose the service you want to connect":"Enter your credentials to connect"})]}),(0,s.jsx)("button",{onClick:P,className:"h-8 w-8 rounded-lg hover:bg-muted flex items-center justify-center transition-colors",children:(0,s.jsx)(l.A,{className:"h-4 w-4"})})]}),(0,s.jsx)("div",{className:"flex-1 overflow-y-auto",children:"select-app"===b?(0,s.jsxs)("div",{className:"p-6 space-y-4",children:[(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(d.A,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),(0,s.jsx)("input",{type:"text",value:v,onChange:e=>w(e.target.value),placeholder:"Search apps...",className:"w-full pl-10 pr-4 py-2.5 bg-background border border-border rounded-lg focus:border-primary focus:ring-1 focus:ring-primary outline-none",autoFocus:!0})]}),(0,s.jsx)("div",{className:"space-y-6",children:D.map(e=>{let t=E.filter(t=>t.category===e);return 0===t.length?null:(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-xs font-semibold text-muted-foreground uppercase tracking-wider mb-3",children:e}),(0,s.jsx)("div",{className:"grid grid-cols-2 gap-3",children:t.map(e=>(0,s.jsxs)("button",{onClick:()=>{k(e),e.providers&&e.providers.length>0&&$(e.providers[0].id),f("configure")},className:"flex items-start gap-3 p-4 bg-background border border-border rounded-lg hover:border-primary/50 hover:bg-muted/50 transition-all text-left group",children:[(0,s.jsx)("div",{className:"h-10 w-10 rounded-lg bg-muted flex items-center justify-center text-2xl shrink-0",children:e.icon}),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[(0,s.jsx)("h4",{className:"font-medium text-sm truncate",children:e.name}),(0,s.jsx)(c.A,{className:"h-4 w-4 text-muted-foreground opacity-0 group-hover:opacity-100 transition-opacity shrink-0"})]}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground mt-0.5 line-clamp-1",children:e.description})]})]},e.id))})]},e)})}),0===E.length&&(0,s.jsx)("div",{className:"text-center py-12",children:(0,s.jsx)("p",{className:"text-muted-foreground",children:"No apps found"})})]}):(0,s.jsxs)("form",{onSubmit:e=>{e.preventDefault(),j&&I.mutate({name:N,type:j.id,data:{api_key:S,..."ai_provider"===j.id&&{provider:A},...R&&{base_url:R}}})},className:"p-6 space-y-4",children:[(0,s.jsxs)("button",{type:"button",onClick:()=>f("select-app"),className:"text-sm text-muted-foreground hover:text-foreground flex items-center gap-1 -ml-1",children:[(0,s.jsx)(c.A,{className:"h-4 w-4 rotate-180"}),"Back to app selection"]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-sm font-medium text-muted-foreground block mb-1.5",children:"Credential Name"}),(0,s.jsx)("input",{type:"text",value:N,onChange:e=>C(e.target.value),className:"w-full px-3 py-2 bg-background border border-border rounded-lg focus:border-primary focus:ring-1 focus:ring-primary outline-none",placeholder:`My ${j?.name} Account`,required:!0})]}),j?.id==="ai_provider"&&j.providers&&(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-sm font-medium text-muted-foreground block mb-1.5",children:"Provider"}),(0,s.jsx)("div",{className:"grid grid-cols-2 gap-2",children:j.providers.map(e=>(0,s.jsxs)("button",{type:"button",onClick:()=>$(e.id),className:(0,p.cn)("flex items-center gap-2 px-3 py-2 rounded-lg border text-sm transition-all",A===e.id?"border-primary bg-primary/10 text-primary":"border-border bg-background hover:border-primary/50"),children:[(0,s.jsx)("span",{children:e.icon}),e.label]},e.id))})]}),j?.isOAuth&&(0,s.jsx)("div",{className:"bg-primary/5 border border-primary/20 rounded-lg p-4",children:(0,s.jsxs)("p",{className:"text-sm text-foreground",children:[(0,s.jsx)("strong",{children:"OAuth Connection:"})," You'll be redirected to ",j.name," to authorize access."]})}),!j?.isOAuth&&(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-sm font-medium text-muted-foreground block mb-1.5",children:j?.id==="webhook"?"Webhook URL":"API Key / Token"}),(0,s.jsx)("input",{type:j?.id==="webhook"?"text":"password",value:S,onChange:e=>O(e.target.value),className:"w-full px-3 py-2 bg-background border border-border rounded-lg focus:border-primary focus:ring-1 focus:ring-primary outline-none font-mono text-sm",placeholder:j?.id==="webhook"?"https://hooks.example.com/...":"sk-...",required:!0})]}),j?.id==="ai_provider"&&j.providers?.find(e=>e.id===A)?.needsBaseUrl&&(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-sm font-medium text-muted-foreground block mb-1.5",children:"Base URL (Optional)"}),(0,s.jsx)("input",{type:"text",value:R,onChange:e=>T(e.target.value),className:"w-full px-3 py-2 bg-background border border-border rounded-lg focus:border-primary focus:ring-1 focus:ring-primary outline-none",placeholder:"openrouter"===A?"https://openrouter.ai/api/v1":"https://api.openai.com/v1"})]}),(0,s.jsxs)("div",{className:"flex justify-end gap-3 pt-2",children:[(0,s.jsx)(m.$,{type:"button",variant:"outline",onClick:()=>f("select-app"),children:"Back"}),(0,s.jsx)(m.$,{type:"submit",disabled:!N||!j?.isOAuth&&!S||I.isPending,children:I.isPending?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(u.A,{className:"h-4 w-4 mr-2 animate-spin"}),"Creating..."]}):j?.isOAuth?"Connect":"Create"})]})]})})]})}):null}},25336:(e,t,r)=>{r.d(t,{X6:()=>o,aw:()=>i,vF:()=>a});class s{constructor(e="App"){this.prefix=e}formatMessage(e,t){let r=new Date().toISOString().split("T")[1].split(".")[0];return`[${r}] [${this.prefix}] ${e}: ${t}`}debug(e,t){}info(e,t){}warn(e,t){console.warn(this.formatMessage("WARN",e),t||"")}error(e,t,r){console.error(this.formatMessage("ERROR",e),t,r||"")}child(e){return new s(`${this.prefix}:${e}`)}}let a=new s("Automation"),i=a.child("Workflow");a.child("Validation");let o=a.child("WebSocket")},34426:(e,t,r)=>{r.d(t,{$:()=>d});var s=r(95155),a=r(12115),i=r(99873),o=r(622),n=r(42442);let l=(0,i.F)("inline-flex items-center justify-center whitespace-nowrap rounded-lg text-sm font-medium transition-all duration-200 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 active:scale-[0.98]",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-md hover:bg-primary/90 hover:shadow-lg hover:-translate-y-0.5",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground hover:border-primary/30",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline",success:"bg-emerald-600 text-white shadow-md hover:bg-emerald-700",warning:"bg-amber-500 text-white shadow-md hover:bg-amber-600"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-lg px-3 text-xs",lg:"h-11 rounded-lg px-8",xl:"h-12 rounded-xl px-10 text-base",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=a.forwardRef(({className:e,variant:t,size:r,asChild:a=!1,loading:i=!1,children:d,disabled:c,...u},m)=>{let h=a?n.DX:"button";return(0,s.jsx)(h,{ref:m,className:(0,o.QP)(l({variant:t,size:r}),e),disabled:c||i,...u,children:i?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,s.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,s.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Loading..."]}):d})});d.displayName="Button"},36642:(e,t,r)=>{r.d(t,{H:()=>a});var s=r(61899);let a={getCredentials:async()=>s.uE.get("/credentials/"),getCredential:async e=>s.uE.get(`/credentials/${e}`),createCredential:async e=>s.uE.post("/credentials/",e),updateCredential:async(e,t)=>s.uE.patch(`/credentials/${e}`,t),deleteCredential:async e=>s.uE.delete(`/credentials/${e}`),getOAuthUrl:async e=>s.uE.get(`/credentials/oauth/${e}/url`)}},61899:(e,t,r)=>{r.d(t,{hs:()=>a,uE:()=>d});var s=r(25336);let a="http://localhost:5678/api/v1",i={maxRetries:3,baseDelayMs:1e3,maxDelayMs:1e4,retryableStatuses:[408,429,500,502,503,504]};function o(e,t){let r=t.baseDelayMs*Math.pow(2,e),s=.3*Math.random()*r;return Math.min(r+s,t.maxDelayMs)}function n(e){return new Promise(t=>setTimeout(t,e))}class l{constructor(){this.token=null,this.retryConfig=i,this.token=localStorage.getItem("auth_token")}static getInstance(){return l.instance||(l.instance=new l),l.instance}setToken(e){this.token=e,e?localStorage.setItem("auth_token",e):localStorage.removeItem("auth_token")}getToken(){return this.token}setRetryConfig(e){this.retryConfig={...this.retryConfig,...e}}async request(e,t={},r=0){let i={"Content-Type":"application/json","X-Request-ID":0===r?crypto.randomUUID?crypto.randomUUID():`${Date.now()}-${Math.random().toString(36).substring(2,11)}`:t.headers?.["X-Request-ID"],...t.headers};this.token&&(i.Authorization=`Bearer ${this.token}`);try{var l;let d=await fetch(`${a}${e}`,{...t,headers:i});if(429===d.status){let a=d.headers.get("Retry-After");if(a&&r<this.retryConfig.maxRetries){let i=1e3*parseInt(a,10)||o(r,this.retryConfig);return s.vF.warn(`Rate limited on ${e}. Retrying after ${i}ms (attempt ${r+1})`),await n(i),this.request(e,t,r+1)}}if(!d.ok&&(l=d.status,this.retryConfig.retryableStatuses.includes(l))&&r<this.retryConfig.maxRetries){let a=o(r,this.retryConfig);return s.vF.warn(`Request failed with ${d.status} on ${e}. Retrying after ${a}ms (attempt ${r+1})`),await n(a),this.request(e,t,r+1)}if(!d.ok){let e,t=await d.json().catch(()=>({detail:"An error occurred"}));throw e=Array.isArray(t.detail)?t.detail.map(e=>e.msg||e.message||"Validation error").join(". "):"string"==typeof t.detail?t.detail:t.detail?.msg?t.detail.msg:t.message?t.message:`HTTP error! status: ${d.status}`,Error(e)}return d.json()}catch(i){let a=e.includes("/users/me")||e.includes("/login");if(i instanceof TypeError&&"Failed to fetch"===i.message&&r<this.retryConfig.maxRetries&&!a){let a=o(r,this.retryConfig);return s.vF.warn(`Network error on ${e}. Retrying after ${a}ms (attempt ${r+1})`),await n(a),this.request(e,t,r+1)}throw i}}async get(e){return this.request(e,{method:"GET"})}async post(e,t){return this.request(e,{method:"POST",body:t?JSON.stringify(t):void 0})}async postFormData(e,t){let r={"Content-Type":"application/x-www-form-urlencoded"};this.token&&(r.Authorization=`Bearer ${this.token}`);let s=await fetch(`${a}${e}`,{method:"POST",headers:r,body:t});if(!s.ok){let e=await s.json().catch(()=>({detail:"An error occurred"}));throw Error(Array.isArray(e.detail)?e.detail.map(e=>e.msg||e.message||"Validation error").join(". "):"string"==typeof e.detail?e.detail:e.detail?.msg?e.detail.msg:e.message?e.message:`HTTP error! status: ${s.status}`)}return s.json()}async put(e,t){return this.request(e,{method:"PUT",body:JSON.stringify(t)})}async patch(e,t){return this.request(e,{method:"PATCH",body:JSON.stringify(t)})}async delete(e){return this.request(e,{method:"DELETE"})}}let d=l.getInstance()},91337:(e,t,r)=>{r.d(t,{cn:()=>i});var s=r(76910),a=r(622);function i(...e){return(0,a.QP)((0,s.$)(e))}}}]);