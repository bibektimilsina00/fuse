"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4],{18346:(e,t,s)=>{s.d(t,{AM:()=>h,H8:()=>f,Ij:()=>b,MS:()=>v,Q8:()=>w,QB:()=>g,Ss:()=>m,Tj:()=>c,fQ:()=>y,j3:()=>d,mP:()=>l,nV:()=>u,n_:()=>j,oE:()=>x,yM:()=>p});var a=s(32842),r=s(35625),n=s(48934),o=s(48182);let i={all:["workflows"],lists:()=>[...i.all,"list"],list:e=>[...i.lists(),{filters:e}],details:()=>[...i.all,"detail"],detail:e=>[...i.details(),e],nodeTypes:()=>[...i.all,"node-types"],nodeOptions:(e,t,s)=>[...i.all,"node-options",e,t,s],debugWorkflows:()=>[...i.all,"debug"],debugWorkflow:e=>[...i.all,"debug",e]};function l(){return(0,a.I)({queryKey:i.lists(),queryFn:o.y.getWorkflows})}function d(e){return(0,a.I)({queryKey:i.detail(e),queryFn:()=>o.y.getWorkflow(e),enabled:!!e})}function c(){return(0,a.I)({queryKey:i.nodeTypes(),queryFn:o.y.getNodeTypes,staleTime:0})}function u(){let e=(0,r.jE)();return(0,n.n)({mutationFn:e=>o.y.createWorkflow(e),onSuccess:()=>{e.invalidateQueries({queryKey:i.lists()})}})}function m(){let e=(0,r.jE)();return(0,n.n)({mutationFn:({id:e,data:t})=>o.y.updateWorkflow(e,t),onSuccess:(t,s)=>{e.invalidateQueries({queryKey:i.detail(s.id)}),e.invalidateQueries({queryKey:i.lists()})}})}function x(){let e=(0,r.jE)();return(0,n.n)({mutationFn:e=>o.y.deleteWorkflow(e),onSuccess:()=>{e.invalidateQueries({queryKey:i.lists()})}})}function p(){let e=(0,r.jE)();return(0,n.n)({mutationFn:e=>o.y.saveWorkflow(e),onSuccess:(t,s)=>{e.invalidateQueries({queryKey:i.detail(s.workflow_id)}),e.invalidateQueries({queryKey:i.lists()})}})}function h(){return(0,n.n)({mutationFn:e=>o.y.executeWorkflow(e)})}function g(){return(0,n.n)({mutationFn:e=>o.y.generateWithAI(e)})}function f(){return(0,n.n)({mutationFn:({workflowId:e,nodeId:t,inputData:s})=>o.y.executeNode(e,t,s)})}function b(){let e=(0,r.jE)();return(0,n.n)({mutationFn:e=>o.y.activateWorkflow(e),onSuccess:(t,s)=>{e.invalidateQueries({queryKey:i.detail(s)}),e.invalidateQueries({queryKey:i.lists()})}})}function y(){let e=(0,r.jE)();return(0,n.n)({mutationFn:e=>o.y.deactivateWorkflow(e),onSuccess:(t,s)=>{e.invalidateQueries({queryKey:i.detail(s)}),e.invalidateQueries({queryKey:i.lists()})}})}function v(){return(0,n.n)({mutationFn:({code:e,language:t,inputData:s})=>o.y.executeCode(e,t,s||{})})}function j(){return(0,a.I)({queryKey:i.debugWorkflows(),queryFn:o.y.getDebugWorkflows,staleTime:3e5})}function w(){return(0,n.n)({mutationFn:e=>o.y.getDebugWorkflow(e)})}},25336:(e,t,s)=>{s.d(t,{X6:()=>o,aw:()=>n,vF:()=>r});class a{constructor(e="App"){this.prefix=e}formatMessage(e,t){let s=new Date().toISOString().split("T")[1].split(".")[0];return`[${s}] [${this.prefix}] ${e}: ${t}`}debug(e,t){}info(e,t){}warn(e,t){console.warn(this.formatMessage("WARN",e),t||"")}error(e,t,s){console.error(this.formatMessage("ERROR",e),t,s||"")}child(e){return new a(`${this.prefix}:${e}`)}}let r=new a("Automation"),n=r.child("Workflow");r.child("Validation");let o=r.child("WebSocket")},34426:(e,t,s)=>{s.d(t,{$:()=>d});var a=s(95155),r=s(12115),n=s(99873),o=s(622),i=s(42442);let l=(0,n.F)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-md hover:bg-primary/90 hover:shadow-lg hover:-translate-y-0.5 transition-all duration-200",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=r.forwardRef(({className:e,variant:t,size:s,asChild:r=!1,children:n,...d},c)=>{let u=r?i.DX:"button";return(0,a.jsx)(u,{ref:c,className:(0,o.QP)(l({variant:t,size:s}),e),...d,children:n})});d.displayName="Button"},38992:(e,t,s)=>{s.d(t,{Z:()=>r});var a=s(95155);s(12115);let r=({className:e="",children:t})=>(0,a.jsx)("div",{className:`bg-card text-card-foreground border border-border rounded-lg shadow-sm p-6 transition-all hover:shadow-md ${e}`,children:t})},48182:(e,t,s)=>{s.d(t,{y:()=>r});var a=s(61899);let r={getWorkflows:async()=>(await a.uE.get("/workflows/")).data,getWorkflow:async e=>a.uE.get(`/workflows/${e}`),createWorkflow:async e=>a.uE.post("/workflows/",e),updateWorkflow:async(e,t)=>a.uE.patch(`/workflows/${e}`,t),deleteWorkflow:async e=>a.uE.delete(`/workflows/${e}`),async saveWorkflow(e){let{workflow_id:t,...s}=e;return console.log("[DEBUG] Save workflow request:",JSON.stringify(s,null,2)),a.uE.post(`/workflows/${t}/save`,s)},executeWorkflow:async e=>a.uE.post(`/workflows/${e}/execute`),getNodeTypes:async()=>a.uE.get("/workflows/nodes/types"),generateWithAI:async e=>a.uE.post("/workflows/ai/generate",e),executeNode:async(e,t,s={})=>a.uE.post(`/workflows/${e}/nodes/${t}/execute`,{input_data:s}),activateWorkflow:async e=>a.uE.post(`/workflows/${e}/activate`),deactivateWorkflow:async e=>a.uE.post(`/workflows/${e}/deactivate`),getNodeOptions:async(e,t,s={})=>a.uE.post("/workflows/node/options",{node_type:e,method_name:t,dependency_values:s}),executeCode:async(e,t,s={})=>a.uE.post("/workflows/execute-code",{code:e,language:t,input_data:s}),getDebugWorkflows:async()=>a.uE.get("/workflows/debug/workflows"),getDebugWorkflow:async e=>a.uE.get(`/workflows/debug/workflows/${e}`)}},53718:(e,t,s)=>{s.d(t,{eG:()=>c,Lv:()=>x,aX:()=>u,vE:()=>m,Ii:()=>p});var a=s(32842),r=s(35625),n=s(48934),o=s(61899);let i=async()=>o.uE.get("/credentials/"),l=async e=>o.uE.post("/credentials/",e),d=async e=>o.uE.delete(`/credentials/${e}`),c={all:["credentials"],lists:()=>[...c.all,"list"],list:e=>[...c.lists(),e],byType:e=>[...c.all,"byType",e],details:()=>[...c.all,"detail"],detail:e=>[...c.details(),e]};function u(){return(0,a.I)({queryKey:c.lists(),queryFn:i})}function m(e){return(0,a.I)({queryKey:c.byType(e),queryFn:async()=>(await i()).filter(t=>t.type===e),enabled:!!e})}function x(){let e=(0,r.jE)();return(0,n.n)({mutationFn:e=>l(e),onSuccess:()=>{e.invalidateQueries({queryKey:c.lists()})}})}function p(){let e=(0,r.jE)();return(0,n.n)({mutationFn:e=>d(e),onSuccess:()=>{e.invalidateQueries({queryKey:c.lists()})}})}},61899:(e,t,s)=>{s.d(t,{hs:()=>r,uE:()=>d});var a=s(25336);let r="http://localhost:5678/api/v1",n={maxRetries:3,baseDelayMs:1e3,maxDelayMs:1e4,retryableStatuses:[408,429,500,502,503,504]};function o(e,t){let s=t.baseDelayMs*Math.pow(2,e),a=.3*Math.random()*s;return Math.min(s+a,t.maxDelayMs)}function i(e){return new Promise(t=>setTimeout(t,e))}class l{constructor(){this.token=null,this.retryConfig=n,this.token=localStorage.getItem("auth_token")}static getInstance(){return l.instance||(l.instance=new l),l.instance}setToken(e){this.token=e,e?localStorage.setItem("auth_token",e):localStorage.removeItem("auth_token")}getToken(){return this.token}setRetryConfig(e){this.retryConfig={...this.retryConfig,...e}}async request(e,t={},s=0){let n={"Content-Type":"application/json","X-Request-ID":0===s?crypto.randomUUID?crypto.randomUUID():`${Date.now()}-${Math.random().toString(36).substring(2,11)}`:t.headers?.["X-Request-ID"],...t.headers};this.token&&(n.Authorization=`Bearer ${this.token}`);try{var l;let d=await fetch(`${r}${e}`,{...t,headers:n});if(429===d.status){let r=d.headers.get("Retry-After");if(r&&s<this.retryConfig.maxRetries){let n=1e3*parseInt(r,10)||o(s,this.retryConfig);return a.vF.warn(`Rate limited on ${e}. Retrying after ${n}ms (attempt ${s+1})`),await i(n),this.request(e,t,s+1)}}if(!d.ok&&(l=d.status,this.retryConfig.retryableStatuses.includes(l))&&s<this.retryConfig.maxRetries){let r=o(s,this.retryConfig);return a.vF.warn(`Request failed with ${d.status} on ${e}. Retrying after ${r}ms (attempt ${s+1})`),await i(r),this.request(e,t,s+1)}if(!d.ok){let e=await d.json().catch(()=>({detail:"An error occurred"}));throw Error(e.detail||`HTTP error! status: ${d.status}`)}return d.json()}catch(n){let r=e.includes("/users/me")||e.includes("/login");if(n instanceof TypeError&&"Failed to fetch"===n.message&&s<this.retryConfig.maxRetries&&!r){let r=o(s,this.retryConfig);return a.vF.warn(`Network error on ${e}. Retrying after ${r}ms (attempt ${s+1})`),await i(r),this.request(e,t,s+1)}throw n}}async get(e){return this.request(e,{method:"GET"})}async post(e,t){return this.request(e,{method:"POST",body:t?JSON.stringify(t):void 0})}async postFormData(e,t){let s={"Content-Type":"application/x-www-form-urlencoded"};this.token&&(s.Authorization=`Bearer ${this.token}`);let a=await fetch(`${r}${e}`,{method:"POST",headers:s,body:t});if(!a.ok)throw Error((await a.json().catch(()=>({detail:"An error occurred"}))).detail||`HTTP error! status: ${a.status}`);return a.json()}async put(e,t){return this.request(e,{method:"PUT",body:JSON.stringify(t)})}async patch(e,t){return this.request(e,{method:"PATCH",body:JSON.stringify(t)})}async delete(e){return this.request(e,{method:"DELETE"})}}let d=l.getInstance()},77833:(e,t,s)=>{s.d(t,{dj:()=>u});var a=s(12115);let r=0,n=new Map,o=e=>{if(n.has(e))return;let t=setTimeout(()=>{n.delete(e),d({type:"REMOVE_TOAST",toastId:e})},1e6);n.set(e,t)},i=[],l={toasts:[]};function d(e){l=((e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:s}=t;return s?o(s):e.toasts.forEach(e=>{o(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===s||void 0===s?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}})(l,e),i.forEach(e=>{e(l)})}function c({...e}){let t=(r=(r+1)%Number.MAX_SAFE_INTEGER).toString(),s=()=>d({type:"DISMISS_TOAST",toastId:t});return d({type:"ADD_TOAST",toast:{...e,id:t,open:!0,onOpenChange:e=>{e||s()}}}),{id:t,dismiss:s,update:e=>d({type:"UPDATE_TOAST",toast:{...e,id:t}})}}function u(){let[e,t]=a.useState(l);return a.useEffect(()=>(i.push(t),()=>{let e=i.indexOf(t);e>-1&&i.splice(e,1)}),[e]),{...e,toast:c,dismiss:e=>d({type:"DISMISS_TOAST",toastId:e})}}},84004:(e,t,s)=>{s.d(t,{n:()=>t$,q:()=>tW});var a=s(95155),r=s(12115),n=s(36161);s(43235);var o=s(80642),i=s(18346),l=s(77833),d=s(25336),c=s(66088),u=s(9673),m=s(91337),x=s(51914);function p({nodeId:e,handleId:t,position:s="right",color:r="#3b82f6",style:o}){let{getNode:i}=(0,n.VH)();return(0,n.Yu)().some(s=>{if(s.source!==e)return!1;let a=s.sourceHandle||s.source_handle||s.condition,r=t?.toString().toLowerCase();if(!t)return!0;{if(a?.toString().toLowerCase()===r)return!0;let e="true"===t||"output"===t||"default"===t;return!a&&!!e}})?null:(0,a.jsxs)(u.P.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},className:"absolute z-10 flex items-center pointer-events-none group/add",style:{top:o?.top||"50%",left:"100%",transform:"translateY(-50%)",height:"0px",...o},children:[(0,a.jsx)("div",{className:"h-[2px] w-10 opacity-30 group-hover/node:opacity-60 transition-all duration-300",style:{background:`linear-gradient(to right, ${r} 0%, ${r} 60%, transparent 100%)`}}),(0,a.jsx)(u.P.button,{whileHover:{scale:1.25},whileTap:{scale:.9},onClick:s=>{s.stopPropagation();let a=i(e);if(!a)return;let r=new CustomEvent("addNodeAfter",{detail:{source:e,handleId:t,x:a.position.x+(a.width||100)+40,y:a.position.y+(a.height||80)/2}});window.dispatchEvent(r)},className:"flex items-center justify-center w-6 h-6 rounded-full bg-card/95 backdrop-blur-xl border-2 border-border shadow-xl cursor-pointer pointer-events-auto transition-all group/plus active:shadow-inner -ml-2",style:{borderColor:`${r}40`},children:(0,a.jsx)(x.A,{className:"h-3.5 w-3.5 text-muted-foreground group-hover/plus:text-primary transition-colors"})})]})}function h(e,t={},s={},a){let r=[],n={...s?.config,...t};if(!a)return{isValid:!0,warnings:[],hasCredentialIssue:!1,hasRequiredFieldIssue:!1};for(let e of a.inputs?.filter(e=>"credential"===e.type)||[])if(e.required){let t=n[e.name];t&&""!==t&&"dummy_cred"!==t&&null!==t||r.push({type:"credential_missing",field:e.name,message:`${e.label||"Credential"} is required`,severity:"warning"})}for(let e of a.inputs?.filter(e=>"credential"!==e.type&&e.required&&"node_name"!==e.name)||[]){let t=n[e.name];(null==t||""===t)&&r.push({type:"required_field_missing",field:e.name,message:`${e.label} is required`,severity:"warning"})}return{isValid:0===r.length,warnings:r,hasCredentialIssue:r.some(e=>"credential_missing"===e.type),hasRequiredFieldIssue:r.some(e=>"required_field_missing"===e.type)}}let g=(0,r.memo)(({type:e,position:t,isConnectable:s=!0,color:o="#9ca3af",handleId:i,style:l})=>{let[d,c]=(0,r.useState)(!1),m={...t===n.yX.Left&&{left:"-8px",top:"50%",transform:"translateY(-50%)"},...t===n.yX.Right&&{right:"-8px",top:"50%",transform:"translateY(-50%)"},...t===n.yX.Top&&{top:"-8px",left:"50%",transform:"translateX(-50%)"},...t===n.yX.Bottom&&{bottom:"-8px",left:"50%",transform:"translateX(-50%)"},...l};return(0,a.jsx)(n.h7,{type:e,position:t,id:i,isConnectable:s,className:"!w-4 !h-4 !bg-transparent !border-none z-50 p-0",style:m,onMouseEnter:()=>c(!0),onMouseLeave:()=>c(!1),children:(0,a.jsxs)(u.P.div,{className:"w-full h-full relative flex items-center justify-center pointer-events-none",animate:d?"hover":"initial",initial:"initial",children:[(0,a.jsx)(u.P.div,{variants:{initial:{scale:1,opacity:0},hover:{scale:2,opacity:.4,transition:{repeat:1/0,duration:1}}},className:"absolute inset-0 rounded-full",style:{backgroundColor:o}}),(0,a.jsx)(u.P.div,{variants:{initial:{scale:1},hover:{scale:1.25}},className:"w-full h-full rounded-full border-2 border-white dark:border-slate-700 shadow-md relative z-10",style:{backgroundColor:o},children:(0,a.jsx)("div",{className:"absolute top-0.5 left-0.5 w-[30%] h-[30%] bg-white rounded-full opacity-40"})})]})})});g.displayName="NodeHandle";var f=s(6296),b=s(20232),y=s(29373),v=s(68459);let j=(0,r.memo)(({show:e,isRunning:t=!1,isPending:s=!1,isPaused:r=!1,onExecute:n,onTogglePause:i,onDelete:l,position:d="top"})=>(0,a.jsx)(o.N,{children:e&&(0,a.jsxs)(u.P.div,{initial:{opacity:0,scale:.9,y:"top"===d?5:-5},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:"top"===d?5:-5},className:`${"top"===d?"absolute -top-12 left-1/2 -translate-x-1/2":"absolute -bottom-12 left-1/2 -translate-x-1/2"} flex items-center gap-1 p-1 bg-card/95 backdrop-blur-md border border-border rounded-lg shadow-xl z-50 min-w-max`,children:[n&&(0,a.jsx)("button",{onClick:e=>{e.stopPropagation(),n()},disabled:t||s,className:"p-1.5 hover:bg-emerald-500/10 rounded-md transition-all group disabled:opacity-50",title:t?"Running...":"Run this node",children:t||s?(0,a.jsx)(f.A,{className:"h-3.5 w-3.5 text-muted-foreground animate-spin"}):(0,a.jsx)(b.A,{className:"h-3.5 w-3.5 text-muted-foreground group-hover:text-emerald-500 group-hover:fill-emerald-500"})}),i&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"w-[1px] h-4 bg-border/50"}),(0,a.jsx)("button",{onClick:e=>{e.stopPropagation(),i()},className:`p-1.5 rounded-md transition-all group ${r?"hover:bg-emerald-500/10":"hover:bg-amber-500/10"}`,title:r?"Activate":"Deactivate",children:r?(0,a.jsx)(b.A,{className:"h-3.5 w-3.5 text-muted-foreground group-hover:text-emerald-500 group-hover:fill-emerald-500"}):(0,a.jsx)(y.A,{className:"h-3.5 w-3.5 text-muted-foreground group-hover:text-amber-500"})})]}),l&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"w-[1px] h-4 bg-border/50"}),(0,a.jsx)("button",{onClick:e=>{e.stopPropagation(),l()},className:"p-1.5 hover:bg-destructive/10 rounded-md transition-all group",title:"Delete",children:(0,a.jsx)(v.A,{className:"h-3.5 w-3.5 text-muted-foreground group-hover:text-destructive"})})]})]})}));j.displayName="NodeToolbar";var w=s(41585);let N=(0,r.memo)(({warnings:e,position:t="top-right",size:s="md"})=>{let[n,i]=(0,r.useState)(!1);return 0===e.length?null:(0,a.jsx)("div",{className:`${{"top-right":"absolute -top-2 -right-2","top-left":"absolute -top-2 -left-2","bottom-right":"absolute -bottom-2 -right-2","bottom-left":"absolute -bottom-2 -left-2"}[t]} z-20`,onMouseEnter:()=>i(!0),onMouseLeave:()=>i(!1),children:(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("div",{className:`bg-amber-500 text-white ${{sm:"p-0.5",md:"p-1"}[s]} rounded-full shadow-lg cursor-help animate-pulse`,children:(0,a.jsx)(w.A,{className:"sm"===s?"h-3 w-3":"h-3.5 w-3.5"})}),(0,a.jsx)(o.N,{children:n&&(0,a.jsxs)(u.P.div,{initial:{opacity:0,y:5,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:5,scale:.95},className:"absolute top-full left-1/2 -translate-x-1/2 mt-2 z-50",children:[(0,a.jsxs)("div",{className:"bg-slate-900 text-white text-xs rounded-lg px-3 py-2 shadow-xl min-w-[160px] max-w-[220px]",children:[(0,a.jsxs)("div",{className:"font-semibold text-amber-400 mb-1.5 flex items-center gap-1.5",children:[(0,a.jsx)(w.A,{className:"h-3 w-3"}),"Configuration Needed"]}),(0,a.jsx)("ul",{className:"space-y-1 text-slate-300",children:e.map((e,t)=>(0,a.jsxs)("li",{className:"flex items-start gap-1.5",children:[(0,a.jsx)("span",{className:"text-amber-400 mt-0.5",children:"•"}),(0,a.jsx)("span",{children:e.message})]},t))})]}),(0,a.jsx)("div",{className:"absolute -top-1 left-1/2 -translate-x-1/2 w-2 h-2 bg-slate-900 rotate-45"})]})})]})})});N.displayName="ValidationBadge";var k=s(94514),A=s(33210);let C=(0,r.memo)(({status:e,variant:t="dot",size:s="sm",className:r=""})=>{if("idle"===e)return null;let n={sm:{dot:"h-2 w-2",icon:"h-3 w-3"},md:{dot:"h-3 w-3",icon:"h-4 w-4"}};return"dot"===t?"running"===e||"pending"===e?(0,a.jsxs)("span",{className:`relative flex ${n[s].dot} ${r}`,children:[(0,a.jsx)("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-primary opacity-75"}),(0,a.jsx)("span",{className:"relative inline-flex rounded-full h-full w-full bg-primary"})]}):(0,a.jsx)("div",{className:`${n[s].dot} rounded-full ${{success:"bg-emerald-500",failed:"bg-destructive",warning:"bg-amber-500",idle:"bg-muted",pending:"bg-primary",running:"bg-primary"}[e]} shadow-sm ${r}`}):"icon"===t?"running"===e||"pending"===e?(0,a.jsx)(f.A,{className:`${n[s].icon} animate-spin text-primary ${r}`}):"success"===e?(0,a.jsx)(k.A,{className:`${n[s].icon} text-emerald-500 ${r}`}):"failed"===e?(0,a.jsx)(A.A,{className:`${n[s].icon} text-destructive ${r}`}):null:"bar"===t?(0,a.jsx)("div",{className:`h-1 w-full ${{success:"bg-emerald-500",failed:"bg-destructive",warning:"bg-amber-500",running:"bg-primary",pending:"bg-primary",idle:"bg-transparent"}[e]} ${r}`}):null});C.displayName="StatusIndicator";let S=(0,r.memo)(({color:e,borderRadius:t="14px",isRunning:s})=>s?(0,a.jsx)("div",{className:"absolute inset-[-2px] overflow-hidden z-0 pointer-events-none",style:{borderRadius:t},children:(0,a.jsx)(u.P.div,{className:"absolute inset-[-250%]",animate:{rotate:[0,360]},transition:{duration:3,repeat:1/0,ease:"linear"},style:{background:`conic-gradient(from 0deg, transparent 0deg, ${e} 15deg, transparent 30deg, ${e} 180deg, transparent 195deg)`}})}):null);S.displayName="RunningBorder";var _=s(48368);let E=(0,r.memo)(({notes:e,displayInFlow:t=!1,maxWidth:s="200px",marginTop:r="mt-3"})=>t&&e?(0,a.jsx)("div",{className:`absolute top-full ${r} left-1/2 -translate-x-1/2 w-full min-w-[120px] z-0`,style:{maxWidth:s},children:(0,a.jsx)("div",{className:"bg-amber-50/50 dark:bg-amber-900/20 backdrop-blur-sm border border-amber-200/50 dark:border-amber-700/30 rounded-lg p-2 shadow-sm animate-in fade-in slide-in-from-top-1 duration-300",children:(0,a.jsxs)("div",{className:"flex items-start gap-1.5",children:[(0,a.jsx)(_.A,{className:"w-2.5 h-2.5 text-amber-500/50 mt-0.5 shrink-0"}),(0,a.jsx)("p",{className:"text-[9px] text-amber-900/70 dark:text-amber-100/50 font-medium leading-relaxed italic line-clamp-3",children:e})]})})}):null);E.displayName="NodeNotes";let $=(0,r.memo)(e=>{let{data:t,isConnectable:s,selected:d,id:x,config:f}=e,[b,y]=(0,r.useState)(!1),[v,w]=(0,r.useState)(!1),[k,A]=(0,r.useState)(!1),{setNodes:_,setEdges:$}=(0,n.VH)(),{toast:P}=(0,l.dj)(),{data:D=[]}=(0,i.Tj)(),T=D.find(e=>e.name===t.node_name),z="running"===t.status,I="success"===t.status,F="failed"===t.status,R="pending"===t.status,M=(0,r.useMemo)(()=>h(t.node_name||"",t.config||{},t.spec||{},T),[t.node_name,t.config,t.spec,T]),O=f.icon,L=async()=>{t.executeNode?await t.executeNode(x):P({title:"Error",description:"Execute function not available",variant:"destructive"})};return(0,a.jsxs)("div",{className:"relative",onMouseEnter:()=>y(!0),onMouseLeave:()=>y(!1),children:[(0,a.jsx)(j,{show:b,isRunning:z,isPending:R,isPaused:k,onExecute:L,onTogglePause:()=>A(!k),onDelete:()=>{_(e=>e.filter(e=>e.id!==x)),$(e=>e.filter(e=>e.source!==x&&e.target!==x))}}),(0,a.jsxs)("div",{className:"flex flex-col items-center gap-2 group/node",children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsxs)("div",{className:(0,m.cn)("relative w-20 h-20 bg-card/90 backdrop-blur-xl border-2 transition-all duration-300 overflow-hidden",d?"border-primary ring-4 ring-primary/20":"border-border hover:border-border-strong",I&&"border-emerald-500 ring-4 ring-emerald-500/10",F&&"border-destructive ring-4 ring-destructive/10",z?"border-primary shadow-[0_0_20px_rgba(59,130,246,0.3)]":"shadow-xl"),style:{borderRadius:"44px 12px 12px 44px",background:"linear-gradient(135deg, hsl(var(--card)) 0%, hsl(var(--card)/0.95) 100%)"},children:[(0,a.jsx)(S,{color:f.color,borderRadius:"46px 14px 14px 46px",isRunning:z}),(0,a.jsxs)("div",{className:(0,m.cn)("w-full h-full flex items-center justify-center relative overflow-hidden z-10 bg-card/90",z&&"m-[1px] w-[calc(100%-2px)] h-[calc(100%-2px)]"),style:{borderRadius:"42px 10px 10px 42px"},children:[(0,a.jsx)("div",{className:"absolute inset-0 opacity-[0.03]",style:{backgroundColor:f.color}}),(0,a.jsx)(u.P.div,{animate:z?{scale:[1,1.1,1]}:{},transition:{duration:1.5,repeat:1/0},children:(0,a.jsx)(O,{className:"h-9 w-9",style:{color:f.color}})})]}),(I||F)&&(0,a.jsx)("div",{className:"absolute -top-1 -right-1 flex items-center justify-center",children:(0,a.jsx)(C,{status:t.status||"idle"})}),f.detailsContent&&(0,a.jsx)("button",{onClick:e=>{e.stopPropagation(),w(!v)},className:"absolute bottom-1.5 left-2 p-1 rounded-full hover:bg-background/20 transition-colors z-20",children:(0,a.jsx)(c.A,{className:(0,m.cn)("h-3 w-3 text-muted-foreground transition-transform duration-300",v&&"rotate-180")})})]}),!M.isValid&&!z&&!I&&(0,a.jsx)(N,{warnings:M.warnings,position:"top-right",size:"sm"}),(0,a.jsx)(g,{type:"source",position:n.yX.Right,handleId:"output",isConnectable:s,color:f.color}),(0,a.jsx)(p,{nodeId:x,color:f.color})]}),(0,a.jsxs)("div",{className:"flex flex-col items-center px-1 max-w-[120px]",children:[(0,a.jsx)("span",{className:"text-[11px] font-bold text-foreground text-center line-clamp-1",children:t.label}),t.node_name&&(0,a.jsx)("span",{className:"text-[9px] text-muted-foreground uppercase tracking-wider font-mono opacity-60",children:t.node_name.split(".")[0]})]}),(0,a.jsx)(o.N,{children:v&&f.detailsContent&&(0,a.jsx)(u.P.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"w-full max-w-[140px] mt-2 overflow-hidden",children:(0,a.jsx)("div",{className:"p-2.5 rounded-xl border border-border bg-card/50 backdrop-blur-sm shadow-sm space-y-2",children:f.detailsContent(t)})})})]}),(0,a.jsx)(E,{notes:t.settings?.notes,displayInFlow:t.settings?.displayNoteInFlow,marginTop:"mt-10"})]})});$.displayName="BaseTriggerNode";var P=s(67635);let D=({className:e,style:t})=>(0,a.jsx)("svg",{className:e,style:t,viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:(0,a.jsx)("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413Z"})}),T=({className:e,style:t})=>(0,a.jsxs)("svg",{className:e,style:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",xmlns:"http://www.w3.org/2000/svg",children:[(0,a.jsx)("rect",{x:"2",y:"4",width:"20",height:"16",rx:"2"}),(0,a.jsx)("path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7"})]}),z=({data:e})=>{let[t,s]=(0,r.useState)(!1);return(0,a.jsxs)("div",{className:"space-y-3",children:[e.config?.phone_number_id&&(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-[9px] text-muted-foreground uppercase tracking-wider mb-1",children:"Phone ID"}),(0,a.jsx)("div",{className:"text-[10px] font-mono bg-background/50 rounded px-1.5 py-1 border border-border/50 truncate",children:e.config.phone_number_id})]}),e.config?.webhook_url&&(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,a.jsx)("span",{className:"text-[9px] text-muted-foreground uppercase tracking-wider",children:"Webhook URL"}),(0,a.jsx)("button",{onClick:t=>{t.stopPropagation(),e.config?.webhook_url&&(navigator.clipboard.writeText(e.config.webhook_url),s(!0),setTimeout(()=>s(!1),2e3))},className:"p-1 hover:bg-emerald-500/10 rounded transition-colors",children:t?(0,a.jsx)(k.A,{className:"h-3 w-3 text-emerald-500"}):(0,a.jsx)(P.A,{className:"h-3 w-3 text-muted-foreground"})})]}),(0,a.jsx)("div",{className:"text-[10px] font-mono bg-background/50 rounded px-1.5 py-1 border border-border/50 truncate",children:e.config.webhook_url})]})]})},I=(0,r.memo)(e=>(0,a.jsx)($,{...e,config:{icon:D,color:"#25D366",detailsContent:e=>(0,a.jsx)(z,{data:e}),isConnected:e=>!!(e.config?.phone_number_id&&e.config?.verify_token)}}));I.displayName="WhatsAppTriggerNode";let F=({data:e})=>(0,a.jsxs)("div",{className:"space-y-3",children:[e.config?.email_address&&(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-[9px] text-muted-foreground uppercase tracking-wider mb-1",children:"Email Address"}),(0,a.jsx)("div",{className:"text-[10px] font-mono bg-background/50 rounded px-1.5 py-1 border border-border/50 truncate",children:e.config.email_address})]}),e.config?.imap_server&&(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-[9px] text-muted-foreground uppercase tracking-wider mb-1",children:"IMAP Server"}),(0,a.jsxs)("div",{className:"text-[10px] font-mono bg-background/50 rounded px-1.5 py-1 border border-border/50 truncate",children:[e.config.imap_server,":",e.config.port||993]})]})]}),R=(0,r.memo)(e=>(0,a.jsx)($,{...e,config:{icon:T,color:"#3b82f6",detailsContent:e=>(0,a.jsx)(F,{data:e}),isConnected:e=>!!(e.config?.email_address&&e.config?.imap_server)}}));R.displayName="EmailTriggerNode";var M=s(15335),O=s(63),L=s(92289),q=s(53961),W=s(53422);let H=(0,r.memo)(e=>{let t,s,{data:r}=e,n={icon:(t=r.node_name||"",({"schedule.cron":M.A,"webhook.receive":O.A,"email.receive":L.A,"whatsapp.receive":q.A,"rss.read":W.A,"manual.trigger":q.A})[t]||q.A),color:(s=r.node_name?.toLowerCase()||"").includes("schedule")||s.includes("cron")?"#10b981":s.includes("webhook")?"#f59e0b":s.includes("email")||s.includes("mail")?"#f97316":s.includes("trigger")||s.includes("manual")?"#f43f5e":"#ef4444"};return(0,a.jsx)($,{...e,config:n})});H.displayName="GenericTriggerNode";var B=s(56204);let V=(0,r.memo)(e=>{let{data:t,isConnectable:s,selected:d,id:x,config:f}=e,[b,y]=(0,r.useState)(!1),[v,w]=(0,r.useState)(!1),[k,A]=(0,r.useState)(!1),{setNodes:_,setEdges:E}=(0,n.VH)(),{toast:$}=(0,l.dj)(),{data:P=[]}=(0,i.Tj)(),D=P.find(e=>e.name===t.node_name),T="running"===t.status,z="success"===t.status,I="failed"===t.status,F="pending"===t.status,R=(0,r.useMemo)(()=>h(t.node_name||"",t.config||{},t.spec||{},D),[t.node_name,t.config,t.spec,D]),M=f.icon,O=async()=>{t.executeNode?await t.executeNode(x):$({title:"Error",description:"Execute function not available",variant:"destructive"})};return(0,a.jsxs)("div",{className:"relative",onMouseEnter:()=>y(!0),onMouseLeave:()=>y(!1),children:[(0,a.jsx)(j,{show:b,isRunning:T,isPending:F,isPaused:k,onExecute:O,onTogglePause:()=>A(!k),onDelete:()=>{_(e=>e.filter(e=>e.id!==x)),E(e=>e.filter(e=>e.source!==x&&e.target!==x))}}),(0,a.jsxs)("div",{className:"flex flex-col items-center gap-2 group/node",children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsxs)("div",{className:(0,m.cn)("relative w-20 h-20 bg-card/90 backdrop-blur-xl border-2 transition-all duration-300 shadow-xl overflow-hidden",d?"border-primary ring-4 ring-primary/20":"border-border hover:border-border-strong",k&&"opacity-60",T&&"border-primary shadow-[0_0_20px_rgba(59,130,246,0.3)]",z&&"border-emerald-500 ring-4 ring-emerald-500/10",I&&"border-destructive ring-4 ring-destructive/10"),style:{borderRadius:"24px",background:"linear-gradient(145deg, hsl(var(--card)) 0%, hsl(var(--card)/0.95) 100%)"},children:[(0,a.jsx)(S,{color:f.color,borderRadius:"26px",isRunning:T}),(0,a.jsxs)("div",{className:"w-full h-full flex items-center justify-center relative z-10",children:[(0,a.jsx)("div",{className:"absolute inset-0 opacity-[0.05]",style:{backgroundColor:f.color}}),(0,a.jsx)(M,{className:"h-9 w-9 relative z-10",style:{color:f.color}})]}),(0,a.jsxs)("div",{className:"absolute top-2 right-2",children:[(0,a.jsx)(C,{status:t.status||"idle"}),k&&(0,a.jsx)("div",{className:"h-2 w-2 rounded-full bg-amber-500 shadow-sm"})]}),f.detailsContent&&(0,a.jsx)("button",{onClick:e=>{e.stopPropagation(),w(!v)},className:"absolute -bottom-1 left-1/2 -translate-x-1/2 p-1 bg-background border border-border rounded-full shadow-sm hover:bg-accent transition-colors z-20",children:(0,a.jsx)(c.A,{className:(0,m.cn)("h-3 w-3 text-muted-foreground transition-transform duration-300",v&&"rotate-180")})})]}),!R.isValid&&!T&&!z&&(0,a.jsx)(N,{warnings:R.warnings}),(0,a.jsx)(g,{type:"target",position:n.yX.Left,handleId:"input",isConnectable:s,color:"#9ca3af"}),(0,a.jsx)(g,{type:"source",position:n.yX.Right,handleId:"output",isConnectable:s,color:f.color}),(0,a.jsx)(p,{nodeId:x,color:f.color})]}),(0,a.jsxs)("div",{className:"flex flex-col items-center px-1 max-w-[120px]",children:[(0,a.jsx)("span",{className:"text-[11px] font-bold text-foreground text-center line-clamp-1 group-hover:text-primary transition-colors",children:t.label}),(0,a.jsx)("span",{className:"text-[9px] text-muted-foreground uppercase tracking-widest font-mono opacity-50",children:t.node_name?.split(".")[0]||"Action"})]}),(0,a.jsx)(o.N,{children:v&&f.detailsContent&&(0,a.jsx)(u.P.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"w-full max-w-[140px] mt-1 overflow-hidden",children:(0,a.jsx)("div",{className:"p-2.5 rounded-xl border border-border bg-card/50 backdrop-blur-sm shadow-sm",children:f.detailsContent(t)})})})]})]})});V.displayName="BaseActionNode";let U=(0,r.memo)(e=>{let t={icon:L.A,color:"#3b82f6",detailsContent:e=>(0,a.jsxs)("div",{className:"space-y-1.5",children:[(0,a.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,a.jsx)(B.A,{className:"h-3 w-3 text-blue-500"}),(0,a.jsx)("span",{className:"text-[10px] text-muted-foreground uppercase font-mono tracking-tight",children:"Recipients"})]}),(0,a.jsx)("div",{className:"text-xs font-medium text-foreground truncate pl-4",children:e.config?.to||"No recipient set"}),e.config?.subject&&(0,a.jsxs)("div",{className:"text-[10px] text-muted-foreground italic truncate pl-4",children:["Re: ",e.config.subject]})]})};return(0,a.jsx)(V,{...e,config:t})});U.displayName="EmailActionNode";var X=s(89363),K=s(49619),J=s(96035),Q=s(8195),G=s(92451),Y=s(52475),Z=s(90718),ee=s(53810),et=s(6962),es=s(21975),ea=s(89823),er=s(65903),en=s(86901);let eo=({className:e,style:t})=>(0,a.jsxs)("svg",{viewBox:"0 0 48 48",className:e,style:t,fill:"currentColor",children:[(0,a.jsx)("path",{fill:"#0F9D58",d:"M37,45H11c-1.657,0-3-1.343-3-3V6c0-1.657,1.343-3,3-3h19l10,10v29C40,43.657,38.657,45,37,45z"}),(0,a.jsx)("path",{fill:"#C8E6C9",d:"M40 13L30 13 30 3z"}),(0,a.jsx)("path",{fill:"#E8F5E9",d:"M31,23H17c-1.105,0-2,0.895-2,2v2c0,1.105,0.895,2,2,2h14c1.105,0,2-0.895,2-2v-2C33,23.895,32.105,23,31,23z"}),(0,a.jsx)("rect",{x:"15",y:"25",width:"18",height:"2",fill:"#0F9D58",opacity:"0.3"}),(0,a.jsx)("path",{fill:"#E8F5E9",d:"M31,31H17c-1.105,0-2,0.895-2,2v2c0,1.105,0.895,2,2,2h14c1.105,0,2-0.895,2-2v-2C33,31.895,32.105,31,31,31z"}),(0,a.jsx)("rect",{x:"15",y:"33",width:"18",height:"2",fill:"#0F9D58",opacity:"0.3"}),(0,a.jsx)("path",{fill:"#E8F5E9",d:"M31,15H17c-1.105,0-2,0.895-2,2v2c0,1.105,0.895,2,2,2h14c1.105,0,2-0.895,2-2v-2C33,15.895,32.105,15,31,15z"}),(0,a.jsx)("rect",{x:"15",y:"17",width:"18",height:"2",fill:"#0F9D58",opacity:"0.3"})]}),ei=({className:e,style:t})=>(0,a.jsxs)("svg",{viewBox:"0 0 32 32",className:e,style:t,fill:"currentColor",children:[(0,a.jsx)("path",{fill:"#25D366",d:"M16 2C8.27 2 2 8.27 2 16c0 2.5.65 4.88 1.83 6.95L3 29l6.23-1.63A13.9 13.9 0 0016 30c7.73 0 14-6.27 14-14S23.73 2 16 2zm0 25.5c-2.3 0-4.5-.6-6.42-1.74l-.46-.28-4.75 1.25 1.27-4.63-.3-.48A11.45 11.45 0 014.5 16C4.5 9.66 9.66 4.5 16 4.5S27.5 9.66 27.5 16 22.34 27.5 16 27.5z"}),(0,a.jsx)("path",{fill:"#FFFFFF",d:"M22.54 18.06c-.36-.18-2.13-1.05-2.46-1.17-.33-.12-.57-.18-.81.18-.24.36-.93 1.17-1.14 1.41-.21.24-.42.27-.78.09-1.85-.92-3.08-1.58-4.29-3.66-.15-.26-.01-.39.16-.57.16-.16.36-.42.54-.63.18-.21.24-.36.36-.6.12-.24.06-.45-.03-.63-.09-.18-.81-1.95-1.11-2.67-.29-.7-.59-.6-.81-.61-.21-.01-.45-.01-.69-.01-.24 0-.63.09-.96.45-.33.36-1.26 1.23-1.26 3s1.29 3.48 1.47 3.72c.18.24 2.54 3.88 6.15 5.44.86.37 1.53.6 2.06.77 1.37.44 2.62.38 3.63.23.86-.13 2.13-.87 2.43-1.71.3-.84.3-1.56.21-1.71-.09-.15-.33-.24-.69-.42z"})]}),el=({className:e,style:t})=>(0,a.jsxs)("svg",{viewBox:"0 0 32 32",className:e,style:t,fill:"currentColor",children:[(0,a.jsx)("path",{fill:"#3776AB",d:"M16 2.5c2.9 0 3.2.3 4.4.5 1.2.2 2.6.8 2.6 3.6v.9h-5.4v1.8h7.9c.9 0 2.2.4 2.7 1.2.6.9.5 2.5.5 2.5l-.1 4.3c-.1 1.7-1.3 3-3 3h-2.1v-2.7c0-1.7-1.4-3.1-3.2-3.1H14c-1.8 0-3.1 1.4-3.1 3.1v2.7H8.8c-1.7 0-3.1-1.4-3.1-3.1v-4.3c0-1.8.4-2.8.9-3.6.6-.8 2-1.2 2.7-1.2h.5V5.5c-1.7 0-3.1-1.3-3.1-3s1.4-3 3.1-3H16zm-5 1.5c-.8 0-1.5.7-1.5 1.5s.7 1.5 1.5 1.5 1.5-.7 1.5-1.5-.7-1.5-1.5-1.5z"}),(0,a.jsx)("path",{fill:"#FFD43B",d:"M16 29.5c-2.9 0-3.2-.3-4.4-.5-1.2-.2-2.6-.8-2.6-3.6v-.9h5.4v-1.8H6.5c-.9 0-2.2-.4-2.7-1.2-.6-.9-.5-2.5-.5-2.5l.1-4.3c.1-1.7 1.3-3 3-3h2.1v2.7c0 1.7 1.4 3.1 3.2 3.1h6.4c1.8 0 3.1-1.4 3.1-3.1v-2.7h2.1c1.7 0 3.1 1.4 3.1 3.1v4.3c0 1.8-.4 2.8-.9 3.6-.6.8-2 1.2-2.7 1.2h-.5v2.7c1.7 0 3.1 1.3 3.1 3s-1.4 3-3.1 3H16zm5-1.5c.8 0 1.5-.7 1.5-1.5s-.7-1.5-1.5-1.5-1.5.7-1.5 1.5.7 1.5 1.5 1.5z"})]});q.A,X.A,K.A,J.A,Q.A,G.A,Y.A,Z.A,L.A,B.A,ee.A,_.A,et.A,es.A,v.A,ea.A;let ed=(0,r.memo)(e=>{let t,s,{data:r}=e,n={icon:(t=r.node_name||"",({"data.set":ea.A,"data.transform":er.A,"slack.send":J.A,"discord.send":J.A,"whatsapp.send":ei,"email.send":L.A,"http.request":G.A,"ai.llm":en.A,"ai.agent":K.A,"data.store":Q.A,"google_sheets.read":eo,"google_sheets.write":eo})[t]||X.A),color:(s=r.node_name?.toLowerCase()||"").includes("ai")?"#8b5cf6":s.includes("discord")?"#5865F2":s.includes("whatsapp")||s.includes("slack")?"#25d366":s.includes("email")||s.includes("mail")?"#3b82f6":s.includes("db")||s.includes("database")||s.includes("google_sheets")?"#f59e0b":"#3b82f6"};return(0,a.jsx)(V,{...e,config:n})});ed.displayName="GenericActionNode";let ec=({className:e,style:t})=>(0,a.jsxs)("svg",{viewBox:"0 0 48 48",className:e,style:t,fill:"currentColor",children:[(0,a.jsx)("path",{fill:"#0F9D58",d:"M37,45H11c-1.657,0-3-1.343-3-3V6c0-1.657,1.343-3,3-3h19l10,10v29C40,43.657,38.657,45,37,45z"}),(0,a.jsx)("path",{fill:"#C8E6C9",d:"M40 13L30 13 30 3z"}),(0,a.jsx)("path",{fill:"#E8F5E9",d:"M31,23H17c-1.105,0-2,0.895-2,2v2c0,1.105,0.895,2,2,2h14c1.105,0,2-0.895,2-2v-2C33,23.895,32.105,23,31,23z"}),(0,a.jsx)("rect",{x:"15",y:"25",width:"18",height:"2",fill:"#0F9D58",opacity:"0.3"}),(0,a.jsx)("path",{fill:"#E8F5E9",d:"M31,31H17c-1.105,0-2,0.895-2,2v2c0,1.105,0.895,2,2,2h14c1.105,0,2-0.895,2-2v-2C33,31.895,32.105,31,31,31z"}),(0,a.jsx)("rect",{x:"15",y:"33",width:"18",height:"2",fill:"#0F9D58",opacity:"0.3"}),(0,a.jsx)("path",{fill:"#E8F5E9",d:"M31,15H17c-1.105,0-2,0.895-2,2v2c0,1.105,0.895,2,2,2h14c1.105,0,2-0.895,2-2v-2C33,15.895,32.105,15,31,15z"}),(0,a.jsx)("rect",{x:"15",y:"17",width:"18",height:"2",fill:"#0F9D58",opacity:"0.3"})]}),eu=(0,r.memo)(e=>(0,a.jsx)(V,{...e,config:{icon:ec,color:"#0F9D58",detailsContent:e=>(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)("div",{className:"text-[10px] text-muted-foreground uppercase font-mono",children:"Action"}),(0,a.jsx)("div",{className:"text-xs font-medium text-emerald-600 dark:text-emerald-400",children:e.config?.action==="write"?"Write Data":e.config?.action==="append"?"Append Row":"Read Sheets"})]})}}));eu.displayName="GoogleSheetsNode";var em=s(48274),ex=s(10762);let ep=(0,r.memo)(e=>{let t={icon:em.A,color:"#ffde57",detailsContent:e=>(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)("div",{className:"text-[10px] text-muted-foreground uppercase font-mono",children:"Environment"}),(0,a.jsxs)("div",{className:"text-xs font-medium text-amber-600 dark:text-amber-400 flex items-center gap-1",children:[(0,a.jsx)(ex.A,{className:"h-3 w-3"})," Python 3.10"]})]})};return(0,a.jsx)(V,{...e,config:t})});ep.displayName="PythonCodeNode";var eh=s(45442),eg=s(31025),ef=s(92622),eb=s(76527),ey=s(58411),ev=s(84980),ej=s(20986),ew=s(93219);let eN=(0,r.memo)(e=>{let{data:t,isConnectable:s,selected:l,id:d,config:x={}}=e,[f,b]=(0,r.useState)(!1),[y,v]=(0,r.useState)(!1),[w,C]=(0,r.useState)(!1),{setNodes:_,setEdges:E}=(0,n.VH)(),{data:$=[]}=(0,i.Tj)(),P=$.find(e=>e.name===t.node_name),D=h(t.node_name||"",t.config||{},t.spec||{},P),T=x.icon||eh.A,z=x.color||"#8b5cf6",I=t.node_name?.includes("condition")||t.node_name?.includes("if")||t.node_name?.includes("switch")||t.node_name?.includes("parallel"),F="running"===t.status,R="pending"===t.status;return(0,a.jsxs)("div",{className:"relative",onMouseEnter:()=>b(!0),onMouseLeave:()=>b(!1),children:[(0,a.jsx)(j,{show:f,isRunning:F,isPending:R,isPaused:w,onExecute:()=>{},onTogglePause:()=>C(!w),onDelete:()=>{_(e=>e.filter(e=>e.id!==d)),E(e=>e.filter(e=>e.source!==d&&e.target!==d))}}),(0,a.jsx)(N,{warnings:D.warnings}),(0,a.jsxs)("div",{className:"flex flex-col items-center gap-2 group/node",children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsxs)("div",{className:(0,m.cn)("relative w-24 h-24 bg-card/90 backdrop-blur-xl border-2 transition-all duration-300 shadow-xl overflow-hidden",l?"border-primary ring-4 ring-primary/20":"border-border hover:border-border-strong",w&&"opacity-60",F&&"border-primary shadow-[0_0_25px_rgba(139,92,246,0.3)]"),style:{borderRadius:"28px",background:"linear-gradient(135deg, hsl(var(--card)) 0%, hsl(var(--card)/0.95) 100%)"},children:[(0,a.jsx)(S,{color:z,borderRadius:"30px",isRunning:F}),(0,a.jsxs)("div",{className:"w-full h-full flex flex-col items-center justify-center relative overflow-hidden rounded-[26px] z-10",children:[(0,a.jsx)("div",{className:"absolute inset-0 opacity-[0.08]",style:{backgroundColor:z}}),(0,a.jsx)(u.P.div,{animate:F?{scale:[1,1.1,1]}:{},transition:{duration:1.5,repeat:1/0},children:(0,a.jsx)(T,{className:"h-10 w-10 relative z-10",style:{color:z}})}),(t.node_name?.includes("condition")||t.node_name?.includes("if")||t.node_name?.includes("switch"))&&(0,a.jsxs)("div",{className:"absolute inset-y-0 right-1 flex flex-col justify-around py-4 opacity-40 group-hover/node:opacity-100 transition-opacity",children:[(0,a.jsx)(k.A,{className:"h-3 w-3 text-emerald-500"}),(0,a.jsx)(A.A,{className:"h-3 w-3 text-rose-500"})]})]}),x.detailsContent&&(0,a.jsx)("button",{onClick:e=>{e.stopPropagation(),v(!y)},className:"absolute -bottom-1.5 left-1/2 -translate-x-1/2 p-1 bg-background border border-border rounded-full shadow-sm hover:bg-accent transition-colors z-20",children:(0,a.jsx)(c.A,{className:(0,m.cn)("h-3 w-3 text-muted-foreground transition-transform duration-300",y&&"rotate-180")})})]}),(0,a.jsx)(g,{type:"target",position:n.yX.Left,handleId:"input",isConnectable:s,color:"#9ca3af"}),I?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(g,{type:"source",position:n.yX.Right,handleId:"true",isConnectable:s,color:"#10b981",style:{top:"30%",transform:"translateY(-50%)"}}),(0,a.jsx)(g,{type:"source",position:n.yX.Right,handleId:"false",isConnectable:s,color:"#f43f5e",style:{top:"70%",transform:"translateY(-50%)"}}),(0,a.jsx)(p,{nodeId:d,handleId:"true",color:"#10b981",style:{top:"30%"}}),(0,a.jsx)(p,{nodeId:d,handleId:"false",color:"#f43f5e",style:{top:"70%"}})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(g,{type:"source",position:n.yX.Right,handleId:"true",isConnectable:s,color:"#9ca3af"}),(0,a.jsx)(p,{nodeId:d,handleId:"true",color:z,style:{top:"50%"}})]})]}),(0,a.jsxs)("div",{className:"flex flex-col items-center px-1 max-w-[140px]",children:[(0,a.jsx)("span",{className:"text-[11px] font-bold text-foreground text-center line-clamp-1",children:t.label}),(0,a.jsx)("span",{className:"text-[9px] text-muted-foreground uppercase tracking-widest font-mono opacity-50",children:t.node_name?.split(".")[0]||"Condition"})]}),(0,a.jsx)(o.N,{children:y&&x.detailsContent&&(0,a.jsx)(u.P.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"w-full max-w-[150px] mt-1 overflow-hidden",children:(0,a.jsx)("div",{className:"p-2.5 rounded-xl border border-border bg-card/50 backdrop-blur-sm shadow-sm",children:x.detailsContent(t)})})})]})]})});eN.displayName="BaseLogicNode",eh.A,eg.A,ef.A,er.A,eb.A;let ek=(0,r.memo)(e=>{let t,{data:s}=e,r={icon:(t=s.node_name||"",({"condition.if":eh.A,"logic.parallel":eg.A,"logic.merge":ey.A,"logic.delay":ev.A,"logic.loop":ej.A,"logic.switch":er.A,"condition.switch":er.A,"logic.pause":y.A,"execution.pause":y.A,"utility.noop":ew.A})[t]||eh.A),color:"#8b5cf6"};return(0,a.jsx)(eN,{...e,config:r})});ek.displayName="GenericLogicNode",(0,r.memo)(e=>{let t={icon:eg.A,color:"#8b5cf6",detailsContent:e=>(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)("div",{className:"text-[10px] text-muted-foreground uppercase font-mono",children:"Condition"}),(0,a.jsx)("div",{className:"text-xs font-medium text-foreground truncate",children:e.config?.condition||"If [value] equals..."})]})};return(0,a.jsx)(eN,{...e,config:t})}).displayName="IfConditionNode",(0,r.memo)(e=>{let t={icon:Z.A,color:"#8b5cf6"};return(0,a.jsx)(eN,{...e,config:t})}).displayName="SwitchNode";var eA=s(91503),eC=s(15282),eS=s(37618);let e_=(0,r.memo)(e=>{let{data:t,isConnectable:s,selected:d,id:c}=e,[x,g]=(0,r.useState)(!1),[j,N]=(0,r.useState)(!1),[k,A]=(0,r.useState)(!1),[C,S]=(0,r.useState)(!1),[E,$]=(0,r.useState)(!1),{setNodes:P,setEdges:D}=(0,n.VH)(),T="running"===t.status,z="success"===t.status,I="failed"===t.status,F="pending"===t.status,R="warning"===t.status,{data:L=[]}=(0,i.Tj)(),H=L.find(e=>e.name===t.node_name),V=(0,r.useMemo)(()=>h(t.node_name||"",t.config||{},t.spec||{},H),[t.node_name,t.config,t.spec,H]);(0,r.useMemo)(()=>(function(e){if(e.isValid)return"";let t=[];if(e.hasCredentialIssue&&t.push("Credential needed"),e.hasRequiredFieldIssue){let s=e.warnings.filter(e=>"required_field_missing"===e.type).length;t.push(`${s} required field${s>1?"s":""}`)}return t.join(", ")})(V),[V]);let{toast:U}=(0,l.dj)(),Q=async e=>{e.stopPropagation(),t.executeNode?await t.executeNode(c):U({title:"Error",description:"Execute function not available",variant:"destructive"})},Z=e.color||("trigger"===t.type?"#ef4444":"#3b82f6");return(0,a.jsxs)("div",{className:"relative",onMouseEnter:()=>g(!0),onMouseLeave:()=>g(!1),children:[(0,a.jsx)(o.N,{children:x&&(0,a.jsxs)(u.P.div,{initial:{opacity:0,y:-5},animate:{opacity:1,y:0},exit:{opacity:0,y:-5},className:"absolute -top-12 left-1/2 -translate-x-1/2 flex items-center gap-1 bg-white dark:bg-slate-800 border border-border rounded-lg px-2 py-1.5 shadow-xl z-50",children:[(0,a.jsx)("button",{onClick:Q,disabled:T||F,className:"p-1.5 hover:bg-green-50 dark:hover:bg-green-900/20 rounded-md transition-colors text-muted-foreground hover:text-green-600 disabled:opacity-50",title:T?"Running...":"Run this node",children:T||F?(0,a.jsx)(f.A,{className:"h-4 w-4 animate-spin"}):(0,a.jsx)(b.A,{className:"h-4 w-4"})}),(0,a.jsx)("div",{className:"w-px h-4 bg-border"}),(0,a.jsx)("button",{onClick:e=>{e.stopPropagation(),P(e=>e.filter(e=>e.id!==c)),D(e=>e.filter(e=>e.source!==c&&e.target!==c))},className:"p-1.5 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-md transition-colors text-muted-foreground hover:text-red-600",title:"Delete",children:(0,a.jsx)(v.A,{className:"h-4 w-4"})})]})}),(0,a.jsxs)("div",{className:(0,m.cn)("min-w-[180px] bg-white dark:bg-slate-900 border-2 rounded-xl shadow-sm transition-all relative",d?"border-primary shadow-md":"border-border",T&&"border-transparent shadow-xl ring-1 ring-primary/10",F&&"border-blue-400 border-dashed",z&&"border-green-500 shadow-[0_0_15px_rgba(34,197,94,0.25)]",I&&"border-red-500 shadow-[0_0_15px_rgba(239,68,68,0.25)]",R&&"border-amber-400 shadow-[0_0_15px_rgba(245,158,11,0.2)]",!V.isValid&&!z&&!I&&!T&&"border-amber-300"),children:[I&&(0,a.jsx)("div",{className:"absolute -top-2 -right-2 z-20",onMouseEnter:()=>$(!0),onMouseLeave:()=>$(!1),children:(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("div",{className:"bg-red-500 text-white p-1 rounded-full shadow-lg cursor-help",children:(0,a.jsx)(w.A,{className:"h-3.5 w-3.5"})}),(0,a.jsx)(o.N,{children:E&&(0,a.jsxs)(u.P.div,{initial:{opacity:0,y:5,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:5,scale:.95},className:"absolute top-full right-0 mt-2 z-50",children:[(0,a.jsxs)("div",{className:"bg-slate-900 text-white text-xs rounded-lg px-3 py-2 shadow-xl min-w-[200px] max-w-[280px]",children:[(0,a.jsxs)("div",{className:"font-semibold text-red-400 mb-1.5 flex items-center gap-1.5",children:[(0,a.jsx)(w.A,{className:"h-3 w-3"}),"Execution Failed"]}),(0,a.jsx)("div",{className:"text-slate-200 mb-2 whitespace-pre-wrap leading-relaxed",children:t.error||"An unexpected error occurred during execution."}),t.errorSuggestion&&(0,a.jsxs)("div",{className:"mt-2 pt-2 border-t border-slate-700/50",children:[(0,a.jsxs)("div",{className:"text-blue-400 font-medium mb-1 flex items-center gap-1.5 text-[10px] uppercase tracking-wider",children:[(0,a.jsx)(en.A,{className:"h-2.5 w-2.5"}),"Suggestion"]}),(0,a.jsx)("div",{className:"text-slate-300 italic",children:t.errorSuggestion})]})]}),(0,a.jsx)("div",{className:"absolute -top-1 right-3 w-2 h-2 bg-slate-900 rotate-45"})]})})]})}),!V.isValid&&!T&&!z&&!I&&(0,a.jsx)("div",{className:"absolute -top-2 -right-2 z-20",onMouseEnter:()=>S(!0),onMouseLeave:()=>S(!1),children:(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("div",{className:"bg-amber-500 text-white p-1 rounded-full shadow-lg cursor-help animate-pulse",children:(0,a.jsx)(w.A,{className:"h-3.5 w-3.5"})}),(0,a.jsx)(o.N,{children:C&&(0,a.jsxs)(u.P.div,{initial:{opacity:0,y:5,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:5,scale:.95},className:"absolute top-full right-0 mt-2 z-50",children:[(0,a.jsxs)("div",{className:"bg-slate-900 text-white text-xs rounded-lg px-3 py-2 shadow-xl min-w-[160px] max-w-[220px]",children:[(0,a.jsxs)("div",{className:"font-semibold text-amber-400 mb-1.5 flex items-center gap-1.5",children:[(0,a.jsx)(w.A,{className:"h-3 w-3"}),"Configuration Needed"]}),(0,a.jsx)("ul",{className:"space-y-1 text-slate-300",children:V.warnings.map((e,t)=>(0,a.jsxs)("li",{className:"flex items-start gap-1.5",children:[(0,a.jsx)("span",{className:"text-amber-400 mt-0.5",children:"•"}),(0,a.jsx)("span",{children:e.message})]},t))})]}),(0,a.jsx)("div",{className:"absolute -top-1 right-3 w-2 h-2 bg-slate-900 rotate-45"})]})})]})}),T&&(0,a.jsx)("div",{className:"absolute inset-[-2px] overflow-hidden rounded-[14px] z-0 pointer-events-none",children:(0,a.jsx)(u.P.div,{className:"absolute inset-[-250%]",animate:{rotate:[0,360]},transition:{duration:3,repeat:1/0,ease:"linear"},style:{background:`conic-gradient(from 0deg, transparent 0deg, ${Z} 15deg, transparent 30deg, ${Z} 180deg, transparent 195deg)`}})}),(0,a.jsxs)("div",{className:(0,m.cn)("flex items-center gap-3 p-3 relative z-10 rounded-xl bg-white dark:bg-slate-900",T&&"m-[1px] p-[11px]"),children:[(0,a.jsx)("div",{className:"p-2 rounded-lg flex items-center justify-center text-white shrink-0",style:{backgroundColor:Z},children:(()=>{if(e.icon)return(0,a.jsx)(e.icon,{className:"h-5 w-5"});let s=t.node_name||"",r={"manual.trigger":eA.A,"schedule.cron":M.A,"webhook.receive":O.A,"whatsapp.trigger":ei,"email.trigger":eC.A,"rss.trigger":W.A,"ai.llm":en.A,"ai.agent":K.A,"data.set":eS.A,"data.transform":er.A,"slack.send":J.A,"whatsapp.send":ei,"google_sheets.write":eo,"google_sheets.read":eo,"http.request":G.A,"code.python":el,"code.javascript":Y.A,"email.send":B.A,"discord.send":B.A,"condition.if":eh.A,"logic.parallel":eg.A,"logic.merge":ey.A,"logic.delay":ev.A,"logic.loop":ej.A,"logic.switch":er.A,"logic.pause":y.A,"utility.noop":ew.A}[s]||("trigger"===t.type?q.A:X.A);return(0,a.jsx)(r,{className:"h-5 w-5"})})()}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("div",{className:"text-sm font-semibold truncate leading-tight",children:t.label}),(0,a.jsx)("div",{className:"text-[10px] text-muted-foreground truncate uppercase tracking-wider font-medium mt-0.5",children:t.node_name||t.type||"Action"})]}),T&&(0,a.jsx)("div",{className:"flex space-x-0.5",children:(0,a.jsx)(u.P.div,{animate:{opacity:[.4,1,.4],scale:[1,1.2,1]},transition:{repeat:1/0,duration:2},className:"w-2 h-2 rounded-full bg-blue-500 shadow-[0_0_8px_rgba(59,130,246,0.5)]"})})]}),(z||I)&&(0,a.jsx)("div",{className:(0,m.cn)("h-1 w-full",z?"bg-green-500":"bg-red-500")}),"trigger"!==t.type&&(0,a.jsx)(n.h7,{type:"target",position:n.yX.Left,isConnectable:s,className:"!w-4 !h-4 !bg-transparent !border-none z-50 p-0",style:{left:"-8px",top:"50%",transform:"translateY(-50%)"},onMouseEnter:()=>N(!0),onMouseLeave:()=>N(!1),children:(0,a.jsxs)(u.P.div,{className:"w-full h-full relative flex items-center justify-center pointer-events-none",animate:j?"hover":"initial",initial:"initial",children:[(0,a.jsx)(u.P.div,{variants:{initial:{scale:1,opacity:0},hover:{scale:2,opacity:.4,transition:{repeat:1/0,duration:1}}},className:"absolute inset-0 rounded-full bg-slate-400"}),(0,a.jsx)(u.P.div,{variants:{initial:{scale:1},hover:{scale:1.25}},className:"w-full h-full rounded-full border-2 border-white dark:border-slate-700 bg-slate-400 shadow-md relative z-10",children:(0,a.jsx)("div",{className:"absolute top-0.5 left-0.5 w-[30%] h-[30%] bg-white rounded-full opacity-40"})})]})}),(0,a.jsx)(p,{nodeId:c,color:Z}),(0,a.jsx)(n.h7,{type:"source",position:n.yX.Right,isConnectable:s,className:"!w-4 !h-4 !bg-transparent !border-none z-50 p-0",style:{right:"-8px",top:"50%",transform:"translateY(-50%)"},onMouseEnter:()=>A(!0),onMouseLeave:()=>A(!1),children:(0,a.jsxs)(u.P.div,{className:"w-full h-full relative flex items-center justify-center pointer-events-none",animate:k?"hover":"initial",initial:"initial",children:[(0,a.jsx)(u.P.div,{variants:{initial:{scale:1,opacity:0},hover:{scale:2,opacity:.4,transition:{repeat:1/0,duration:1}}},className:"absolute inset-0 rounded-full",style:{backgroundColor:Z}}),(0,a.jsx)(u.P.div,{variants:{initial:{scale:1},hover:{scale:1.25}},className:"w-full h-full rounded-full border-2 border-white dark:border-slate-700 shadow-md relative z-10",style:{backgroundColor:Z},children:(0,a.jsx)("div",{className:"absolute top-0.5 left-0.5 w-[30%] h-[30%] bg-white rounded-full opacity-40"})})]})})]}),t.settings?.displayNoteInFlow&&t.settings?.notes&&(0,a.jsx)("div",{className:"absolute top-full mt-3 left-1/2 -translate-x-1/2 w-full min-w-[120px] max-w-[200px] z-0",children:(0,a.jsx)("div",{className:"bg-amber-50/50 dark:bg-amber-900/20 backdrop-blur-sm border border-amber-200/50 dark:border-amber-700/30 rounded-lg p-2 shadow-sm animate-in fade-in slide-in-from-top-1 duration-300",children:(0,a.jsxs)("div",{className:"flex items-start gap-1.5",children:[(0,a.jsx)(_.A,{className:"w-2.5 h-2.5 text-amber-500/50 mt-0.5 shrink-0"}),(0,a.jsx)("p",{className:"text-[9px] text-amber-900/70 dark:text-amber-100/50 font-medium leading-relaxed italic line-clamp-3",children:t.settings.notes})]})})})]})});e_.displayName="BaseNode";var eE=s(34426),e$=s(52905),eP=s(44478),eD=s(22164),eT=s(68822),ez=s(25777),eI=s(47834),eF=s(61899),eR=s(53718),eM=s(35625);let eO={google_sheets:{fields:[{name:"client_id",label:"Client ID",type:"text",required:!0,placeholder:"Enter your Client ID"},{name:"client_secret",label:"Client Secret",type:"password",required:!0,placeholder:"Enter your Client Secret"}],help:"You can find these in your Google Cloud Console under APIs & Services > Credentials."},slack:{fields:[{name:"client_id",label:"Client ID",type:"text",required:!0,placeholder:"Enter your Client ID"},{name:"client_secret",label:"Client Secret",type:"password",required:!0,placeholder:"Enter your Client Secret"},{name:"bot_token",label:"Bot User OAuth Token",type:"password",required:!0,placeholder:"xoxb-..."},{name:"refresh_token",label:"Refresh Token (Optional)",type:"password",placeholder:"xoxe-..."}],help:'Create a Slack App and look for these in the "Basic Information" and "OAuth & Permissions" sections.'},discord:{fields:[{name:"bot_token",label:"Discord Bot Token",type:"password",required:!0,placeholder:"Enter your bot token"}],help:'Generate this token in the Discord Developer Portal under the "Bot" tab of your application.'},generic:{fields:[{name:"api_key",label:"API Key",type:"password",required:!0,placeholder:"Enter your API key"}]},ai_provider:{fields:[{name:"provider",label:"Provider",type:"select",required:!0,options:[{label:"OpenRouter",value:"openrouter"},{label:"OpenAI",value:"openai"},{label:"Anthropic",value:"anthropic"},{label:"Gemini",value:"gemini"},{label:"Custom (OpenAI Compatible)",value:"ai_provider"}],default:"openrouter"},{name:"api_key",label:"API Key",type:"password",required:!0,placeholder:"sk-..."},{name:"base_url",label:"Base URL (Optional)",type:"text",placeholder:"https://openrouter.ai/api/v1"}],help:"Provide your AI platform credentials. For OpenRouter, use https://openrouter.ai/api/v1 as Base URL."}},eL=({value:e,onChange:t,credentialType:s,label:n})=>{let i=(0,eM.jE)(),{data:l=[],isLoading:p}=(0,eR.vE)(s),h=(0,eR.Lv)(),g=(0,eR.Ii)(),[b,y]=(0,r.useState)(!1),[j,w]=(0,r.useState)(!1),[N,k]=(0,r.useState)("oauth"),[C,S]=(0,r.useState)({name:""}),[_,E]=(0,r.useState)(null),$=["google_sheets","slack","discord"].includes(s),P=eO[s]||eO.generic,D=l.find(t=>t.id===e),T=(0,r.useCallback)(()=>{let e={name:""};return P.fields.forEach(t=>{t.default&&(e[t.name]=t.default)}),e},[P]);(0,r.useEffect)(()=>{$?k("oauth"):k("manual")},[s,$]),(0,r.useEffect)(()=>{b&&(S(T()),E(null))},[b,T]);let z=async()=>{if(!C.name)return void E("Please provide a name for this account");E(null);let{name:e,...a}=C;h.mutate({name:e,type:s,data:a},{onSuccess:e=>{t(e.id),y(!1),S(T())},onError:e=>{E(e instanceof Error?e.message:"Failed to create credential")}})},I=async(s,a)=>{a.stopPropagation(),confirm("Are you sure you want to delete this credential?")&&g.mutate(s,{onSuccess:()=>{e===s&&t("")},onError:e=>{d.aw.error("Failed to delete credential",e)}})};return(0,a.jsxs)("div",{className:"relative w-full",children:[(0,a.jsx)("div",{className:"space-y-1.5",children:(0,a.jsxs)("div",{onClick:()=>!b&&w(!j),className:(0,m.cn)("group flex items-center justify-between w-full h-10 px-4 bg-muted/20 border border-border rounded-md cursor-pointer transition-all hover:border-primary/50",j&&"ring-1 ring-primary/50 border-primary/50",b&&"opacity-50 pointer-events-none"),children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 overflow-hidden",children:[(0,a.jsx)("div",{className:"p-1 px-1.5 rounded bg-primary/10 text-primary",children:(0,a.jsx)(e$.A,{className:"w-3.5 h-3.5"})}),D?(0,a.jsx)("span",{className:"text-[11px] font-bold truncate",children:D.name}):(0,a.jsxs)("span",{className:"text-[11px] text-muted-foreground/60 font-bold uppercase tracking-widest",children:["Select ",n||"Account"]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[p&&(0,a.jsx)(f.A,{className:"w-3 h-3 animate-spin text-primary/50"}),(0,a.jsx)(c.A,{className:(0,m.cn)("w-3.5 h-3.5 text-muted-foreground transition-transform",j&&"rotate-180")})]})]})}),(0,a.jsx)(o.N,{children:j&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"fixed inset-0 z-[110]",onClick:()=>w(!1)}),(0,a.jsxs)(u.P.div,{initial:{opacity:0,y:4,scale:.98},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:4,scale:.98},className:"absolute top-full mt-2 left-0 w-full bg-background border border-border rounded-md shadow-2xl z-[120] overflow-hidden",children:[(0,a.jsxs)("div",{className:"max-h-[240px] overflow-y-auto p-1.5 space-y-1 custom-scrollbar",children:[0===l.length&&!p&&(0,a.jsxs)("div",{className:"py-8 text-center opacity-30 flex flex-col items-center gap-2",children:[(0,a.jsx)(eP.A,{className:"w-6 h-6 stroke-1"}),(0,a.jsx)("span",{className:"text-[9px] font-bold uppercase",children:"No Accounts Added"})]}),l.map(s=>(0,a.jsxs)("div",{onClick:()=>{t(s.id),w(!1)},className:(0,m.cn)("flex items-center justify-between px-3 py-2 rounded-sm cursor-pointer transition-all group/item",e===s.id?"bg-primary/10 text-primary border border-primary/20":"hover:bg-muted/50 border border-transparent"),children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:(0,m.cn)("h-1.5 w-1.5 rounded-full",e===s.id?"bg-primary":"bg-muted-foreground/30")}),(0,a.jsx)("span",{className:"text-[10px] font-bold",children:s.name})]}),(0,a.jsx)("button",{onClick:e=>I(s.id,e),className:"opacity-0 group-hover/item:opacity-100 p-1.5 hover:bg-destructive/10 hover:text-destructive rounded-sm transition-all",children:(0,a.jsx)(v.A,{className:"w-3 h-3"})})]},s.id))]}),(0,a.jsx)("div",{className:"p-1.5 bg-muted/20 border-t border-border mt-1",children:(0,a.jsxs)("button",{onClick:()=>{y(!0),w(!1)},className:"flex items-center justify-center gap-2 w-full py-2.5 rounded-sm bg-primary/5 hover:bg-primary/10 text-primary transition-all border border-primary/20 border-dashed",children:[(0,a.jsx)(x.A,{className:"w-3.5 h-3.5"}),(0,a.jsx)("span",{className:"text-[10px] font-black uppercase tracking-widest",children:"Connect New Account"})]})})]})]})}),(0,a.jsx)(o.N,{children:b&&(0,a.jsx)("div",{className:"fixed inset-0 z-[150] flex items-center justify-center p-6 bg-background/90 backdrop-blur-xl",children:(0,a.jsxs)(u.P.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},className:"w-[500px] bg-background border border-border rounded-lg shadow-[0_32px_128px_-32px_rgba(0,0,0,0.5)] overflow-hidden flex flex-col",children:[(0,a.jsxs)("header",{className:"px-6 py-5 border-b border-border bg-muted/20 flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"h-10 w-10 rounded-md bg-primary/10 text-primary flex items-center justify-center border border-primary/20",children:(0,a.jsx)(G.A,{className:"w-5 h-5"})}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("h3",{className:"text-sm font-black uppercase tracking-widest leading-none mb-1",children:["New ",n||"Account"]}),(0,a.jsxs)("p",{className:"text-[9px] text-muted-foreground/50 uppercase font-bold tracking-tighter",children:["Connection Bridge / ",s]})]})]}),(0,a.jsx)("button",{onClick:()=>y(!1),className:"p-2 hover:bg-destructive/10 hover:text-destructive rounded-md transition-all",children:(0,a.jsx)(A.A,{className:"w-4 h-4"})})]}),(0,a.jsxs)("div",{className:"p-8 space-y-6",children:[$&&(0,a.jsxs)("div",{className:"flex p-1 bg-muted/20 border border-border rounded-md shrink-0",children:[(0,a.jsxs)("button",{onClick:()=>k("oauth"),className:(0,m.cn)("flex-1 flex items-center justify-center gap-2 py-2 rounded-sm text-[10px] font-black uppercase tracking-widest transition-all","oauth"===N?"bg-background text-primary shadow-sm":"text-muted-foreground hover:text-foreground"),children:[(0,a.jsx)(q.A,{className:"w-3 h-3"}),"OAuth 2.0"]}),(0,a.jsxs)("button",{onClick:()=>k("manual"),className:(0,m.cn)("flex-1 flex items-center justify-center gap-2 py-2 rounded-sm text-[10px] font-black uppercase tracking-widest transition-all","manual"===N?"bg-background text-primary shadow-sm":"text-muted-foreground hover:text-foreground"),children:[(0,a.jsx)(eS.A,{className:"w-3 h-3"}),"Manual Setup"]})]}),(0,a.jsx)(o.N,{mode:"wait",children:"oauth"===N?(0,a.jsx)(u.P.div,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},exit:{opacity:0,x:10},className:"space-y-6",children:(0,a.jsxs)("div",{className:"p-6 rounded-md border border-dashed border-border flex flex-col items-center gap-4 text-center",children:[(0,a.jsxs)("div",{className:"h-16 w-16 rounded-xl bg-muted/50 flex items-center justify-center shadow-inner",children:["google_sheets"===s&&(0,a.jsx)(eo,{className:"w-8 h-8"}),"slack"===s&&(0,a.jsx)(q.A,{className:"w-8 h-8 text-[#E01E5A]"}),"discord"===s&&(0,a.jsx)(q.A,{className:"w-8 h-8 text-[#5865F2]"})]}),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)("h4",{className:"text-xs font-bold uppercase tracking-wider",children:"Fast Authentication"}),(0,a.jsxs)("p",{className:"text-[10px] text-muted-foreground leading-relaxed max-w-[280px]",children:["We'll handle the connection securely via ",s.replace("_"," "),"'s official OAuth portal."]})]}),(0,a.jsxs)(eE.$,{onClick:()=>{E(null);let e=`${eF.hs}/credentials/oauth/${s}/authorize`,a=window.screen.width/2-300,r=window.screen.height/2-350;if(!window.open(e,`Connect ${s}`,`width=600,height=700,left=${a},top=${r},scrollbars=yes,resizable=yes`))return void E("Popup blocked. Please allow popups.");let n=e=>{if(e.data?.type==="OAUTH_SUCCESS"){let{credentialId:a}=e.data;i.invalidateQueries({queryKey:eR.eG.byType(s)}),t(a),y(!1),window.removeEventListener("message",n)}};window.addEventListener("message",n)},className:"w-full h-12 rounded-md bg-primary text-primary-foreground font-black uppercase tracking-widest text-[10px] shadow-lg shadow-primary/20 flex items-center justify-center gap-3",children:[(0,a.jsx)(eD.A,{className:"w-4 h-4"}),"Sign in to ",s.replace("_"," ").replace(/\b\w/g,e=>e.toUpperCase())]})]})},"oauth"):(0,a.jsxs)(u.P.div,{initial:{opacity:0,x:10},animate:{opacity:1,x:0},exit:{opacity:0,x:-10},className:"space-y-6",children:[P.help&&(0,a.jsxs)("div",{className:"p-4 rounded-md bg-amber-500/5 border border-amber-500/10 flex gap-3",children:[(0,a.jsx)(eT.A,{className:"w-4 h-4 text-amber-500 shrink-0"}),(0,a.jsx)("p",{className:"text-[10px] text-muted-foreground leading-relaxed",children:P.help})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:"text-[10px] font-black text-muted-foreground uppercase tracking-widest ml-1",children:"Account Label"}),(0,a.jsx)("input",{className:"w-full h-11 px-4 bg-muted/20 border border-border rounded-md text-xs focus:ring-1 focus:ring-primary/50 outline-none transition-all placeholder:text-muted-foreground/30 font-bold",placeholder:"e.g. Primary Workspace",value:C.name,onChange:e=>S({...C,name:e.target.value}),autoFocus:!0})]}),P.fields.map(e=>(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("label",{className:"text-[10px] font-black text-muted-foreground uppercase tracking-widest ml-1",children:[e.label,e.required&&(0,a.jsx)("span",{className:"text-primary ml-1",children:"*"})]}),(0,a.jsxs)("div",{className:"relative group/input",children:[(0,a.jsx)("div",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-muted-foreground/40 pointer-events-none group-focus-within/input:text-primary transition-colors",children:"password"===e.type?(0,a.jsx)(ez.A,{className:"w-3.5 h-3.5"}):"select"===e.type?(0,a.jsx)(G.A,{className:"w-3.5 h-3.5"}):(0,a.jsx)(eI.A,{className:"w-3.5 h-3.5"})}),"select"===e.type?(0,a.jsxs)("select",{className:"w-full h-11 pl-10 pr-10 bg-muted/20 border border-border rounded-md text-xs focus:ring-1 focus:ring-primary/50 outline-none transition-all appearance-none font-bold",value:C[e.name]||e.default||"",onChange:t=>S({...C,[e.name]:t.target.value}),children:[(0,a.jsx)("option",{value:"",disabled:!0,children:"Select Provider..."}),e.options?.map(e=>(0,a.jsx)("option",{value:e.value,children:e.label},e.value))]}):(0,a.jsx)("input",{type:e.type,className:"w-full h-11 pl-10 pr-4 bg-muted/20 border border-border rounded-md text-xs focus:ring-1 focus:ring-primary/50 outline-none transition-all placeholder:text-muted-foreground/20 font-mono",placeholder:e.placeholder,value:C[e.name]||"",onChange:t=>S({...C,[e.name]:t.target.value})}),"select"===e.type&&(0,a.jsx)("div",{className:"absolute right-4 top-1/2 -translate-y-1/2 text-muted-foreground/30 pointer-events-none",children:(0,a.jsx)(c.A,{className:"w-3.5 h-3.5"})})]})]},e.name))]})]},"manual")}),_&&(0,a.jsxs)("div",{className:"p-3 rounded-md bg-destructive/10 border border-destructive/20 text-destructive text-[10px] font-bold flex items-center gap-2",children:[(0,a.jsx)(A.A,{className:"w-3 h-3"}),_]})]}),(0,a.jsxs)("footer",{className:"px-6 py-5 border-t border-border bg-muted/10 flex items-center justify-between",children:[(0,a.jsx)(eE.$,{variant:"ghost",onClick:()=>y(!1),className:"px-6 h-10 rounded-md text-[10px] font-black uppercase tracking-widest",children:"Cancel"}),"manual"===N&&(0,a.jsxs)(eE.$,{onClick:z,disabled:h.isPending||!C.name,className:"px-8 h-10 rounded-md bg-primary text-primary-foreground font-black uppercase tracking-widest text-[10px] shadow-lg shadow-primary/20 hover:scale-[1.02] active:scale-95 transition-all flex items-center gap-2",children:[h.isPending?(0,a.jsx)(f.A,{className:"w-3.5 h-3.5 animate-spin"}):(0,a.jsx)(eP.A,{className:"w-3.5 h-3.5"}),h.isPending?"Creating...":"Securely Connect"]})]})]})})})]})};var eq=s(28202),eW=s(60241),eH=s(24371),eB=s(62791),eV=s(52484);let eU=({value:e,onChange:t,language:s,height:n="400px",nodeId:o,workflowId:l})=>{let d=(0,i.MS)(),[c,u]=(0,r.useState)(""),[m,x]=(0,r.useState)(""),[p,h]=(0,r.useState)(!1),g=async()=>{u(""),x(""),d.mutate({code:e,language:s,inputData:o||l?{node_id:o,workflow_id:l}:void 0},{onSuccess:e=>{u(e.output||"Code executed successfully!")},onError:e=>{x(e.message||"Failed to execute code")}})};return(0,a.jsxs)("div",{className:`relative ${p?"fixed inset-0 z-50 bg-background p-4":""}`,children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2 px-1",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"text-xs font-bold text-muted-foreground uppercase tracking-wider",children:"python"===s?"\uD83D\uDC0D Python":"⚡ JavaScript"}),(0,a.jsxs)("span",{className:"text-xs text-muted-foreground",children:[e.split("\n").length," lines"]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(eE.$,{size:"sm",variant:"ghost",onClick:()=>h(!p),className:"h-7 px-2",children:p?(0,a.jsx)(eW.A,{className:"h-3.5 w-3.5"}):(0,a.jsx)(eH.A,{className:"h-3.5 w-3.5"})}),(0,a.jsx)(eE.$,{size:"sm",onClick:g,disabled:d.isPending||!e.trim(),className:"h-7 px-3",children:d.isPending?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(f.A,{className:"h-3.5 w-3.5 mr-1.5 animate-spin"}),"Running..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(b.A,{className:"h-3.5 w-3.5 mr-1.5"}),"Test Run"]})})]})]}),(0,a.jsx)("div",{className:"border border-border rounded-xl overflow-hidden shadow-lg",children:(0,a.jsx)(eq.Ay,{height:p?"calc(100vh - 200px)":n,defaultLanguage:s,language:s,value:e||("python"===s?`# Python Script
# Available variables:
# - input_data: Data from previous node
# - context: Workflow context

def main(input_data, context):
    # Your code here
    result = {
        "message": "Hello from Python!",
        "input": input_data
    }
    return result

# Return value will be passed to next node
return main(input_data, context)`:`// JavaScript Script
// Available variables:
// - inputData: Data from previous node
// - context: Workflow context

function main(inputData, context) {
    // Your code here
    const result = {
        message: "Hello from JavaScript!",
        input: inputData
    };
    return result;
}

// Return value will be passed to next node
return main(inputData, context);`),onChange:e=>{t(e||"")},theme:"vs-dark",options:{minimap:{enabled:!p},fontSize:14,lineNumbers:"on",roundedSelection:!0,scrollBeyondLastLine:!1,automaticLayout:!0,tabSize:"python"===s?4:2,insertSpaces:!0,wordWrap:"on",theme:"vs-dark",padding:{top:16,bottom:16}},loading:(0,a.jsx)("div",{className:"flex items-center justify-center h-full bg-slate-950",children:(0,a.jsx)(f.A,{className:"h-8 w-8 animate-spin text-primary"})})})}),(c||m)&&(0,a.jsxs)("div",{className:"mt-3 border border-border rounded-xl overflow-hidden",children:[(0,a.jsx)("div",{className:`px-4 py-2 flex items-center gap-2 text-sm font-semibold ${m?"bg-destructive/10 text-destructive":"bg-emerald-500/10 text-emerald-500"}`,children:m?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(eB.A,{className:"h-4 w-4"}),"Execution Failed"]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(eV.A,{className:"h-4 w-4"}),"Execution Successful"]})}),(0,a.jsx)("div",{className:"p-4 bg-slate-950 text-slate-100 font-mono text-sm max-h-48 overflow-auto",children:(0,a.jsx)("pre",{className:"whitespace-pre-wrap",children:m||c})})]}),(0,a.jsxs)("div",{className:"mt-2 px-1 text-xs text-muted-foreground",children:["\uD83D\uDCA1 Tip: Use ",(0,a.jsx)("code",{className:"px-1 py-0.5 bg-muted rounded",children:"input_data"})," to access data from the previous node. Press ",(0,a.jsx)("code",{className:"px-1 py-0.5 bg-muted rounded",children:"Ctrl/Cmd + S"})," to save."]})]})};var eX=s(48182),eK=s(88405),eJ=s(48106),eQ=s(38194),eG=s(24338),eY=s(51610),eZ=s(33078),e0=s(85947),e1=s(31093),e5=s(65576),e2=s(44440),e3=s(45187),e4=s(13545);let e8=({value:e,onChange:t,options:s,placeholder:n="Select...",disabled:i,className:l,itemIcon:d})=>{let[x,p]=(0,r.useState)(!1),h=(0,r.useRef)(null),g=s.find(t=>t.value===e);return(0,r.useEffect)(()=>{let e=e=>{h.current&&!h.current.contains(e.target)&&p(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]),(0,a.jsxs)("div",{className:(0,m.cn)("relative",l),ref:h,children:[(0,a.jsxs)("button",{type:"button",onClick:()=>!i&&p(!x),disabled:i,className:(0,m.cn)("w-full h-10 px-3 bg-muted/20 border border-border rounded-md text-xs text-left flex items-center justify-between transition-all focus:ring-1 focus:ring-primary/50 outline-none hover:bg-muted/30",i&&"opacity-50 cursor-not-allowed",x&&"ring-1 ring-primary/50 border-primary/50"),children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 min-w-0 flex-1",children:[d&&(0,a.jsx)(d,{className:"w-3.5 h-3.5 shrink-0 opacity-70"}),(0,a.jsxs)("div",{className:"flex flex-col truncate",children:[(0,a.jsx)("span",{className:(0,m.cn)("font-medium truncate",!g&&"text-muted-foreground"),children:g?g.label:n}),g?.description&&(0,a.jsxs)("span",{className:"text-[9px] text-muted-foreground/70 truncate -mt-0.5",children:[g.description.split("•")[0]," "]})]})]}),(0,a.jsx)(c.A,{className:(0,m.cn)("w-3.5 h-3.5 text-muted-foreground transition-transform duration-200",x&&"rotate-180")})]}),(0,a.jsx)(o.N,{children:x&&(0,a.jsx)(u.P.div,{initial:{opacity:0,y:5},animate:{opacity:1,y:0},exit:{opacity:0,y:5},transition:{duration:.15},className:"absolute top-full left-0 right-0 mt-1 z-50 bg-popover/95 backdrop-blur-xl border border-border shadow-2xl rounded-md overflow-hidden max-h-[300px] overflow-y-auto custom-scrollbar",children:0===s.length?(0,a.jsx)("div",{className:"p-3 text-[10px] text-muted-foreground text-center",children:"No options available"}):(0,a.jsx)("div",{className:"p-1 space-y-0.5",children:s.map(s=>(0,a.jsxs)("button",{onClick:()=>{t(s.value),p(!1)},className:(0,m.cn)("w-full text-left p-2 rounded-sm flex items-start gap-2 hover:bg-accent transition-colors group",s.value===e&&"bg-primary/10"),children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 min-w-0 flex-1 overflow-hidden",children:[d&&(0,a.jsx)(d,{className:"w-3.5 h-3.5 opacity-70 shrink-0"}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("div",{className:(0,m.cn)("text-xs font-medium truncate",s.value===e?"text-primary":"text-foreground"),children:s.label}),s.description&&(0,a.jsx)("div",{className:"text-[10px] text-muted-foreground truncate opacity-70 group-hover:opacity-100",children:s.description})]})]}),s.value===e&&(0,a.jsx)(k.A,{className:"w-3.5 h-3.5 text-primary shrink-0 mt-0.5"})]},s.value))})})})]})},e9={"manual.trigger":eA.A,"schedule.cron":M.A,"webhook.receive":O.A,"whatsapp.trigger":ei,"email.trigger":eC.A,"rss.trigger":W.A,"ai.llm":en.A,"ai.agent":K.A,"data.set":eS.A,"data.transform":er.A,"slack.send":J.A,"whatsapp.send":ei,"google_sheets.write":eo,"google_sheets.read":eo,"http.request":G.A,"code.python":el,"code.javascript":Y.A,"email.send":B.A,"discord.send":B.A,"condition.if":eh.A,"logic.parallel":eg.A,"logic.merge":ey.A,"logic.delay":ev.A,"logic.loop":ej.A,"logic.switch":er.A,"logic.pause":y.A,"execution.pause":y.A,"utility.noop":ew.A},e6=({data:e,mode:t})=>{if(!e||0===Object.keys(e).length)return(0,a.jsxs)("div",{className:"h-full flex flex-col items-center justify-center text-muted-foreground/20 opacity-40 py-10",children:[(0,a.jsx)(Q.A,{className:"w-8 h-8 mb-2 stroke-1"}),(0,a.jsx)("span",{className:"text-[10px] font-bold uppercase tracking-widest",children:"No Data Recorded"})]});if("json"===t)return(0,a.jsx)("pre",{className:"text-[9px] font-mono text-emerald-400/60 leading-tight",children:JSON.stringify(e,null,2)});if("schema"===t){let t=(e,s="")=>e&&"object"==typeof e?Object.entries(e).flatMap(([e,a])=>{let r=s?`${s}.${e}`:e,n=Array.isArray(a)?"array":typeof a,o=[{path:r,type:n}];return"object"!==n||null===a||Array.isArray(a)?o:[...o,...t(a,r)]}):[],s=t(e);return(0,a.jsx)("div",{className:"space-y-1",children:s.map((e,t)=>(0,a.jsxs)("div",{className:"flex items-center justify-between py-1 px-2 bg-white/2 border border-white/5 rounded-sm",children:[(0,a.jsx)("span",{className:"text-[9px] font-mono text-muted-foreground",children:e.path}),(0,a.jsx)("span",{className:"text-[8px] font-bold uppercase text-primary/50 tracking-tighter",children:e.type})]},t))})}if("table"===t){let t=Array.isArray(e)?e:[e],s=Array.from(new Set(t.flatMap(e=>Object.keys(e))));return(0,a.jsx)("div",{className:"overflow-auto border border-border rounded-sm",children:(0,a.jsxs)("table",{className:"w-full text-left text-[9px] border-collapse",children:[(0,a.jsx)("thead",{className:"bg-muted/50 sticky top-0",children:(0,a.jsx)("tr",{children:s.map(e=>(0,a.jsx)("th",{className:"px-2 py-1.5 border-b border-border font-black uppercase text-muted-foreground/60",children:e},e))})}),(0,a.jsx)("tbody",{children:t.map((e,t)=>(0,a.jsx)("tr",{className:"border-b border-white/5 hover:bg-white/2",children:s.map(t=>(0,a.jsx)("td",{className:"px-2 py-1.5 font-mono text-muted-foreground truncate max-w-[120px]",children:"object"==typeof e[t]?"{...}":String(e[t])},t))},t))})]})})}return null},e7=({node:e,onSelect:t,direction:s})=>{let r=e9[e.data.node_name||""]||("trigger"===e.data.type?q.A:X.A);return(0,a.jsxs)(u.P.button,{whileHover:{scale:1.1,backgroundColor:"rgba(var(--primary), 0.1)"},whileTap:{scale:.9},onClick:()=>t(e),className:"h-10 w-10 shrink-0 bg-card border border-border rounded-md flex items-center justify-center shadow-lg hover:border-primary/50 transition-all group relative",title:`${s}: ${e.data.label}`,children:[(0,a.jsx)(r,{className:"w-4 h-4 text-muted-foreground group-hover:text-primary"}),(0,a.jsx)("div",{className:"absolute left-full ml-2 px-2 py-1 bg-popover text-[8px] font-bold text-popover-foreground rounded-sm border border-border opacity-0 group-hover:opacity-100 pointer-events-none whitespace-nowrap z-[110]",children:e.data.label})]})},te=({checked:e,onChange:t})=>(0,a.jsx)("div",{className:(0,m.cn)("relative w-8 h-4.5 rounded-full transition-all duration-300 cursor-pointer",e?"bg-primary":"bg-muted-foreground/20 hover:bg-muted-foreground/30"),onClick:()=>t(!e),children:(0,a.jsx)(u.P.div,{animate:{x:e?16:2},initial:!1,transition:{type:"spring",stiffness:500,damping:30},className:"absolute top-0.75 w-3 h-3 rounded-full bg-white shadow-sm"})}),tt=({node:e,schema:t,allNodes:s,edges:n,onSelectNode:i,onClose:l,onUpdate:d,onExecute:p,saveStatus:h="idle",isDirty:g=!1})=>{let y,[v,j]=(0,r.useState)(e.data.config||{}),[w,N]=(0,r.useState)(e.data.settings||{}),[k,C]=(0,r.useState)("parameters"),S=(0,eK.E)({queries:t.inputs.map(e=>{let s=e.dynamic_options,a=e.dynamic_options,r=e.dynamic_dependencies||[],n={};r.forEach(e=>{n[e]=v[e]});let o=s&&Object.values(n).some(e=>void 0!==e&&""!==e&&null!==e);return{queryKey:["node-options",t.name,e.name,n],queryFn:async()=>await eX.y.getNodeOptions(t.name,a,n),enabled:!!o,staleTime:3e5}})}),[_,E]=(0,r.useState)("json"),[$,P]=(0,r.useState)("json"),[D,T]=(0,r.useState)(280),[z,I]=(0,r.useState)(320),F=(0,r.useRef)(null),R=(0,r.useRef)(null),M=e=>t=>{R.current=e,document.body.style.cursor="col-resize",document.body.style.userSelect="none"},O=(0,r.useCallback)(e=>{if(!R.current||!F.current)return;let t=F.current.getBoundingClientRect();if("left"===R.current){let s=e.clientX-t.left;s>220&&s<.45*t.width&&T(s)}else if("right"===R.current){let s=t.right-e.clientX;s>220&&s<.45*t.width&&I(s)}},[]),L=(0,r.useCallback)(()=>{R.current=null,document.body.style.cursor="default",document.body.style.userSelect="auto"},[]);(0,r.useEffect)(()=>(window.addEventListener("mousemove",O),window.addEventListener("mouseup",L),()=>{window.removeEventListener("mousemove",O),window.removeEventListener("mouseup",L)}),[O,L]);let W=(0,r.useRef)(null);(0,r.useEffect)(()=>{e.id!==W.current&&(j(e.data.config||{}),N(e.data.settings||{}),W.current=e.id)},[e.id,e.data.config,e.data.settings]);let H=(t,s)=>{let a={...v,[t]:s};j(a),d(e.id,{...e.data,config:a})},B=(t,s)=>{let a={...w,[t]:s};N(a),d(e.id,{...e.data,settings:a})},{previousNodes:V,nextNodes:U}=(0,r.useMemo)(()=>{let t=n.filter(t=>t.target===e.id).map(e=>e.source),a=n.filter(t=>t.source===e.id).map(e=>e.target);return{previousNodes:s.filter(e=>t.includes(e.id)),nextNodes:s.filter(e=>a.includes(e.id))}},[e.id,s,n]),K=(0,r.useMemo)(()=>{let t=e.data.input;if(t&&Object.keys(t).length>0)return t;if(0===V.length)return{};if(1===V.length)return V[0].data.output||V[0].data.lastResult||{};let s={};return V.forEach(e=>{s[e.id]=e.data.output||e.data.lastResult||{}}),s},[e.data,V]);return(0,a.jsxs)("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-background/80 backdrop-blur-md pointer-events-auto",children:[(0,a.jsx)("div",{className:"absolute left-6 top-1/2 -translate-y-1/2 flex flex-col gap-3",children:V.map(e=>(0,a.jsx)(e7,{node:e,onSelect:i,direction:"Prev"},e.id))}),(0,a.jsx)("div",{className:"absolute right-6 top-1/2 -translate-y-1/2 flex flex-col gap-3",children:U.map(e=>(0,a.jsx)(e7,{node:e,onSelect:i,direction:"Next"},e.id))}),(0,a.jsxs)(u.P.div,{ref:F,layoutId:`node-modal-${e.id}`,className:"w-[1520px] h-[92vh] max-w-[96vw] bg-background border border-border shadow-2xl rounded-lg flex flex-col overflow-hidden ring-1 ring-white/5",children:[(0,a.jsxs)("header",{className:"h-14 px-6 border-b border-border bg-muted/10 flex items-center justify-between shrink-0",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"h-8 w-8 rounded bg-primary/10 text-primary flex items-center justify-center border border-primary/20",children:(y=e9[e.data.node_name||""]||("trigger"===e.data.type?q.A:X.A),(0,a.jsx)(y,{className:"w-4 h-4 fill-current"}))}),(0,a.jsx)("input",{value:e.data.label,onChange:t=>d(e.id,{...e.data,label:t.target.value}),className:"text-sm font-bold bg-transparent border-none focus:outline-none focus:ring-1 focus:ring-primary/20 rounded-sm px-1 -ml-1 w-96 hover:bg-white/5"}),(0,a.jsx)("span",{className:"text-[10px] font-black uppercase tracking-widest text-muted-foreground/40 px-2 py-0.5 rounded-sm border border-border/50",children:t.label})]}),(0,a.jsx)("div",{className:"flex items-center gap-2",children:(0,a.jsx)(eE.$,{variant:"ghost",size:"icon",onClick:l,className:"rounded-md h-8 w-8",children:(0,a.jsx)(A.A,{className:"w-4 h-4"})})})]}),(0,a.jsxs)("div",{className:"flex-1 flex overflow-hidden",children:[(0,a.jsxs)("aside",{style:{width:D},className:"border-r border-border bg-muted/5 flex flex-col overflow-hidden shrink-0",children:[(0,a.jsxs)("div",{className:"px-4 py-3 border-b border-border bg-muted/10 flex items-center justify-between shrink-0",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(ew.A,{className:"w-3 h-3 text-muted-foreground"}),(0,a.jsx)("span",{className:"text-[9px] font-black uppercase tracking-widest",children:"Input"})]}),(0,a.jsx)("div",{className:"flex p-0.5 bg-background rounded-sm border border-border/50",children:[{id:"json",icon:eY.A},{id:"table",icon:eZ.A},{id:"schema",icon:e0.A}].map(e=>(0,a.jsx)("button",{onClick:()=>E(e.id),className:(0,m.cn)("p-1 rounded-sm transition-all",_===e.id?"bg-muted text-primary":"text-muted-foreground/40 hover:text-muted-foreground"),children:(0,a.jsx)(e.icon,{className:"w-2.5 h-2.5"})},e.id))})]}),(0,a.jsx)("div",{className:"flex-1 overflow-auto p-4 custom-scrollbar bg-black/10",children:(0,a.jsx)(e6,{data:K,mode:_})})]}),(0,a.jsx)("div",{onMouseDown:M("left"),className:"w-1.5 -mx-0.75 hover:bg-primary/50 cursor-col-resize transition-all shrink-0 z-20 flex items-center justify-center group",children:(0,a.jsx)("div",{className:"h-8 w-1 rounded-full bg-border group-hover:bg-primary/50"})}),(0,a.jsxs)("main",{className:"flex-1 flex flex-col bg-background overflow-y-auto custom-scrollbar",children:[(0,a.jsxs)("div",{className:"sticky top-0 z-10 bg-background/80 backdrop-blur-md px-6 py-3 border-b border-border/50 flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex bg-muted/30 p-1 rounded-md shrink-0",children:[(0,a.jsxs)("button",{onClick:()=>C("parameters"),className:(0,m.cn)("flex items-center gap-2 px-4 py-1.5 rounded-sm transition-all text-[10px] font-bold uppercase tracking-wider","parameters"===k?"bg-background text-primary shadow-sm":"text-muted-foreground hover:text-foreground"),children:[(0,a.jsx)(e1.A,{className:"w-3.5 h-3.5"}),"Parameters"]}),(0,a.jsxs)("button",{onClick:()=>C("settings"),className:(0,m.cn)("flex items-center gap-2 px-4 py-1.5 rounded-sm transition-all text-[10px] font-bold uppercase tracking-wider","settings"===k?"bg-background text-primary shadow-sm":"text-muted-foreground hover:text-foreground"),children:[(0,a.jsx)(X.A,{className:"w-3.5 h-3.5"}),"Settings"]})]}),(0,a.jsxs)(eE.$,{size:"sm",onClick:()=>p?.(e.id,v,K),className:"h-8 px-4 rounded-md bg-primary text-primary-foreground font-black uppercase tracking-widest text-[9px] shadow-lg shadow-primary/20 hover:scale-[1.02] transition-transform flex items-center gap-2",children:[(0,a.jsx)(b.A,{className:"w-2.5 h-2.5 fill-current"}),"Run Step"]})]}),(0,a.jsx)("div",{className:"max-w-3xl mx-auto w-full p-10 space-y-8",children:(0,a.jsx)(o.N,{mode:"wait",children:"parameters"===k?(0,a.jsx)(u.P.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"space-y-6",children:0===t.inputs.length?(0,a.jsxs)("div",{className:"py-20 text-center text-muted-foreground/30 flex flex-col items-center gap-4",children:[(0,a.jsx)("div",{className:"p-6 rounded border border-dashed border-border",children:(0,a.jsx)(e5.A,{className:"w-10 h-10"})}),(0,a.jsx)("p",{className:"text-[10px] uppercase font-bold tracking-widest",children:"Default Configuration Only"})]}):t.inputs.map(s=>s.show_if&&!Object.entries(s.show_if).every(([e,t])=>v[e]===t)?null:(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("label",{className:"text-[10px] font-bold text-muted-foreground uppercase tracking-widest flex items-center gap-2",children:[(e=>{switch(e){case"number":return(0,a.jsx)(eJ.A,{className:"w-3 h-3"});case"select":return(0,a.jsx)(eQ.A,{className:"w-3 h-3"});case"json":return(0,a.jsx)(Q.A,{className:"w-3 h-3"});case"code":return(0,a.jsx)(Y.A,{className:"w-3 h-3"});case"credential":return(0,a.jsx)(e$.A,{className:"w-3 h-3"});case"messages":return(0,a.jsx)(J.A,{className:"w-3 h-3"});default:return(0,a.jsx)(eG.A,{className:"w-3 h-3"})}})(s.type),s.label]}),"messages"===s.type?(0,a.jsx)("div",{className:"space-y-4",children:(0,a.jsxs)("div",{className:"space-y-3",children:[(v[s.name]||s.default||[]).map((e,t)=>(0,a.jsxs)("div",{className:"relative group/msg p-4 bg-muted/10 border border-border rounded-xl space-y-3 transition-all hover:bg-muted/20",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsxs)("select",{value:e.role,onChange:e=>{let a=[...v[s.name]||s.default||[]];a[t]={...a[t],role:e.target.value},H(s.name,a)},className:"pl-3 pr-8 py-1.5 bg-background border border-border rounded-lg text-[10px] font-bold uppercase tracking-wider appearance-none focus:outline-none focus:ring-1 focus:ring-primary/20",children:[(0,a.jsx)("option",{value:"system",children:"System (Goal)"}),(0,a.jsx)("option",{value:"user",children:"User (Request)"}),(0,a.jsx)("option",{value:"assistant",children:"AI (Response)"})]}),(0,a.jsx)(c.A,{className:"absolute right-2 top-1/2 -translate-y-1/2 w-3 h-3 text-muted-foreground/40 pointer-events-none"})]}),(0,a.jsx)("button",{onClick:()=>{let e=(v[s.name]||s.default||[]).filter((e,s)=>s!==t);H(s.name,e)},className:"p-1.5 text-muted-foreground/20 hover:text-destructive hover:bg-destructive/10 rounded-lg transition-all",children:(0,a.jsx)(e2.A,{className:"w-3.5 h-3.5"})})]}),(0,a.jsx)("textarea",{value:e.content,onChange:e=>{let a=[...v[s.name]||s.default||[]];a[t]={...a[t],content:e.target.value},H(s.name,a)},className:"w-full bg-transparent border-none text-xs placeholder:text-muted-foreground/30 focus:outline-none resize-none custom-scrollbar min-h-[60px]",placeholder:"Type instructions or message... {{use_variables}}"})]},t)),(0,a.jsxs)("button",{onClick:()=>{let e=v[s.name]||s.default||[];H(s.name,[...e,{role:"user",content:""}])},className:"w-full py-3 border border-dashed border-border rounded-xl text-[10px] font-bold text-muted-foreground/50 hover:text-primary hover:border-primary/40 hover:bg-primary/5 transition-all flex items-center justify-center gap-2 group",children:[(0,a.jsx)(x.A,{className:"w-3.5 h-3.5 group-hover:scale-110 transition-transform"}),"Add Interaction Step"]})]})}):"code"===s.type?(0,a.jsx)("div",{className:"rounded-md overflow-hidden border border-border shadow-inner bg-black/20",children:(0,a.jsx)(eU,{value:v[s.name]||s.default||"",onChange:e=>H(s.name,e),language:t.name.includes("python")?"python":"javascript",height:"400px",nodeId:e.id})}):"select"===s.type?(0,a.jsx)(e8,{value:v[s.name]||s.default||"",onChange:e=>H(s.name,e),options:S[t.inputs.indexOf(s)]?.data||s.options||[],placeholder:`Select ${s.label.toLowerCase()}...`,disabled:S[t.inputs.indexOf(s)]?.isLoading,className:"w-full",itemIcon:"spreadsheet_id"===s.name?eo:void 0}):"credential"===s.type?(0,a.jsx)(eL,{value:v[s.name],onChange:e=>H(s.name,e),credentialType:s.credential_type||"generic",label:s.label}):"json"===s.type?(0,a.jsxs)("div",{className:"relative rounded-md overflow-hidden border border-border bg-slate-950 shadow-lg",children:[(0,a.jsx)("div",{className:"absolute top-2 right-2 flex gap-1 z-10",children:(0,a.jsx)("span",{className:"text-[8px] font-bold text-slate-500 uppercase tracking-widest bg-slate-900/80 px-2 py-0.5 rounded border border-slate-800",children:"JSON"})}),(0,a.jsx)("textarea",{value:v[s.name]&&"object"==typeof v[s.name]?JSON.stringify(v[s.name],null,2):v[s.name]||"",onChange:e=>{try{let t=JSON.parse(e.target.value);H(s.name,t)}catch{H(s.name,e.target.value)}},className:"w-full px-4 py-4 bg-transparent text-slate-300 font-mono text-[11px] h-32 focus:outline-none transition-all shadow-inner resize-none custom-scrollbar",placeholder:"{}"})]}):(0,a.jsx)("input",{className:"w-full h-10 px-4 bg-muted/20 border border-border rounded-md text-xs focus:ring-1 focus:ring-primary/50 outline-none transition-all placeholder:text-muted-foreground/20",value:v[s.name]||"",onChange:e=>H(s.name,e.target.value),placeholder:`Enter ${s.label.toLowerCase()}...`})]},s.name))},"p"):(0,a.jsxs)(u.P.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"space-y-6",children:[(0,a.jsxs)("div",{className:"p-6 rounded-md bg-amber-500/5 border border-amber-500/10 flex gap-4",children:[(0,a.jsx)(eT.A,{className:"w-5 h-5 text-amber-500 shrink-0"}),(0,a.jsx)("p",{className:"text-[11px] text-muted-foreground leading-relaxed",children:"System-level orchestration: Configure retries, error handling, and timeout behavior for this internal node execution."})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 rounded-md border border-border bg-card/50",children:[(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)("div",{className:"text-xs font-bold uppercase tracking-wider",children:"Always Output Data"}),(0,a.jsx)("div",{className:"text-[10px] text-muted-foreground",children:"Return empty object if no results"})]}),(0,a.jsx)(te,{checked:w.alwaysOutputData,onChange:e=>B("alwaysOutputData",e)})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 rounded-md border border-border bg-card/50",children:[(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)("div",{className:"text-xs font-bold uppercase tracking-wider",children:"Execute Once"}),(0,a.jsx)("div",{className:"text-[10px] text-muted-foreground",children:"Only run first time in a loop"})]}),(0,a.jsx)(te,{checked:w.executeOnce,onChange:e=>B("executeOnce",e)})]}),(0,a.jsxs)("div",{className:"space-y-4 p-4 rounded-md border border-border bg-card/50",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)("div",{className:"text-xs font-bold uppercase tracking-wider",children:"Retry On Fail"}),(0,a.jsx)("div",{className:"text-[10px] text-muted-foreground",children:"Automatically retry if node fails"})]}),(0,a.jsx)(te,{checked:w.retryOnFail,onChange:e=>B("retryOnFail",e)})]}),w.retryOnFail&&(0,a.jsx)(u.P.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},className:"pt-4 space-y-4 border-t border-border/50",children:(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-1.5",children:[(0,a.jsx)("label",{className:"text-[10px] font-bold text-muted-foreground uppercase tracking-widest ml-1",children:"Max Retries"}),(0,a.jsx)("input",{type:"number",value:w.maxRetries??3,onChange:e=>B("maxRetries",Number(e.target.value)),className:"w-full h-10 px-4 bg-muted/20 border border-border rounded-md text-xs focus:ring-1 focus:ring-primary/50 outline-none transition-all"})]}),(0,a.jsxs)("div",{className:"space-y-1.5",children:[(0,a.jsx)("label",{className:"text-[10px] font-bold text-muted-foreground uppercase tracking-widest ml-1",children:"Retry Delay (s)"}),(0,a.jsx)("input",{type:"number",value:w.retryDelay??5,onChange:e=>B("retryDelay",Number(e.target.value)),className:"w-full h-10 px-4 bg-muted/20 border border-border rounded-md text-xs focus:ring-1 focus:ring-primary/50 outline-none transition-all"})]})]})})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:"text-[10px] font-bold text-muted-foreground uppercase tracking-widest ml-1",children:"On Error"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsxs)("select",{value:w.onError||"stop",onChange:e=>B("onError",e.target.value),className:"w-full h-10 px-4 bg-muted/20 border border-border rounded-md text-xs focus:ring-1 focus:ring-primary/50 outline-none transition-all appearance-none",children:[(0,a.jsx)("option",{value:"stop",children:"Stop Workflow"}),(0,a.jsx)("option",{value:"continue",children:"Continue (Ignore Error)"}),(0,a.jsx)("option",{value:"retry",children:"Retry and Stop"})]}),(0,a.jsx)(c.A,{className:"absolute right-4 top-1/2 -translate-y-1/2 w-3.5 h-3.5 text-muted-foreground pointer-events-none"})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:"text-[10px] font-bold text-muted-foreground uppercase tracking-widest ml-1",children:"Notes"}),(0,a.jsx)("textarea",{value:w.notes||"",onChange:e=>B("notes",e.target.value),className:"w-full px-4 py-3 bg-muted/20 border border-border rounded-md text-xs transition-all focus:ring-1 focus:ring-primary/50 outline-none h-32 resize-none custom-scrollbar",placeholder:"Add notes about what this node does..."})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 rounded-md border border-border bg-card/50",children:[(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)("div",{className:"text-xs font-bold uppercase tracking-wider",children:"Display Note in Flow"}),(0,a.jsx)("div",{className:"text-[10px] text-muted-foreground",children:"Show this note on the canvas"})]}),(0,a.jsx)(te,{checked:w.displayNoteInFlow,onChange:e=>B("displayNoteInFlow",e)})]})]})]},"s")})})]}),(0,a.jsx)("div",{onMouseDown:M("right"),className:"w-1.5 -mx-0.75 hover:bg-primary/50 cursor-col-resize transition-all shrink-0 z-20 flex items-center justify-center group",children:(0,a.jsx)("div",{className:"h-8 w-1 rounded-full bg-border group-hover:bg-primary/50"})}),(0,a.jsxs)("aside",{style:{width:z},className:"border-l border-border bg-muted/5 flex flex-col overflow-hidden shrink-0 relative",children:["pending"===e.data.status&&(0,a.jsxs)("div",{className:"absolute inset-0 bg-background/50 backdrop-blur-sm z-50 flex flex-col items-center justify-center gap-3",children:[(0,a.jsx)(f.A,{className:"w-8 h-8 animate-spin text-primary"}),(0,a.jsx)("span",{className:"text-xs font-bold uppercase tracking-widest text-muted-foreground",children:"Executing..."})]}),(0,a.jsxs)("div",{className:"px-4 py-3 border-b border-border bg-muted/10 flex items-center justify-between shrink-0",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(e3.A,{className:"w-3 h-3 text-muted-foreground"}),(0,a.jsx)("span",{className:"text-[9px] font-black uppercase tracking-widest",children:"Output"})]}),(0,a.jsx)("div",{className:"flex p-0.5 bg-background rounded-sm border border-border/50",children:[{id:"json",icon:eY.A},{id:"table",icon:eZ.A},{id:"schema",icon:e0.A}].map(e=>(0,a.jsx)("button",{onClick:()=>P(e.id),className:(0,m.cn)("p-1 rounded-sm transition-all",$===e.id?"bg-muted text-primary":"text-muted-foreground/40 hover:text-muted-foreground"),children:(0,a.jsx)(e.icon,{className:"w-2.5 h-2.5"})},e.id))})]}),(0,a.jsxs)("div",{className:"flex-1 overflow-auto p-4 custom-scrollbar bg-black/10 flex flex-col gap-4",children:["failed"===e.data.status&&e.data.error?(0,a.jsxs)("div",{className:"p-4 rounded-md border border-destructive/50 bg-destructive/10 text-destructive text-xs font-mono break-words shrink-0",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2 font-bold uppercase tracking-wider",children:[(0,a.jsx)(e4.A,{className:"w-4 h-4"}),"Execution Failed"]}),e.data.error]}):null,(0,a.jsx)(e6,{data:e.data.output,mode:$})]})]})]}),(0,a.jsxs)("footer",{className:"h-14 px-6 border-t border-border bg-card flex items-center justify-between shrink-0",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:(0,m.cn)("w-1.5 h-1.5 rounded-full transition-all duration-500","saving"===h?"bg-amber-500 shadow-[0_0_8px_rgba(245,158,11,0.5)] animate-pulse":g?"bg-blue-500 shadow-[0_0_8px_rgba(59,130,246,0.3)]":"bg-emerald-500 shadow-[0_0_8px_rgba(16,185,129,0.5)]")}),(0,a.jsx)("span",{className:"text-[10px] text-muted-foreground uppercase tracking-widest font-bold",children:"saving"===h?"Saving changes...":g?"Unsaved changes":"All changes saved"})]}),(0,a.jsx)("div",{className:"h-4 w-px bg-border/50 mx-2"}),(0,a.jsxs)("div",{className:"flex items-center gap-2 opacity-30 grayscale pointer-events-none",children:[(0,a.jsx)(el,{className:"w-4 h-4 shadow-sm"}),(0,a.jsx)("span",{className:"text-[9px] font-black uppercase tracking-[0.2em]",children:"Engine Instance Ready"})]})]}),(0,a.jsxs)("div",{className:"text-[8px] font-black uppercase tracking-widest text-muted-foreground/30",children:["Node ID: ",e.id]})]})]},e.id)]})},ts={"manual.trigger":H,"schedule.cron":H,"webhook.receive":H,"email.receive":R,"form.submit":H,"rss.read":H,"whatsapp.receive":I,"google_sheets.read":eu,"google_sheets.write":eu,"email.send":U,"code.python":ep,"code.javascript":ep,"discord.send":ed,"slack.send":ed,"whatsapp.send":ed,"http.request":ed,"data.store":ed,"data.set":ed,"data.transform":ed,"ai.agent":ed,"ai.llm":ed,"condition.if":ek,"condition.switch":ek,"execution.pause":ek,"logic.loop":ek,"logic.delay":ek,"logic.merge":ek,"logic.parallel":ek,"utility.noop":ek,trigger:H,action:ed,logic:ek,default:e_};var ta=s(21362);function tr({logs:e,isOpen:t,onClose:s,onClear:n}){let o=(0,r.useRef)(null),[i,l]=(0,r.useState)(320),[d,c]=(0,r.useState)(!1),[x,p]=(0,r.useState)(!1);return((0,r.useEffect)(()=>{let e=e=>{if(!d)return;let t=window.innerHeight-e.clientY;t>100&&t<.8*window.innerHeight&&l(t)},t=()=>{c(!1)};return d&&(window.addEventListener("mousemove",e),window.addEventListener("mouseup",t)),()=>{window.removeEventListener("mousemove",e),window.removeEventListener("mouseup",t)}},[d]),(0,r.useEffect)(()=>{o.current&&(o.current.scrollTop=o.current.scrollHeight)},[e,t]),t)?(0,a.jsxs)(u.P.div,{initial:{height:0,opacity:0,y:20},animate:{height:i,opacity:1,y:0,transition:d?{duration:0}:{type:"spring",damping:25,stiffness:300}},exit:{height:0,opacity:0,y:20},style:{height:i},className:(0,m.cn)("fixed bottom-0 left-0 right-0 border-t border-border/50 bg-card/80 backdrop-blur-xl flex flex-col shadow-[0_-10px_40px_rgba(0,0,0,0.1)] z-50 overflow-hidden",d&&"transition-none select-none"),children:[(0,a.jsx)("div",{onMouseDown:e=>{c(!0),e.preventDefault()},className:"absolute top-0 left-0 right-0 h-1.5 cursor-ns-resize hover:bg-primary/30 transition-colors z-40 group flex items-center justify-center",children:(0,a.jsx)("div",{className:"w-12 h-1 rounded-full bg-border group-hover:bg-primary/50"})}),(0,a.jsxs)("div",{className:"flex items-center justify-between px-6 py-3 border-b border-border/50 bg-muted/40 backdrop-blur-md shrink-0",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"flex items-center justify-center h-8 w-8 rounded-lg bg-primary/10 border border-primary/20",children:(0,a.jsx)(ex.A,{className:"h-4 w-4 text-primary"})}),(0,a.jsx)("div",{children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("h3",{className:"text-sm font-semibold tracking-tight",children:"Execution logs"}),(0,a.jsxs)("div",{className:"flex items-center gap-1.5 px-2 py-0.5 rounded-full bg-emerald-500/10 border border-emerald-500/20",children:[(0,a.jsx)("span",{className:"h-1.5 w-1.5 rounded-full bg-emerald-500 animate-pulse"}),(0,a.jsx)("span",{className:"text-[10px] font-medium text-emerald-600 dark:text-emerald-400 uppercase tracking-wider",children:"Live"})]})]})})]}),(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsxs)("div",{className:"flex items-center p-1 bg-background/80 backdrop-blur-sm rounded-xl border border-border shadow-sm",children:[(0,a.jsxs)(eE.$,{variant:"ghost",size:"sm",onClick:()=>{let t=e.map(e=>`[${new Date(e.timestamp).toLocaleString()}] ${e.type.toUpperCase()}: ${e.message}${e.data?"\nData: "+JSON.stringify(e.data,null,2):""}`).join("\n\n");navigator.clipboard.writeText(t),p(!0),setTimeout(()=>p(!1),2e3)},className:(0,m.cn)("h-8 text-[11px] font-bold transition-all px-3 gap-2 rounded-lg",x?"bg-emerald-500/20 text-emerald-600":"hover:bg-primary/10 text-primary"),children:[x?(0,a.jsx)(eV.A,{className:"h-3.5 w-3.5"}):(0,a.jsx)(P.A,{className:"h-3.5 w-3.5"}),(0,a.jsx)("span",{children:"Copy All"})]}),(0,a.jsx)("div",{className:"w-px h-4 bg-border mx-1"}),(0,a.jsxs)(eE.$,{variant:"ghost",size:"sm",onClick:n,className:"h-8 text-[11px] font-bold text-muted-foreground hover:text-destructive hover:bg-destructive/10 transition-all px-3 gap-2 rounded-lg",children:[(0,a.jsx)(ex.A,{className:"h-3.5 w-3.5"}),(0,a.jsx)("span",{children:"Clear Logs"})]})]}),(0,a.jsx)("div",{className:"w-px h-4 bg-border mx-1"}),(0,a.jsx)("button",{onClick:s,className:"h-8 w-8 flex items-center justify-center rounded-full hover:bg-muted transition-colors text-muted-foreground hover:text-foreground",children:(0,a.jsx)(A.A,{className:"h-4 w-4"})})]})]}),(0,a.jsx)("div",{ref:o,className:"flex-1 overflow-y-auto p-6 space-y-1.5 font-mono text-[10px] custom-scrollbar",style:{scrollBehavior:"smooth"},children:0===e.length?(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center py-12 text-center space-y-3 opacity-50",children:[(0,a.jsx)(ex.A,{className:"h-8 w-8 stroke-1"}),(0,a.jsx)("p",{className:"max-w-[200px] text-xs leading-relaxed italic",children:"No active logs. Start a workflow to monitor execution in real-time."})]}):(0,a.jsx)("div",{className:"space-y-1",children:e.map(e=>(0,a.jsx)(tn,{log:e},e.id))})})]}):null}function tn({log:e}){let[t,s]=(0,r.useState)(!1),[n,i]=(0,r.useState)(!1),l=e.data&&Object.keys(e.data).length>0;return(0,a.jsxs)("div",{className:(0,m.cn)("flex flex-col gap-1 p-1.5 rounded transition-all border border-transparent group",l&&"cursor-pointer hover:bg-accent/40 hover:border-border/50",t&&"bg-accent/30 border-border/50 shadow-sm"),onClick:()=>l&&s(!t),children:[(0,a.jsxs)("div",{className:"flex gap-3 items-start",children:[(0,a.jsx)("span",{className:"text-muted-foreground/50 w-20 shrink-0 select-none pt-0.5",children:new Date(e.timestamp).toLocaleTimeString()}),(0,a.jsxs)("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[l&&(0,a.jsx)("button",{className:"p-0.5 hover:bg-muted rounded transition-colors shrink-0",children:t?(0,a.jsx)(c.A,{className:"h-3 w-3"}):(0,a.jsx)(ta.A,{className:"h-3 w-3"})}),"success"===e.type&&(0,a.jsx)(eV.A,{className:"h-3 w-3 text-green-500 shrink-0"}),"error"===e.type&&(0,a.jsx)(w.A,{className:"h-3 w-3 text-destructive shrink-0"}),"info"===e.type&&(0,a.jsx)(eT.A,{className:"h-3 w-3 text-blue-500 shrink-0"}),(0,a.jsx)("span",{className:(0,m.cn)("font-medium text-[10px] break-all whitespace-pre-wrap leading-tight","error"===e.type?"text-destructive":"success"===e.type?"text-green-600 dark:text-green-400":"text-foreground"),children:e.message}),e.nodeId&&(0,a.jsx)("span",{className:"text-[10px] px-1.5 py-0.5 rounded bg-muted border border-border text-muted-foreground font-sans shrink-0",children:e.nodeId}),(0,a.jsx)("button",{onClick:t=>{t.stopPropagation(),navigator.clipboard.writeText(`[${new Date(e.timestamp).toLocaleTimeString()}] ${e.message}`),i(!0),setTimeout(()=>i(!1),2e3)},className:"ml-auto p-1.5 hover:bg-muted rounded-md transition-all shrink-0 border border-transparent hover:border-border text-muted-foreground/50 hover:text-foreground",title:"Copy message",children:n?(0,a.jsx)(eV.A,{className:"h-3 w-3 text-emerald-500"}):(0,a.jsx)(P.A,{className:"h-3 w-3 text-muted-foreground/50"})})]})]}),(0,a.jsx)(o.N,{children:t&&l&&(0,a.jsx)(u.P.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"ml-[92px] mt-2 overflow-hidden",onClick:e=>e.stopPropagation(),children:(0,a.jsxs)("div",{className:"relative group/json",children:[(0,a.jsx)("pre",{className:"p-3 rounded-lg bg-slate-950 text-slate-300 overflow-x-auto text-[9px] border border-border/50 leading-relaxed shadow-inner",children:JSON.stringify(e.data,null,2)}),(0,a.jsx)("button",{onClick:t=>{t.stopPropagation(),navigator.clipboard.writeText(JSON.stringify(e.data,null,2))},className:"absolute top-2 right-2 p-1.5 bg-slate-800 hover:bg-slate-700 rounded-md opacity-0 group-hover/json:opacity-100 transition-opacity text-slate-400",title:"Copy JSON",children:(0,a.jsx)(P.A,{className:"h-3 w-3"})})]})})})]})}var to=s(30489);function ti({isOpen:e,onClose:t,messages:s,isLoading:n,input:i,onInputChange:l,onSend:d}){let c=(0,r.useRef)(null);return(0,r.useEffect)(()=>{c.current?.scrollIntoView({behavior:"smooth"})},[s,n]),(0,a.jsx)(o.N,{children:e&&(0,a.jsxs)(u.P.div,{initial:{opacity:0,y:20,scale:.9},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,scale:.9,y:20},className:"absolute bottom-6 right-6 w-[400px] h-[550px] bg-card border border-border rounded-lg shadow-2xl flex flex-col z-[100] overflow-hidden",children:[(0,a.jsxs)("header",{className:"p-5 flex items-center justify-between border-b border-border bg-muted/30 shrink-0 select-none",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"h-10 w-10 rounded-md bg-gradient-to-tr from-indigo-500 via-primary to-emerald-400 flex items-center justify-center shadow-lg shadow-primary/20 animate-gradient-xy",children:(0,a.jsx)(en.A,{className:"h-5 w-5 text-white"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-bold text-sm tracking-tight text-foreground",children:"AI Architect"}),(0,a.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,a.jsx)("div",{className:"h-1 w-1 rounded-full bg-emerald-500 animate-pulse"}),(0,a.jsx)("p",{className:"text-[10px] font-bold text-muted-foreground uppercase tracking-widest opacity-60",children:"Neural Engine Active"})]})]})]}),(0,a.jsx)(eE.$,{variant:"ghost",size:"icon",className:"h-8 w-8 rounded-md hover:bg-white/10 transition-colors",onClick:t,children:(0,a.jsx)(A.A,{className:"h-4 w-4 text-muted-foreground"})})]}),(0,a.jsxs)("div",{className:"flex-1 overflow-y-auto p-6 space-y-6 custom-scrollbar scroll-smooth",children:[0===s.length&&(0,a.jsxs)("div",{className:"h-full flex flex-col items-center justify-center text-center p-4",children:[(0,a.jsx)(u.P.div,{initial:{scale:0},animate:{scale:1},className:"h-16 w-16 rounded-lg bg-primary/10 flex items-center justify-center mb-6 shadow-inner",children:(0,a.jsx)(to.A,{className:"h-8 w-8 text-primary/40"})}),(0,a.jsx)("h4",{className:"font-bold text-base mb-2 tracking-tight",children:"I'm your Workflow Assistant"}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground max-w-[240px] leading-relaxed opacity-60",children:'"Create a workflow that sends Slack alerts when my website goes down"'})]}),s.map((e,t)=>(0,a.jsx)(u.P.div,{initial:{opacity:0,x:"user"===e.role?10:-10,y:5},animate:{opacity:1,x:0,y:0},className:(0,m.cn)("flex w-full","user"===e.role?"justify-end":"justify-start"),children:(0,a.jsx)("div",{className:(0,m.cn)("max-w-[85%] px-4 py-3 rounded-md text-xs leading-relaxed font-medium shadow-lg transition-all","user"===e.role?"bg-primary text-primary-foreground rounded-tr-none shadow-primary/10":"bg-white/5 text-foreground border border-white/5 rounded-tl-none backdrop-blur-sm"),children:e.message})},t)),n&&(0,a.jsx)("div",{className:"flex justify-start",children:(0,a.jsx)("div",{className:"bg-white/5 border border-white/5 px-4 py-3 rounded-md rounded-tl-none",children:(0,a.jsxs)("div",{className:"flex gap-1.5",children:[(0,a.jsx)("div",{className:"w-1.5 h-1.5 bg-primary/60 rounded-full animate-bounce",style:{animationDelay:"0ms"}}),(0,a.jsx)("div",{className:"w-1.5 h-1.5 bg-primary/60 rounded-full animate-bounce",style:{animationDelay:"200ms"}}),(0,a.jsx)("div",{className:"w-1.5 h-1.5 bg-primary/60 rounded-full animate-bounce",style:{animationDelay:"400ms"}})]})})}),(0,a.jsx)("div",{ref:c})]}),(0,a.jsxs)("div",{className:"p-6 pt-2 shrink-0",children:[(0,a.jsxs)("div",{className:"relative flex items-center group",children:[(0,a.jsx)("input",{type:"text",value:i,onChange:e=>l(e.target.value),onKeyDown:e=>"Enter"===e.key&&!e.shiftKey&&d(),placeholder:"Command your workflow...",className:"w-full bg-white/5 border border-white/5 rounded-md pl-5 pr-14 py-4 text-xs focus:outline-none focus:ring-1 focus:ring-primary/40 focus:bg-white/10 transition-all shadow-inner placeholder:text-muted-foreground/30 font-bold tracking-tight",autoFocus:!0}),(0,a.jsx)("div",{className:"absolute right-2 flex items-center gap-1.5",children:(0,a.jsx)(eE.$,{size:"icon",onClick:d,disabled:!i.trim()||n,className:(0,m.cn)("h-9 w-9 rounded-md transition-all shadow-lg",i.trim()?"opacity-100 scale-100 bg-primary shadow-primary/20":"opacity-0 scale-90 pointer-events-none"),children:(0,a.jsx)(B.A,{className:"h-4 w-4"})})})]}),(0,a.jsx)("p",{className:"mt-4 text-[9px] text-center text-muted-foreground/40 font-bold uppercase tracking-[0.2em]",children:"Alpha Neural Interface 1.0"})]}),(0,a.jsx)("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-indigo-500 via-primary to-emerald-400 opacity-60"}),(0,a.jsx)("div",{className:"absolute -bottom-24 -left-24 w-48 h-48 bg-primary/20 rounded-full blur-[60px] pointer-events-none"})]})})}var tl=s(55243),td=s(29857);let tc=(0,r.memo)(({workflowMeta:e,updateWorkflowMeta:t,activeTab:s,setActiveTab:r,showLogs:n,setShowLogs:o,isActive:i,toggleActive:l,onSave:d,isSaving:c,saveStatus:u,isDirty:m,showNavSidebar:x,setShowNavSidebar:p})=>(0,a.jsxs)("header",{className:"h-14 border-b border-border bg-card/80 backdrop-blur-xl flex items-center justify-between px-4 z-10 shrink-0",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)("button",{onClick:()=>p(!x),className:"p-2 hover:bg-accent rounded-lg transition-colors","aria-label":"Toggle navigation",children:(0,a.jsx)(td.A,{className:"h-5 w-5"})}),(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsx)("input",{value:e?.name||"",onChange:e=>t({name:e.target.value}),placeholder:"Untitled Workflow",className:"font-semibold text-lg bg-transparent border-none focus:outline-none focus:ring-1 focus:ring-primary/20 rounded px-1 -ml-1 w-64"}),(0,a.jsx)("input",{value:e?.description||"",onChange:e=>t({description:e.target.value}),placeholder:"Add description...",className:"text-xs text-muted-foreground bg-transparent border-none focus:outline-none focus:ring-1 focus:ring-primary/20 rounded px-1 -ml-1 w-96"})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)("div",{className:"flex bg-muted rounded-lg p-1 mr-4",children:[(0,a.jsx)("button",{onClick:()=>r("editor"),className:`px-3 py-1 rounded-md text-xs font-medium transition-all ${"editor"===s?"bg-background text-foreground shadow-sm":"text-muted-foreground hover:text-foreground"}`,children:"Editor"}),(0,a.jsx)("button",{onClick:()=>r("executions"),className:`px-3 py-1 rounded-md text-xs font-medium transition-all ${"executions"===s?"bg-background text-foreground shadow-sm":"text-muted-foreground hover:text-foreground"}`,children:"Executions"})]}),(0,a.jsxs)(eE.$,{variant:"ghost",size:"sm",onClick:()=>o(!n),className:n?"bg-accent":"",children:[(0,a.jsx)(Y.A,{className:"h-4 w-4 mr-2"}),"Logs"]}),(0,a.jsx)("div",{className:"w-px h-6 bg-border mx-1"}),(0,a.jsxs)(eE.$,{variant:"outline",size:"sm",onClick:l,className:i?"border-primary/50 text-primary hover:bg-primary/10":"",children:[(0,a.jsx)(q.A,{className:"h-3 w-3 mr-2"}),i?"Active":"Activate"]}),(0,a.jsx)(eE.$,{size:"sm",variant:"outline",onClick:d,disabled:c,className:"saved"!==u||m?"":"border-green-500/50 text-green-600",children:c?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"h-3 w-3 mr-2 animate-spin rounded-full border-2 border-primary border-t-transparent"}),"Saving..."]}):"saved"!==u||m?"error"===u?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(tl.A,{className:"h-3 w-3 mr-2"}),"Retry"]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(tl.A,{className:"h-3 w-3 mr-2"}),m?"Save*":"Save"]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(tl.A,{className:"h-3 w-3 mr-2"}),"Saved"]})}),(0,a.jsx)(eE.$,{variant:"ghost",size:"sm",children:(0,a.jsx)(ee.A,{className:"h-4 w-4"})})]})]}));tc.displayName="CanvasHeader";var tu=s(66614),tm=s(83931);let tx=(0,r.memo)(({isOpen:e,onClose:t})=>(0,a.jsx)(o.N,{children:e&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(u.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-background/80 backdrop-blur-sm z-40",onClick:t}),(0,a.jsxs)(u.P.div,{initial:{x:-280},animate:{x:0},exit:{x:-280},transition:{type:"spring",damping:30,stiffness:300},className:"fixed left-0 top-0 bottom-0 w-64 bg-card border-r border-border z-50 flex flex-col",children:[(0,a.jsxs)("div",{className:"p-4 border-b border-border/50 flex items-center justify-between bg-muted/20",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"h-9 w-9 rounded-xl bg-gradient-to-br from-primary to-primary/60 flex items-center justify-center shadow-lg shadow-primary/20",children:(0,a.jsx)(q.A,{className:"h-5 w-5 text-primary-foreground fill-white"})}),(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsx)("span",{className:"font-bold text-base leading-none tracking-tight",children:"Antigravity"}),(0,a.jsx)("span",{className:"text-[10px] text-muted-foreground uppercase tracking-wider font-medium mt-1",children:"Workspace"})]})]}),(0,a.jsx)("button",{onClick:t,className:"p-1.5 hover:bg-accent rounded-lg transition-all text-muted-foreground hover:text-foreground",children:(0,a.jsx)(A.A,{className:"h-4 w-4"})})]}),(0,a.jsxs)("nav",{className:"flex-1 p-3 space-y-1.5",children:[(0,a.jsxs)("a",{href:"/dashboard",className:"flex items-center gap-3 px-3 py-2.5 rounded-xl text-sm font-medium text-muted-foreground hover:bg-muted/50 hover:text-foreground transition-all group",children:[(0,a.jsx)(tu.A,{className:"h-4 w-4 text-muted-foreground/70 group-hover:text-foreground transition-colors"}),(0,a.jsx)("span",{children:"Dashboard"})]}),(0,a.jsxs)("a",{href:"/workflows",className:"flex items-center gap-3 px-3 py-2.5 rounded-xl text-sm font-medium bg-gradient-to-r from-primary/10 to-transparent text-primary transition-all border border-primary/10 shadow-sm",children:[(0,a.jsx)(tm.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:"Workflows"})]}),(0,a.jsxs)("a",{href:"/settings",className:"flex items-center gap-3 px-3 py-2.5 rounded-xl text-sm font-medium text-muted-foreground hover:bg-muted/50 hover:text-foreground transition-all group",children:[(0,a.jsx)(X.A,{className:"h-4 w-4 text-muted-foreground/70 group-hover:text-foreground transition-colors"}),(0,a.jsx)("span",{children:"Settings"})]})]})]})]})}));tx.displayName="NavSidebar";var tp=s(7810),th=s(3424);function tg({onLoadWorkflow:e}){let[t,s]=(0,r.useState)(!1),{data:n=[],isLoading:l}=(0,i.n_)(),d=(0,i.Q8)(),c=l||d.isPending;return(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("button",{onClick:()=>s(!t),className:`p-2 rounded-lg transition-all hover:scale-110 active:scale-95 group ${t?"bg-amber-100 text-amber-600 ring-1 ring-amber-200":"text-muted-foreground hover:text-foreground hover:bg-accent"}`,title:"Debug Workflows",children:(0,a.jsx)(th.A,{className:`h-5 w-5 transition-transform duration-300 ${t?"rotate-12 scale-110":""}`})}),(0,a.jsx)(o.N,{children:t&&(0,a.jsxs)(u.P.div,{initial:{opacity:0,x:-10,scale:.95},animate:{opacity:1,x:0,scale:1},exit:{opacity:0,x:-10,scale:.95},className:"absolute top-0 left-12 w-72 bg-card/98 backdrop-blur-2xl border border-border rounded-2xl shadow-2xl overflow-hidden z-50 origin-left",children:[(0,a.jsx)("div",{className:"p-3 border-b border-border bg-slate-50 dark:bg-slate-800/50",children:(0,a.jsxs)("h3",{className:"text-[10px] font-bold uppercase tracking-widest text-muted-foreground flex items-center gap-2",children:[(0,a.jsx)(e3.A,{className:"h-3 w-3"}),"Dummy Workflows (",n.length,")"]})}),(0,a.jsx)("div",{className:"max-h-80 overflow-y-auto p-1",children:c?(0,a.jsx)("div",{className:"flex items-center justify-center py-8",children:(0,a.jsx)(f.A,{className:"h-5 w-5 animate-spin text-primary"})}):n.length>0?n.map(t=>(0,a.jsxs)("button",{onClick:()=>{d.mutate(t,{onSuccess:t=>{e(t),s(!1)}})},className:"w-full text-left px-3 py-2 text-xs hover:bg-slate-100 dark:hover:bg-slate-800 rounded-lg transition-colors flex items-center justify-between group",children:[(0,a.jsx)("span",{className:"truncate pr-2",children:t.replace(".json","")}),(0,a.jsx)("span",{className:"text-[9px] opacity-0 group-hover:opacity-100 bg-primary/10 text-primary px-1.5 py-0.5 rounded uppercase font-bold transition-opacity",children:"Load"})]},t)):(0,a.jsx)("div",{className:"p-4 text-center text-xs text-muted-foreground italic",children:"No dummy workflows found"})})]})})]})}let tf=(0,r.memo)(({showChat:e,setShowChat:t,onLoadWorkflow:s})=>(0,a.jsxs)("div",{className:"w-14 border-r border-border bg-card/50 flex flex-col items-center py-4 gap-4 z-10",children:[(0,a.jsx)("button",{onClick:()=>window.location.href="/workflows/new",title:"New Workflow",className:"p-2 rounded-xl bg-primary text-primary-foreground shadow-lg hover:scale-105 transition-transform",children:(0,a.jsx)(x.A,{className:"h-5 w-5"})}),(0,a.jsx)("div",{className:"w-8 h-[1px] bg-border"}),(0,a.jsx)("button",{onClick:()=>t(!e),className:`p-2 rounded-lg transition-colors ${e?"bg-accent text-primary":"text-muted-foreground hover:text-foreground hover:bg-accent"}`,children:(0,a.jsx)(K.A,{className:"h-5 w-5"})}),(0,a.jsx)("button",{className:"p-2 rounded-lg text-muted-foreground hover:text-foreground hover:bg-accent transition-colors",children:(0,a.jsx)(Q.A,{className:"h-5 w-5"})}),(0,a.jsx)(tg,{onLoadWorkflow:s}),(0,a.jsxs)("div",{className:"mt-auto flex flex-col gap-4",children:[(0,a.jsx)("button",{className:"p-2 rounded-lg text-muted-foreground hover:text-foreground hover:bg-accent transition-colors",children:(0,a.jsx)(tp.A,{className:"h-5 w-5"})}),(0,a.jsx)("button",{className:"p-2 rounded-lg text-muted-foreground hover:text-foreground hover:bg-accent transition-colors",children:(0,a.jsx)(X.A,{className:"h-5 w-5"})})]})]}));tf.displayName="SidebarControls";var tb=s(61878);let ty={"manual.trigger":eA.A,"schedule.cron":M.A,"webhook.receive":O.A,"whatsapp.trigger":ei,"email.trigger":eC.A,"rss.trigger":W.A,"ai.llm":en.A,"ai.agent":K.A,"data.set":eS.A,"data.transform":er.A,"slack.send":J.A,"whatsapp.send":ei,"google_sheets.write":eo,"google_sheets.read":eo,"http.request":G.A,"code.python":el,"code.javascript":Y.A,"email.send":B.A,"discord.send":B.A,"condition.if":eh.A,"logic.parallel":eg.A,"logic.merge":ey.A,"logic.delay":ev.A,"logic.loop":ej.A,"logic.switch":er.A,"logic.pause":y.A,"execution.pause":y.A,"utility.noop":ew.A},tv=(0,r.memo)(({isOpen:e,onClose:t,searchQuery:s,setSearchQuery:r,availableNodeTypes:n,onAddNode:i})=>(0,a.jsx)(o.N,{children:e&&(0,a.jsxs)(u.P.div,{initial:{x:320,opacity:0},animate:{x:0,opacity:1},exit:{x:320,opacity:0},className:"absolute right-4 top-4 bottom-4 w-80 bg-card/90 backdrop-blur-xl border border-border rounded-2xl shadow-2xl overflow-hidden flex flex-col z-20",children:[(0,a.jsxs)("div",{className:"p-4 bg-background/50 backdrop-blur-md border-b border-border flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-bold text-lg",children:"Add Node"}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"Select a step to add to your flow"})]}),(0,a.jsx)(eE.$,{variant:"ghost",size:"icon",onClick:t,className:"rounded-full shadow-sm hover:bg-background/80 transition-all",children:(0,a.jsx)(A.A,{className:"h-4 w-4"})})]}),(0,a.jsxs)("div",{className:"flex-1 flex flex-col min-h-0 overflow-hidden",children:[(0,a.jsx)("div",{className:"p-4 border-b border-border bg-background/20",children:(0,a.jsxs)("div",{className:"relative group",children:[(0,a.jsx)(tb.A,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground group-focus-within:text-primary transition-colors"}),(0,a.jsx)("input",{type:"text",autoFocus:!0,value:s,onChange:e=>r(e.target.value),placeholder:"Search tools & triggers...",className:"w-full bg-background/50 border border-border rounded-xl pl-10 pr-4 py-2.5 text-sm placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-primary/20 focus:border-primary transition-all shadow-inner"})]})}),(0,a.jsx)("div",{className:"flex-1 overflow-y-auto p-4 space-y-8 custom-scrollbar",children:["Trigger","Action","Logic","Transform"].map(e=>{let t=(n||[]).filter(t=>(t.category===e||"Action"===e&&"action"===t.type||"Trigger"===e&&"trigger"===t.type)&&("Trigger"===e?"schedule.cron"===t.name:""===s||t.label?.toLowerCase().includes(s.toLowerCase())||t.description?.toLowerCase().includes(s.toLowerCase())));return 0===t.length?null:(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 px-1",children:[(0,a.jsx)("span",{className:"text-[10px] font-bold text-muted-foreground/60 uppercase tracking-[0.2em]",children:e}),(0,a.jsx)("div",{className:"h-[1px] flex-1 bg-border/40"})]}),(0,a.jsx)("div",{className:"grid grid-cols-1 gap-2.5",children:t.map(e=>{let t;return(0,a.jsxs)("button",{className:"flex items-center gap-4 p-3.5 rounded-2xl bg-background/40 border border-border/40 hover:border-primary/40 hover:bg-background/80 hover:shadow-lg transition-all text-left group relative overflow-hidden",onClick:()=>{i(e),r("")},children:[(0,a.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-primary/5 via-transparent to-transparent opacity-0 group-hover:opacity-100 transition-opacity"}),(0,a.jsx)("div",{className:`
                                                        relative z-10 p-2.5 rounded-xl transition-all shadow-sm group-hover:scale-110 group-hover:shadow-md
                                                        ${"trigger"===e.type?"bg-rose-500/10 text-rose-500":"bg-indigo-500/10 text-indigo-500"}
                                                    `,children:(t=((e,t="action")=>ty[e]||("trigger"===t?q.A:X.A))(e.name,e.type),(0,a.jsx)(t,{className:"h-5 w-5"}))}),(0,a.jsxs)("div",{className:"relative z-10 flex-1 min-w-0",children:[(0,a.jsxs)("div",{className:"text-sm font-semibold text-foreground group-hover:text-primary transition-colors flex items-center justify-between",children:[e.label,(0,a.jsx)(ta.A,{className:"h-3 w-3 opacity-0 -translate-x-2 group-hover:opacity-100 group-hover:translate-x-0 transition-all text-primary"})]}),(0,a.jsx)("div",{className:"text-xs text-muted-foreground line-clamp-1 group-hover:text-muted-foreground/80 transition-colors",children:e.description})]})]},e.name)})})]},e)})})]})]})}));tv.displayName="NodePanel";var tj=s(25074),tw=s(50858),tN=s(93367),tk=s(22651),tA=s(32880),tC=s(69220);let tS=(0,r.memo)(({nodes:e,edges:t,onNodesChange:s,onEdgesChange:r,onConnect:o,onNodeClick:i,onNodeDoubleClick:l,onNodeDrag:d,onNodeDragStop:c,onPaneClick:m,nodeTypes:p,edgeTypes:h,defaultEdgeOptions:g,canvasMode:y,setCanvasMode:v,onSelectionChange:j,setShowNodePanel:w,isExecuting:N,onExecute:k,zoomIn:A,zoomOut:C,fitView:S})=>(0,a.jsx)("div",{className:"flex-1 relative bg-background flex flex-col h-full",children:(0,a.jsx)("div",{className:"flex-1 relative h-full",children:(0,a.jsxs)(n.Gc,{nodes:e,edges:t,onNodesChange:s,onEdgesChange:r,onConnect:o,onNodeClick:i,onNodeDoubleClick:l,onNodeDrag:d,onNodeDragStop:c,onPaneClick:m,nodeTypes:p,edgeTypes:h,defaultEdgeOptions:g,fitView:!0,className:"bg-background",edgesUpdatable:!0,edgesFocusable:!0,nodesDraggable:!0,nodesConnectable:!0,elementsSelectable:!0,selectionOnDrag:"select"===y,panOnDrag:"pan"===y||[1,2],selectionMode:n.Qc.Partial,multiSelectionKeyCode:["Meta","Control"],onSelectionChange:j,children:[(0,a.jsx)(tj.V,{variant:tj._.Dots,gap:16,size:1.5,color:"#d1d5db",className:"dark:opacity-30"}),(0,a.jsx)(n.Zk,{position:"bottom-left",className:"ml-4 mb-4",children:(0,a.jsxs)("div",{className:"flex flex-col items-center gap-2",children:[(0,a.jsxs)("div",{className:"flex flex-col items-center gap-1 p-1 bg-card/90 backdrop-blur-xl border border-border rounded-lg shadow-lg",children:[(0,a.jsx)("button",{onClick:()=>v("select"),className:`p-1.5 rounded-md transition-all active:scale-95 ${"select"===y?"bg-primary text-primary-foreground shadow-sm":"text-muted-foreground hover:text-foreground hover:bg-accent"}`,title:"Select Mode (V)",children:(0,a.jsx)(tw.A,{className:"h-3.5 w-3.5"})}),(0,a.jsx)("button",{onClick:()=>v("pan"),className:`p-1.5 rounded-md transition-all active:scale-95 ${"pan"===y?"bg-primary text-primary-foreground shadow-sm":"text-muted-foreground hover:text-foreground hover:bg-accent"}`,title:"Pan Mode (H)",children:(0,a.jsx)(tN.A,{className:"h-3.5 w-3.5"})})]}),(0,a.jsxs)("div",{className:"flex flex-col items-center gap-1 p-1 bg-card/90 backdrop-blur-xl border border-border rounded-lg shadow-lg",children:[(0,a.jsx)("button",{onClick:A,className:"p-1 hover:bg-accent rounded-md text-muted-foreground hover:text-foreground transition-all active:scale-95",title:"Zoom In",children:(0,a.jsx)(tk.A,{className:"h-3.5 w-3.5"})}),(0,a.jsx)("button",{onClick:S,className:"p-1 hover:bg-accent rounded-md text-muted-foreground hover:text-foreground transition-all active:scale-95",title:"Fit View",children:(0,a.jsx)(tA.A,{className:"h-3.5 w-3.5"})}),(0,a.jsx)("button",{onClick:C,className:"p-1 hover:bg-accent rounded-md text-muted-foreground hover:text-foreground transition-all active:scale-95",title:"Zoom Out",children:(0,a.jsx)(tC.A,{className:"h-3.5 w-3.5"})})]})]})}),(0,a.jsx)(n.Zk,{position:"top-right",className:"mr-4 mt-4",children:(0,a.jsx)(eE.$,{onClick:()=>w(!0),className:"p-0 h-10 w-10 rounded-xl shadow-xl hover:scale-105 transition-transform",children:(0,a.jsx)(x.A,{className:"h-5 w-5"})})}),(0,a.jsx)(n.Zk,{position:"bottom-center",className:"mb-6",children:(0,a.jsx)(u.P.div,{whileHover:{scale:1.02},whileTap:{scale:.98},children:(0,a.jsxs)(eE.$,{onClick:k,disabled:N,className:"rounded-xl px-6 py-2.5 bg-primary hover:bg-primary/90 border-b-2 border-primary-dark shadow-xl hover:shadow-primary/20 h-auto font-semibold text-sm flex items-center gap-2.5 transition-all duration-150 active:border-b-0 active:translate-y-[1px]",children:[N?(0,a.jsx)(f.A,{className:"h-4 w-4 animate-spin"}):(0,a.jsx)(b.A,{className:"h-3.5 w-3.5 fill-current"}),N?"Running...":"Execute Workflow"]})})}),0===e.length&&(0,a.jsx)("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:(0,a.jsxs)(u.P.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"flex flex-col items-center gap-3 pointer-events-auto",children:[(0,a.jsxs)("button",{onClick:()=>w(!0),className:"group flex flex-col items-center gap-2 p-8 rounded-xl border-2 border-dashed border-border hover:border-primary hover:bg-primary/5 transition-all",children:[(0,a.jsx)("div",{className:"p-4 rounded-full bg-muted group-hover:bg-primary/10 transition-colors",children:(0,a.jsx)(x.A,{className:"h-8 w-8 text-muted-foreground group-hover:text-primary"})}),(0,a.jsx)("span",{className:"text-sm font-medium",children:"Add first step..."})]}),(0,a.jsx)("a",{href:"/workflows",className:"text-xs text-primary hover:underline",children:"or start from a template"})]})})]})})}));tS.displayName="FlowCanvas";let t_={custom:function({id:e,sourceX:t,sourceY:s,targetX:r,targetY:o,sourcePosition:i,targetPosition:l,style:d={},markerEnd:c}){let{setEdges:u,setNodes:m,getEdge:p}=(0,n.VH)(),[h,g,f]=(0,n.Fp)({sourceX:t,sourceY:s,sourcePosition:i,targetX:r,targetY:o,targetPosition:l});return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("path",{id:e,style:{...d,strokeWidth:3,stroke:"#9ca3af"},className:"react-flow__edge-path",d:h,markerEnd:c}),(0,a.jsx)(n.rV,{children:(0,a.jsx)("div",{style:{position:"absolute",transform:`translate(-50%, -50%) translate(${g}px,${f}px)`,fontSize:12,pointerEvents:"all"},className:"nodrag nopan",children:(0,a.jsxs)("div",{className:"flex items-center gap-1.5 p-1 bg-background/80 backdrop-blur-sm border border-border rounded-full shadow-sm opacity-0 hover:opacity-100 transition-opacity duration-200",children:[(0,a.jsx)("button",{className:"w-5 h-5 flex items-center justify-center bg-primary text-primary-foreground rounded-full hover:scale-110 transition-transform",onClick:t=>{t.stopPropagation();let s=new CustomEvent("addNodeBetween",{detail:{edgeId:e,x:g,y:f}});window.dispatchEvent(s)},title:"Add node between",children:(0,a.jsx)(x.A,{size:12,strokeWidth:3})}),(0,a.jsx)("button",{className:"w-5 h-5 flex items-center justify-center bg-destructive text-destructive-foreground rounded-full hover:scale-110 transition-transform",onClick:t=>{t.stopPropagation(),u(t=>t.filter(t=>t.id!==e))},title:"Delete connection",children:(0,a.jsx)(v.A,{size:12,strokeWidth:3})})]})})})]})}},tE={type:"custom",animated:!1,style:{stroke:"#9ca3af",strokeWidth:3},markerEnd:{type:n.TG.ArrowClosed,color:"#9ca3af",width:14,height:14},deletable:!0};function t$({workflowId:e,workflowName:t,initialNodes:s=[],initialEdges:c=[],onNodesChange:u,onEdgesChange:m,onMetaChange:x,onExecutionChange:p,onObservabilityChange:h,onAiMetadataChange:g,onSave:f,saveStatus:b,isDirty:y,isSaving:v,onBack:j}){let[w,N]=(0,r.useState)(!1),[k,A]=(0,r.useState)(!1),[C,S]=(0,r.useState)("select"),[_,E]=(0,r.useState)(""),$=(0,r.useMemo)(()=>ts,[]),P=(0,r.useMemo)(()=>t_,[]),{nodes:D,edges:T,onNodesChange:z,onEdgesChange:I,onConnect:F,onNodeClick:R,onNodeDoubleClick:M,onNodeDrag:O,onNodeDragStop:L,selectedNode:q,setSelectedNode:W,activeTab:H,setActiveTab:B,isActive:V,toggleActive:U,showNodePanel:X,setShowNodePanel:K,showChat:J,setShowChat:Q,isDetailsModalOpen:G,setIsDetailsModalOpen:Y,undo:Z,redo:ee,copyNode:et,pasteNode:es,availableNodeTypes:ea,onNodeUpdate:er,onNodeDelete:en,handleAddNode:eo,chatMessage:ei,setChatMessage:el,chatHistory:ed,isAiLoading:ec,handleSendChat:eu,fitView:em,zoomIn:ex,zoomOut:ep,handleExecute:eh,handleExecuteNode:eg,isExecuting:ef,logs:eb,setLogs:ey,workflowMeta:ev,updateWorkflowMeta:ej,loadV2Workflow:ew,setSplitEdge:eN,setPendingConnection:ek,onSelectionChange:eA,saveStatus:eC,isDirty:eS,isSaving:e_,handleSave:eE}=function({initialNodes:e=[],initialEdges:t=[],workflowId:s}){let[a,o,c]=(0,n.ck)(e),[u,m,x]=(0,n.fM)(t),{fitView:p,zoomIn:h,zoomOut:g,getNodes:f}=(0,n.VH)(),{toast:b}=(0,l.dj)(),{data:y=[]}=(0,i.Tj)(),[v,j]=(0,r.useState)({items:[],index:-1}),w=(0,r.useRef)(!1),[N,k]=(0,r.useState)(null),A=(0,r.useCallback)((e,t)=>{if(w.current){w.current=!1;return}let s=JSON.parse(JSON.stringify({nodes:e,edges:t}));j(e=>{let t=[...e.items.slice(0,e.index+1),s];return{items:t.slice(-50),index:Math.min(t.length-1,49)+1}})},[]),C=(0,r.useCallback)(()=>{j(e=>{if(e.index>0){w.current=!0;let t=e.index-1,s=e.items[t];return o(s.nodes),m(s.edges),{...e,index:t}}return e})},[o,m]),S=(0,r.useCallback)(()=>{j(e=>{if(e.index<e.items.length-1){w.current=!0;let t=e.index+1,s=e.items[t];return o(s.nodes),m(s.edges),{...e,index:t}}return e})},[o,m]),[_,E]=(0,r.useState)("editor"),[$,P]=(0,r.useState)(!1),[D,T]=(0,r.useState)(!1),[z,I]=(0,r.useState)(null),[F,R]=(0,r.useState)(!1),{data:M}=(0,i.j3)(s||""),[O,L]=(0,r.useState)(null),[q,W]=(0,r.useState)(null),[H,B]=(0,r.useState)(null),[V,U]=(0,r.useState)(null),[X,K]=(0,r.useState)(!1),J=(0,i.Ij)(),Q=(0,i.fQ)(),G=(0,r.useCallback)(e=>{L(e.meta||null),W(e.execution||null),B(e.observability||null),U(e.ai||null),K(e.meta?.status==="active");let t=e.graph?.nodes?.map(e=>{let t=e.spec?.node_name;return y?.find(e=>e.name===t),e.spec&&e.ui&&e.ui.position||console.error("CRITICAL: Malformed node data from backend",e),{id:e.id,type:t&&"unknown"!==t?t:"default",position:e.ui.position,data:{id:e.id,label:e.ui.label,node_name:t,type:e.kind,config:e.spec.config,settings:e.spec.settings,spec:e.spec,workflowId:s,executeNode:t=>eF(t||e.id)}}})||[],a=e.graph?.edges?.map(e=>({...e,id:e.id||`edge-${e.source}-${e.target}`,sourceHandle:e.source_handle||e.sourceHandle||e.condition?.toLowerCase()||void 0,targetHandle:e.target_handle||e.targetHandle||void 0,label:e.condition}))||[];o(t),m(a),A(t,a),setTimeout(()=>p(),100)},[s,p,o,m,A,y]),Y=(0,r.useRef)(null);(0,r.useEffect)(()=>{M&&s!==Y.current&&(G(M),Y.current=s||"new")},[M,s,G]);let Z=(0,r.useCallback)(e=>{m(t=>{let s=(0,n.rN)({...e,type:"custom",animated:!1,style:{stroke:"#9ca3af",strokeWidth:3},markerEnd:{type:n.TG.ArrowClosed,color:"#9ca3af",width:14,height:14},deletable:!0},t);return A(a,s),s})},[a,m,A]),ee=(0,r.useCallback)((e,t)=>{A(a,u)},[a,u,A]),et=(0,r.useCallback)((e,t)=>{I(t),T(!1)},[]),es=(0,r.useCallback)((e,t)=>{I(t),R(!0)},[]),ea=(0,r.useCallback)((e,t)=>{o(s=>{let a=s.map(s=>{if(s.id===e){let a={...s.data,...t};a.spec={...a.spec,config:a.config,settings:a.settings};let r={...s,data:a};return I(t=>t?.id===e?r:t),r}return s});return A(a,u),a})},[u,o,A,I]),er=(0,r.useCallback)(e=>{let t=a.filter(t=>t.id!==e),s=u.filter(t=>t.source!==e&&t.target!==e);o(t),m(s),A(t,s),z?.id===e&&I(null)},[a,u,o,m,A,z]),[en,eo]=(0,r.useState)(null),[ei,el]=(0,r.useState)(null),ed=(0,r.useCallback)(e=>{let t=e.inputs?.reduce((e,t)=>(void 0!==t.default&&(e[t.name]=t.default),e),{})||{},r={id:`${e.name}-${Date.now()}`,type:e.name,position:{x:500,y:300},data:{id:`${e.name}-${Date.now()}`,label:e.label,type:e.type,node_name:e.name,config:t,spec:{node_name:e.name,runtime:{type:"internal"},config:t,settings:{}},workflowId:s,executeNode:e=>eF(e||r.id)}};r.data.id=r.id;let n=[...a,r],i=[...u];if(en){let e=u.find(e=>e.id===en.edgeId);e&&(r.position={x:en.x-70,y:en.y-70},i=u.filter(e=>e.id!==en.edgeId).concat([{id:`edge-${e.source}-${r.id}`,source:e.source,target:r.id,type:"custom"},{id:`edge-${r.id}-${e.target}`,source:r.id,target:e.target,type:"custom"}])),eo(null)}else ei&&(r.position={x:ei.x+150,y:ei.y-40},i=[...u,{id:`edge-${ei.source}-${r.id}`,source:ei.source,sourceHandle:ei.handleId,target:r.id,type:"custom"}],el(null));o(n),m(i),A(n,i),T(!1)},[a,u,en,ei,s,o,m,A]),ec=(0,i.QB)(),[eu,em]=(0,r.useState)(""),[ex,ep]=(0,r.useState)(!1),[eh,eg]=(0,r.useState)([]),ef=(0,r.useCallback)(async()=>{if(eu.trim()){em(""),eg(e=>[...e,{role:"user",message:eu}]),ep(!0);try{let e=a.map(e=>({id:e.id,kind:e.data?.type||"action",ui:{label:e.data?.label||"Node",icon:e.data?.spec?.ui?.icon,position:e.position},spec:{...e.data?.spec,config:e.data?.config||{},settings:e.data?.settings||{}}})),t=u.map(e=>({id:e.id,source:e.source,target:e.target,sourceHandle:e.sourceHandle,targetHandle:e.targetHandle,condition:"string"==typeof e.label?e.label:void 0})),r=await ec.mutateAsync({prompt:eu,current_nodes:e,current_edges:t}),n=r.suggestions?.join("\n")||"Workflow updated with generated nodes.";eg(e=>[...e,{role:"ai",message:n}]),r.nodes&&r.edges&&(o(e=>[...e,...r.nodes.map((e,t)=>({id:e.id,type:e.spec.node_name,position:e.ui.position,data:{id:e.id,label:e.ui.label,type:e.kind,node_name:e.spec.node_name,config:e.spec.config,settings:e.spec.settings,spec:e.spec,workflowId:s,executeNode:t=>eF(t||e.id)}}))]),m(e=>[...e,...r.edges.map(e=>({id:e.id,source:e.source,target:e.target,label:e.condition}))]))}catch(e){eg(e=>[...e,{role:"ai",message:"Error generating workflow."}])}finally{ep(!1)}}},[eu,a,u,ec,G]),[eb,ey]=(0,r.useState)([]),[ev,ej]=(0,r.useState)([]),ew=(0,r.useCallback)(({nodes:e})=>{ey(e),1===e.length?I(e[0]):0===e.length&&(I(null),T(!1))},[]),eN=(0,r.useCallback)(()=>{0!==eb.length&&(ej(JSON.parse(JSON.stringify(eb))),b({title:"Copied",description:`${eb.length} node${eb.length>1?"s":""} copied to clipboard`}))},[eb,b]),ek=(0,r.useCallback)(()=>{if(0===ev.length)return;let e=Date.now(),t=ev.map(t=>{let s=`${t.data.node_name}-${e}-${Math.random().toString(36).substr(2,6)}`;return{...t,id:s,position:{x:t.position.x+50,y:t.position.y+50},selected:!0,data:{...t.data,id:s}}});t.forEach(e=>e.data.id=e.id);let s=[...a.map(e=>({...e,selected:!1})),...t];o(s),ey(t),1===t.length&&I(t[0]),A(s,u),b({title:"Pasted",description:`Pasted ${t.length} node${t.length>1?"s":""}`})},[ev,a,u,o,b,A]),eA=(0,i.AM)(),eC=(0,i.H8)(),[eS,e_]=(0,r.useState)(!1),[eE,e$]=(0,r.useState)(null),{logs:eP,setLogs:eD,handleMessage:eT}=function(e,t,s){let[a,n]=(0,r.useState)([]),o=(0,r.useRef)(e);(0,r.useEffect)(()=>{o.current=e},[e]);let i=(0,r.useCallback)(e=>{if(!e)return;let a=new Date().toISOString(),r=o.current;if("node_started"===e.type){let{node_id:s,input_data:o}=e.data;t(e=>e.map(e=>e.id===s||e.data.node_id===s?{...e,data:{...e.data,status:"running"}}:e));let i=r.find(e=>e.id===s||e.data.node_id===s);n(e=>[...e,{id:Math.random().toString(36).substring(7),timestamp:a,type:"info",message:`Starting node: ${i?.data?.label||s}`,nodeId:s,data:o}])}else if("node_completed"===e.type){let{node_id:s,result:o}=e.data;t(e=>e.map(e=>e.id===s||e.data.node_id===s?{...e,data:{...e.data,status:"success",output:o}}:e));let i=r.find(e=>e.id===s||e.data.node_id===s);n(e=>[...e,{id:Math.random().toString(36).substring(7),timestamp:a,type:"success",message:`Node completed: ${i?.data?.label||s}`,nodeId:s,data:o}])}else if("node_failed"===e.type){let{node_id:o,error:i,error_category:l,error_suggestion:d,is_retryable:c}=e.data;t(e=>e.map(e=>e.id===o||e.data.node_id===o?{...e,data:{...e.data,status:"failed",error:i,errorCategory:l,errorSuggestion:d}}:e));let u=r.find(e=>e.id===o||e.data.node_id===o),m=`Node failed: ${u?.data?.label||o}`;l&&"unknown"!==l&&(m+=` [${l.replace(/_/g," ")}]`),m+=`. ${i}`,n(e=>[...e,{id:Math.random().toString(36),timestamp:a,type:"error",message:m,nodeId:o,data:d?{suggestion:d,is_retryable:c}:void 0}]),d&&s({title:`💡 Suggestion`,description:d,variant:"default"})}else if("node_retrying"===e.type){let{node_id:t,attempt:s,max_attempts:o,delay_seconds:i}=e.data,l=r.find(e=>e.id===t||e.data.node_id===t);n(e=>[...e,{id:Math.random().toString(36),timestamp:a,type:"warning",message:`Retrying node: ${l?.data?.label||t} (attempt ${s}/${o}, waiting ${i}s)`,nodeId:t}])}else if("node_continued"===e.type){let{node_id:s,error:o}=e.data,i=r.find(e=>e.id===s||e.data.node_id===s);t(e=>e.map(e=>e.id===s||e.data.node_id===s?{...e,data:{...e.data,status:"warning",error:o}}:e)),n(e=>[...e,{id:Math.random().toString(36),timestamp:a,type:"warning",message:`Node failed but workflow continues: ${i?.data?.label||s}. Error: ${o}`,nodeId:s}])}else"workflow_completed"===e.type?(s({title:"Workflow Completed",description:"All nodes executed successfully."}),n(e=>[...e,{id:Math.random().toString(36),timestamp:a,type:"success",message:"Workflow execution completed successfully."}])):"workflow_failed"===e.type?(s({title:"Workflow Failed",description:e.data.error,variant:"destructive"}),n(t=>[...t,{id:Math.random().toString(36),timestamp:a,type:"error",message:`Workflow execution failed. Error: ${e.data.error}`}])):"workflow_started"===e.type&&n(e=>[...e,{id:Math.random().toString(36),timestamp:a,type:"info",message:"Workflow execution started."}])},[t,s]);return{logs:a,setLogs:n,handleMessage:i}}(a,o,b),{isConnected:ez}=function(e,t){let[s,a]=(0,r.useState)(!1),n=(0,r.useRef)(null),o=(0,r.useRef)(t);return(0,r.useEffect)(()=>{o.current=t},[t]),(0,r.useEffect)(()=>{if(!e)return;n.current&&n.current.close();let t=new WebSocket("http://localhost:5678".replace("http://","ws://").replace("https://","wss://")+`/api/v1/workflows/ws/${e}`);return n.current=t,t.onopen=()=>{d.X6.debug("Connected",{executionId:e}),a(!0)},t.onmessage=e=>{try{let t=JSON.parse(e.data);o.current&&o.current(t)}catch(e){d.X6.error("Failed to parse message",e)}},t.onclose=()=>{d.X6.debug("Disconnected",{executionId:e}),a(!1)},t.onerror=e=>{d.X6.error("Connection error",e)},()=>{t.close()}},[e]),{isConnected:s}}(eE,(0,r.useCallback)(e=>{eT(e),("workflow_completed"===e.type||"workflow_failed"===e.type)&&e_(!1)},[eT])),eI=(0,r.useCallback)(async()=>{if(s){e_(!0),eD([]),o(e=>e.map(e=>({...e,data:{...e.data,status:"pending"}})));try{let e=await eA.mutateAsync(s);e$(e.id),b({title:"Workflow Started",description:"The workflow execution has been queued."})}catch(e){e_(!1),b({title:"Execution Failed",description:"Failed to start workflow execution.",variant:"destructive"})}}},[s,eA,b,o,eD]),eF=(0,r.useCallback)(async(e,t,a={})=>{if(!s)return;e_(!0);let r=t||f().find(t=>t.id===e)?.data?.config||{};d.aw.debug(`Executing node ${e}`,{config:r,inputData:a}),o(t=>t.map(t=>t.id===e?{...t,data:{...t.data,status:"pending"}}:t));try{let t={input_data:a,config:r};d.aw.debug("Sending payload",t);let n=await eC.mutateAsync({workflowId:s,nodeId:e,inputData:t});o(t=>{let s=t.map(t=>t.id===e?{...t,data:{...t.data,status:"success",output:n,lastResult:n}}:t),a=s.find(t=>t.id===e);return a&&I(t=>t?.id===e?a:t),s}),e_(!1),b({title:"Node Executed",description:"The node execution completed successfully."})}catch(t){console.error("DEBUG: Node execution failed",t),o(s=>{let a=s.map(s=>s.id===e?{...s,data:{...s.data,status:"failed",error:t.message||"Failed to execute node."}}:s),r=a.find(t=>t.id===e);return r&&I(t=>t?.id===e?r:t),a}),e_(!1),b({title:"Node Execution Failed",description:t.message||"Failed to execute node.",variant:"destructive"})}},[s,eC,b,o,f]),{saveStatus:eR,isDirty:eM,isSaving:eO,handleSave:eL}=function({workflowId:e,nodes:t,edges:s,meta:a,execution:n,observability:o,aiMetadata:l,onSaveSuccess:d,onSaveError:c,autoSaveDelay:u=3e3,autoSaveEnabled:m=!0}){let[x,p]=(0,r.useState)("idle"),[h,g]=(0,r.useState)(!1),[f,b]=(0,r.useState)(""),y=(0,r.useRef)(null),v=(0,r.useRef)(null),j=(0,i.yM)(),w=(0,r.useCallback)(()=>JSON.stringify({nodes:t,edges:s,meta:a,execution:n,observability:o}),[t,s,a,n,o]);(0,r.useEffect)(()=>{let e=w();f&&e!==f&&(g(!0),p("idle"))},[t,s,a,n,o,f,w]);let N=(0,r.useCallback)(async(r=!1)=>{if(e){p("saving"),g(!1);try{let i=[],c=[],u=t.map(e=>{let t=e.data,s=t.node_name,a=e.position;return("unknown"===s||"default"===s)&&i.push({id:e.id,name:s}),a||c.push(e.id),{id:e.id,kind:t.type,ui:{label:t.label,position:a},spec:{...t.spec,node_name:s,config:t.config,settings:t.settings}}});if((i.length>0||c.length>0)&&r){let e={unknownTypeNodes:i,missingPositionNodes:c,sampleProblematicNodes:t.filter(e=>i.some(t=>t.id===e.id)||c.includes(e.id)).slice(0,3).map(e=>({id:e.id,type:e.type,hasPosition:!!e.position,dataKeys:Object.keys(e.data||{}),nodeName:e.data?.node_name,specNodeName:e.data?.spec?.node_name}))};console.warn("[Save] Skipping auto-save due to invalid node state:",e),p("idle");return}let m=s.map(e=>({id:e.id,source:e.source,target:e.target,sourceHandle:e.sourceHandle,targetHandle:e.targetHandle,condition:"string"==typeof e.label?e.label:void 0})),x={mode:"async",timeout_seconds:300,retry:{max_attempts:3,strategy:"exponential"},concurrency:1},h=n?{...x,...n,retry:{...x.retry,...n.retry||{}}}:x;await j.mutateAsync({workflow_id:e,meta:a||{id:e,name:"Workflow",status:"draft",version:"1.0.0",tags:[]},graph:{nodes:u,edges:m},execution:h,observability:o||{logging:!0,metrics:!0,tracing:!1},ai:l||{generated_by:"ui"}});let g=w();b(g),p("saved"),d?.(r),v.current&&clearTimeout(v.current),v.current=setTimeout(()=>{p("idle")},3e3)}catch(e){p("error"),g(!0),c?.(e)}}},[e,t,s,a,n,o,l,j,d,c,w]);return(0,r.useEffect)(()=>{if(h&&e&&m)return y.current&&clearTimeout(y.current),y.current=setTimeout(()=>{N(!0)},u),()=>{y.current&&clearTimeout(y.current)}},[h,e,N,u,m]),(0,r.useEffect)(()=>()=>{y.current&&clearTimeout(y.current),v.current&&clearTimeout(v.current)},[]),(0,r.useEffect)(()=>{!f&&t.length>0&&b(w())},[t,s,f,w]),{saveStatus:x,isDirty:h,isSaving:"saving"===x,handleSave:N}}({workflowId:s||"",nodes:a,edges:u,meta:O||void 0,execution:q||void 0,observability:H||void 0,aiMetadata:V||void 0,autoSaveEnabled:!0,autoSaveDelay:1500}),eq=(0,r.useCallback)(e=>{L(t=>t?{...t,...e}:t)},[]),eW=(0,r.useCallback)(async()=>{if(s)try{X?(await Q.mutateAsync(s),K(!1),eq({status:"inactive"}),b({title:"Workflow Deactivated",description:"Triggers are now disabled."})):(await J.mutateAsync(s),K(!0),eq({status:"active"}),b({title:"Workflow Activated",description:"Triggers are now listening!"}))}catch(e){b({title:"Error",description:"Failed to toggle workflow status.",variant:"destructive"})}},[s,X,J,Q,eq,b]);return{nodes:a,edges:u,onNodesChange:c,onEdgesChange:x,onConnect:Z,onNodeClick:et,onNodeDoubleClick:es,onNodeDragStop:ee,onNodeDrag:()=>{},selectedNode:z,setSelectedNode:I,selectedNodes:eb,onSelectionChange:ew,activeTab:_,setActiveTab:E,showChat:$,setShowChat:P,showNodePanel:D,setShowNodePanel:T,isDetailsModalOpen:F,setIsDetailsModalOpen:R,isActive:X,toggleActive:eW,workflowMeta:O,executionConfig:q,observabilityConfig:H,aiMetadata:V,updateWorkflowMeta:eq,loadV2Workflow:G,availableNodeTypes:y,onNodeUpdate:ea,onNodeDelete:er,handleAddNode:ed,undo:C,redo:S,copyNode:eN,pasteNode:ek,canUndo:v.index>0,canRedo:v.index<v.items.length-1,chatMessage:eu,setChatMessage:em,chatHistory:eh,isAiLoading:ex,handleSendChat:ef,fitView:p,zoomIn:h,zoomOut:g,handleExecute:eI,handleExecuteNode:eF,isExecuting:eS,logs:eP,setLogs:eD,splitEdge:en,setSplitEdge:eo,pendingConnection:ei,setPendingConnection:el,saveStatus:eR,isDirty:eM,isSaving:eO,handleSave:eL}}({initialNodes:s,initialEdges:c,workflowId:e}),e$=b||eC,eP=y||eS;return(0,a.jsxs)("div",{className:"h-screen flex flex-col bg-background text-foreground overflow-hidden",children:[(0,a.jsx)(tc,{workflowMeta:ev,updateWorkflowMeta:ej,activeTab:H,setActiveTab:B,showLogs:k,setShowLogs:A,isActive:V||!1,toggleActive:U,onSave:f||eE,isSaving:v||e_,saveStatus:e$,isDirty:eP,showNavSidebar:w,setShowNavSidebar:N}),(0,a.jsx)(tx,{isOpen:w,onClose:()=>N(!1)}),(0,a.jsxs)("div",{className:"flex-1 relative flex",children:[(0,a.jsx)(tf,{showChat:J,setShowChat:Q,onLoadWorkflow:ew}),(0,a.jsx)(tS,{nodes:D,edges:T,onNodesChange:z,onEdgesChange:I,onConnect:F,onNodeClick:R,onNodeDoubleClick:M,onNodeDrag:O,onNodeDragStop:L,onPaneClick:()=>{W(null),K(!1),E("")},nodeTypes:$,edgeTypes:P,defaultEdgeOptions:tE,canvasMode:C,setCanvasMode:S,onSelectionChange:eA,setShowNodePanel:K,isExecuting:ef,onExecute:eh,zoomIn:ex,zoomOut:ep,fitView:em}),(0,a.jsx)(o.N,{children:k&&(0,a.jsx)(tr,{logs:eb,isOpen:k,onClose:()=>A(!1),onClear:()=>ey([])})}),(0,a.jsx)(tv,{isOpen:X,onClose:()=>{K(!1),eN(null),ek(null)},searchQuery:_,setSearchQuery:E,availableNodeTypes:ea,onAddNode:eo}),(0,a.jsx)(o.N,{children:G&&q&&(0,a.jsx)(tt,{node:q,schema:(ea||[]).find(e=>{let t=q.data?.node_name||q.type;return e.name===t})||{name:q.type||"unknown",label:q.data?.label||"Node",type:q.data?.type||"action",icon:"Settings",description:"",inputs:[],outputs:[],category:"Custom"},allNodes:D,edges:T,onSelectNode:e=>{W(e),Y(!0)},onClose:()=>Y(!1),onUpdate:er,onExecute:eg,saveStatus:eC,isDirty:eS})})]}),(0,a.jsx)(ti,{isOpen:J,onClose:()=>Q(!1),messages:ed,isLoading:ec,input:ei,onInputChange:el,onSend:eu})]})}var tP=s(12651),tD=s(57420),tT=s(34152),tz=s(56018),tI=s(38992),tF=s(42854),tR=s(16950);let tM=tF.bL,tO=tF.l9;tF.YJ,tF.ZL,tF.Pb,tF.z6,r.forwardRef(({className:e,inset:t,children:s,...r},n)=>(0,a.jsxs)(tF.ZP,{ref:n,className:(0,m.cn)("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",t&&"pl-8",e),...r,children:[s,(0,a.jsx)(ta.A,{className:"ml-auto h-4 w-4"})]})).displayName=tF.ZP.displayName,r.forwardRef(({className:e,...t},s)=>(0,a.jsx)(tF.G5,{ref:s,className:(0,m.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...t})).displayName=tF.G5.displayName;let tL=r.forwardRef(({className:e,sideOffset:t=4,...s},r)=>(0,a.jsx)(tF.ZL,{children:(0,a.jsx)(tF.UC,{ref:r,sideOffset:t,className:(0,m.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...s})}));tL.displayName=tF.UC.displayName;let tq=r.forwardRef(({className:e,inset:t,...s},r)=>(0,a.jsx)(tF.q7,{ref:r,className:(0,m.cn)("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t&&"pl-8",e),...s}));tq.displayName=tF.q7.displayName,r.forwardRef(({className:e,children:t,checked:s,...r},n)=>(0,a.jsxs)(tF.H_,{ref:n,className:(0,m.cn)("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),checked:s,...r,children:[(0,a.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,a.jsx)(tF.VF,{children:(0,a.jsx)(k.A,{className:"h-4 w-4"})})}),t]})).displayName=tF.H_.displayName,r.forwardRef(({className:e,children:t,...s},r)=>(0,a.jsxs)(tF.hN,{ref:r,className:(0,m.cn)("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...s,children:[(0,a.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,a.jsx)(tF.VF,{children:(0,a.jsx)(tR.A,{className:"h-2 w-2 fill-current"})})}),t]})).displayName=tF.hN.displayName,r.forwardRef(({className:e,inset:t,...s},r)=>(0,a.jsx)(tF.JU,{ref:r,className:(0,m.cn)("px-2 py-1.5 text-sm font-semibold",t&&"pl-8",e),...s})).displayName=tF.JU.displayName,r.forwardRef(({className:e,...t},s)=>(0,a.jsx)(tF.wv,{ref:s,className:(0,m.cn)("-mx-1 my-1 h-px bg-muted",e),...t})).displayName=tF.wv.displayName;let tW=({workflow:e,onEdit:t,onDelete:s,onToggle:r,onDuplicate:n,viewMode:o="grid"})=>{let i="active"===e.status;return(0,a.jsx)(u.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},whileHover:{y:-4},transition:{duration:.2},children:(0,a.jsxs)(tI.Z,{className:(0,m.cn)("group relative overflow-hidden transition-all hover:shadow-md border-border/50 hover:border-border","list"===o?"flex items-center gap-6":""),children:[(0,a.jsx)("div",{className:(0,m.cn)("absolute left-0 top-0 bottom-0 w-1 transition-colors",i?"bg-green-500":"bg-muted")}),(0,a.jsxs)("div",{className:(0,m.cn)("flex-1","list"===o?"flex items-center justify-between gap-6":""),children:[(0,a.jsx)("div",{className:(0,m.cn)("mb-4","list"===o&&"mb-0 flex-1"),children:(0,a.jsxs)("div",{className:"flex items-start justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-semibold tracking-tight mb-1 group-hover:text-primary transition-colors",children:e.name}),e.description&&(0,a.jsx)("p",{className:"text-sm text-muted-foreground line-clamp-2",children:e.description})]}),"grid"===o&&(0,a.jsx)(tH,{onEdit:()=>t(e.id),onDuplicate:()=>n(e.id),onDelete:()=>s(e.id)})]})}),(0,a.jsxs)("div",{className:(0,m.cn)("flex items-center gap-4 text-sm text-muted-foreground","grid"===o?"mb-4 pb-4 border-b border-border/50":""),children:[(0,a.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,a.jsx)(tP.A,{className:"h-4 w-4"}),(0,a.jsxs)("span",{children:[e.nodes.length," steps"]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,a.jsx)(tD.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:new Date(e.updatedAt).toLocaleDateString()})]})]}),"grid"===o&&(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:(0,m.cn)("inline-flex items-center gap-1.5 px-2.5 py-0.5 rounded-full text-xs font-medium",i?"bg-green-500/10 text-green-600 dark:text-green-400":"bg-muted text-muted-foreground"),children:[(0,a.jsx)("div",{className:(0,m.cn)("h-1.5 w-1.5 rounded-full",i?"bg-green-500":"bg-slate-400")}),i?"Active":"Inactive"]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)(eE.$,{variant:"ghost",size:"sm",onClick:()=>r(e.id),className:i?"text-orange-600 hover:text-orange-700 hover:bg-orange-50":"text-green-600 hover:text-green-700 hover:bg-green-50",children:[i?(0,a.jsx)(tT.A,{className:"h-4 w-4 mr-1"}):(0,a.jsx)(b.A,{className:"h-4 w-4 mr-1"}),i?"Pause":"Run"]}),(0,a.jsx)(eE.$,{size:"sm",variant:"outline",onClick:()=>t(e.id),children:"Edit"})]})]}),"list"===o&&(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(eE.$,{variant:"ghost",size:"icon",onClick:()=>r(e.id),children:i?(0,a.jsx)(tT.A,{className:"h-4 w-4"}):(0,a.jsx)(b.A,{className:"h-4 w-4"})}),(0,a.jsx)(tH,{onEdit:()=>t(e.id),onDuplicate:()=>n(e.id),onDelete:()=>s(e.id)})]})]})]})})};function tH({onEdit:e,onDuplicate:t,onDelete:s}){return(0,a.jsxs)(tM,{children:[(0,a.jsx)(tO,{asChild:!0,children:(0,a.jsx)(eE.$,{variant:"ghost",size:"icon",className:"h-8 w-8",children:(0,a.jsx)(tz.A,{className:"h-4 w-4"})})}),(0,a.jsxs)(tL,{align:"end",children:[(0,a.jsxs)(tq,{onClick:e,children:[(0,a.jsx)(ea.A,{className:"h-4 w-4 mr-2"}),"Edit"]}),(0,a.jsxs)(tq,{onClick:t,children:[(0,a.jsx)(P.A,{className:"h-4 w-4 mr-2"}),"Duplicate"]}),(0,a.jsxs)(tq,{onClick:s,className:"text-destructive focus:text-destructive",children:[(0,a.jsx)(v.A,{className:"h-4 w-4 mr-2"}),"Delete"]})]})]})}},91337:(e,t,s)=>{s.d(t,{cn:()=>n});var a=s(76910),r=s(622);function n(...e){return(0,r.QP)((0,a.$)(e))}}}]);