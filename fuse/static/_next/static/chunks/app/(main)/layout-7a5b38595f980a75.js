(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2076],{18300:(e,t,s)=>{"use strict";s.d(t,{iZ:()=>d,vz:()=>c,Wn:()=>m,LR:()=>u});var r=s(32842),a=s(35625),i=s(48934),n=s(61899);let o={async login(e){let t=new URLSearchParams;t.append("username",e.email),t.append("password",e.password);let s=await n.uE.postFormData("/login/access-token",t);return n.uE.setToken(s.access_token),s},register:async e=>n.uE.post("/register",e),getCurrentUser:async()=>n.uE.get("/users/me"),logout(){n.uE.setToken(null)}},l={all:["auth"],currentUser:()=>[...l.all,"current-user"]};function d(){return(0,r.I)({queryKey:l.currentUser(),queryFn:o.getCurrentUser,retry:!1,staleTime:3e5,refetchOnWindowFocus:!1,refetchOnMount:!1,refetchOnReconnect:!1})}function c(){let e=(0,a.jE)();return(0,i.n)({mutationFn:e=>o.login(e),onSuccess:()=>{e.invalidateQueries({queryKey:l.currentUser()})}})}function u(){let e=(0,a.jE)();return(0,i.n)({mutationFn:e=>o.register(e),onSuccess:()=>{e.invalidateQueries({queryKey:l.currentUser()})}})}function m(){let e=(0,a.jE)();return(0,i.n)({mutationFn:()=>(o.logout(),Promise.resolve()),onSuccess:()=>{e.clear()}})}},19417:(e,t,s)=>{"use strict";s.d(t,{AuthProvider:()=>o,useAuth:()=>l});var r=s(95155),a=s(12115),i=s(18300);let n=(0,a.createContext)(void 0);function o({children:e}){let{data:t,isLoading:s,error:a}=(0,i.iZ)(),o=(0,i.Wn)(),l=a?null:t??null;return(0,r.jsx)(n.Provider,{value:{user:l,isLoading:!a&&s,isAuthenticated:!!l,logout:()=>o.mutate()},children:e})}function l(){let e=(0,a.useContext)(n);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},61842:(e,t,s)=>{"use strict";s.d(t,{AIAssistantProvider:()=>n,useAIAssistant:()=>o});var r=s(95155),a=s(12115);let i=(0,a.createContext)(void 0);function n({children:e}){let[t,s]=(0,a.useState)(!1),[n,o]=(0,a.useState)("help");return(0,r.jsx)(i.Provider,{value:{isOpen:t,mode:n,openAssistant:(e="help")=>{o(e),s(!0)},closeAssistant:()=>{s(!1)}},children:e})}function o(){let e=(0,a.useContext)(i);if(!e)throw Error("useAIAssistant must be used within AIAssistantProvider");return e}},63742:(e,t,s)=>{Promise.resolve().then(s.bind(s,79334))},79334:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>Q});var r=s(95155),a=s(12115),i=s(73321),n=s(93242),o=s(98500),l=s.n(o),d=s(5772),c=s(91337),u=s(98401),m=s(30971),h=s(20232),x=s(52905),p=s(40462),f=s(89123),g=s(94961),b=s(89363),j=s(21362),w=s(41641),v=s(61878),N=s(51914),y=s(60285),A=s(42869),k=s(41313),C=s(34426),P=s(9673),E=s(80642);let S=[{title:"Overview",href:"/dashboard",icon:u.A,badge:null},{title:"Workflows",href:"/workflows",icon:m.A,badge:null},{title:"Executions",href:"/executions",icon:h.A,badge:null},{title:"Credentials",href:"/credentials",icon:x.A,badge:null},{title:"Variables",href:"/variables",icon:p.A,badge:"Soon"}],F=[{title:"Templates",href:"/templates",icon:u.A},{title:"Analytics",href:"/analytics",icon:f.A},{title:"Help",href:"/help",icon:g.A},{title:"Settings",href:"/settings",icon:b.A}];function I(){let e=(0,i.usePathname)(),[t,s]=(0,a.useState)(!1),[n,o]=(0,a.useState)(!1);return(0,r.jsxs)(P.P.aside,{initial:!1,animate:{width:t?72:260},transition:{duration:.2,ease:"easeInOut"},className:"relative h-screen border-r border-border bg-card z-40 hidden md:flex flex-col",children:[(0,r.jsxs)("div",{className:"h-14 flex items-center justify-between px-4 border-b border-border",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2.5 overflow-hidden",children:[(0,r.jsx)("div",{className:"h-9 w-9 shrink-0 relative",children:(0,r.jsx)(d.default,{src:"/logo.png",alt:"Fuse Logo",width:36,height:36,className:"object-contain"})}),(0,r.jsx)(E.N,{children:!t&&(0,r.jsxs)(P.P.div,{initial:{opacity:0,width:0},animate:{opacity:1,width:"auto"},exit:{opacity:0,width:0},className:"flex items-center gap-1.5",children:[(0,r.jsx)("span",{className:"font-bold text-lg text-foreground",children:"Fuse"}),(0,r.jsx)("span",{className:"text-[10px] font-medium px-1.5 py-0.5 rounded bg-primary/10 text-primary",children:"BETA"})]})})]}),(0,r.jsx)(C.$,{variant:"ghost",size:"icon",className:"h-8 w-8 shrink-0",onClick:()=>s(!t),children:t?(0,r.jsx)(j.A,{className:"h-4 w-4"}):(0,r.jsx)(w.A,{className:"h-4 w-4"})})]}),(0,r.jsx)(E.N,{children:!t&&(0,r.jsx)(P.P.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"px-3 py-3 border-b border-border",children:(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)(v.A,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),(0,r.jsx)("input",{type:"text",placeholder:"Search...",className:"search-input w-full"}),(0,r.jsx)("kbd",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-[10px] font-mono text-muted-foreground bg-muted px-1.5 py-0.5 rounded",children:"⌘K"})]})})}),(0,r.jsx)("div",{className:(0,c.cn)("px-3 py-3",t&&"flex justify-center"),children:t?(0,r.jsx)(l(),{href:"/workflows/new",children:(0,r.jsx)(C.$,{size:"icon",className:"h-10 w-10 rounded-xl",children:(0,r.jsx)(N.A,{className:"h-5 w-5"})})}):(0,r.jsx)(l(),{href:"/workflows/new",className:"block w-full",children:(0,r.jsxs)(C.$,{className:"w-full justify-start gap-2",children:[(0,r.jsx)(N.A,{className:"h-4 w-4"}),"Create Workflow"]})})}),(0,r.jsxs)("div",{className:"flex-1 py-2 px-3 space-y-1 overflow-y-auto",children:[!t&&(0,r.jsx)("p",{className:"px-3 py-2 text-[11px] font-medium text-muted-foreground uppercase tracking-wider",children:"Main"}),S.map(s=>{let a=e===s.href||e.startsWith(s.href+"/");return(0,r.jsxs)(l(),{href:s.href,className:(0,c.cn)("nav-item group",a?"nav-item-active":"nav-item-inactive",t&&"justify-center px-0"),title:t?s.title:void 0,children:[(0,r.jsx)(s.icon,{className:(0,c.cn)("h-[18px] w-[18px] shrink-0 transition-colors",a?"text-primary":"")}),!t&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("span",{className:"flex-1 text-sm",children:s.title}),s.badge&&(0,r.jsx)("span",{className:"text-[10px] font-medium px-1.5 py-0.5 rounded bg-muted text-muted-foreground",children:s.badge})]}),a&&!t&&(0,r.jsx)(P.P.div,{layoutId:"activeNav",className:"absolute left-0 top-1/2 -translate-y-1/2 h-6 w-[3px] bg-primary rounded-r-full",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0}})]},s.href)}),(0,r.jsx)("div",{className:"!my-4 border-t border-border"}),!t&&(0,r.jsx)("p",{className:"px-3 py-2 text-[11px] font-medium text-muted-foreground uppercase tracking-wider",children:"More"}),F.map(s=>{let a=e===s.href||e.startsWith(s.href+"/");return(0,r.jsxs)(l(),{href:s.href,className:(0,c.cn)("nav-item group",a?"nav-item-active":"nav-item-inactive",t&&"justify-center px-0"),title:t?s.title:void 0,children:[(0,r.jsx)(s.icon,{className:(0,c.cn)("h-[18px] w-[18px] shrink-0 transition-colors",a?"text-primary":"")}),!t&&(0,r.jsx)("span",{className:"text-sm",children:s.title})]},s.href)})]}),(0,r.jsx)("div",{className:"p-3 border-t border-border",children:(0,r.jsxs)("div",{className:(0,c.cn)("user-profile-card cursor-pointer relative",t&&"justify-center p-2"),onClick:()=>!t&&o(!n),children:[(0,r.jsx)("div",{className:"h-9 w-9 rounded-full bg-gradient-to-br from-primary to-amber-500 flex items-center justify-center shrink-0",children:(0,r.jsx)("span",{className:"text-sm font-semibold text-white",children:"A"})}),!t&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"flex-1 overflow-hidden min-w-0",children:[(0,r.jsx)("p",{className:"text-sm font-medium truncate text-foreground",children:"Admin"}),(0,r.jsx)("p",{className:"text-xs text-muted-foreground truncate",children:"admin@fuse.io"})]}),(0,r.jsx)(y.A,{className:"h-4 w-4 text-muted-foreground shrink-0"})]}),(0,r.jsx)(E.N,{children:n&&!t&&(0,r.jsx)(P.P.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:10},className:"absolute bottom-full left-0 right-0 mb-2 bg-card border border-border rounded-xl shadow-lg overflow-hidden z-50",children:(0,r.jsxs)("div",{className:"p-1",children:[(0,r.jsxs)(l(),{href:"/settings/profile",className:"dropdown-item",onClick:()=>o(!1),children:[(0,r.jsx)(A.A,{className:"h-4 w-4"}),(0,r.jsx)("span",{children:"Profile"})]}),(0,r.jsxs)(l(),{href:"/settings",className:"dropdown-item",onClick:()=>o(!1),children:[(0,r.jsx)(b.A,{className:"h-4 w-4"}),(0,r.jsx)("span",{children:"Settings"})]}),(0,r.jsx)("div",{className:"border-t border-border my-1"}),(0,r.jsxs)("button",{className:"dropdown-item w-full text-red-500 hover:bg-red-500/10",children:[(0,r.jsx)(k.A,{className:"h-4 w-4"}),(0,r.jsx)("span",{children:"Log out"})]})]})})})]})})]})}var z=s(86901),_=s(22164),O=s(61767),W=s(36999),$=s(51900),T=s(92972),R=s(70460);function q(){let{theme:e,setTheme:t}=(0,R.useTheme)(),{openAssistant:s}=(0,n.yJ)(),[i,o]=(0,a.useState)(!1),[d,u]=(0,a.useState)(!1),[m,h]=(0,a.useState)(!1);return(0,a.useEffect)(()=>{o(!0)},[]),(0,r.jsx)("header",{className:"h-14 border-b border-border bg-card/80 backdrop-blur-xl sticky top-0 z-30",children:(0,r.jsxs)("div",{className:"h-full px-6 flex items-center justify-between gap-4",children:[(0,r.jsx)("div",{className:"flex-1 max-w-xl",children:(0,r.jsxs)("div",{className:"relative group",children:[(0,r.jsx)(v.A,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground transition-colors group-focus-within:text-primary"}),(0,r.jsx)("input",{type:"text",placeholder:"Search workflows, nodes, templates...",className:"w-full pl-10 pr-20 py-2 bg-muted/50 border border-transparent rounded-lg text-sm placeholder:text-muted-foreground focus:outline-none focus:border-primary/50 focus:bg-background transition-all"}),(0,r.jsxs)("div",{className:"absolute right-3 top-1/2 -translate-y-1/2 flex items-center gap-1",children:[(0,r.jsx)("kbd",{className:"text-[10px] font-mono text-muted-foreground bg-background px-1.5 py-0.5 rounded border border-border",children:"⌘"}),(0,r.jsx)("kbd",{className:"text-[10px] font-mono text-muted-foreground bg-background px-1.5 py-0.5 rounded border border-border",children:"K"})]})]})}),(0,r.jsxs)("div",{className:"flex items-center gap-1",children:[(0,r.jsxs)(C.$,{variant:"ghost",size:"sm",className:"gap-2 text-muted-foreground hover:text-foreground",onClick:()=>s("help"),children:[(0,r.jsx)(z.A,{className:"h-4 w-4 text-primary"}),(0,r.jsx)("span",{className:"hidden lg:inline",children:"AI Assistant"})]}),(0,r.jsx)("div",{className:"h-6 w-px bg-border mx-2"}),(0,r.jsx)("a",{href:"https://docs.fuse.io",target:"_blank",rel:"noopener noreferrer",children:(0,r.jsxs)(C.$,{variant:"ghost",size:"sm",className:"gap-2 text-muted-foreground hover:text-foreground",children:[(0,r.jsx)(_.A,{className:"h-4 w-4"}),(0,r.jsx)("span",{className:"hidden lg:inline",children:"Docs"})]})}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)(C.$,{variant:"ghost",size:"icon",className:"h-9 w-9 text-muted-foreground hover:text-foreground",onClick:()=>h(!m),children:(0,r.jsx)(g.A,{className:"h-4 w-4"})}),m&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"fixed inset-0 z-40",onClick:()=>h(!1)}),(0,r.jsxs)("div",{className:"absolute right-0 top-full mt-2 w-48 bg-popover border border-border rounded-xl shadow-lg z-50 p-1.5",children:[(0,r.jsx)("a",{href:"#",className:"dropdown-item",children:"Documentation"}),(0,r.jsx)("a",{href:"#",className:"dropdown-item",children:"Community"}),(0,r.jsx)("a",{href:"#",className:"dropdown-item",children:"What's New"}),(0,r.jsx)("div",{className:"border-t border-border my-1"}),(0,r.jsx)("a",{href:"#",className:"dropdown-item",children:"Report a Bug"}),(0,r.jsx)("a",{href:"#",className:"dropdown-item",children:"Feature Request"})]})]})]}),(0,r.jsxs)(C.$,{variant:"ghost",size:"icon",className:"h-9 w-9 text-muted-foreground hover:text-foreground relative",children:[(0,r.jsx)(O.A,{className:"h-4 w-4"}),(0,r.jsx)("span",{className:"absolute top-1.5 right-1.5 h-2 w-2 bg-primary rounded-full"})]}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)(C.$,{variant:"ghost",size:"icon",className:"h-9 w-9 text-muted-foreground hover:text-foreground",onClick:()=>u(!d),children:i&&"dark"===e?(0,r.jsx)(W.A,{className:"h-4 w-4"}):(0,r.jsx)($.A,{className:"h-4 w-4"})}),d&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"fixed inset-0 z-40",onClick:()=>u(!1)}),(0,r.jsxs)("div",{className:"absolute right-0 top-full mt-2 w-36 bg-popover border border-border rounded-xl shadow-lg z-50 p-1.5",children:[(0,r.jsxs)("button",{onClick:()=>{t("light"),u(!1)},className:(0,c.cn)("dropdown-item w-full","light"===e&&"bg-muted"),children:[(0,r.jsx)($.A,{className:"h-4 w-4"}),"Light"]}),(0,r.jsxs)("button",{onClick:()=>{t("dark"),u(!1)},className:(0,c.cn)("dropdown-item w-full","dark"===e&&"bg-muted"),children:[(0,r.jsx)(W.A,{className:"h-4 w-4"}),"Dark"]}),(0,r.jsxs)("button",{onClick:()=>{t("system"),u(!1)},className:(0,c.cn)("dropdown-item w-full","system"===e&&"bg-muted"),children:[(0,r.jsx)(T.A,{className:"h-4 w-4"}),"System"]})]})]})]}),(0,r.jsx)(l(),{href:"/settings",children:(0,r.jsx)(C.$,{variant:"ghost",size:"icon",className:"h-9 w-9 text-muted-foreground hover:text-foreground",children:(0,r.jsx)(b.A,{className:"h-4 w-4"})})})]})]})})}function L({onCreateWorkflow:e,className:t}){let{openAssistant:s}=(0,n.yJ)(),[i,o]=(0,a.useState)(!1);return(0,r.jsxs)(P.P.div,{className:(0,c.cn)("fixed bottom-8 right-8 z-50",t),initial:{scale:0,opacity:0},animate:{scale:1,opacity:1},transition:{type:"spring",stiffness:260,damping:20,delay:.5},children:[(0,r.jsxs)(P.P.button,{onClick:()=>s("help"),onMouseEnter:()=>o(!0),onMouseLeave:()=>o(!1),className:(0,c.cn)("group relative flex items-center gap-3 px-5 py-3.5 rounded-2xl shadow-2xl","bg-gradient-to-tr from-indigo-500 via-primary to-emerald-400","hover:shadow-[0_0_40px_rgba(99,102,241,0.4)]","transition-all duration-300 ease-out","border-2 border-white/20"),whileHover:{scale:1.05,y:-2},whileTap:{scale:.95},children:[(0,r.jsx)("div",{className:"absolute inset-0 rounded-2xl bg-gradient-to-tr from-indigo-600 via-primary to-emerald-500 opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),(0,r.jsx)(P.P.div,{className:"absolute inset-0 rounded-2xl bg-primary/50 blur-xl",animate:{opacity:[.3,.6,.3],scale:[.95,1.05,.95]},transition:{duration:3,repeat:1/0,ease:"easeInOut"}}),(0,r.jsxs)("div",{className:"relative flex items-center gap-3",children:[(0,r.jsx)(P.P.div,{animate:{rotate:i?[0,-10,10,-10,0]:0},transition:{duration:.5},children:(0,r.jsx)(z.A,{className:"h-5 w-5 text-white"})}),(0,r.jsx)(P.P.span,{className:"text-white font-semibold text-sm whitespace-nowrap",initial:{width:0,opacity:0},animate:{width:"auto",opacity:1},transition:{delay:.7,duration:.3},children:"AI Assistant"}),(0,r.jsx)(P.P.div,{className:"absolute -top-1 -right-1 h-3 w-3 bg-emerald-400 rounded-full border-2 border-white",animate:{scale:[1,1.3,1],opacity:[1,.7,1]},transition:{duration:2,repeat:1/0,ease:"easeInOut"}})]})]}),(0,r.jsx)(E.N,{children:i&&(0,r.jsxs)(P.P.div,{initial:{opacity:0,y:10,scale:.9},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:10,scale:.9},className:"absolute bottom-full right-0 mb-3 px-3 py-2 bg-popover text-popover-foreground rounded-lg shadow-lg border border-border text-xs font-medium whitespace-nowrap",children:["Get help or create workflows with AI",(0,r.jsx)("div",{className:"absolute bottom-0 right-6 transform translate-y-1/2 rotate-45 w-2 h-2 bg-popover border-r border-b border-border"})]})})]})}var M=s(73480),U=s(18346),D=s(25336);function K({children:e}){let t=(0,i.useRouter)(),{isOpen:s,mode:a,closeAssistant:o}=(0,n.yJ)(),l=(0,U.QB)(),d=(0,U.nV)(),c=(0,U.yM)(),u=async(e,s,r)=>{try{let a=await l.mutateAsync({prompt:e,model:s,credentialId:r});D.vF.info("AI Generation Result:",a);let i=await d.mutateAsync({name:"AI Generated Workflow",description:e});i&&i.id&&(a.nodes&&a.edges&&await c.mutateAsync({workflow_id:i.id,meta:{id:i.id,name:i.meta.name,description:i.meta.description,version:i.meta.version||"1.0.0",status:"draft",tags:[],created_at:i.meta.created_at,updated_at:new Date().toISOString()},graph:{nodes:a.nodes,edges:a.edges},execution:{mode:"sequential",timeout_seconds:300},observability:{logging:!0,metrics:!1},ai:{model:s||"default"}}),t.push(`/workflows/${i.id}`))}catch(e){throw D.vF.error("Failed to generate workflow:",e),e}};return(0,r.jsxs)("div",{className:"flex h-screen overflow-hidden bg-background",children:[(0,r.jsx)(I,{}),(0,r.jsxs)("div",{className:"flex-1 flex flex-col overflow-hidden",children:[(0,r.jsx)(q,{}),(0,r.jsx)("main",{className:"flex-1 overflow-y-auto",children:(0,r.jsx)("div",{className:"p-6 lg:p-8",children:e})})]}),(0,r.jsx)(L,{onCreateWorkflow:u}),(0,r.jsx)(M.F,{isOpen:s,onClose:o,onCreateWorkflow:u,defaultMode:a})]})}function J({children:e}){return(0,r.jsx)(n.of,{children:(0,r.jsx)(K,{children:e})})}function Q({children:e}){let t=(0,i.useRouter)(),{isAuthenticated:s,isLoading:o}=(0,n.As)();return((0,a.useEffect)(()=>{o||s||t.push("/auth/login")},[s,o,t]),o)?(0,r.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,r.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})}):s?(0,r.jsx)(J,{children:e}):null}},93242:(e,t,s)=>{"use strict";s.d(t,{As:()=>r.useAuth,of:()=>a.AIAssistantProvider,yJ:()=>a.useAIAssistant}),s(96337);var r=s(19417),a=s(61842)},96337:(e,t,s)=>{"use strict";s.d(t,{QueryProvider:()=>o});var r=s(95155),a=s(35625),i=s(93434);let n=new(s(96887)).E({defaultOptions:{queries:{staleTime:6e4,gcTime:3e5,retry:1,refetchOnWindowFocus:!1},mutations:{retry:0}}});function o({children:e}){return(0,r.jsxs)(a.Ht,{client:n,children:[e,(0,r.jsx)(i.E,{initialIsOpen:!1})]})}}},e=>{e.O(0,[8547,2842,5039,8500,8343,7904,7152,3393,1950,585,8441,3794,7358],()=>e(e.s=63742)),_N_E=e.O()}]);