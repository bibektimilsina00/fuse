(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[76],{4416:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>A});var s=r(95155),n=r(12115),a=r(73321);r(96337);var i=r(19417),o=r(98500),l=r.n(o),c=r(91337),d=r(98401),u=r(30971),h=r(89363),m=r(42869),f=r(41313),x=r(29857),p=r(41641),g=r(34426),y=r(9673),v=r(80642);let b=[{title:"Dashboard",href:"/dashboard",icon:d.A},{title:"Workflows",href:"/workflows",icon:u.A},{title:"Settings",href:"/settings",icon:h.A}];function w(){let e=(0,a.usePathname)(),[t,r]=(0,n.useState)(!1);return(0,s.jsxs)(y.P.aside,{initial:!1,animate:{width:t?80:280},className:"relative h-screen border-r border-border bg-card z-40 hidden md:flex flex-col",children:[(0,s.jsx)("div",{className:"h-16 flex items-center px-6 border-b border-border",children:(0,s.jsxs)("div",{className:"flex items-center gap-3 overflow-hidden",children:[(0,s.jsx)("div",{className:"h-8 w-8 rounded-lg bg-primary flex items-center justify-center shrink-0",children:(0,s.jsx)(u.A,{className:"h-5 w-5 text-primary-foreground"})}),(0,s.jsx)(v.N,{children:!t&&(0,s.jsx)(y.P.span,{initial:{opacity:0,width:0},animate:{opacity:1,width:"auto"},exit:{opacity:0,width:0},className:"font-bold text-lg whitespace-nowrap",children:"Automation"})})]})}),(0,s.jsx)("div",{className:"flex-1 py-6 px-3 space-y-1 overflow-y-auto",children:b.map(r=>{let n=e.startsWith(r.href);return(0,s.jsxs)(l(),{href:r.href,className:(0,c.cn)("flex items-center gap-3 px-3 py-2.5 rounded-lg transition-all duration-200 group relative",n?"bg-primary/10 text-primary font-medium":"text-muted-foreground hover:bg-accent hover:text-accent-foreground"),children:[(0,s.jsx)(r.icon,{className:(0,c.cn)("h-5 w-5 shrink-0 transition-colors",n?"text-primary":"text-muted-foreground group-hover:text-foreground")}),!t&&(0,s.jsx)("span",{className:"truncate",children:r.title}),n&&!t&&(0,s.jsx)(y.P.div,{layoutId:"activeNav",className:"absolute left-0 top-1/2 -translate-y-1/2 h-8 w-1 bg-primary rounded-r-full",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0}}),t&&(0,s.jsx)("div",{className:"absolute left-full ml-2 px-2 py-1 bg-popover text-popover-foreground text-xs rounded-md shadow-md opacity-0 group-hover:opacity-100 pointer-events-none whitespace-nowrap z-50 border border-border",children:r.title})]},r.href)})}),(0,s.jsxs)("div",{className:"p-3 border-t border-border mt-auto",children:[(0,s.jsxs)("div",{className:(0,c.cn)("flex items-center gap-3 p-2 rounded-lg border border-border bg-muted/30",t?"justify-center":""),children:[(0,s.jsx)("div",{className:"h-8 w-8 rounded-full bg-secondary flex items-center justify-center shrink-0",children:(0,s.jsx)(m.A,{className:"h-4 w-4 text-secondary-foreground"})}),!t&&(0,s.jsxs)("div",{className:"flex-1 overflow-hidden",children:[(0,s.jsx)("p",{className:"text-sm font-medium truncate",children:"User Account"}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground truncate",children:"user@example.com"})]}),!t&&(0,s.jsx)(g.$,{variant:"ghost",size:"icon",className:"h-8 w-8",children:(0,s.jsx)(f.A,{className:"h-4 w-4"})})]}),(0,s.jsx)(g.$,{variant:"ghost",size:"sm",className:"w-full mt-2",onClick:()=>r(!t),children:t?(0,s.jsx)(x.A,{className:"h-4 w-4"}):(0,s.jsx)(p.A,{className:"h-4 w-4"})})]})]})}var j=r(61878),N=r(61767);function k({onMenuClick:e}){let t=(0,a.usePathname)().split("/").filter(Boolean);return(0,s.jsxs)("header",{className:"h-16 border-b border-border bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60 sticky top-0 z-30 px-6 flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)(g.$,{variant:"ghost",size:"icon",className:"md:hidden",onClick:e,children:(0,s.jsx)(x.A,{className:"h-5 w-5"})}),(0,s.jsxs)("nav",{className:"flex items-center text-sm text-muted-foreground",children:[(0,s.jsx)("span",{className:"font-medium text-foreground",children:"Automation"}),t.map((e,r)=>(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("span",{className:"mx-2",children:"/"}),(0,s.jsx)("span",{className:r===t.length-1?"font-medium text-foreground capitalize":"capitalize",children:e})]},e))]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsxs)("div",{className:"relative hidden sm:block",children:[(0,s.jsx)(j.A,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),(0,s.jsx)("input",{type:"text",placeholder:"Search...",className:"h-9 w-64 rounded-md border border-input bg-background pl-9 pr-4 text-sm ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring"})]}),(0,s.jsxs)(g.$,{variant:"ghost",size:"icon",className:"relative",children:[(0,s.jsx)(N.A,{className:"h-5 w-5"}),(0,s.jsx)("span",{className:"absolute top-2 right-2 h-2 w-2 rounded-full bg-destructive"})]}),(0,s.jsx)("div",{className:"h-8 w-8 rounded-full bg-primary/10 border border-primary/20"})]})]})}function $({children:e}){let[t,r]=(0,n.useState)(!1);return(0,s.jsxs)("div",{className:"flex h-screen overflow-hidden bg-background",children:[(0,s.jsx)(w,{}),(0,s.jsxs)("div",{className:"flex-1 flex flex-col overflow-hidden",children:[(0,s.jsx)(k,{onMenuClick:()=>r(!t)}),(0,s.jsx)("main",{className:"flex-1 overflow-y-auto p-6",children:(0,s.jsx)("div",{className:"max-w-7xl mx-auto",children:e})})]})]})}function A({children:e}){let t=(0,a.useRouter)(),{isAuthenticated:r,isLoading:o}=(0,i.useAuth)();return((0,n.useEffect)(()=>{o||r||t.push("/auth/login")},[r,o,t]),o)?(0,s.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,s.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})}):r?(0,s.jsx)($,{children:e}):null}},18300:(e,t,r)=>{"use strict";r.d(t,{iZ:()=>c,vz:()=>d,Wn:()=>h,LR:()=>u});var s=r(32842),n=r(35625),a=r(48934),i=r(61899);let o={async login(e){let t=new URLSearchParams;t.append("username",e.email),t.append("password",e.password);let r=await i.uE.postFormData("/login/access-token",t);return i.uE.setToken(r.access_token),r},register:async e=>i.uE.post("/register",e),getCurrentUser:async()=>i.uE.get("/users/me"),logout(){i.uE.setToken(null)}},l={all:["auth"],currentUser:()=>[...l.all,"current-user"]};function c(){return(0,s.I)({queryKey:l.currentUser(),queryFn:o.getCurrentUser,retry:!1,staleTime:3e5,refetchOnWindowFocus:!1,refetchOnMount:!1,refetchOnReconnect:!1})}function d(){let e=(0,n.jE)();return(0,a.n)({mutationFn:e=>o.login(e),onSuccess:()=>{e.invalidateQueries({queryKey:l.currentUser()})}})}function u(){let e=(0,n.jE)();return(0,a.n)({mutationFn:e=>o.register(e),onSuccess:()=>{e.invalidateQueries({queryKey:l.currentUser()})}})}function h(){let e=(0,n.jE)();return(0,a.n)({mutationFn:()=>(o.logout(),Promise.resolve()),onSuccess:()=>{e.clear()}})}},19417:(e,t,r)=>{"use strict";r.d(t,{AuthProvider:()=>o,useAuth:()=>l});var s=r(95155),n=r(12115),a=r(18300);let i=(0,n.createContext)(void 0);function o({children:e}){let{data:t,isLoading:r,error:n}=(0,a.iZ)(),o=(0,a.Wn)(),l=n?null:t??null;return(0,s.jsx)(i.Provider,{value:{user:l,isLoading:!n&&r,isAuthenticated:!!l,logout:()=>o.mutate()},children:e})}function l(){let e=(0,n.useContext)(i);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},25336:(e,t,r)=>{"use strict";r.d(t,{X6:()=>i,aw:()=>a,vF:()=>n});class s{constructor(e="App"){this.prefix=e}formatMessage(e,t){let r=new Date().toISOString().split("T")[1].split(".")[0];return`[${r}] [${this.prefix}] ${e}: ${t}`}debug(e,t){}info(e,t){}warn(e,t){console.warn(this.formatMessage("WARN",e),t||"")}error(e,t,r){console.error(this.formatMessage("ERROR",e),t,r||"")}child(e){return new s(`${this.prefix}:${e}`)}}let n=new s("Automation"),a=n.child("Workflow");n.child("Validation");let i=n.child("WebSocket")},34426:(e,t,r)=>{"use strict";r.d(t,{$:()=>c});var s=r(95155),n=r(12115),a=r(99873),i=r(622),o=r(42442);let l=(0,a.F)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-md hover:bg-primary/90 hover:shadow-lg hover:-translate-y-0.5 transition-all duration-200",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),c=n.forwardRef(({className:e,variant:t,size:r,asChild:n=!1,children:a,...c},d)=>{let u=n?o.DX:"button";return(0,s.jsx)(u,{ref:d,className:(0,i.QP)(l({variant:t,size:r}),e),...c,children:a})});c.displayName="Button"},61899:(e,t,r)=>{"use strict";r.d(t,{hs:()=>n,uE:()=>c});var s=r(25336);let n="http://localhost:5678/api/v1",a={maxRetries:3,baseDelayMs:1e3,maxDelayMs:1e4,retryableStatuses:[408,429,500,502,503,504]};function i(e,t){let r=t.baseDelayMs*Math.pow(2,e),s=.3*Math.random()*r;return Math.min(r+s,t.maxDelayMs)}function o(e){return new Promise(t=>setTimeout(t,e))}class l{constructor(){this.token=null,this.retryConfig=a,this.token=localStorage.getItem("auth_token")}static getInstance(){return l.instance||(l.instance=new l),l.instance}setToken(e){this.token=e,e?localStorage.setItem("auth_token",e):localStorage.removeItem("auth_token")}getToken(){return this.token}setRetryConfig(e){this.retryConfig={...this.retryConfig,...e}}async request(e,t={},r=0){let a={"Content-Type":"application/json","X-Request-ID":0===r?crypto.randomUUID?crypto.randomUUID():`${Date.now()}-${Math.random().toString(36).substring(2,11)}`:t.headers?.["X-Request-ID"],...t.headers};this.token&&(a.Authorization=`Bearer ${this.token}`);try{var l;let c=await fetch(`${n}${e}`,{...t,headers:a});if(429===c.status){let n=c.headers.get("Retry-After");if(n&&r<this.retryConfig.maxRetries){let a=1e3*parseInt(n,10)||i(r,this.retryConfig);return s.vF.warn(`Rate limited on ${e}. Retrying after ${a}ms (attempt ${r+1})`),await o(a),this.request(e,t,r+1)}}if(!c.ok&&(l=c.status,this.retryConfig.retryableStatuses.includes(l))&&r<this.retryConfig.maxRetries){let n=i(r,this.retryConfig);return s.vF.warn(`Request failed with ${c.status} on ${e}. Retrying after ${n}ms (attempt ${r+1})`),await o(n),this.request(e,t,r+1)}if(!c.ok){let e=await c.json().catch(()=>({detail:"An error occurred"}));throw Error(e.detail||`HTTP error! status: ${c.status}`)}return c.json()}catch(a){let n=e.includes("/users/me")||e.includes("/login");if(a instanceof TypeError&&"Failed to fetch"===a.message&&r<this.retryConfig.maxRetries&&!n){let n=i(r,this.retryConfig);return s.vF.warn(`Network error on ${e}. Retrying after ${n}ms (attempt ${r+1})`),await o(n),this.request(e,t,r+1)}throw a}}async get(e){return this.request(e,{method:"GET"})}async post(e,t){return this.request(e,{method:"POST",body:t?JSON.stringify(t):void 0})}async postFormData(e,t){let r={"Content-Type":"application/x-www-form-urlencoded"};this.token&&(r.Authorization=`Bearer ${this.token}`);let s=await fetch(`${n}${e}`,{method:"POST",headers:r,body:t});if(!s.ok)throw Error((await s.json().catch(()=>({detail:"An error occurred"}))).detail||`HTTP error! status: ${s.status}`);return s.json()}async put(e,t){return this.request(e,{method:"PUT",body:JSON.stringify(t)})}async patch(e,t){return this.request(e,{method:"PATCH",body:JSON.stringify(t)})}async delete(e){return this.request(e,{method:"DELETE"})}}let c=l.getInstance()},63742:(e,t,r)=>{Promise.resolve().then(r.bind(r,4416))},91337:(e,t,r)=>{"use strict";r.d(t,{cn:()=>a});var s=r(76910),n=r(622);function a(...e){return(0,n.QP)((0,s.$)(e))}},96337:(e,t,r)=>{"use strict";r.d(t,{QueryProvider:()=>o});var s=r(95155),n=r(35625),a=r(93434);let i=new(r(96887)).E({defaultOptions:{queries:{staleTime:6e4,gcTime:3e5,retry:1,refetchOnWindowFocus:!1},mutations:{retry:0}}});function o({children:e}){return(0,s.jsxs)(n.Ht,{client:i,children:[e,(0,s.jsx)(a.E,{initialIsOpen:!1})]})}}},e=>{e.O(0,[547,275,361,393,501,93,441,794,358],()=>e(e.s=63742)),_N_E=e.O()}]);