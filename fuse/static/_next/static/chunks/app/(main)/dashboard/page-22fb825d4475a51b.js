(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5660],{18346:(e,t,s)=>{"use strict";s.d(t,{AM:()=>g,H8:()=>p,Ij:()=>y,MS:()=>b,Q8:()=>j,QB:()=>f,Ss:()=>m,Tj:()=>c,fQ:()=>w,j3:()=>d,mP:()=>l,nV:()=>u,n_:()=>v,oE:()=>x,yM:()=>h});var r=s(32842),a=s(35625),i=s(48934),n=s(48182);let o={all:["workflows"],lists:()=>[...o.all,"list"],list:e=>[...o.lists(),{filters:e}],details:()=>[...o.all,"detail"],detail:e=>[...o.details(),e],nodeTypes:()=>[...o.all,"node-types"],nodeOptions:(e,t,s)=>[...o.all,"node-options",e,t,s],debugWorkflows:()=>[...o.all,"debug"],debugWorkflow:e=>[...o.all,"debug",e]};function l(){return(0,r.I)({queryKey:o.lists(),queryFn:n.y.getWorkflows})}function d(e){return(0,r.I)({queryKey:o.detail(e),queryFn:()=>n.y.getWorkflow(e),enabled:!!e})}function c(){return(0,r.I)({queryKey:o.nodeTypes(),queryFn:n.y.getNodeTypes,staleTime:0})}function u(){let e=(0,a.jE)();return(0,i.n)({mutationFn:e=>n.y.createWorkflow(e),onSuccess:()=>{e.invalidateQueries({queryKey:o.lists()})}})}function m(){let e=(0,a.jE)();return(0,i.n)({mutationFn:({id:e,data:t})=>n.y.updateWorkflow(e,t),onSuccess:(t,s)=>{e.invalidateQueries({queryKey:o.detail(s.id)}),e.invalidateQueries({queryKey:o.lists()})}})}function x(){let e=(0,a.jE)();return(0,i.n)({mutationFn:e=>n.y.deleteWorkflow(e),onSuccess:()=>{e.invalidateQueries({queryKey:o.lists()})}})}function h(){let e=(0,a.jE)();return(0,i.n)({mutationFn:e=>n.y.saveWorkflow(e),onSuccess:(t,s)=>{e.invalidateQueries({queryKey:o.detail(s.workflow_id)}),e.invalidateQueries({queryKey:o.lists()})}})}function g(){return(0,i.n)({mutationFn:e=>n.y.executeWorkflow(e)})}function f(){return(0,i.n)({mutationFn:e=>n.y.generateWithAI(e)})}function p(){return(0,i.n)({mutationFn:({workflowId:e,nodeId:t,inputData:s})=>n.y.executeNode(e,t,s)})}function y(){let e=(0,a.jE)();return(0,i.n)({mutationFn:e=>n.y.activateWorkflow(e),onSuccess:(t,s)=>{e.invalidateQueries({queryKey:o.detail(s)}),e.invalidateQueries({queryKey:o.lists()})}})}function w(){let e=(0,a.jE)();return(0,i.n)({mutationFn:e=>n.y.deactivateWorkflow(e),onSuccess:(t,s)=>{e.invalidateQueries({queryKey:o.detail(s)}),e.invalidateQueries({queryKey:o.lists()})}})}function b(){return(0,i.n)({mutationFn:({code:e,language:t,inputData:s})=>n.y.executeCode(e,t,s||{})})}function v(){return(0,r.I)({queryKey:o.debugWorkflows(),queryFn:n.y.getDebugWorkflows,staleTime:3e5})}function j(){return(0,i.n)({mutationFn:e=>n.y.getDebugWorkflow(e)})}},25336:(e,t,s)=>{"use strict";s.d(t,{X6:()=>n,aw:()=>i,vF:()=>a});class r{constructor(e="App"){this.prefix=e}formatMessage(e,t){let s=new Date().toISOString().split("T")[1].split(".")[0];return`[${s}] [${this.prefix}] ${e}: ${t}`}debug(e,t){}info(e,t){}warn(e,t){console.warn(this.formatMessage("WARN",e),t||"")}error(e,t,s){console.error(this.formatMessage("ERROR",e),t,s||"")}child(e){return new r(`${this.prefix}:${e}`)}}let a=new r("Automation"),i=a.child("Workflow");a.child("Validation");let n=a.child("WebSocket")},34426:(e,t,s)=>{"use strict";s.d(t,{$:()=>d});var r=s(95155),a=s(12115),i=s(99873),n=s(622),o=s(42442);let l=(0,i.F)("inline-flex items-center justify-center whitespace-nowrap rounded-lg text-sm font-medium transition-all duration-200 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 active:scale-[0.98]",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-md hover:bg-primary/90 hover:shadow-lg hover:-translate-y-0.5",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground hover:border-primary/30",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline",success:"bg-emerald-600 text-white shadow-md hover:bg-emerald-700",warning:"bg-amber-500 text-white shadow-md hover:bg-amber-600"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-lg px-3 text-xs",lg:"h-11 rounded-lg px-8",xl:"h-12 rounded-xl px-10 text-base",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=a.forwardRef(({className:e,variant:t,size:s,asChild:a=!1,loading:i=!1,children:d,disabled:c,...u},m)=>{let x=a?o.DX:"button";return(0,r.jsx)(x,{ref:m,className:(0,n.QP)(l({variant:t,size:s}),e),disabled:c||i,...u,children:i?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,r.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,r.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Loading..."]}):d})});d.displayName="Button"},36642:(e,t,s)=>{"use strict";s.d(t,{H:()=>a});var r=s(61899);let a={getCredentials:async()=>r.uE.get("/credentials/"),getCredential:async e=>r.uE.get(`/credentials/${e}`),createCredential:async e=>r.uE.post("/credentials/",e),updateCredential:async(e,t)=>r.uE.patch(`/credentials/${e}`,t),deleteCredential:async e=>r.uE.delete(`/credentials/${e}`),getOAuthUrl:async e=>r.uE.get(`/credentials/oauth/${e}/url`)}},48182:(e,t,s)=>{"use strict";s.d(t,{l:()=>i,y:()=>a});var r=s(61899);let a={getWorkflows:async()=>(await r.uE.get("/workflows/")).data,getWorkflow:async e=>r.uE.get(`/workflows/${e}`),createWorkflow:async e=>r.uE.post("/workflows/",e),updateWorkflow:async(e,t)=>r.uE.patch(`/workflows/${e}`,t),deleteWorkflow:async e=>r.uE.delete(`/workflows/${e}`),async saveWorkflow(e){let{workflow_id:t,...s}=e;return console.log("[DEBUG] Save workflow request:",JSON.stringify(s,null,2)),r.uE.post(`/workflows/${t}/save`,s)},executeWorkflow:async e=>r.uE.post(`/workflows/${e}/execute`),getNodeTypes:async()=>r.uE.get("/workflows/nodes/types"),generateWithAI:async e=>r.uE.post("/workflows/ai/generate",e),executeNode:async(e,t,s={})=>r.uE.post(`/workflows/${e}/nodes/${t}/execute`,{input_data:s}),activateWorkflow:async e=>r.uE.post(`/workflows/${e}/activate`),deactivateWorkflow:async e=>r.uE.post(`/workflows/${e}/deactivate`),getNodeOptions:async(e,t,s={})=>r.uE.post("/workflows/node/options",{node_type:e,method_name:t,dependency_values:s}),executeCode:async(e,t,s={})=>r.uE.post("/workflows/execute-code",{code:e,language:t,input_data:s}),getDebugWorkflows:async()=>r.uE.get("/workflows/debug/workflows"),getDebugWorkflow:async e=>r.uE.get(`/workflows/debug/workflows/${e}`)},i=a},54880:(e,t,s)=>{Promise.resolve().then(s.bind(s,55782))},55782:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>z});var r=s(95155),a=s(12115),i=s(9673),n=s(80642),o=s(12651),l=s(62791),d=s(20232),c=s(84980),u=s(53961),m=s(51914),x=s(60285),h=s(52905),g=s(68459),f=s(439),p=s(30971),y=s(40462),w=s(67635),b=s(8195),v=s(61878),j=s(21362),N=s(92622),k=s(34426),C=s(98500),A=s.n(C),$=s(73321),E=s(18346),S=s(25336),W=s(35625),_=s(32842),q=s(48934),D=s(36642),T=s(91337);function F({label:e,value:t,index:s}){return(0,r.jsxs)(i.P.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.05*s,duration:.2},className:"px-4 first:pl-0 last:pr-0",children:[(0,r.jsx)("span",{className:"text-xs text-muted-foreground",children:e}),(0,r.jsx)("div",{className:"mt-1",children:(0,r.jsx)("span",{className:"text-xl font-semibold",children:t})})]})}function I({status:e}){return(0,r.jsxs)("span",{className:(0,T.cn)("inline-flex items-center gap-1.5 text-xs font-medium px-2.5 py-1 rounded-full border","success"===e&&"status-active","failed"===e&&"status-error","running"===e&&"status-running","pending"===e&&"status-draft"),children:["success"===e&&(0,r.jsx)(o.A,{className:"h-3 w-3"}),"failed"===e&&(0,r.jsx)(l.A,{className:"h-3 w-3"}),"running"===e&&(0,r.jsx)(d.A,{className:"h-3 w-3 animate-pulse"}),"pending"===e&&(0,r.jsx)(c.A,{className:"h-3 w-3"}),e.charAt(0).toUpperCase()+e.slice(1)]})}function M({workflows:e,searchQuery:t}){let s=e.filter(e=>e.workflow.toLowerCase().includes(t.toLowerCase()));return 0===s.length?(0,r.jsxs)("div",{className:"empty-state",children:[(0,r.jsx)("div",{className:"empty-state-icon",children:(0,r.jsx)(u.A,{className:"h-8 w-8 text-muted-foreground"})}),(0,r.jsx)("h3",{className:"text-lg font-medium mb-2",children:"No workflows yet"}),(0,r.jsx)("p",{className:"text-muted-foreground text-sm mb-6 max-w-sm",children:"Create your first workflow to start automating your tasks"}),(0,r.jsx)(A(),{href:"/workflows/new",children:(0,r.jsxs)(k.$,{children:[(0,r.jsx)(m.A,{className:"h-4 w-4 mr-2"}),"Create Workflow"]})})]}):(0,r.jsxs)("div",{className:"space-y-3",children:[s.map(e=>(0,r.jsxs)(i.P.div,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},className:"workflow-row",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3 min-w-0 flex-1",children:[(0,r.jsx)("div",{className:(0,T.cn)("h-2.5 w-2.5 rounded-full shrink-0","success"===e.status&&"bg-emerald-500","failed"===e.status&&"bg-red-500","running"===e.status&&"bg-sky-500 animate-pulse","pending"===e.status&&"bg-amber-500")}),(0,r.jsxs)("div",{className:"min-w-0",children:[(0,r.jsx)("p",{className:"font-medium text-sm truncate",children:e.workflow}),(0,r.jsx)("p",{className:"text-xs text-muted-foreground",children:e.time})]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[(0,r.jsx)("span",{className:"text-xs font-mono text-muted-foreground bg-muted px-2 py-1 rounded",children:e.duration}),(0,r.jsx)(I,{status:e.status}),(0,r.jsx)(k.$,{variant:"ghost",size:"icon",className:"h-8 w-8",children:(0,r.jsx)(x.A,{className:"h-4 w-4"})})]})]},e.id)),(0,r.jsxs)("div",{className:"flex items-center justify-between pt-4 border-t border-border",children:[(0,r.jsxs)("span",{className:"text-sm text-muted-foreground",children:["Total ",s.length]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(k.$,{variant:"outline",size:"sm",disabled:!0,children:"Previous"}),(0,r.jsx)(k.$,{variant:"outline",size:"sm",className:"bg-primary text-primary-foreground",children:"1"}),(0,r.jsx)(k.$,{variant:"outline",size:"sm",children:"Next"}),(0,r.jsxs)("select",{className:"h-9 px-3 text-sm border border-border rounded-lg bg-background",children:[(0,r.jsx)("option",{children:"50/page"}),(0,r.jsx)("option",{children:"100/page"})]})]})]})]})}let R={google_sheets:{icon:"\uD83D\uDCCA",color:"bg-green-500/20 text-green-400",label:"Google Sheets"},slack:{icon:"\uD83D\uDCAC",color:"bg-purple-500/20 text-purple-400",label:"Slack"},discord:{icon:"\uD83C\uDFAE",color:"bg-indigo-500/20 text-indigo-400",label:"Discord"},ai_provider:{icon:"\uD83E\uDD16",color:"bg-cyan-500/20 text-cyan-400",label:"AI Provider"},webhook:{icon:"\uD83D\uDD17",color:"bg-orange-500/20 text-orange-400",label:"Webhook"},api_key:{icon:"\uD83D\uDD11",color:"bg-amber-500/20 text-amber-400",label:"API Key"},default:{icon:"\uD83D\uDD10",color:"bg-gray-500/20 text-gray-400",label:"Custom"}};function P({searchQuery:e}){let t=(0,W.jE)(),{data:s=[],isLoading:a}=(0,_.I)({queryKey:["credentials"],queryFn:()=>D.H.getCredentials()}),n=(0,q.n)({mutationFn:e=>D.H.deleteCredential(e),onSuccess:()=>{t.invalidateQueries({queryKey:["credentials"]})}}),o=s.filter(t=>t.name.toLowerCase().includes(e.toLowerCase())||t.type.toLowerCase().includes(e.toLowerCase()));return a?(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[1,2,3].map(e=>(0,r.jsx)("div",{className:"bg-card border border-border rounded-xl p-4 animate-pulse",children:(0,r.jsxs)("div",{className:"flex items-start gap-3",children:[(0,r.jsx)("div",{className:"h-10 w-10 rounded-xl bg-muted"}),(0,r.jsxs)("div",{className:"space-y-2 flex-1",children:[(0,r.jsx)("div",{className:"h-4 w-24 bg-muted rounded"}),(0,r.jsx)("div",{className:"h-3 w-16 bg-muted rounded"})]})]})},e))}):0===o.length?(0,r.jsxs)("div",{className:"empty-state",children:[(0,r.jsx)("div",{className:"empty-state-icon",children:(0,r.jsx)(h.A,{className:"h-8 w-8 text-muted-foreground"})}),(0,r.jsx)("h3",{className:"text-lg font-medium mb-2",children:"No credentials yet"}),(0,r.jsx)("p",{className:"text-muted-foreground text-sm mb-6 max-w-sm",children:"Add your first credential to connect external services"}),(0,r.jsx)(A(),{href:"/credentials",children:(0,r.jsxs)(k.$,{children:[(0,r.jsx)(m.A,{className:"h-4 w-4 mr-2"}),"Add Credential"]})})]}):(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:o.map(e=>{let t=R[e.type]||R.default;return(0,r.jsxs)(i.P.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"group bg-card border border-border rounded-xl p-4 hover:border-primary/30 transition-all",children:[(0,r.jsxs)("div",{className:"flex items-start justify-between",children:[(0,r.jsxs)("div",{className:"flex items-start gap-3",children:[(0,r.jsx)("div",{className:(0,T.cn)("h-10 w-10 rounded-xl flex items-center justify-center text-lg",t.color),children:t.icon}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"font-medium text-foreground",children:e.name}),(0,r.jsx)("p",{className:"text-sm text-muted-foreground mt-0.5",children:t.label})]})]}),(0,r.jsx)(k.$,{variant:"ghost",size:"icon",className:"h-8 w-8 opacity-0 group-hover:opacity-100 transition-opacity",onClick:()=>n.mutate(e.id),children:(0,r.jsx)(g.A,{className:"h-4 w-4 text-red-500"})})]}),(0,r.jsxs)("div",{className:"mt-4 pt-3 border-t border-border flex items-center justify-between text-xs text-muted-foreground",children:[(0,r.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,r.jsx)(c.A,{className:"h-3.5 w-3.5"}),"Created ",new Date(e.created_at).toLocaleDateString()]}),(0,r.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,r.jsx)(f.A,{className:"h-3.5 w-3.5 text-green-500"}),"Encrypted"]})]})]},e.id)})})}function L({workflows:e,searchQuery:t}){let s=e.flatMap((e,t)=>Array.from({length:Math.min(2,t+1)},(t,s)=>({id:`exec-${e.id}-${s}`,workflow_id:e.id,workflow_name:e.workflow,status:["success","success","failed","running"][Math.floor(4*Math.random())],started_at:new Date(Date.now()-864e5*Math.random()*7).toISOString(),duration:`${(5*Math.random()+.5).toFixed(1)}s`}))).sort((e,t)=>new Date(t.started_at).getTime()-new Date(e.started_at).getTime()).filter(e=>e.workflow_name.toLowerCase().includes(t.toLowerCase()));return 0===s.length?(0,r.jsxs)("div",{className:"empty-state",children:[(0,r.jsx)("div",{className:"empty-state-icon",children:(0,r.jsx)(d.A,{className:"h-8 w-8 text-muted-foreground"})}),(0,r.jsx)("h3",{className:"text-lg font-medium mb-2",children:"No executions yet"}),(0,r.jsx)("p",{className:"text-muted-foreground text-sm mb-6 max-w-sm",children:"Run your first workflow to see execution history here"})]}):(0,r.jsx)("div",{className:"space-y-3",children:s.map(e=>(0,r.jsx)(i.P.div,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},className:"group bg-card border border-border rounded-xl p-4 hover:border-primary/30 transition-all",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[(0,r.jsx)("div",{className:(0,T.cn)("h-10 w-10 rounded-xl flex items-center justify-center","success"===e.status?"bg-emerald-500/20":"failed"===e.status?"bg-red-500/20":"running"===e.status?"bg-sky-500/20":"bg-muted"),children:(0,r.jsx)(p.A,{className:(0,T.cn)("h-5 w-5","success"===e.status?"text-emerald-500":"failed"===e.status?"text-red-500":"running"===e.status?"text-sky-500":"text-muted-foreground")})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"font-medium text-foreground",children:e.workflow_name}),(0,r.jsx)("p",{className:"text-xs text-muted-foreground mt-0.5",children:new Date(e.started_at).toLocaleString()})]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[(0,r.jsx)("span",{className:"text-xs font-mono text-muted-foreground bg-muted px-2 py-1 rounded",children:e.duration}),(0,r.jsx)(I,{status:e.status})]})]})},e.id))})}let Q=[{id:"1",key:"BASE_URL",value:"https://api.example.com",type:"string",description:"Base URL for API requests"},{id:"2",key:"MAX_RETRIES",value:"3",type:"number",description:"Maximum retry attempts"},{id:"3",key:"DEBUG_MODE",value:"true",type:"boolean",description:"Enable debug logging"}];function K({searchQuery:e}){let[t]=(0,a.useState)(Q),s={string:"bg-blue-500/20 text-blue-400",number:"bg-purple-500/20 text-purple-400",boolean:"bg-green-500/20 text-green-400",secret:"bg-red-500/20 text-red-400"},n=t.filter(t=>t.key.toLowerCase().includes(e.toLowerCase()));return 0===n.length?(0,r.jsxs)("div",{className:"empty-state",children:[(0,r.jsx)("div",{className:"empty-state-icon",children:(0,r.jsx)(y.A,{className:"h-8 w-8 text-muted-foreground"})}),(0,r.jsx)("h3",{className:"text-lg font-medium mb-2",children:"No variables yet"}),(0,r.jsx)("p",{className:"text-muted-foreground text-sm mb-6 max-w-sm",children:"Create reusable variables for your workflows"}),(0,r.jsx)(A(),{href:"/variables",children:(0,r.jsxs)(k.$,{children:[(0,r.jsx)(m.A,{className:"h-4 w-4 mr-2"}),"Add Variable"]})})]}):(0,r.jsx)("div",{className:"space-y-3",children:n.map(e=>(0,r.jsxs)(i.P.div,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},className:"group bg-card border border-border rounded-xl p-4 hover:border-primary/30 transition-all",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)("code",{className:"text-sm font-mono font-semibold text-primary bg-primary/10 px-2 py-1 rounded",children:e.key}),(0,r.jsx)("span",{className:(0,T.cn)("text-[10px] font-medium px-2 py-0.5 rounded",s[e.type]),children:e.type.toUpperCase()})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2 bg-muted rounded-lg px-3 py-1.5",children:[(0,r.jsx)("code",{className:"text-sm font-mono text-foreground",children:e.value}),(0,r.jsx)(k.$,{variant:"ghost",size:"icon",className:"h-6 w-6",children:(0,r.jsx)(w.A,{className:"h-3.5 w-3.5"})})]})]}),e.description&&(0,r.jsx)("p",{className:"text-sm text-muted-foreground mt-3",children:e.description})]},e.id))})}function O(){return(0,r.jsxs)("div",{className:"empty-state",children:[(0,r.jsx)("div",{className:"empty-state-icon",children:(0,r.jsx)(b.A,{className:"h-8 w-8 text-muted-foreground"})}),(0,r.jsx)("h3",{className:"text-lg font-medium mb-2",children:"Data Tables"}),(0,r.jsx)("p",{className:"text-muted-foreground text-sm mb-6 max-w-sm",children:"Store and manage structured data for your workflows. Coming soon!"}),(0,r.jsx)("span",{className:"text-xs font-medium px-3 py-1.5 rounded-full bg-primary/10 text-primary",children:"Coming Soon"})]})}function z(){let[e,t]=(0,a.useState)("Workflows"),[s,o]=(0,a.useState)(""),{stats:l,workflows:d,handleAICreate:c}=function(){let e=(0,$.useRouter)(),[t,s]=(0,a.useState)(""),[r,i]=(0,a.useState)("grid"),[n,o]=(0,a.useState)("workflows"),{data:l,isLoading:d,error:c}=(0,E.mP)(),u=(0,E.QB)(),m=(0,E.nV)(),x=(0,E.yM)(),h=Array.isArray(l)?l:[],g=(0,a.useMemo)(()=>h.filter(e=>e.meta.name.toLowerCase().includes(t.toLowerCase())||e.meta.description?.toLowerCase().includes(t.toLowerCase())),[h,t]);return{workflows:g,isLoading:d,error:c,stats:(0,a.useMemo)(()=>{let e=h.filter(e=>"active"===e.meta.status).length;return{activeWorkflows:e,totalExecutions:1e3*h.length,avgExecutionTime:"1.2s"}},[h]),searchQuery:t,setSearchQuery:s,viewMode:r,setViewMode:i,activeTab:n,setActiveTab:o,handleAICreate:async(t,s,r)=>{try{let a=await u.mutateAsync({prompt:t,model:s,credentialId:r});S.vF.info("AI Generation Result:",a);let i=await m.mutateAsync({name:"AI Generated Workflow",description:t});i&&i.id&&(a.nodes&&a.edges&&await x.mutateAsync({workflow_id:i.id,meta:{id:i.id,name:i.meta.name,description:i.meta.description,version:i.meta.version||"1.0.0",status:"draft",tags:[],created_at:i.meta.created_at,updated_at:new Date().toISOString()},graph:{nodes:a.nodes,edges:a.edges},execution:{mode:"sequential",timeout_seconds:300},observability:{logging:!0,metrics:!1},ai:{model:"default"}}),e.push(`/workflows/${i.id}`))}catch(e){throw S.vF.error("Failed to generate workflow:",e),e}},isGeneratingAI:u.isPending}}(),u=[{label:"Prod. executions",value:l.totalExecutions.toLocaleString()},{label:"Failed prod. executions",value:"0"},{label:"Failure rate",value:"0%"},{label:"Time saved",value:"â€”"},{label:"Run time (avg.)",value:l.avgExecutionTime||"0s"}],m=d.slice(0,5).map(e=>({id:e.id,workflow:e.meta.name,status:"active"===e.meta.status?"success":"failed",time:new Date(e.meta.updated_at).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),duration:"1.2s"}));return(0,r.jsxs)("div",{className:"space-y-8 max-w-[1600px] mx-auto",children:[(0,r.jsxs)("div",{className:"flex flex-col lg:flex-row lg:items-center justify-between gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-2xl font-semibold tracking-tight",children:"Overview"}),(0,r.jsx)("p",{className:"text-muted-foreground text-sm mt-1",children:"All the workflows, credentials and data tables you have access to"})]}),(0,r.jsx)("div",{className:"flex items-center gap-3",children:(0,r.jsx)(A(),{href:"/workflows/new",children:(0,r.jsx)(k.$,{children:"Create workflow"})})})]}),(0,r.jsx)("div",{className:"rounded-lg border border-border bg-card p-4",children:(0,r.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4 md:gap-0 md:divide-x divide-border",children:u.map((e,t)=>(0,r.jsx)(F,{...e,index:t},e.label))})}),(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between border-b border-border",children:[(0,r.jsx)("div",{className:"flex items-center gap-6",children:["Workflows","Credentials","Executions","Variables","Data tables"].map(s=>(0,r.jsx)("button",{onClick:()=>{t(s),o("")},className:(0,T.cn)("pb-3 text-sm font-medium border-b-2 transition-colors",e===s?"border-primary text-primary":"border-transparent text-muted-foreground hover:text-foreground"),children:s},s))}),(0,r.jsxs)("div",{className:"flex items-center gap-3 pb-3",children:[(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)(v.A,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),(0,r.jsx)("input",{type:"text",placeholder:`Search ${e.toLowerCase()}...`,value:s,onChange:e=>o(e.target.value),className:"search-input w-48 !pl-9"})]}),(0,r.jsxs)(k.$,{variant:"outline",size:"sm",className:"gap-2",children:["Sort by last updated",(0,r.jsx)(j.A,{className:"h-3 w-3 rotate-90"})]}),(0,r.jsx)(k.$,{variant:"outline",size:"icon",className:"h-9 w-9",children:(0,r.jsx)(N.A,{className:"h-4 w-4"})})]})]}),(0,r.jsx)(n.N,{mode:"wait",children:(0,r.jsx)(i.P.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},children:(()=>{switch(e){case"Workflows":default:return(0,r.jsx)(M,{workflows:m,searchQuery:s});case"Credentials":return(0,r.jsx)(P,{searchQuery:s});case"Executions":return(0,r.jsx)(L,{workflows:m,searchQuery:s});case"Variables":return(0,r.jsx)(K,{searchQuery:s});case"Data tables":return(0,r.jsx)(O,{})}})()},e)})]})]})}},61899:(e,t,s)=>{"use strict";s.d(t,{hs:()=>a,uE:()=>d});var r=s(25336);let a="http://localhost:5678/api/v1",i={maxRetries:3,baseDelayMs:1e3,maxDelayMs:1e4,retryableStatuses:[408,429,500,502,503,504]};function n(e,t){let s=t.baseDelayMs*Math.pow(2,e),r=.3*Math.random()*s;return Math.min(s+r,t.maxDelayMs)}function o(e){return new Promise(t=>setTimeout(t,e))}class l{constructor(){this.token=null,this.retryConfig=i,this.token=localStorage.getItem("auth_token")}static getInstance(){return l.instance||(l.instance=new l),l.instance}setToken(e){this.token=e,e?localStorage.setItem("auth_token",e):localStorage.removeItem("auth_token")}getToken(){return this.token}setRetryConfig(e){this.retryConfig={...this.retryConfig,...e}}async request(e,t={},s=0){let i={"Content-Type":"application/json","X-Request-ID":0===s?crypto.randomUUID?crypto.randomUUID():`${Date.now()}-${Math.random().toString(36).substring(2,11)}`:t.headers?.["X-Request-ID"],...t.headers};this.token&&(i.Authorization=`Bearer ${this.token}`);try{var l;let d=await fetch(`${a}${e}`,{...t,headers:i});if(429===d.status){let a=d.headers.get("Retry-After");if(a&&s<this.retryConfig.maxRetries){let i=1e3*parseInt(a,10)||n(s,this.retryConfig);return r.vF.warn(`Rate limited on ${e}. Retrying after ${i}ms (attempt ${s+1})`),await o(i),this.request(e,t,s+1)}}if(!d.ok&&(l=d.status,this.retryConfig.retryableStatuses.includes(l))&&s<this.retryConfig.maxRetries){let a=n(s,this.retryConfig);return r.vF.warn(`Request failed with ${d.status} on ${e}. Retrying after ${a}ms (attempt ${s+1})`),await o(a),this.request(e,t,s+1)}if(!d.ok){let e,t=await d.json().catch(()=>({detail:"An error occurred"}));throw e=Array.isArray(t.detail)?t.detail.map(e=>e.msg||e.message||"Validation error").join(". "):"string"==typeof t.detail?t.detail:t.detail?.msg?t.detail.msg:t.message?t.message:`HTTP error! status: ${d.status}`,Error(e)}return d.json()}catch(i){let a=e.includes("/users/me")||e.includes("/login");if(i instanceof TypeError&&"Failed to fetch"===i.message&&s<this.retryConfig.maxRetries&&!a){let a=n(s,this.retryConfig);return r.vF.warn(`Network error on ${e}. Retrying after ${a}ms (attempt ${s+1})`),await o(a),this.request(e,t,s+1)}throw i}}async get(e){return this.request(e,{method:"GET"})}async post(e,t){return this.request(e,{method:"POST",body:t?JSON.stringify(t):void 0})}async postFormData(e,t){let s={"Content-Type":"application/x-www-form-urlencoded"};this.token&&(s.Authorization=`Bearer ${this.token}`);let r=await fetch(`${a}${e}`,{method:"POST",headers:s,body:t});if(!r.ok){let e=await r.json().catch(()=>({detail:"An error occurred"}));throw Error(Array.isArray(e.detail)?e.detail.map(e=>e.msg||e.message||"Validation error").join(". "):"string"==typeof e.detail?e.detail:e.detail?.msg?e.detail.msg:e.message?e.message:`HTTP error! status: ${r.status}`)}return r.json()}async put(e,t){return this.request(e,{method:"PUT",body:JSON.stringify(t)})}async patch(e,t){return this.request(e,{method:"PATCH",body:JSON.stringify(t)})}async delete(e){return this.request(e,{method:"DELETE"})}}let d=l.getInstance()},91337:(e,t,s)=>{"use strict";s.d(t,{cn:()=>i});var r=s(76910),a=s(622);function i(...e){return(0,a.QP)((0,r.$)(e))}}},e=>{e.O(0,[8547,2842,5039,8500,8376,8441,3794,7358],()=>e(e.s=54880)),_N_E=e.O()}]);