(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4859],{13545:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(78340).A)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},15945:(e,t,r)=>{Promise.resolve().then(r.bind(r,41388))},18300:(e,t,r)=>{"use strict";r.d(t,{iZ:()=>d,vz:()=>c,Wn:()=>m,LR:()=>u});var s=r(32842),a=r(35625),n=r(48934),i=r(61899);let o={async login(e){let t=new URLSearchParams;t.append("username",e.email),t.append("password",e.password);let r=await i.uE.postFormData("/login/access-token",t);return i.uE.setToken(r.access_token),r},register:async e=>i.uE.post("/register",e),getCurrentUser:async()=>i.uE.get("/users/me"),logout(){i.uE.setToken(null)}},l={all:["auth"],currentUser:()=>[...l.all,"current-user"]};function d(){return(0,s.I)({queryKey:l.currentUser(),queryFn:o.getCurrentUser,retry:!1,staleTime:3e5,refetchOnWindowFocus:!1,refetchOnMount:!1,refetchOnReconnect:!1})}function c(){let e=(0,a.jE)();return(0,n.n)({mutationFn:e=>o.login(e),onSuccess:()=>{e.invalidateQueries({queryKey:l.currentUser()})}})}function u(){let e=(0,a.jE)();return(0,n.n)({mutationFn:e=>o.register(e),onSuccess:()=>{e.invalidateQueries({queryKey:l.currentUser()})}})}function m(){let e=(0,a.jE)();return(0,n.n)({mutationFn:()=>(o.logout(),Promise.resolve()),onSuccess:()=>{e.clear()}})}},25336:(e,t,r)=>{"use strict";r.d(t,{X6:()=>i,aw:()=>n,vF:()=>a});class s{constructor(e="App"){this.prefix=e}formatMessage(e,t){let r=new Date().toISOString().split("T")[1].split(".")[0];return`[${r}] [${this.prefix}] ${e}: ${t}`}debug(e,t){}info(e,t){}warn(e,t){console.warn(this.formatMessage("WARN",e),t||"")}error(e,t,r){console.error(this.formatMessage("ERROR",e),t,r||"")}child(e){return new s(`${this.prefix}:${e}`)}}let a=new s("Automation"),n=a.child("Workflow");a.child("Validation");let i=a.child("WebSocket")},34426:(e,t,r)=>{"use strict";r.d(t,{$:()=>d});var s=r(95155),a=r(12115),n=r(99873),i=r(622),o=r(42442);let l=(0,n.F)("inline-flex items-center justify-center whitespace-nowrap rounded-lg text-sm font-medium transition-all duration-200 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 active:scale-[0.98]",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-md hover:bg-primary/90 hover:shadow-lg hover:-translate-y-0.5",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground hover:border-primary/30",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline",success:"bg-emerald-600 text-white shadow-md hover:bg-emerald-700",warning:"bg-amber-500 text-white shadow-md hover:bg-amber-600"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-lg px-3 text-xs",lg:"h-11 rounded-lg px-8",xl:"h-12 rounded-xl px-10 text-base",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=a.forwardRef(({className:e,variant:t,size:r,asChild:a=!1,loading:n=!1,children:d,disabled:c,...u},m)=>{let h=a?o.DX:"button";return(0,s.jsx)(h,{ref:m,className:(0,i.QP)(l({variant:t,size:r}),e),disabled:c||n,...u,children:n?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,s.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,s.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Loading..."]}):d})});d.displayName="Button"},41388:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>h});var s=r(95155),a=r(12115),n=r(73321),i=r(98500),o=r.n(i),l=r(5772),d=r(13545),c=r(34426),u=r(59210),m=r(18300);function h(){let e=(0,n.useRouter)(),[t,r]=(0,a.useState)(""),[i,h]=(0,a.useState)(""),f=(0,m.vz)(),g=async r=>{r.preventDefault();try{await f.mutateAsync({email:t,password:i}),e.push("/dashboard")}catch(e){console.error("Login failed:",e)}};return(0,s.jsxs)("div",{className:"w-full max-w-sm",children:[(0,s.jsxs)("div",{className:"text-center mb-8",children:[(0,s.jsx)("div",{className:"flex items-center justify-center mb-6",children:(0,s.jsx)(l.default,{src:"/logo.png",alt:"Fuse",width:72,height:72,className:"object-contain"})}),(0,s.jsx)("h1",{className:"text-xl font-semibold text-foreground",children:"Sign in to Fuse"})]}),(0,s.jsx)("div",{className:"bg-card border border-border rounded-lg p-6",children:(0,s.jsxs)("form",{onSubmit:g,className:"space-y-4",children:[f.isError&&(0,s.jsxs)("div",{className:"bg-red-500/10 border border-red-500/20 rounded-lg p-3 flex items-start gap-2",children:[(0,s.jsx)(d.A,{className:"h-4 w-4 text-red-500 flex-shrink-0 mt-0.5"}),(0,s.jsx)("p",{className:"text-sm text-red-500",children:f.error?.message||"Invalid email or password"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm text-muted-foreground mb-1.5",children:"Email"}),(0,s.jsx)(u.p,{type:"email",value:t,onChange:e=>r(e.target.value),placeholder:"name@example.com",required:!0})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm text-muted-foreground mb-1.5",children:"Password"}),(0,s.jsx)(u.p,{type:"password",value:i,onChange:e=>h(e.target.value),placeholder:"••••••••",required:!0})]}),(0,s.jsx)(c.$,{type:"submit",className:"w-full",disabled:f.isPending,children:f.isPending?(0,s.jsxs)("div",{className:"flex items-center justify-center gap-2",children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-white border-t-transparent"}),"Signing in..."]}):"Sign in"})]})}),(0,s.jsxs)("p",{className:"text-center text-sm text-muted-foreground mt-6",children:["New to Fuse?"," ",(0,s.jsx)(o(),{href:"/auth/register",className:"text-primary hover:underline",children:"Create an account"})]})]})}},42442:(e,t,r)=>{"use strict";let s,a,n;r.d(t,{DX:()=>h});var i,o=r(12115),l=r(47527),d=r(95155),c=Symbol.for("react.lazy"),u=(i||(i=r.t(o,2)))[" use ".trim().toString()];function m(e){var t;return null!=e&&"object"==typeof e&&"$$typeof"in e&&e.$$typeof===c&&"_payload"in e&&"object"==typeof(t=e._payload)&&null!==t&&"then"in t}var h=((n=o.forwardRef((e,t)=>{let{children:r,...s}=e;if(m(r)&&"function"==typeof u&&(r=u(r._payload)),o.isValidElement(r)){var a;let e,n,i=(a=r,(n=(e=Object.getOwnPropertyDescriptor(a.props,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning)?a.ref:(n=(e=Object.getOwnPropertyDescriptor(a,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning)?a.props.ref:a.props.ref||a.ref),d=function(e,t){let r={...t};for(let s in t){let a=e[s],n=t[s];/^on[A-Z]/.test(s)?a&&n?r[s]=(...e)=>{let t=n(...e);return a(...e),t}:a&&(r[s]=a):"style"===s?r[s]={...a,...n}:"className"===s&&(r[s]=[a,n].filter(Boolean).join(" "))}return{...e,...r}}(s,r.props);return r.type!==o.Fragment&&(d.ref=t?(0,l.t)(t,i):i),o.cloneElement(r,d)}return o.Children.count(r)>1?o.Children.only(null):null})).displayName="Slot.SlotClone",s=n,(a=o.forwardRef((e,t)=>{let{children:r,...a}=e;m(r)&&"function"==typeof u&&(r=u(r._payload));let n=o.Children.toArray(r),i=n.find(g);if(i){let e=i.props.children,r=n.map(t=>t!==i?t:o.Children.count(e)>1?o.Children.only(null):o.isValidElement(e)?e.props.children:null);return(0,d.jsx)(s,{...a,ref:t,children:o.isValidElement(e)?o.cloneElement(e,void 0,r):null})}return(0,d.jsx)(s,{...a,ref:t,children:r})})).displayName="Slot.Slot",a),f=Symbol("radix.slottable");function g(e){return o.isValidElement(e)&&"function"==typeof e.type&&"__radixId"in e.type&&e.type.__radixId===f}},59210:(e,t,r)=>{"use strict";r.d(t,{p:()=>l});var s=r(95155),a=r(12115),n=r(99873),i=r(622);let o=(0,n.F)("block w-full rounded-md border border-slate-200 bg-white px-3 py-2 text-sm dark:bg-slate-800 dark:border-slate-700 dark:text-slate-100",{variants:{size:{sm:"py-1.5 text-sm",md:"py-2 text-sm",lg:"py-3 text-base"}},defaultVariants:{size:"md"}}),l=a.forwardRef(({className:e,size:t,...r},a)=>(0,s.jsx)("input",{ref:a,className:(0,i.QP)(o({size:t}),e),...r}));l.displayName="Input"},61899:(e,t,r)=>{"use strict";r.d(t,{hs:()=>a,uE:()=>d});var s=r(25336);let a="http://localhost:5678/api/v1",n={maxRetries:3,baseDelayMs:1e3,maxDelayMs:1e4,retryableStatuses:[408,429,500,502,503,504]};function i(e,t){let r=t.baseDelayMs*Math.pow(2,e),s=.3*Math.random()*r;return Math.min(r+s,t.maxDelayMs)}function o(e){return new Promise(t=>setTimeout(t,e))}class l{constructor(){this.token=null,this.retryConfig=n,this.token=localStorage.getItem("auth_token")}static getInstance(){return l.instance||(l.instance=new l),l.instance}setToken(e){this.token=e,e?localStorage.setItem("auth_token",e):localStorage.removeItem("auth_token")}getToken(){return this.token}setRetryConfig(e){this.retryConfig={...this.retryConfig,...e}}async request(e,t={},r=0){let n={"Content-Type":"application/json","X-Request-ID":0===r?crypto.randomUUID?crypto.randomUUID():`${Date.now()}-${Math.random().toString(36).substring(2,11)}`:t.headers?.["X-Request-ID"],...t.headers};this.token&&(n.Authorization=`Bearer ${this.token}`);try{var l;let d=await fetch(`${a}${e}`,{...t,headers:n});if(429===d.status){let a=d.headers.get("Retry-After");if(a&&r<this.retryConfig.maxRetries){let n=1e3*parseInt(a,10)||i(r,this.retryConfig);return s.vF.warn(`Rate limited on ${e}. Retrying after ${n}ms (attempt ${r+1})`),await o(n),this.request(e,t,r+1)}}if(!d.ok&&(l=d.status,this.retryConfig.retryableStatuses.includes(l))&&r<this.retryConfig.maxRetries){let a=i(r,this.retryConfig);return s.vF.warn(`Request failed with ${d.status} on ${e}. Retrying after ${a}ms (attempt ${r+1})`),await o(a),this.request(e,t,r+1)}if(!d.ok){let e,t=await d.json().catch(()=>({detail:"An error occurred"}));throw e=Array.isArray(t.detail)?t.detail.map(e=>e.msg||e.message||"Validation error").join(". "):"string"==typeof t.detail?t.detail:t.detail?.msg?t.detail.msg:t.message?t.message:`HTTP error! status: ${d.status}`,Error(e)}return d.json()}catch(n){let a=e.includes("/users/me")||e.includes("/login");if(n instanceof TypeError&&"Failed to fetch"===n.message&&r<this.retryConfig.maxRetries&&!a){let a=i(r,this.retryConfig);return s.vF.warn(`Network error on ${e}. Retrying after ${a}ms (attempt ${r+1})`),await o(a),this.request(e,t,r+1)}throw n}}async get(e){return this.request(e,{method:"GET"})}async post(e,t){return this.request(e,{method:"POST",body:t?JSON.stringify(t):void 0})}async postFormData(e,t){let r={"Content-Type":"application/x-www-form-urlencoded"};this.token&&(r.Authorization=`Bearer ${this.token}`);let s=await fetch(`${a}${e}`,{method:"POST",headers:r,body:t});if(!s.ok){let e=await s.json().catch(()=>({detail:"An error occurred"}));throw Error(Array.isArray(e.detail)?e.detail.map(e=>e.msg||e.message||"Validation error").join(". "):"string"==typeof e.detail?e.detail:e.detail?.msg?e.detail.msg:e.message?e.message:`HTTP error! status: ${s.status}`)}return s.json()}async put(e,t){return this.request(e,{method:"PUT",body:JSON.stringify(t)})}async patch(e,t){return this.request(e,{method:"PATCH",body:JSON.stringify(t)})}async delete(e){return this.request(e,{method:"DELETE"})}}let d=l.getInstance()}},e=>{e.O(0,[8547,2842,8500,8343,8441,3794,7358],()=>e(e.s=15945)),_N_E=e.O()}]);