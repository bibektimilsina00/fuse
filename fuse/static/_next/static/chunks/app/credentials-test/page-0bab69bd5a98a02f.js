(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[70],{6296:(t,e,s)=>{"use strict";s.d(e,{A:()=>r});let r=(0,s(78340).A)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},25336:(t,e,s)=>{"use strict";s.d(e,{X6:()=>n,aw:()=>a,vF:()=>i});class r{constructor(t="App"){this.prefix=t}formatMessage(t,e){let s=new Date().toISOString().split("T")[1].split(".")[0];return`[${s}] [${this.prefix}] ${t}: ${e}`}debug(t,e){}info(t,e){}warn(t,e){console.warn(this.formatMessage("WARN",t),e||"")}error(t,e,s){console.error(this.formatMessage("ERROR",t),e,s||"")}child(t){return new r(`${this.prefix}:${t}`)}}let i=new r("Automation"),a=i.child("Workflow");i.child("Validation");let n=i.child("WebSocket")},29260:(t,e,s)=>{Promise.resolve().then(s.bind(s,47617))},34426:(t,e,s)=>{"use strict";s.d(e,{$:()=>c});var r=s(95155),i=s(12115),a=s(99873),n=s(622),o=s(42442);let l=(0,a.F)("inline-flex items-center justify-center whitespace-nowrap rounded-lg text-sm font-medium transition-all duration-200 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 active:scale-[0.98]",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-md hover:bg-primary/90 hover:shadow-lg hover:-translate-y-0.5",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground hover:border-primary/30",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline",success:"bg-emerald-600 text-white shadow-md hover:bg-emerald-700",warning:"bg-amber-500 text-white shadow-md hover:bg-amber-600"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-lg px-3 text-xs",lg:"h-11 rounded-lg px-8",xl:"h-12 rounded-xl px-10 text-base",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),c=i.forwardRef(({className:t,variant:e,size:s,asChild:i=!1,loading:a=!1,children:c,disabled:u,...d},h)=>{let m=i?o.DX:"button";return(0,r.jsx)(m,{ref:h,className:(0,n.QP)(l({variant:e,size:s}),t),disabled:u||a,...d,children:a?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,r.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,r.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Loading..."]}):c})});c.displayName="Button"},36642:(t,e,s)=>{"use strict";s.d(e,{H:()=>i});var r=s(61899);let i={getCredentials:async()=>r.uE.get("/credentials/"),getCredential:async t=>r.uE.get(`/credentials/${t}`),createCredential:async t=>r.uE.post("/credentials/",t),updateCredential:async(t,e)=>r.uE.patch(`/credentials/${t}`,e),deleteCredential:async t=>r.uE.delete(`/credentials/${t}`),getOAuthUrl:async t=>r.uE.get(`/credentials/oauth/${t}/url`)}},42442:(t,e,s)=>{"use strict";let r,i,a;s.d(e,{DX:()=>m});var n,o=s(12115),l=s(47527),c=s(95155),u=Symbol.for("react.lazy"),d=(n||(n=s.t(o,2)))[" use ".trim().toString()];function h(t){var e;return null!=t&&"object"==typeof t&&"$$typeof"in t&&t.$$typeof===u&&"_payload"in t&&"object"==typeof(e=t._payload)&&null!==e&&"then"in e}var m=((a=o.forwardRef((t,e)=>{let{children:s,...r}=t;if(h(s)&&"function"==typeof d&&(s=d(s._payload)),o.isValidElement(s)){var i;let t,a,n=(i=s,(a=(t=Object.getOwnPropertyDescriptor(i.props,"ref")?.get)&&"isReactWarning"in t&&t.isReactWarning)?i.ref:(a=(t=Object.getOwnPropertyDescriptor(i,"ref")?.get)&&"isReactWarning"in t&&t.isReactWarning)?i.props.ref:i.props.ref||i.ref),c=function(t,e){let s={...e};for(let r in e){let i=t[r],a=e[r];/^on[A-Z]/.test(r)?i&&a?s[r]=(...t)=>{let e=a(...t);return i(...t),e}:i&&(s[r]=i):"style"===r?s[r]={...i,...a}:"className"===r&&(s[r]=[i,a].filter(Boolean).join(" "))}return{...t,...s}}(r,s.props);return s.type!==o.Fragment&&(c.ref=e?(0,l.t)(e,n):n),o.cloneElement(s,c)}return o.Children.count(s)>1?o.Children.only(null):null})).displayName="Slot.SlotClone",r=a,(i=o.forwardRef((t,e)=>{let{children:s,...i}=t;h(s)&&"function"==typeof d&&(s=d(s._payload));let a=o.Children.toArray(s),n=a.find(y);if(n){let t=n.props.children,s=a.map(e=>e!==n?e:o.Children.count(t)>1?o.Children.only(null):o.isValidElement(t)?t.props.children:null);return(0,c.jsx)(r,{...i,ref:e,children:o.isValidElement(t)?o.cloneElement(t,void 0,s):null})}return(0,c.jsx)(r,{...i,ref:e,children:s})})).displayName="Slot.Slot",i),p=Symbol("radix.slottable");function y(t){return o.isValidElement(t)&&"function"==typeof t.type&&"__radixId"in t.type&&t.type.__radixId===p}},45766:(t,e,s)=>{"use strict";s.d(e,{Ii:()=>d,Lv:()=>u,aX:()=>l,eG:()=>o,vE:()=>c});var r=s(32842),i=s(35625),a=s(48934),n=s(36642);let o={all:["credentials"],lists:()=>[...o.all,"list"],list:t=>[...o.lists(),t],byType:t=>[...o.all,"byType",t],details:()=>[...o.all,"detail"],detail:t=>[...o.details(),t]};function l(){return(0,r.I)({queryKey:o.lists(),queryFn:n.H.getCredentials})}function c(t){return(0,r.I)({queryKey:o.byType(t),queryFn:async()=>(await n.H.getCredentials()).filter(e=>e.type===t),enabled:!!t})}function u(){let t=(0,i.jE)();return(0,a.n)({mutationFn:t=>n.H.createCredential(t),onSuccess:()=>{t.invalidateQueries({queryKey:o.lists()})}})}function d(){let t=(0,i.jE)();return(0,a.n)({mutationFn:t=>n.H.deleteCredential(t),onSuccess:()=>{t.invalidateQueries({queryKey:o.lists()})}})}},47617:(t,e,s)=>{"use strict";s.r(e),s.d(e,{default:()=>d});var r=s(95155),i=s(12115),a=s(45766),n=s(34426),o=s(6296),l=s(51914),c=s(52905),u=s(68459);function d(){let{data:t=[],isLoading:e,refetch:s}=(0,a.aX)(),d=(0,a.Lv)(),h=(0,a.Ii)(),[m,p]=(0,i.useState)(""),[y,f]=(0,i.useState)("slack"),[g,b]=(0,i.useState)(""),x=async()=>{if(!m||!g)return;let t={value:g};try{let e=JSON.parse(g);t=Object.fromEntries(Object.entries(e).map(([t,e])=>[t,String(e)]))}catch{t={value:g}}d.mutate({name:m,type:y,data:t},{onSuccess:()=>{p(""),b("")},onError:t=>{console.error("Failed to create credential:",t),alert("Failed to create credential")}})},v=async t=>{confirm("Delete this credential?")&&h.mutate(t,{onError:t=>{console.error("Failed to delete credential:",t)}})};return(0,r.jsx)("div",{className:"min-h-screen bg-background p-8",children:(0,r.jsxs)("div",{className:"max-w-4xl mx-auto space-y-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-3xl font-bold",children:"Credentials Test"}),(0,r.jsx)("p",{className:"text-muted-foreground",children:"Manage your service connections"})]}),(0,r.jsx)(n.$,{onClick:()=>s(),disabled:e,children:e?(0,r.jsx)(o.A,{className:"h-4 w-4 animate-spin"}):"Refresh"})]}),(0,r.jsxs)("div",{className:"bg-card border border-border rounded-xl p-6 space-y-4",children:[(0,r.jsxs)("h2",{className:"text-xl font-semibold flex items-center gap-2",children:[(0,r.jsx)(l.A,{className:"h-5 w-5"}),"Add New Credential"]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"text-sm font-medium mb-2 block",children:"Name"}),(0,r.jsx)("input",{type:"text",value:m,onChange:t=>p(t.target.value),placeholder:"My Slack Workspace",className:"w-full px-4 py-2 bg-background border border-border rounded-lg"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"text-sm font-medium mb-2 block",children:"Type"}),(0,r.jsxs)("select",{value:y,onChange:t=>f(t.target.value),className:"w-full px-4 py-2 bg-background border border-border rounded-lg",children:[(0,r.jsx)("option",{value:"slack",children:"Slack"}),(0,r.jsx)("option",{value:"discord",children:"Discord"}),(0,r.jsx)("option",{value:"whatsapp",children:"WhatsApp"}),(0,r.jsx)("option",{value:"google_sheets",children:"Google Sheets"}),(0,r.jsx)("option",{value:"generic",children:"Generic"})]})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"text-sm font-medium mb-2 block",children:"Secret / API Key / Webhook URL"}),(0,r.jsx)("textarea",{value:g,onChange:t=>b(t.target.value),placeholder:"Paste your API key, webhook URL, or JSON credentials here...",className:"w-full px-4 py-3 bg-background border border-border rounded-lg font-mono text-sm h-24"})]}),(0,r.jsxs)(n.$,{onClick:x,disabled:d.isPending||!m||!g,children:[d.isPending?(0,r.jsx)(o.A,{className:"h-4 w-4 animate-spin mr-2"}):(0,r.jsx)(l.A,{className:"h-4 w-4 mr-2"}),"Create Credential"]})]}),(0,r.jsxs)("div",{className:"bg-card border border-border rounded-xl p-6",children:[(0,r.jsxs)("h2",{className:"text-xl font-semibold mb-4 flex items-center gap-2",children:[(0,r.jsx)(c.A,{className:"h-5 w-5"}),"Saved Credentials (",t.length,")"]}),e?(0,r.jsx)("div",{className:"text-center py-8",children:(0,r.jsx)(o.A,{className:"h-8 w-8 animate-spin mx-auto text-muted-foreground"})}):0===t.length?(0,r.jsx)("div",{className:"text-center py-8 text-muted-foreground",children:"No credentials found. Create one above to get started."}):(0,r.jsx)("div",{className:"space-y-3",children:t.map(t=>(0,r.jsxs)("div",{className:"flex items-center justify-between p-4 bg-background border border-border rounded-lg hover:border-primary/40 transition-colors",children:[(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("div",{className:"font-semibold",children:t.name}),(0,r.jsxs)("div",{className:"text-sm text-muted-foreground",children:["Type: ",t.type," â€¢ Created: ",new Date(t.created_at).toLocaleDateString()]}),(0,r.jsxs)("div",{className:"text-xs text-muted-foreground mt-1 font-mono",children:["ID: ",t.id]})]}),(0,r.jsx)(n.$,{variant:"ghost",size:"sm",onClick:()=>v(t.id),className:"text-destructive hover:text-destructive",children:(0,r.jsx)(u.A,{className:"h-4 w-4"})})]},t.id))})]})]})})}},48934:(t,e,s)=>{"use strict";s.d(e,{n:()=>u});var r=s(12115),i=s(53390),a=s(31967),n=s(98216),o=s(5858),l=class extends n.Q{#t;#e=void 0;#s;#r;constructor(t,e){super(),this.#t=t,this.setOptions(e),this.bindMethods(),this.#i()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(t){let e=this.options;this.options=this.#t.defaultMutationOptions(t),(0,o.f8)(this.options,e)||this.#t.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#s,observer:this}),e?.mutationKey&&this.options.mutationKey&&(0,o.EN)(e.mutationKey)!==(0,o.EN)(this.options.mutationKey)?this.reset():this.#s?.state.status==="pending"&&this.#s.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#s?.removeObserver(this)}onMutationUpdate(t){this.#i(),this.#a(t)}getCurrentResult(){return this.#e}reset(){this.#s?.removeObserver(this),this.#s=void 0,this.#i(),this.#a()}mutate(t,e){return this.#r=e,this.#s?.removeObserver(this),this.#s=this.#t.getMutationCache().build(this.#t,this.options),this.#s.addObserver(this),this.#s.execute(t)}#i(){let t=this.#s?.state??(0,i.$)();this.#e={...t,isPending:"pending"===t.status,isSuccess:"success"===t.status,isError:"error"===t.status,isIdle:"idle"===t.status,mutate:this.mutate,reset:this.reset}}#a(t){a.jG.batch(()=>{if(this.#r&&this.hasListeners()){let e=this.#e.variables,s=this.#e.context,r={client:this.#t,meta:this.options.meta,mutationKey:this.options.mutationKey};t?.type==="success"?(this.#r.onSuccess?.(t.data,e,s,r),this.#r.onSettled?.(t.data,null,e,s,r)):t?.type==="error"&&(this.#r.onError?.(t.error,e,s,r),this.#r.onSettled?.(void 0,t.error,e,s,r))}this.listeners.forEach(t=>{t(this.#e)})})}},c=s(35625);function u(t,e){let s=(0,c.jE)(e),[i]=r.useState(()=>new l(s,t));r.useEffect(()=>{i.setOptions(t)},[i,t]);let n=r.useSyncExternalStore(r.useCallback(t=>i.subscribe(a.jG.batchCalls(t)),[i]),()=>i.getCurrentResult(),()=>i.getCurrentResult()),u=r.useCallback((t,e)=>{i.mutate(t,e).catch(o.lQ)},[i]);if(n.error&&(0,o.GU)(i.options.throwOnError,[n.error]))throw n.error;return{...n,mutate:u,mutateAsync:n.mutate}}},51914:(t,e,s)=>{"use strict";s.d(e,{A:()=>r});let r=(0,s(78340).A)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},52905:(t,e,s)=>{"use strict";s.d(e,{A:()=>r});let r=(0,s(78340).A)("key",[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]])},53390:(t,e,s)=>{"use strict";s.d(e,{$:()=>o,s:()=>n});var r=s(31967),i=s(99190),a=s(9846),n=class extends i.k{#t;#n;#o;#l;constructor(t){super(),this.#t=t.client,this.mutationId=t.mutationId,this.#o=t.mutationCache,this.#n=[],this.state=t.state||o(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){this.#n.includes(t)||(this.#n.push(t),this.clearGcTimeout(),this.#o.notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){this.#n=this.#n.filter(e=>e!==t),this.scheduleGc(),this.#o.notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){this.#n.length||("pending"===this.state.status?this.scheduleGc():this.#o.remove(this))}continue(){return this.#l?.continue()??this.execute(this.state.variables)}async execute(t){let e=()=>{this.#c({type:"continue"})},s={client:this.#t,meta:this.options.meta,mutationKey:this.options.mutationKey};this.#l=(0,a.II)({fn:()=>this.options.mutationFn?this.options.mutationFn(t,s):Promise.reject(Error("No mutationFn found")),onFail:(t,e)=>{this.#c({type:"failed",failureCount:t,error:e})},onPause:()=>{this.#c({type:"pause"})},onContinue:e,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>this.#o.canRun(this)});let r="pending"===this.state.status,i=!this.#l.canStart();try{if(r)e();else{this.#c({type:"pending",variables:t,isPaused:i}),await this.#o.config.onMutate?.(t,this,s);let e=await this.options.onMutate?.(t,s);e!==this.state.context&&this.#c({type:"pending",context:e,variables:t,isPaused:i})}let a=await this.#l.start();return await this.#o.config.onSuccess?.(a,t,this.state.context,this,s),await this.options.onSuccess?.(a,t,this.state.context,s),await this.#o.config.onSettled?.(a,null,this.state.variables,this.state.context,this,s),await this.options.onSettled?.(a,null,t,this.state.context,s),this.#c({type:"success",data:a}),a}catch(e){try{throw await this.#o.config.onError?.(e,t,this.state.context,this,s),await this.options.onError?.(e,t,this.state.context,s),await this.#o.config.onSettled?.(void 0,e,this.state.variables,this.state.context,this,s),await this.options.onSettled?.(void 0,e,t,this.state.context,s),e}finally{this.#c({type:"error",error:e})}}finally{this.#o.runNext(this)}}#c(t){this.state=(e=>{switch(t.type){case"failed":return{...e,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...e,isPaused:!0};case"continue":return{...e,isPaused:!1};case"pending":return{...e,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...e,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...e,data:void 0,error:t.error,failureCount:e.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}})(this.state),r.jG.batch(()=>{this.#n.forEach(e=>{e.onMutationUpdate(t)}),this.#o.notify({mutation:this,type:"updated",action:t})})}};function o(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}},61899:(t,e,s)=>{"use strict";s.d(e,{hs:()=>i,uE:()=>c});var r=s(25336);let i="http://localhost:5678/api/v1",a={maxRetries:3,baseDelayMs:1e3,maxDelayMs:1e4,retryableStatuses:[408,429,500,502,503,504]};function n(t,e){let s=e.baseDelayMs*Math.pow(2,t),r=.3*Math.random()*s;return Math.min(s+r,e.maxDelayMs)}function o(t){return new Promise(e=>setTimeout(e,t))}class l{constructor(){this.token=null,this.retryConfig=a,this.token=localStorage.getItem("auth_token")}static getInstance(){return l.instance||(l.instance=new l),l.instance}setToken(t){this.token=t,t?localStorage.setItem("auth_token",t):localStorage.removeItem("auth_token")}getToken(){return this.token}setRetryConfig(t){this.retryConfig={...this.retryConfig,...t}}async request(t,e={},s=0){let a={"Content-Type":"application/json","X-Request-ID":0===s?crypto.randomUUID?crypto.randomUUID():`${Date.now()}-${Math.random().toString(36).substring(2,11)}`:e.headers?.["X-Request-ID"],...e.headers};this.token&&(a.Authorization=`Bearer ${this.token}`);try{var l;let c=await fetch(`${i}${t}`,{...e,headers:a});if(429===c.status){let i=c.headers.get("Retry-After");if(i&&s<this.retryConfig.maxRetries){let a=1e3*parseInt(i,10)||n(s,this.retryConfig);return r.vF.warn(`Rate limited on ${t}. Retrying after ${a}ms (attempt ${s+1})`),await o(a),this.request(t,e,s+1)}}if(!c.ok&&(l=c.status,this.retryConfig.retryableStatuses.includes(l))&&s<this.retryConfig.maxRetries){let i=n(s,this.retryConfig);return r.vF.warn(`Request failed with ${c.status} on ${t}. Retrying after ${i}ms (attempt ${s+1})`),await o(i),this.request(t,e,s+1)}if(!c.ok){let t,e=await c.json().catch(()=>({detail:"An error occurred"}));throw t=Array.isArray(e.detail)?e.detail.map(t=>t.msg||t.message||"Validation error").join(". "):"string"==typeof e.detail?e.detail:e.detail?.msg?e.detail.msg:e.message?e.message:`HTTP error! status: ${c.status}`,Error(t)}return c.json()}catch(a){let i=t.includes("/users/me")||t.includes("/login");if(a instanceof TypeError&&"Failed to fetch"===a.message&&s<this.retryConfig.maxRetries&&!i){let i=n(s,this.retryConfig);return r.vF.warn(`Network error on ${t}. Retrying after ${i}ms (attempt ${s+1})`),await o(i),this.request(t,e,s+1)}throw a}}async get(t){return this.request(t,{method:"GET"})}async post(t,e){return this.request(t,{method:"POST",body:e?JSON.stringify(e):void 0})}async postFormData(t,e){let s={"Content-Type":"application/x-www-form-urlencoded"};this.token&&(s.Authorization=`Bearer ${this.token}`);let r=await fetch(`${i}${t}`,{method:"POST",headers:s,body:e});if(!r.ok){let t=await r.json().catch(()=>({detail:"An error occurred"}));throw Error(Array.isArray(t.detail)?t.detail.map(t=>t.msg||t.message||"Validation error").join(". "):"string"==typeof t.detail?t.detail:t.detail?.msg?t.detail.msg:t.message?t.message:`HTTP error! status: ${r.status}`)}return r.json()}async put(t,e){return this.request(t,{method:"PUT",body:JSON.stringify(e)})}async patch(t,e){return this.request(t,{method:"PATCH",body:JSON.stringify(e)})}async delete(t){return this.request(t,{method:"DELETE"})}}let c=l.getInstance()},68459:(t,e,s)=>{"use strict";s.d(e,{A:()=>r});let r=(0,s(78340).A)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]])}},t=>{t.O(0,[8547,2842,8441,3794,7358],()=>t(t.s=29260)),_N_E=t.O()}]);