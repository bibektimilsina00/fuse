(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[70],{6296:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(78340).A)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},25336:(e,t,r)=>{"use strict";r.d(t,{X6:()=>i,aw:()=>n,vF:()=>a});class s{constructor(e="App"){this.prefix=e}formatMessage(e,t){let r=new Date().toISOString().split("T")[1].split(".")[0];return`[${r}] [${this.prefix}] ${e}: ${t}`}debug(e,t){}info(e,t){}warn(e,t){console.warn(this.formatMessage("WARN",e),t||"")}error(e,t,r){console.error(this.formatMessage("ERROR",e),t,r||"")}child(e){return new s(`${this.prefix}:${e}`)}}let a=new s("Automation"),n=a.child("Workflow");a.child("Validation");let i=a.child("WebSocket")},29260:(e,t,r)=>{Promise.resolve().then(r.bind(r,47617))},34426:(e,t,r)=>{"use strict";r.d(t,{$:()=>d});var s=r(95155),a=r(12115),n=r(99873),i=r(622),o=r(42442);let l=(0,n.F)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-md hover:bg-primary/90 hover:shadow-lg hover:-translate-y-0.5 transition-all duration-200",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=a.forwardRef(({className:e,variant:t,size:r,asChild:a=!1,children:n,...d},c)=>{let u=a?o.DX:"button";return(0,s.jsx)(u,{ref:c,className:(0,i.QP)(l({variant:t,size:r}),e),...d,children:n})});d.displayName="Button"},42442:(e,t,r)=>{"use strict";let s,a,n;r.d(t,{DX:()=>m});var i,o=r(12115),l=r(47527),d=r(95155),c=Symbol.for("react.lazy"),u=(i||(i=r.t(o,2)))[" use ".trim().toString()];function h(e){var t;return null!=e&&"object"==typeof e&&"$$typeof"in e&&e.$$typeof===c&&"_payload"in e&&"object"==typeof(t=e._payload)&&null!==t&&"then"in t}var m=((n=o.forwardRef((e,t)=>{let{children:r,...s}=e;if(h(r)&&"function"==typeof u&&(r=u(r._payload)),o.isValidElement(r)){var a;let e,n,i=(a=r,(n=(e=Object.getOwnPropertyDescriptor(a.props,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning)?a.ref:(n=(e=Object.getOwnPropertyDescriptor(a,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning)?a.props.ref:a.props.ref||a.ref),d=function(e,t){let r={...t};for(let s in t){let a=e[s],n=t[s];/^on[A-Z]/.test(s)?a&&n?r[s]=(...e)=>{let t=n(...e);return a(...e),t}:a&&(r[s]=a):"style"===s?r[s]={...a,...n}:"className"===s&&(r[s]=[a,n].filter(Boolean).join(" "))}return{...e,...r}}(s,r.props);return r.type!==o.Fragment&&(d.ref=t?(0,l.t)(t,i):i),o.cloneElement(r,d)}return o.Children.count(r)>1?o.Children.only(null):null})).displayName="Slot.SlotClone",s=n,(a=o.forwardRef((e,t)=>{let{children:r,...a}=e;h(r)&&"function"==typeof u&&(r=u(r._payload));let n=o.Children.toArray(r),i=n.find(p);if(i){let e=i.props.children,r=n.map(t=>t!==i?t:o.Children.count(e)>1?o.Children.only(null):o.isValidElement(e)?e.props.children:null);return(0,d.jsx)(s,{...a,ref:t,children:o.isValidElement(e)?o.cloneElement(e,void 0,r):null})}return(0,d.jsx)(s,{...a,ref:t,children:r})})).displayName="Slot.Slot",a),y=Symbol("radix.slottable");function p(e){return o.isValidElement(e)&&"function"==typeof e.type&&"__radixId"in e.type&&e.type.__radixId===y}},47617:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>u});var s=r(95155),a=r(12115),n=r(53718),i=r(34426),o=r(6296),l=r(51914),d=r(52905),c=r(68459);function u(){let{data:e=[],isLoading:t,refetch:r}=(0,n.aX)(),u=(0,n.Lv)(),h=(0,n.Ii)(),[m,y]=(0,a.useState)(""),[p,f]=(0,a.useState)("slack"),[g,x]=(0,a.useState)(""),b=async()=>{if(!m||!g)return;let e={value:g};try{let t=JSON.parse(g);e=Object.fromEntries(Object.entries(t).map(([e,t])=>[e,String(t)]))}catch{e={value:g}}u.mutate({name:m,type:p,data:e},{onSuccess:()=>{y(""),x("")},onError:e=>{console.error("Failed to create credential:",e),alert("Failed to create credential")}})},v=async e=>{confirm("Delete this credential?")&&h.mutate(e,{onError:e=>{console.error("Failed to delete credential:",e)}})};return(0,s.jsx)("div",{className:"min-h-screen bg-background p-8",children:(0,s.jsxs)("div",{className:"max-w-4xl mx-auto space-y-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-3xl font-bold",children:"Credentials Test"}),(0,s.jsx)("p",{className:"text-muted-foreground",children:"Manage your service connections"})]}),(0,s.jsx)(i.$,{onClick:()=>r(),disabled:t,children:t?(0,s.jsx)(o.A,{className:"h-4 w-4 animate-spin"}):"Refresh"})]}),(0,s.jsxs)("div",{className:"bg-card border border-border rounded-xl p-6 space-y-4",children:[(0,s.jsxs)("h2",{className:"text-xl font-semibold flex items-center gap-2",children:[(0,s.jsx)(l.A,{className:"h-5 w-5"}),"Add New Credential"]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-sm font-medium mb-2 block",children:"Name"}),(0,s.jsx)("input",{type:"text",value:m,onChange:e=>y(e.target.value),placeholder:"My Slack Workspace",className:"w-full px-4 py-2 bg-background border border-border rounded-lg"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-sm font-medium mb-2 block",children:"Type"}),(0,s.jsxs)("select",{value:p,onChange:e=>f(e.target.value),className:"w-full px-4 py-2 bg-background border border-border rounded-lg",children:[(0,s.jsx)("option",{value:"slack",children:"Slack"}),(0,s.jsx)("option",{value:"discord",children:"Discord"}),(0,s.jsx)("option",{value:"whatsapp",children:"WhatsApp"}),(0,s.jsx)("option",{value:"google_sheets",children:"Google Sheets"}),(0,s.jsx)("option",{value:"generic",children:"Generic"})]})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-sm font-medium mb-2 block",children:"Secret / API Key / Webhook URL"}),(0,s.jsx)("textarea",{value:g,onChange:e=>x(e.target.value),placeholder:"Paste your API key, webhook URL, or JSON credentials here...",className:"w-full px-4 py-3 bg-background border border-border rounded-lg font-mono text-sm h-24"})]}),(0,s.jsxs)(i.$,{onClick:b,disabled:u.isPending||!m||!g,children:[u.isPending?(0,s.jsx)(o.A,{className:"h-4 w-4 animate-spin mr-2"}):(0,s.jsx)(l.A,{className:"h-4 w-4 mr-2"}),"Create Credential"]})]}),(0,s.jsxs)("div",{className:"bg-card border border-border rounded-xl p-6",children:[(0,s.jsxs)("h2",{className:"text-xl font-semibold mb-4 flex items-center gap-2",children:[(0,s.jsx)(d.A,{className:"h-5 w-5"}),"Saved Credentials (",e.length,")"]}),t?(0,s.jsx)("div",{className:"text-center py-8",children:(0,s.jsx)(o.A,{className:"h-8 w-8 animate-spin mx-auto text-muted-foreground"})}):0===e.length?(0,s.jsx)("div",{className:"text-center py-8 text-muted-foreground",children:"No credentials found. Create one above to get started."}):(0,s.jsx)("div",{className:"space-y-3",children:e.map(e=>(0,s.jsxs)("div",{className:"flex items-center justify-between p-4 bg-background border border-border rounded-lg hover:border-primary/40 transition-colors",children:[(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("div",{className:"font-semibold",children:e.name}),(0,s.jsxs)("div",{className:"text-sm text-muted-foreground",children:["Type: ",e.type," â€¢ Created: ",new Date(e.created_at).toLocaleDateString()]}),(0,s.jsxs)("div",{className:"text-xs text-muted-foreground mt-1 font-mono",children:["ID: ",e.id]})]}),(0,s.jsx)(i.$,{variant:"ghost",size:"sm",onClick:()=>v(e.id),className:"text-destructive hover:text-destructive",children:(0,s.jsx)(c.A,{className:"h-4 w-4"})})]},e.id))})]})]})})}},51914:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(78340).A)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},52905:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(78340).A)("key",[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]])},53718:(e,t,r)=>{"use strict";r.d(t,{eG:()=>c,Lv:()=>m,aX:()=>u,vE:()=>h,Ii:()=>y});var s=r(32842),a=r(35625),n=r(48934),i=r(61899);let o=async()=>i.uE.get("/credentials/"),l=async e=>i.uE.post("/credentials/",e),d=async e=>i.uE.delete(`/credentials/${e}`),c={all:["credentials"],lists:()=>[...c.all,"list"],list:e=>[...c.lists(),e],byType:e=>[...c.all,"byType",e],details:()=>[...c.all,"detail"],detail:e=>[...c.details(),e]};function u(){return(0,s.I)({queryKey:c.lists(),queryFn:o})}function h(e){return(0,s.I)({queryKey:c.byType(e),queryFn:async()=>(await o()).filter(t=>t.type===e),enabled:!!e})}function m(){let e=(0,a.jE)();return(0,n.n)({mutationFn:e=>l(e),onSuccess:()=>{e.invalidateQueries({queryKey:c.lists()})}})}function y(){let e=(0,a.jE)();return(0,n.n)({mutationFn:e=>d(e),onSuccess:()=>{e.invalidateQueries({queryKey:c.lists()})}})}},61899:(e,t,r)=>{"use strict";r.d(t,{hs:()=>a,uE:()=>d});var s=r(25336);let a="http://localhost:5678/api/v1",n={maxRetries:3,baseDelayMs:1e3,maxDelayMs:1e4,retryableStatuses:[408,429,500,502,503,504]};function i(e,t){let r=t.baseDelayMs*Math.pow(2,e),s=.3*Math.random()*r;return Math.min(r+s,t.maxDelayMs)}function o(e){return new Promise(t=>setTimeout(t,e))}class l{constructor(){this.token=null,this.retryConfig=n,this.token=localStorage.getItem("auth_token")}static getInstance(){return l.instance||(l.instance=new l),l.instance}setToken(e){this.token=e,e?localStorage.setItem("auth_token",e):localStorage.removeItem("auth_token")}getToken(){return this.token}setRetryConfig(e){this.retryConfig={...this.retryConfig,...e}}async request(e,t={},r=0){let n={"Content-Type":"application/json","X-Request-ID":0===r?crypto.randomUUID?crypto.randomUUID():`${Date.now()}-${Math.random().toString(36).substring(2,11)}`:t.headers?.["X-Request-ID"],...t.headers};this.token&&(n.Authorization=`Bearer ${this.token}`);try{var l;let d=await fetch(`${a}${e}`,{...t,headers:n});if(429===d.status){let a=d.headers.get("Retry-After");if(a&&r<this.retryConfig.maxRetries){let n=1e3*parseInt(a,10)||i(r,this.retryConfig);return s.vF.warn(`Rate limited on ${e}. Retrying after ${n}ms (attempt ${r+1})`),await o(n),this.request(e,t,r+1)}}if(!d.ok&&(l=d.status,this.retryConfig.retryableStatuses.includes(l))&&r<this.retryConfig.maxRetries){let a=i(r,this.retryConfig);return s.vF.warn(`Request failed with ${d.status} on ${e}. Retrying after ${a}ms (attempt ${r+1})`),await o(a),this.request(e,t,r+1)}if(!d.ok){let e=await d.json().catch(()=>({detail:"An error occurred"}));throw Error(e.detail||`HTTP error! status: ${d.status}`)}return d.json()}catch(n){let a=e.includes("/users/me")||e.includes("/login");if(n instanceof TypeError&&"Failed to fetch"===n.message&&r<this.retryConfig.maxRetries&&!a){let a=i(r,this.retryConfig);return s.vF.warn(`Network error on ${e}. Retrying after ${a}ms (attempt ${r+1})`),await o(a),this.request(e,t,r+1)}throw n}}async get(e){return this.request(e,{method:"GET"})}async post(e,t){return this.request(e,{method:"POST",body:t?JSON.stringify(t):void 0})}async postFormData(e,t){let r={"Content-Type":"application/x-www-form-urlencoded"};this.token&&(r.Authorization=`Bearer ${this.token}`);let s=await fetch(`${a}${e}`,{method:"POST",headers:r,body:t});if(!s.ok)throw Error((await s.json().catch(()=>({detail:"An error occurred"}))).detail||`HTTP error! status: ${s.status}`);return s.json()}async put(e,t){return this.request(e,{method:"PUT",body:JSON.stringify(t)})}async patch(e,t){return this.request(e,{method:"PATCH",body:JSON.stringify(t)})}async delete(e){return this.request(e,{method:"DELETE"})}}let d=l.getInstance()},68459:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(78340).A)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]])}},e=>{e.O(0,[547,275,441,794,358],()=>e(e.s=29260)),_N_E=e.O()}]);