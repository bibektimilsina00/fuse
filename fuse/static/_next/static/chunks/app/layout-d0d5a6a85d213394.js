(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[177],{18300:(e,t,r)=>{"use strict";r.d(t,{iZ:()=>d,vz:()=>c,Wn:()=>f,LR:()=>l});var s=r(32842),a=r(35625),n=r(48934),o=r(61899);let i={async login(e){let t=new URLSearchParams;t.append("username",e.email),t.append("password",e.password);let r=await o.uE.postFormData("/login/access-token",t);return o.uE.setToken(r.access_token),r},register:async e=>o.uE.post("/register",e),getCurrentUser:async()=>o.uE.get("/users/me"),logout(){o.uE.setToken(null)}},u={all:["auth"],currentUser:()=>[...u.all,"current-user"]};function d(){return(0,s.I)({queryKey:u.currentUser(),queryFn:i.getCurrentUser,retry:!1,staleTime:3e5,refetchOnWindowFocus:!1,refetchOnMount:!1,refetchOnReconnect:!1})}function c(){let e=(0,a.jE)();return(0,n.n)({mutationFn:e=>i.login(e),onSuccess:()=>{e.invalidateQueries({queryKey:u.currentUser()})}})}function l(){let e=(0,a.jE)();return(0,n.n)({mutationFn:e=>i.register(e),onSuccess:()=>{e.invalidateQueries({queryKey:u.currentUser()})}})}function f(){let e=(0,a.jE)();return(0,n.n)({mutationFn:()=>(i.logout(),Promise.resolve()),onSuccess:()=>{e.clear()}})}},19417:(e,t,r)=>{"use strict";r.d(t,{AuthProvider:()=>i,useAuth:()=>u});var s=r(95155),a=r(12115),n=r(18300);let o=(0,a.createContext)(void 0);function i({children:e}){let{data:t,isLoading:r,error:a}=(0,n.iZ)(),i=(0,n.Wn)(),u=a?null:t??null;return(0,s.jsx)(o.Provider,{value:{user:u,isLoading:!a&&r,isAuthenticated:!!u,logout:()=>i.mutate()},children:e})}function u(){let e=(0,a.useContext)(o);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},22431:()=>{},23241:(e,t,r)=>{"use strict";r.d(t,{Toaster:()=>y});var s=r(95155),a=r(12115),n=r(93602),o=r(99873),i=r(33210),u=r(91337);let d=n.Kq,c=a.forwardRef(({className:e,...t},r)=>(0,s.jsx)(n.LM,{ref:r,className:(0,u.cn)("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",e),...t}));c.displayName=n.LM.displayName;let l=(0,o.F)("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),f=a.forwardRef(({className:e,variant:t,...r},a)=>(0,s.jsx)(n.bL,{ref:a,className:(0,u.cn)(l({variant:t}),e),...r}));f.displayName=n.bL.displayName,a.forwardRef(({className:e,...t},r)=>(0,s.jsx)(n.rc,{ref:r,className:(0,u.cn)("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",e),...t})).displayName=n.rc.displayName;let h=a.forwardRef(({className:e,...t},r)=>(0,s.jsx)(n.bm,{ref:r,className:(0,u.cn)("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",e),"toast-close":"",...t,children:(0,s.jsx)(i.A,{className:"h-4 w-4"})}));h.displayName=n.bm.displayName;let m=a.forwardRef(({className:e,...t},r)=>(0,s.jsx)(n.hE,{ref:r,className:(0,u.cn)("text-sm font-semibold",e),...t}));m.displayName=n.hE.displayName;let p=a.forwardRef(({className:e,...t},r)=>(0,s.jsx)(n.VY,{ref:r,className:(0,u.cn)("text-sm opacity-90",e),...t}));p.displayName=n.VY.displayName;var g=r(77833);function y(){let{toasts:e}=(0,g.dj)();return(0,s.jsxs)(d,{children:[e.map(function({id:e,title:t,description:r,action:a,...n}){return(0,s.jsxs)(f,{...n,children:[(0,s.jsxs)("div",{className:"grid gap-1",children:[t&&(0,s.jsx)(m,{children:t}),r&&(0,s.jsx)(p,{children:r})]}),a,(0,s.jsx)(h,{})]},e)}),(0,s.jsx)(c,{})]})}},25336:(e,t,r)=>{"use strict";r.d(t,{X6:()=>o,aw:()=>n,vF:()=>a});class s{constructor(e="App"){this.prefix=e}formatMessage(e,t){let r=new Date().toISOString().split("T")[1].split(".")[0];return`[${r}] [${this.prefix}] ${e}: ${t}`}debug(e,t){}info(e,t){}warn(e,t){console.warn(this.formatMessage("WARN",e),t||"")}error(e,t,r){console.error(this.formatMessage("ERROR",e),t,r||"")}child(e){return new s(`${this.prefix}:${e}`)}}let a=new s("Automation"),n=a.child("Workflow");a.child("Validation");let o=a.child("WebSocket")},61899:(e,t,r)=>{"use strict";r.d(t,{hs:()=>a,uE:()=>d});var s=r(25336);let a="http://localhost:5678/api/v1",n={maxRetries:3,baseDelayMs:1e3,maxDelayMs:1e4,retryableStatuses:[408,429,500,502,503,504]};function o(e,t){let r=t.baseDelayMs*Math.pow(2,e),s=.3*Math.random()*r;return Math.min(r+s,t.maxDelayMs)}function i(e){return new Promise(t=>setTimeout(t,e))}class u{constructor(){this.token=null,this.retryConfig=n,this.token=localStorage.getItem("auth_token")}static getInstance(){return u.instance||(u.instance=new u),u.instance}setToken(e){this.token=e,e?localStorage.setItem("auth_token",e):localStorage.removeItem("auth_token")}getToken(){return this.token}setRetryConfig(e){this.retryConfig={...this.retryConfig,...e}}async request(e,t={},r=0){let n={"Content-Type":"application/json","X-Request-ID":0===r?crypto.randomUUID?crypto.randomUUID():`${Date.now()}-${Math.random().toString(36).substring(2,11)}`:t.headers?.["X-Request-ID"],...t.headers};this.token&&(n.Authorization=`Bearer ${this.token}`);try{var u;let d=await fetch(`${a}${e}`,{...t,headers:n});if(429===d.status){let a=d.headers.get("Retry-After");if(a&&r<this.retryConfig.maxRetries){let n=1e3*parseInt(a,10)||o(r,this.retryConfig);return s.vF.warn(`Rate limited on ${e}. Retrying after ${n}ms (attempt ${r+1})`),await i(n),this.request(e,t,r+1)}}if(!d.ok&&(u=d.status,this.retryConfig.retryableStatuses.includes(u))&&r<this.retryConfig.maxRetries){let a=o(r,this.retryConfig);return s.vF.warn(`Request failed with ${d.status} on ${e}. Retrying after ${a}ms (attempt ${r+1})`),await i(a),this.request(e,t,r+1)}if(!d.ok){let e=await d.json().catch(()=>({detail:"An error occurred"}));throw Error(e.detail||`HTTP error! status: ${d.status}`)}return d.json()}catch(n){let a=e.includes("/users/me")||e.includes("/login");if(n instanceof TypeError&&"Failed to fetch"===n.message&&r<this.retryConfig.maxRetries&&!a){let a=o(r,this.retryConfig);return s.vF.warn(`Network error on ${e}. Retrying after ${a}ms (attempt ${r+1})`),await i(a),this.request(e,t,r+1)}throw n}}async get(e){return this.request(e,{method:"GET"})}async post(e,t){return this.request(e,{method:"POST",body:t?JSON.stringify(t):void 0})}async postFormData(e,t){let r={"Content-Type":"application/x-www-form-urlencoded"};this.token&&(r.Authorization=`Bearer ${this.token}`);let s=await fetch(`${a}${e}`,{method:"POST",headers:r,body:t});if(!s.ok)throw Error((await s.json().catch(()=>({detail:"An error occurred"}))).detail||`HTTP error! status: ${s.status}`);return s.json()}async put(e,t){return this.request(e,{method:"PUT",body:JSON.stringify(t)})}async patch(e,t){return this.request(e,{method:"PATCH",body:JSON.stringify(t)})}async delete(e){return this.request(e,{method:"DELETE"})}}let d=u.getInstance()},68401:(e,t,r)=>{Promise.resolve().then(r.bind(r,19417)),Promise.resolve().then(r.bind(r,96337)),Promise.resolve().then(r.bind(r,23241)),Promise.resolve().then(r.bind(r,70460)),Promise.resolve().then(r.t.bind(r,12235,23)),Promise.resolve().then(r.t.bind(r,22431,23))},77833:(e,t,r)=>{"use strict";r.d(t,{dj:()=>l});var s=r(12115);let a=0,n=new Map,o=e=>{if(n.has(e))return;let t=setTimeout(()=>{n.delete(e),d({type:"REMOVE_TOAST",toastId:e})},1e6);n.set(e,t)},i=[],u={toasts:[]};function d(e){u=((e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:r}=t;return r?o(r):e.toasts.forEach(e=>{o(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===r||void 0===r?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}})(u,e),i.forEach(e=>{e(u)})}function c({...e}){let t=(a=(a+1)%Number.MAX_SAFE_INTEGER).toString(),r=()=>d({type:"DISMISS_TOAST",toastId:t});return d({type:"ADD_TOAST",toast:{...e,id:t,open:!0,onOpenChange:e=>{e||r()}}}),{id:t,dismiss:r,update:e=>d({type:"UPDATE_TOAST",toast:{...e,id:t}})}}function l(){let[e,t]=s.useState(u);return s.useEffect(()=>(i.push(t),()=>{let e=i.indexOf(t);e>-1&&i.splice(e,1)}),[e]),{...e,toast:c,dismiss:e=>d({type:"DISMISS_TOAST",toastId:e})}}},91337:(e,t,r)=>{"use strict";r.d(t,{cn:()=>n});var s=r(76910),a=r(622);function n(...e){return(0,a.QP)((0,s.$)(e))}},96337:(e,t,r)=>{"use strict";r.d(t,{QueryProvider:()=>i});var s=r(95155),a=r(35625),n=r(93434);let o=new(r(96887)).E({defaultOptions:{queries:{staleTime:6e4,gcTime:3e5,retry:1,refetchOnWindowFocus:!1},mutations:{retry:0}}});function i({children:e}){return(0,s.jsxs)(a.Ht,{client:o,children:[e,(0,s.jsx)(n.E,{initialIsOpen:!1})]})}}},e=>{e.O(0,[703,547,275,501,324,441,794,358],()=>e(e.s=68401)),_N_E=e.O()}]);