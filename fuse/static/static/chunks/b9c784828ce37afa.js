(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,55838,(e,t,n)=>{"use strict";var r=e.r(71645),a="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},o=r.useState,i=r.useEffect,s=r.useLayoutEffect,l=r.useDebugValue;function d(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!a(e,n)}catch(e){return!0}}var c="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(e,t){return t()}:function(e,t){var n=t(),r=o({inst:{value:n,getSnapshot:t}}),a=r[0].inst,c=r[1];return s(function(){a.value=n,a.getSnapshot=t,d(a)&&c({inst:a})},[e,n,t]),i(function(){return d(a)&&c({inst:a}),e(function(){d(a)&&c({inst:a})})},[e]),l(n),n};n.useSyncExternalStore=void 0!==r.useSyncExternalStore?r.useSyncExternalStore:c},2239,(e,t,n)=>{"use strict";t.exports=e.r(55838)},52822,(e,t,n)=>{"use strict";var r=e.r(71645),a=e.r(2239),o="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},i=a.useSyncExternalStore,s=r.useRef,l=r.useEffect,d=r.useMemo,c=r.useDebugValue;n.useSyncExternalStoreWithSelector=function(e,t,n,r,a){var u=s(null);if(null===u.current){var f={hasValue:!1,value:null};u.current=f}else f=u.current;var h=i(e,(u=d(function(){function e(e){if(!l){if(l=!0,i=e,e=r(e),void 0!==a&&f.hasValue){var t=f.value;if(a(t,e))return s=t}return s=e}if(t=s,o(i,e))return t;var n=r(e);return void 0!==a&&a(t,n)?(i=e,t):(i=e,s=n)}var i,s,l=!1,d=void 0===n?null:n;return[function(){return e(t())},null===d?void 0:function(){return e(d())}]},[t,n,r,a]))[0],u[1]);return l(function(){f.hasValue=!0,f.value=h},[h]),c(h),h}},30224,(e,t,n)=>{"use strict";t.exports=e.r(52822)},41336,5868,50608,89447,64659,31343,1073,43531,78583,74886,20506,38869,53305,17835,83123,778,39412,95107,31245,86311,58041,48256,58472,62031,88511,96421,11761,55514,55466,68054,17940,4677,61263,55716,61735,91810,44068,31804,17697,32102,83627,93226,86448,52571,71649,88081,e=>{"use strict";e.i(47167);var t,n,r,a,o,i,s,l,d,c,u,f,h,p=e.i(71645);function m(e){if("string"==typeof e||"number"==typeof e)return""+e;let t="";if(Array.isArray(e))for(let n=0,r;n<e.length;n++)""!==(r=m(e[n]))&&(t+=(t&&" ")+r);else for(let n in e)e[n]&&(t+=(t&&" ")+n);return t}e.s(["default",()=>m],5868);var g=e.i(30224);let x={get url(){return`file://${e.P("node_modules/zustand/esm/vanilla.mjs")}`}},y=e=>{let t,n=new Set,r=(e,r)=>{let a="function"==typeof e?e(t):e;if(!Object.is(a,t)){let e=t;t=(null!=r?r:"object"!=typeof a||null===a)?a:Object.assign({},t,a),n.forEach(n=>n(t,e))}},a=()=>t,o={setState:r,getState:a,getInitialState:()=>i,subscribe:e=>(n.add(e),()=>n.delete(e)),destroy:()=>{(x.env?x.env.MODE:void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},i=t=e(r,a,o);return o},{useDebugValue:v}=p.default,{useSyncExternalStoreWithSelector:b}=g.default,w=e=>e;function N(e,t=w,n){let r=b(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return v(r),r}let j=(e,t)=>{let n=e?y(e):y,r=(e,r=t)=>N(n,e,r);return Object.assign(r,n),r};function k(e,t){if(Object.is(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(let[n,r]of e)if(!Object.is(r,t.get(n)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(let n of e)if(!t.has(n))return!1;return!0}let n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(let r of n)if(!Object.prototype.hasOwnProperty.call(t,r)||!Object.is(e[r],t[r]))return!1;return!0}e.s(["shallow",()=>k],50608);var S={value:()=>{}};function C(){for(var e,t=0,n=arguments.length,r={};t<n;++t){if(!(e=arguments[t]+"")||e in r||/[\s.]/.test(e))throw Error("illegal type: "+e);r[e]=[]}return new E(r)}function E(e){this._=e}function M(e,t,n){for(var r=0,a=e.length;r<a;++r)if(e[r].name===t){e[r]=S,e=e.slice(0,r).concat(e.slice(r+1));break}return null!=n&&e.push({name:t,value:n}),e}function _(){}function A(e){return null==e?_:function(){return this.querySelector(e)}}function R(){return[]}function P(e){return null==e?R:function(){return this.querySelectorAll(e)}}function O(e){return function(){return this.matches(e)}}function T(e){return function(t){return t.matches(e)}}E.prototype=C.prototype={constructor:E,on:function(e,t){var n,r=this._,a=(e+"").trim().split(/^|\s+/).map(function(e){var t="",n=e.indexOf(".");if(n>=0&&(t=e.slice(n+1),e=e.slice(0,n)),e&&!r.hasOwnProperty(e))throw Error("unknown type: "+e);return{type:e,name:t}}),o=-1,i=a.length;if(arguments.length<2){for(;++o<i;)if((n=(e=a[o]).type)&&(n=function(e,t){for(var n,r=0,a=e.length;r<a;++r)if((n=e[r]).name===t)return n.value}(r[n],e.name)))return n;return}if(null!=t&&"function"!=typeof t)throw Error("invalid callback: "+t);for(;++o<i;)if(n=(e=a[o]).type)r[n]=M(r[n],e.name,t);else if(null==t)for(n in r)r[n]=M(r[n],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new E(e)},call:function(e,t){if((n=arguments.length-2)>0)for(var n,r,a=Array(n),o=0;o<n;++o)a[o]=arguments[o+2];if(!this._.hasOwnProperty(e))throw Error("unknown type: "+e);for(r=this._[e],o=0,n=r.length;o<n;++o)r[o].value.apply(t,a)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw Error("unknown type: "+e);for(var r=this._[e],a=0,o=r.length;a<o;++a)r[a].value.apply(t,n)}};var D=Array.prototype.find;function z(){return this.firstElementChild}var L=Array.prototype.filter;function I(){return Array.from(this.children)}function $(e){return Array(e.length)}function H(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}function F(e,t,n,r,a,o){for(var i,s=0,l=t.length,d=o.length;s<d;++s)(i=t[s])?(i.__data__=o[s],r[s]=i):n[s]=new H(e,o[s]);for(;s<l;++s)(i=t[s])&&(a[s]=i)}function B(e,t,n,r,a,o,i){var s,l,d,c=new Map,u=t.length,f=o.length,h=Array(u);for(s=0;s<u;++s)(l=t[s])&&(h[s]=d=i.call(l,l.__data__,s,t)+"",c.has(d)?a[s]=l:c.set(d,l));for(s=0;s<f;++s)d=i.call(e,o[s],s,o)+"",(l=c.get(d))?(r[s]=l,l.__data__=o[s],c.delete(d)):n[s]=new H(e,o[s]);for(s=0;s<u;++s)(l=t[s])&&c.get(h[s])===l&&(a[s]=l)}function V(e){return e.__data__}function q(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}H.prototype={constructor:H,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};var W="http://www.w3.org/1999/xhtml";let K={svg:"http://www.w3.org/2000/svg",xhtml:W,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function G(e){var t=e+="",n=t.indexOf(":");return n>=0&&"xmlns"!==(t=e.slice(0,n))&&(e=e.slice(n+1)),K.hasOwnProperty(t)?{space:K[t],local:e}:e}function X(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function U(e,t){return e.style.getPropertyValue(t)||X(e).getComputedStyle(e,null).getPropertyValue(t)}function Y(e){return e.trim().split(/^|\s+/)}function Z(e){return e.classList||new Q(e)}function Q(e){this._node=e,this._names=Y(e.getAttribute("class")||"")}function J(e,t){for(var n=Z(e),r=-1,a=t.length;++r<a;)n.add(t[r])}function ee(e,t){for(var n=Z(e),r=-1,a=t.length;++r<a;)n.remove(t[r])}function et(){this.textContent=""}function en(){this.innerHTML=""}function er(){this.nextSibling&&this.parentNode.appendChild(this)}function ea(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function eo(e){var t=G(e);return(t.local?function(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}:function(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===W&&t.documentElement.namespaceURI===W?t.createElement(e):t.createElementNS(n,e)}})(t)}function ei(){return null}function es(){var e=this.parentNode;e&&e.removeChild(this)}function el(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function ed(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function ec(e){return function(){var t=this.__on;if(t){for(var n,r=0,a=-1,o=t.length;r<o;++r)(n=t[r],e.type&&n.type!==e.type||n.name!==e.name)?t[++a]=n:this.removeEventListener(n.type,n.listener,n.options);++a?t.length=a:delete this.__on}}}function eu(e,t,n){return function(){var r,a=this.__on,o=function(e){t.call(this,e,this.__data__)};if(a){for(var i=0,s=a.length;i<s;++i)if((r=a[i]).type===e.type&&r.name===e.name){this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=o,r.options=n),r.value=t;return}}this.addEventListener(e.type,o,n),r={type:e.type,name:e.name,value:t,listener:o,options:n},a?a.push(r):this.__on=[r]}}function ef(e,t,n){var r=X(e),a=r.CustomEvent;"function"==typeof a?a=new a(t,n):(a=r.document.createEvent("Event"),n?(a.initEvent(t,n.bubbles,n.cancelable),a.detail=n.detail):a.initEvent(t,!1,!1)),e.dispatchEvent(a)}Q.prototype={add:function(e){0>this._names.indexOf(e)&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};var eh=[null];function ep(e,t){this._groups=e,this._parents=t}function em(){return new ep([[document.documentElement]],eh)}function eg(e){return"string"==typeof e?new ep([[document.querySelector(e)]],[document.documentElement]):new ep([[e]],eh)}ep.prototype=em.prototype={constructor:ep,select:function(e){"function"!=typeof e&&(e=A(e));for(var t=this._groups,n=t.length,r=Array(n),a=0;a<n;++a)for(var o,i,s=t[a],l=s.length,d=r[a]=Array(l),c=0;c<l;++c)(o=s[c])&&(i=e.call(o,o.__data__,c,s))&&("__data__"in o&&(i.__data__=o.__data__),d[c]=i);return new ep(r,this._parents)},selectAll:function(e){if("function"==typeof e){var t;t=e,e=function(){var e;return e=t.apply(this,arguments),null==e?[]:Array.isArray(e)?e:Array.from(e)}}else e=P(e);for(var n=this._groups,r=n.length,a=[],o=[],i=0;i<r;++i)for(var s,l=n[i],d=l.length,c=0;c<d;++c)(s=l[c])&&(a.push(e.call(s,s.__data__,c,l)),o.push(s));return new ep(a,o)},selectChild:function(e){var t;return this.select(null==e?z:(t="function"==typeof e?e:T(e),function(){return D.call(this.children,t)}))},selectChildren:function(e){var t;return this.selectAll(null==e?I:(t="function"==typeof e?e:T(e),function(){return L.call(this.children,t)}))},filter:function(e){"function"!=typeof e&&(e=O(e));for(var t=this._groups,n=t.length,r=Array(n),a=0;a<n;++a)for(var o,i=t[a],s=i.length,l=r[a]=[],d=0;d<s;++d)(o=i[d])&&e.call(o,o.__data__,d,i)&&l.push(o);return new ep(r,this._parents)},data:function(e,t){if(!arguments.length)return Array.from(this,V);var n=t?B:F,r=this._parents,a=this._groups;"function"!=typeof e&&(y=e,e=function(){return y});for(var o=a.length,i=Array(o),s=Array(o),l=Array(o),d=0;d<o;++d){var c=r[d],u=a[d],f=u.length,h="object"==typeof(x=e.call(c,c&&c.__data__,d,r))&&"length"in x?x:Array.from(x),p=h.length,m=s[d]=Array(p),g=i[d]=Array(p);n(c,u,m,g,l[d]=Array(f),h,t);for(var x,y,v,b,w=0,N=0;w<p;++w)if(v=m[w]){for(w>=N&&(N=w+1);!(b=g[N])&&++N<p;);v._next=b||null}}return(i=new ep(i,r))._enter=s,i._exit=l,i},enter:function(){return new ep(this._enter||this._groups.map($),this._parents)},exit:function(){return new ep(this._exit||this._groups.map($),this._parents)},join:function(e,t,n){var r=this.enter(),a=this,o=this.exit();return"function"==typeof e?(r=e(r))&&(r=r.selection()):r=r.append(e+""),null!=t&&(a=t(a))&&(a=a.selection()),null==n?o.remove():n(o),r&&a?r.merge(a).order():a},merge:function(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,a=n.length,o=r.length,i=Math.min(a,o),s=Array(a),l=0;l<i;++l)for(var d,c=n[l],u=r[l],f=c.length,h=s[l]=Array(f),p=0;p<f;++p)(d=c[p]||u[p])&&(h[p]=d);for(;l<a;++l)s[l]=n[l];return new ep(s,this._parents)},selection:function(){return this},order:function(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r,a=e[t],o=a.length-1,i=a[o];--o>=0;)(r=a[o])&&(i&&4^r.compareDocumentPosition(i)&&i.parentNode.insertBefore(r,i),i=r);return this},sort:function(e){function t(t,n){return t&&n?e(t.__data__,n.__data__):!t-!n}e||(e=q);for(var n=this._groups,r=n.length,a=Array(r),o=0;o<r;++o){for(var i,s=n[o],l=s.length,d=a[o]=Array(l),c=0;c<l;++c)(i=s[c])&&(d[c]=i);d.sort(t)}return new ep(a,this._parents).order()},call:function(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this},nodes:function(){return Array.from(this)},node:function(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],a=0,o=r.length;a<o;++a){var i=r[a];if(i)return i}return null},size:function(){let e=0;for(let t of this)++e;return e},empty:function(){return!this.node()},each:function(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var a,o=t[n],i=0,s=o.length;i<s;++i)(a=o[i])&&e.call(a,a.__data__,i,o);return this},attr:function(e,t){var n=G(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((null==t?n.local?function(e){return function(){this.removeAttributeNS(e.space,e.local)}}:function(e){return function(){this.removeAttribute(e)}}:"function"==typeof t?n.local?function(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}:function(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttribute(e):this.setAttribute(e,n)}}:n.local?function(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}:function(e,t){return function(){this.setAttribute(e,t)}})(n,t))},style:function(e,t,n){return arguments.length>1?this.each((null==t?function(e){return function(){this.style.removeProperty(e)}}:"function"==typeof t?function(e,t,n){return function(){var r=t.apply(this,arguments);null==r?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}:function(e,t,n){return function(){this.style.setProperty(e,t,n)}})(e,t,null==n?"":n)):U(this.node(),e)},property:function(e,t){return arguments.length>1?this.each((null==t?function(e){return function(){delete this[e]}}:"function"==typeof t?function(e,t){return function(){var n=t.apply(this,arguments);null==n?delete this[e]:this[e]=n}}:function(e,t){return function(){this[e]=t}})(e,t)):this.node()[e]},classed:function(e,t){var n=Y(e+"");if(arguments.length<2){for(var r=Z(this.node()),a=-1,o=n.length;++a<o;)if(!r.contains(n[a]))return!1;return!0}return this.each(("function"==typeof t?function(e,t){return function(){(t.apply(this,arguments)?J:ee)(this,e)}}:t?function(e){return function(){J(this,e)}}:function(e){return function(){ee(this,e)}})(n,t))},text:function(e){return arguments.length?this.each(null==e?et:("function"==typeof e?function(e){return function(){var t=e.apply(this,arguments);this.textContent=null==t?"":t}}:function(e){return function(){this.textContent=e}})(e)):this.node().textContent},html:function(e){return arguments.length?this.each(null==e?en:("function"==typeof e?function(e){return function(){var t=e.apply(this,arguments);this.innerHTML=null==t?"":t}}:function(e){return function(){this.innerHTML=e}})(e)):this.node().innerHTML},raise:function(){return this.each(er)},lower:function(){return this.each(ea)},append:function(e){var t="function"==typeof e?e:eo(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})},insert:function(e,t){var n="function"==typeof e?e:eo(e),r=null==t?ei:"function"==typeof t?t:A(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})},remove:function(){return this.each(es)},clone:function(e){return this.select(e?ed:el)},datum:function(e){return arguments.length?this.property("__data__",e):this.node().__data__},on:function(e,t,n){var r,a,o=(e+"").trim().split(/^|\s+/).map(function(e){var t="",n=e.indexOf(".");return n>=0&&(t=e.slice(n+1),e=e.slice(0,n)),{type:e,name:t}}),i=o.length;if(arguments.length<2){var s=this.node().__on;if(s){for(var l,d=0,c=s.length;d<c;++d)for(r=0,l=s[d];r<i;++r)if((a=o[r]).type===l.type&&a.name===l.name)return l.value}return}for(r=0,s=t?eu:ec;r<i;++r)this.each(s(o[r],t,n));return this},dispatch:function(e,t){return this.each(("function"==typeof t?function(e,t){return function(){return ef(this,e,t.apply(this,arguments))}}:function(e,t){return function(){return ef(this,e,t)}})(e,t))},[Symbol.iterator]:function*(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r,a=e[t],o=0,i=a.length;o<i;++o)(r=a[o])&&(yield r)}};let ex={passive:!1},ey={capture:!0,passive:!1};function ev(e){e.stopImmediatePropagation()}function eb(e){e.preventDefault(),e.stopImmediatePropagation()}function ew(e){var t=e.document.documentElement,n=eg(e).on("dragstart.drag",eb,ey);"onselectstart"in t?n.on("selectstart.drag",eb,ey):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function eN(e,t){var n=e.document.documentElement,r=eg(e).on("dragstart.drag",null);t&&(r.on("click.drag",eb,ey),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}function ej(e){return((e=Math.exp(e))+1/e)/2}let ek=function e(t,n,r){function a(e,a){var o,i,s=e[0],l=e[1],d=e[2],c=a[0],u=a[1],f=a[2],h=c-s,p=u-l,m=h*h+p*p;if(m<1e-12)i=Math.log(f/d)/t,o=function(e){return[s+e*h,l+e*p,d*Math.exp(t*e*i)]};else{var g=Math.sqrt(m),x=(f*f-d*d+r*m)/(2*d*n*g),y=(f*f-d*d-r*m)/(2*f*n*g),v=Math.log(Math.sqrt(x*x+1)-x);i=(Math.log(Math.sqrt(y*y+1)-y)-v)/t,o=function(e){var r,a,o=e*i,c=ej(v),u=d/(n*g)*(c*(((r=Math.exp(2*(r=t*o+v)))-1)/(r+1))-((a=Math.exp(a=v))-1/a)/2);return[s+u*h,l+u*p,d*c/ej(t*o+v)]}}return o.duration=1e3*i*t/Math.SQRT2,o}return a.rho=function(t){var n=Math.max(.001,+t),r=n*n;return e(n,r,r*r)},a}(Math.SQRT2,2,4);function eS(e,t){if(e=function(e){let t;for(;t=e.sourceEvent;)e=t;return e}(e),void 0===t&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,[(r=r.matrixTransform(t.getScreenCTM().inverse())).x,r.y]}if(t.getBoundingClientRect){var a=t.getBoundingClientRect();return[e.clientX-a.left-t.clientLeft,e.clientY-a.top-t.clientTop]}}return[e.pageX,e.pageY]}var eC,eE,eM=0,e_=0,eA=0,eR=0,eP=0,eO=0,eT="object"==typeof performance&&performance.now?performance:Date,eD="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function ez(){return eP||(eD(eL),eP=eT.now()+eO)}function eL(){eP=0}function eI(){this._call=this._time=this._next=null}function e$(e,t,n){var r=new eI;return r.restart(e,t,n),r}function eH(){eP=(eR=eT.now())+eO,eM=e_=0;try{ez(),++eM;for(var e,t=eC;t;)(e=eP-t._time)>=0&&t._call.call(void 0,e),t=t._next;--eM}finally{eM=0,function(){for(var e,t,n=eC,r=1/0;n;)n._call?(r>n._time&&(r=n._time),e=n,n=n._next):(t=n._next,n._next=null,n=e?e._next=t:eC=t);eE=e,eB(r)}(),eP=0}}function eF(){var e=eT.now(),t=e-eR;t>1e3&&(eO-=t,eR=e)}function eB(e){!eM&&(e_&&(e_=clearTimeout(e_)),e-eP>24?(e<1/0&&(e_=setTimeout(eH,e-eT.now()-eO)),eA&&(eA=clearInterval(eA))):(eA||(eR=eT.now(),eA=setInterval(eF,1e3)),eM=1,eD(eH)))}function eV(e,t,n){var r=new eI;return t=null==t?0:+t,r.restart(n=>{r.stop(),e(n+t)},t,n),r}eI.prototype=e$.prototype={constructor:eI,restart:function(e,t,n){if("function"!=typeof e)throw TypeError("callback is not a function");n=(null==n?ez():+n)+(null==t?0:+t),this._next||eE===this||(eE?eE._next=this:eC=this,eE=this),this._call=e,this._time=n,eB()},stop:function(){this._call&&(this._call=null,this._time=1/0,eB())}};var eq=C("start","end","cancel","interrupt"),eW=[];function eK(e,t,n,r,a,o){var i=e.__transition;if(i){if(n in i)return}else e.__transition={};!function(e,t,n){var r,a=e.__transition;function o(l){var d,c,u,f;if(1!==n.state)return s();for(d in a)if((f=a[d]).name===n.name){if(3===f.state)return eV(o);4===f.state?(f.state=6,f.timer.stop(),f.on.call("interrupt",e,e.__data__,f.index,f.group),delete a[d]):+d<t&&(f.state=6,f.timer.stop(),f.on.call("cancel",e,e.__data__,f.index,f.group),delete a[d])}if(eV(function(){3===n.state&&(n.state=4,n.timer.restart(i,n.delay,n.time),i(l))}),n.state=2,n.on.call("start",e,e.__data__,n.index,n.group),2===n.state){for(d=0,n.state=3,r=Array(u=n.tween.length),c=-1;d<u;++d)(f=n.tween[d].value.call(e,e.__data__,n.index,n.group))&&(r[++c]=f);r.length=c+1}}function i(t){for(var a=t<n.duration?n.ease.call(null,t/n.duration):(n.timer.restart(s),n.state=5,1),o=-1,i=r.length;++o<i;)r[o].call(e,a);5===n.state&&(n.on.call("end",e,e.__data__,n.index,n.group),s())}function s(){for(var r in n.state=6,n.timer.stop(),delete a[t],a)return;delete e.__transition}a[t]=n,n.timer=e$(function(e){n.state=1,n.timer.restart(o,n.delay,n.time),n.delay<=e&&o(e-n.delay)},0,n.time)}(e,n,{name:t,index:r,group:a,on:eq,tween:eW,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:0})}function eG(e,t){var n=eU(e,t);if(n.state>0)throw Error("too late; already scheduled");return n}function eX(e,t){var n=eU(e,t);if(n.state>3)throw Error("too late; already running");return n}function eU(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw Error("transition not found");return n}function eY(e,t){var n,r,a,o=e.__transition,i=!0;if(o){for(a in t=null==t?null:t+"",o){if((n=o[a]).name!==t){i=!1;continue}r=n.state>2&&n.state<5,n.state=6,n.timer.stop(),n.on.call(r?"interrupt":"cancel",e,e.__data__,n.index,n.group),delete o[a]}i&&delete e.__transition}}function eZ(e,t){return e*=1,t*=1,function(n){return e*(1-n)+t*n}}var eQ=180/Math.PI,eJ={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function e0(e,t,n,r,a,o){var i,s,l;return(i=Math.sqrt(e*e+t*t))&&(e/=i,t/=i),(l=e*n+t*r)&&(n-=e*l,r-=t*l),(s=Math.sqrt(n*n+r*r))&&(n/=s,r/=s,l/=s),e*r<t*n&&(e=-e,t=-t,l=-l,i=-i),{translateX:a,translateY:o,rotate:Math.atan2(t,e)*eQ,skewX:Math.atan(l)*eQ,scaleX:i,scaleY:s}}function e1(e,t,n,r){function a(e){return e.length?e.pop()+" ":""}return function(o,i){var s,l,d,c,u=[],f=[];return o=e(o),i=e(i),!function(e,r,a,o,i,s){if(e!==a||r!==o){var l=i.push("translate(",null,t,null,n);s.push({i:l-4,x:eZ(e,a)},{i:l-2,x:eZ(r,o)})}else(a||o)&&i.push("translate("+a+t+o+n)}(o.translateX,o.translateY,i.translateX,i.translateY,u,f),s=o.rotate,l=i.rotate,s!==l?(s-l>180?l+=360:l-s>180&&(s+=360),f.push({i:u.push(a(u)+"rotate(",null,r)-2,x:eZ(s,l)})):l&&u.push(a(u)+"rotate("+l+r),d=o.skewX,c=i.skewX,d!==c?f.push({i:u.push(a(u)+"skewX(",null,r)-2,x:eZ(d,c)}):c&&u.push(a(u)+"skewX("+c+r),!function(e,t,n,r,o,i){if(e!==n||t!==r){var s=o.push(a(o)+"scale(",null,",",null,")");i.push({i:s-4,x:eZ(e,n)},{i:s-2,x:eZ(t,r)})}else(1!==n||1!==r)&&o.push(a(o)+"scale("+n+","+r+")")}(o.scaleX,o.scaleY,i.scaleX,i.scaleY,u,f),o=i=null,function(e){for(var t,n=-1,r=f.length;++n<r;)u[(t=f[n]).i]=t.x(e);return u.join("")}}}var e2=e1(function(e){let t=new("function"==typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?eJ:e0(t.a,t.b,t.c,t.d,t.e,t.f)},"px, ","px)","deg)"),e5=e1(function(e){return null==e?eJ:(s||(s=document.createElementNS("http://www.w3.org/2000/svg","g")),s.setAttribute("transform",e),e=s.transform.baseVal.consolidate())?e0((e=e.matrix).a,e.b,e.c,e.d,e.e,e.f):eJ},", ",")",")");function e3(e,t,n){var r=e._id;return e.each(function(){var e=eX(this,r);(e.value||(e.value={}))[t]=n.apply(this,arguments)}),function(e){return eU(e,r).value[t]}}function e4(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function e8(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function e6(){}var e9="\\s*([+-]?\\d+)\\s*",e7="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",te="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",tt=/^#([0-9a-f]{3,8})$/,tn=RegExp(`^rgb\\(${e9},${e9},${e9}\\)$`),tr=RegExp(`^rgb\\(${te},${te},${te}\\)$`),ta=RegExp(`^rgba\\(${e9},${e9},${e9},${e7}\\)$`),to=RegExp(`^rgba\\(${te},${te},${te},${e7}\\)$`),ti=RegExp(`^hsl\\(${e7},${te},${te}\\)$`),ts=RegExp(`^hsla\\(${e7},${te},${te},${e7}\\)$`),tl={aliceblue:0xf0f8ff,antiquewhite:0xfaebd7,aqua:65535,aquamarine:8388564,azure:0xf0ffff,beige:0xf5f5dc,bisque:0xffe4c4,black:0,blanchedalmond:0xffebcd,blue:255,blueviolet:9055202,brown:0xa52a2a,burlywood:0xdeb887,cadetblue:6266528,chartreuse:8388352,chocolate:0xd2691e,coral:0xff7f50,cornflowerblue:6591981,cornsilk:0xfff8dc,crimson:0xdc143c,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:0xb8860b,darkgray:0xa9a9a9,darkgreen:25600,darkgrey:0xa9a9a9,darkkhaki:0xbdb76b,darkmagenta:9109643,darkolivegreen:5597999,darkorange:0xff8c00,darkorchid:0x9932cc,darkred:9109504,darksalmon:0xe9967a,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:0xff1493,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:0xb22222,floralwhite:0xfffaf0,forestgreen:2263842,fuchsia:0xff00ff,gainsboro:0xdcdcdc,ghostwhite:0xf8f8ff,gold:0xffd700,goldenrod:0xdaa520,gray:8421504,green:32768,greenyellow:0xadff2f,grey:8421504,honeydew:0xf0fff0,hotpink:0xff69b4,indianred:0xcd5c5c,indigo:4915330,ivory:0xfffff0,khaki:0xf0e68c,lavender:0xe6e6fa,lavenderblush:0xfff0f5,lawngreen:8190976,lemonchiffon:0xfffacd,lightblue:0xadd8e6,lightcoral:0xf08080,lightcyan:0xe0ffff,lightgoldenrodyellow:0xfafad2,lightgray:0xd3d3d3,lightgreen:9498256,lightgrey:0xd3d3d3,lightpink:0xffb6c1,lightsalmon:0xffa07a,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:0xb0c4de,lightyellow:0xffffe0,lime:65280,limegreen:3329330,linen:0xfaf0e6,magenta:0xff00ff,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:0xba55d3,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:0xc71585,midnightblue:1644912,mintcream:0xf5fffa,mistyrose:0xffe4e1,moccasin:0xffe4b5,navajowhite:0xffdead,navy:128,oldlace:0xfdf5e6,olive:8421376,olivedrab:7048739,orange:0xffa500,orangered:0xff4500,orchid:0xda70d6,palegoldenrod:0xeee8aa,palegreen:0x98fb98,paleturquoise:0xafeeee,palevioletred:0xdb7093,papayawhip:0xffefd5,peachpuff:0xffdab9,peru:0xcd853f,pink:0xffc0cb,plum:0xdda0dd,powderblue:0xb0e0e6,purple:8388736,rebeccapurple:6697881,red:0xff0000,rosybrown:0xbc8f8f,royalblue:4286945,saddlebrown:9127187,salmon:0xfa8072,sandybrown:0xf4a460,seagreen:3050327,seashell:0xfff5ee,sienna:0xa0522d,silver:0xc0c0c0,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:0xfffafa,springgreen:65407,steelblue:4620980,tan:0xd2b48c,teal:32896,thistle:0xd8bfd8,tomato:0xff6347,turquoise:4251856,violet:0xee82ee,wheat:0xf5deb3,white:0xffffff,whitesmoke:0xf5f5f5,yellow:0xffff00,yellowgreen:0x9acd32};function td(){return this.rgb().formatHex()}function tc(){return this.rgb().formatRgb()}function tu(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=tt.exec(e))?(n=t[1].length,t=parseInt(t[1],16),6===n?tf(t):3===n?new tm(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):8===n?th(t>>24&255,t>>16&255,t>>8&255,(255&t)/255):4===n?th(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|240&t,((15&t)<<4|15&t)/255):null):(t=tn.exec(e))?new tm(t[1],t[2],t[3],1):(t=tr.exec(e))?new tm(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=ta.exec(e))?th(t[1],t[2],t[3],t[4]):(t=to.exec(e))?th(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=ti.exec(e))?tw(t[1],t[2]/100,t[3]/100,1):(t=ts.exec(e))?tw(t[1],t[2]/100,t[3]/100,t[4]):tl.hasOwnProperty(e)?tf(tl[e]):"transparent"===e?new tm(NaN,NaN,NaN,0):null}function tf(e){return new tm(e>>16&255,e>>8&255,255&e,1)}function th(e,t,n,r){return r<=0&&(e=t=n=NaN),new tm(e,t,n,r)}function tp(e,t,n,r){var a;return 1==arguments.length?((a=e)instanceof e6||(a=tu(a)),a)?new tm((a=a.rgb()).r,a.g,a.b,a.opacity):new tm:new tm(e,t,n,null==r?1:r)}function tm(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}function tg(){return`#${tb(this.r)}${tb(this.g)}${tb(this.b)}`}function tx(){let e=ty(this.opacity);return`${1===e?"rgb(":"rgba("}${tv(this.r)}, ${tv(this.g)}, ${tv(this.b)}${1===e?")":`, ${e})`}`}function ty(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function tv(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function tb(e){return((e=tv(e))<16?"0":"")+e.toString(16)}function tw(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new tj(e,t,n,r)}function tN(e){if(e instanceof tj)return new tj(e.h,e.s,e.l,e.opacity);if(e instanceof e6||(e=tu(e)),!e)return new tj;if(e instanceof tj)return e;var t=(e=e.rgb()).r/255,n=e.g/255,r=e.b/255,a=Math.min(t,n,r),o=Math.max(t,n,r),i=NaN,s=o-a,l=(o+a)/2;return s?(i=t===o?(n-r)/s+(n<r)*6:n===o?(r-t)/s+2:(t-n)/s+4,s/=l<.5?o+a:2-o-a,i*=60):s=l>0&&l<1?0:i,new tj(i,s,l,e.opacity)}function tj(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}function tk(e){return(e=(e||0)%360)<0?e+360:e}function tS(e){return Math.max(0,Math.min(1,e||0))}function tC(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}function tE(e,t,n,r,a){var o=e*e,i=o*e;return((1-3*e+3*o-i)*t+(4-6*o+3*i)*n+(1+3*e+3*o-3*i)*r+i*a)/6}e4(e6,tu,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:td,formatHex:td,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return tN(this).formatHsl()},formatRgb:tc,toString:tc}),e4(tm,tp,e8(e6,{brighter(e){return e=null==e?1.4285714285714286:Math.pow(1.4285714285714286,e),new tm(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=null==e?.7:Math.pow(.7,e),new tm(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new tm(tv(this.r),tv(this.g),tv(this.b),ty(this.opacity))},displayable(){return -.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:tg,formatHex:tg,formatHex8:function(){return`#${tb(this.r)}${tb(this.g)}${tb(this.b)}${tb((isNaN(this.opacity)?1:this.opacity)*255)}`},formatRgb:tx,toString:tx})),e4(tj,function(e,t,n,r){return 1==arguments.length?tN(e):new tj(e,t,n,null==r?1:r)},e8(e6,{brighter(e){return e=null==e?1.4285714285714286:Math.pow(1.4285714285714286,e),new tj(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=null==e?.7:Math.pow(.7,e),new tj(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,a=2*n-r;return new tm(tC(e>=240?e-240:e+120,a,r),tC(e,a,r),tC(e<120?e+240:e-120,a,r),this.opacity)},clamp(){return new tj(tk(this.h),tS(this.s),tS(this.l),ty(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){let e=ty(this.opacity);return`${1===e?"hsl(":"hsla("}${tk(this.h)}, ${100*tS(this.s)}%, ${100*tS(this.l)}%${1===e?")":`, ${e})`}`}}));let tM=e=>()=>e;function t_(e,t){var n=t-e;return n?function(t){return e+t*n}:tM(isNaN(e)?t:e)}let tA=function e(t){var n,r=1==(n=+t)?t_:function(e,t){var r,a,o;return t-e?(r=e,a=t,r=Math.pow(r,o=n),a=Math.pow(a,o)-r,o=1/o,function(e){return Math.pow(r+e*a,o)}):tM(isNaN(e)?t:e)};function a(e,t){var n=r((e=tp(e)).r,(t=tp(t)).r),a=r(e.g,t.g),o=r(e.b,t.b),i=t_(e.opacity,t.opacity);return function(t){return e.r=n(t),e.g=a(t),e.b=o(t),e.opacity=i(t),e+""}}return a.gamma=e,a}(1);function tR(e){return function(t){var n,r,a=t.length,o=Array(a),i=Array(a),s=Array(a);for(n=0;n<a;++n)r=tp(t[n]),o[n]=r.r||0,i[n]=r.g||0,s[n]=r.b||0;return o=e(o),i=e(i),s=e(s),r.opacity=1,function(e){return r.r=o(e),r.g=i(e),r.b=s(e),r+""}}}tR(function(e){var t=e.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),a=e[r],o=e[r+1],i=r>0?e[r-1]:2*a-o,s=r<t-1?e[r+2]:2*o-a;return tE((n-r/t)*t,i,a,o,s)}}),tR(function(e){var t=e.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*t),a=e[(r+t-1)%t],o=e[r%t],i=e[(r+1)%t],s=e[(r+2)%t];return tE((n-r/t)*t,a,o,i,s)}});var tP=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,tO=RegExp(tP.source,"g");function tT(e,t){var n;return("number"==typeof t?eZ:t instanceof tu?tA:(n=tu(t))?(t=n,tA):function(e,t){var n,r,a,o,i,s=tP.lastIndex=tO.lastIndex=0,l=-1,d=[],c=[];for(e+="",t+="";(a=tP.exec(e))&&(o=tO.exec(t));)(i=o.index)>s&&(i=t.slice(s,i),d[l]?d[l]+=i:d[++l]=i),(a=a[0])===(o=o[0])?d[l]?d[l]+=o:d[++l]=o:(d[++l]=null,c.push({i:l,x:eZ(a,o)})),s=tO.lastIndex;return s<t.length&&(i=t.slice(s),d[l]?d[l]+=i:d[++l]=i),d.length<2?c[0]?(n=c[0].x,function(e){return n(e)+""}):(r=t,function(){return r}):(t=c.length,function(e){for(var n,r=0;r<t;++r)d[(n=c[r]).i]=n.x(e);return d.join("")})})(e,t)}var tD=em.prototype.constructor;function tz(e){return function(){this.style.removeProperty(e)}}var tL=0;function tI(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}var t$=em.prototype;tI.prototype=(function(e){return em().transition(e)}).prototype={constructor:tI,select:function(e){var t=this._name,n=this._id;"function"!=typeof e&&(e=A(e));for(var r=this._groups,a=r.length,o=Array(a),i=0;i<a;++i)for(var s,l,d=r[i],c=d.length,u=o[i]=Array(c),f=0;f<c;++f)(s=d[f])&&(l=e.call(s,s.__data__,f,d))&&("__data__"in s&&(l.__data__=s.__data__),u[f]=l,eK(u[f],t,n,f,u,eU(s,n)));return new tI(o,this._parents,t,n)},selectAll:function(e){var t=this._name,n=this._id;"function"!=typeof e&&(e=P(e));for(var r=this._groups,a=r.length,o=[],i=[],s=0;s<a;++s)for(var l,d=r[s],c=d.length,u=0;u<c;++u)if(l=d[u]){for(var f,h=e.call(l,l.__data__,u,d),p=eU(l,n),m=0,g=h.length;m<g;++m)(f=h[m])&&eK(f,t,n,m,h,p);o.push(h),i.push(l)}return new tI(o,i,t,n)},selectChild:t$.selectChild,selectChildren:t$.selectChildren,filter:function(e){"function"!=typeof e&&(e=O(e));for(var t=this._groups,n=t.length,r=Array(n),a=0;a<n;++a)for(var o,i=t[a],s=i.length,l=r[a]=[],d=0;d<s;++d)(o=i[d])&&e.call(o,o.__data__,d,i)&&l.push(o);return new tI(r,this._parents,this._name,this._id)},merge:function(e){if(e._id!==this._id)throw Error();for(var t=this._groups,n=e._groups,r=t.length,a=n.length,o=Math.min(r,a),i=Array(r),s=0;s<o;++s)for(var l,d=t[s],c=n[s],u=d.length,f=i[s]=Array(u),h=0;h<u;++h)(l=d[h]||c[h])&&(f[h]=l);for(;s<r;++s)i[s]=t[s];return new tI(i,this._parents,this._name,this._id)},selection:function(){return new tD(this._groups,this._parents)},transition:function(){for(var e=this._name,t=this._id,n=++tL,r=this._groups,a=r.length,o=0;o<a;++o)for(var i,s=r[o],l=s.length,d=0;d<l;++d)if(i=s[d]){var c=eU(i,t);eK(i,e,n,d,s,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new tI(r,this._parents,e,n)},call:t$.call,nodes:t$.nodes,node:t$.node,size:t$.size,empty:t$.empty,each:t$.each,on:function(e,t){var n,r,a,o,i,s,l=this._id;return arguments.length<2?eU(this.node(),l).on.on(e):this.each((n=l,r=e,a=t,s=(r+"").trim().split(/^|\s+/).every(function(e){var t=e.indexOf(".");return t>=0&&(e=e.slice(0,t)),!e||"start"===e})?eG:eX,function(){var e=s(this,n),t=e.on;t!==o&&(i=(o=t).copy()).on(r,a),e.on=i}))},attr:function(e,t){var n=G(e),r="transform"===n?e5:tT;return this.attrTween(e,"function"==typeof t?(n.local?function(e,t,n){var r,a,o;return function(){var i,s,l=n(this);return null==l?void this.removeAttributeNS(e.space,e.local):(i=this.getAttributeNS(e.space,e.local))===(s=l+"")?null:i===r&&s===a?o:(a=s,o=t(r=i,l))}}:function(e,t,n){var r,a,o;return function(){var i,s,l=n(this);return null==l?void this.removeAttribute(e):(i=this.getAttribute(e))===(s=l+"")?null:i===r&&s===a?o:(a=s,o=t(r=i,l))}})(n,r,e3(this,"attr."+e,t)):null==t?(n.local?function(e){return function(){this.removeAttributeNS(e.space,e.local)}}:function(e){return function(){this.removeAttribute(e)}})(n):(n.local?function(e,t,n){var r,a,o=n+"";return function(){var i=this.getAttributeNS(e.space,e.local);return i===o?null:i===r?a:a=t(r=i,n)}}:function(e,t,n){var r,a,o=n+"";return function(){var i=this.getAttribute(e);return i===o?null:i===r?a:a=t(r=i,n)}})(n,r,t))},attrTween:function(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==t)return this.tween(n,null);if("function"!=typeof t)throw Error();var r=G(e);return this.tween(n,(r.local?function(e,t){var n,r;function a(){var a=t.apply(this,arguments);return a!==r&&(n=(r=a)&&function(t){this.setAttributeNS(e.space,e.local,a.call(this,t))}),n}return a._value=t,a}:function(e,t){var n,r;function a(){var a=t.apply(this,arguments);return a!==r&&(n=(r=a)&&function(t){this.setAttribute(e,a.call(this,t))}),n}return a._value=t,a})(r,t))},style:function(e,t,n){var r,a,o,i,s,l,d,c,u,f,h,p,m,g,x,y,v,b,w,N,j,k="transform"==(e+="")?e2:tT;return null==t?this.styleTween(e,(r=e,function(){var e=U(this,r),t=(this.style.removeProperty(r),U(this,r));return e===t?null:e===a&&t===o?i:i=k(a=e,o=t)})).on("end.style."+e,tz(e)):"function"==typeof t?this.styleTween(e,(s=e,l=e3(this,"style."+e,t),function(){var e=U(this,s),t=l(this),n=t+"";return null==t&&(this.style.removeProperty(s),n=t=U(this,s)),e===n?null:e===d&&n===c?u:(c=n,u=k(d=e,t))})).each((f=this._id,v="end."+(y="style."+(h=e)),function(){var e=eX(this,f),t=e.on,n=null==e.value[y]?x||(x=tz(h)):void 0;(t!==p||g!==n)&&(m=(p=t).copy()).on(v,g=n),e.on=m})):this.styleTween(e,(b=e,j=t+"",function(){var e=U(this,b);return e===j?null:e===w?N:N=k(w=e,t)}),n).on("end.style."+e,null)},styleTween:function(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(null==t)return this.tween(r,null);if("function"!=typeof t)throw Error();return this.tween(r,function(e,t,n){var r,a;function o(){var o=t.apply(this,arguments);return o!==a&&(r=(a=o)&&function(t){this.style.setProperty(e,o.call(this,t),n)}),r}return o._value=t,o}(e,t,null==n?"":n))},text:function(e){var t,n;return this.tween("text","function"==typeof e?(t=e3(this,"text",e),function(){var e=t(this);this.textContent=null==e?"":e}):(n=null==e?"":e+"",function(){this.textContent=n}))},textTween:function(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(null==e)return this.tween(t,null);if("function"!=typeof e)throw Error();return this.tween(t,function(e){var t,n;function r(){var r=e.apply(this,arguments);return r!==n&&(t=(n=r)&&function(e){this.textContent=r.call(this,e)}),t}return r._value=e,r}(e))},remove:function(){var e;return this.on("end.remove",(e=this._id,function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}))},tween:function(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r,a=eU(this.node(),n).tween,o=0,i=a.length;o<i;++o)if((r=a[o]).name===e)return r.value;return null}return this.each((null==t?function(e,t){var n,r;return function(){var a=eX(this,e),o=a.tween;if(o!==n){r=n=o;for(var i=0,s=r.length;i<s;++i)if(r[i].name===t){(r=r.slice()).splice(i,1);break}}a.tween=r}}:function(e,t,n){var r,a;if("function"!=typeof n)throw Error();return function(){var o=eX(this,e),i=o.tween;if(i!==r){a=(r=i).slice();for(var s={name:t,value:n},l=0,d=a.length;l<d;++l)if(a[l].name===t){a[l]=s;break}l===d&&a.push(s)}o.tween=a}})(n,e,t))},delay:function(e){var t=this._id;return arguments.length?this.each(("function"==typeof e?function(e,t){return function(){eG(this,e).delay=+t.apply(this,arguments)}}:function(e,t){return t*=1,function(){eG(this,e).delay=t}})(t,e)):eU(this.node(),t).delay},duration:function(e){var t=this._id;return arguments.length?this.each(("function"==typeof e?function(e,t){return function(){eX(this,e).duration=+t.apply(this,arguments)}}:function(e,t){return t*=1,function(){eX(this,e).duration=t}})(t,e)):eU(this.node(),t).duration},ease:function(e){var t=this._id;return arguments.length?this.each(function(e,t){if("function"!=typeof t)throw Error();return function(){eX(this,e).ease=t}}(t,e)):eU(this.node(),t).ease},easeVarying:function(e){var t;if("function"!=typeof e)throw Error();return this.each((t=this._id,function(){var n=e.apply(this,arguments);if("function"!=typeof n)throw Error();eX(this,t).ease=n}))},end:function(){var e,t,n=this,r=n._id,a=n.size();return new Promise(function(o,i){var s={value:i},l={value:function(){0==--a&&o()}};n.each(function(){var n=eX(this,r),a=n.on;a!==e&&((t=(e=a).copy())._.cancel.push(s),t._.interrupt.push(s),t._.end.push(l)),n.on=t}),0===a&&o()})},[Symbol.iterator]:t$[Symbol.iterator]};var tH={time:null,delay:0,duration:250,ease:function(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}};em.prototype.interrupt=function(e){return this.each(function(){eY(this,e)})},em.prototype.transition=function(e){var t,n;e instanceof tI?(t=e._id,e=e._name):(t=++tL,(n=tH).time=ez(),e=null==e?null:e+"");for(var r=this._groups,a=r.length,o=0;o<a;++o)for(var i,s=r[o],l=s.length,d=0;d<l;++d)(i=s[d])&&eK(i,e,t,d,s,n||function(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw Error(`transition ${t} not found`);return n}(i,t));return new tI(r,this._parents,e,t)};let tF=e=>()=>e;function tB(e,{sourceEvent:t,target:n,transform:r,dispatch:a}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:a}})}function tV(e,t,n){this.k=e,this.x=t,this.y=n}tV.prototype={constructor:tV,scale:function(e){return 1===e?this:new tV(this.k*e,this.x,this.y)},translate:function(e,t){return 0===e&0===t?this:new tV(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var tq=new tV(1,0,0);function tW(e){e.stopImmediatePropagation()}function tK(e){e.preventDefault(),e.stopImmediatePropagation()}function tG(e){return(!e.ctrlKey||"wheel"===e.type)&&!e.button}function tX(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e).hasAttribute("viewBox")?[[(e=e.viewBox.baseVal).x,e.y],[e.x+e.width,e.y+e.height]]:[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]:[[0,0],[e.clientWidth,e.clientHeight]]}function tU(){return this.__zoom||tq}function tY(e){return-e.deltaY*(1===e.deltaMode?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function tZ(){return navigator.maxTouchPoints||"ontouchstart"in this}function tQ(e,t,n){var r=e.invertX(t[0][0])-n[0][0],a=e.invertX(t[1][0])-n[1][0],o=e.invertY(t[0][1])-n[0][1],i=e.invertY(t[1][1])-n[1][1];return e.translate(a>r?(r+a)/2:Math.min(0,r)||Math.max(0,a),i>o?(o+i)/2:Math.min(0,o)||Math.max(0,i))}tV.prototype;let tJ=e=>()=>e;function t0(e,{sourceEvent:t,subject:n,target:r,identifier:a,active:o,x:i,y:s,dx:l,dy:d,dispatch:c}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:a,enumerable:!0,configurable:!0},active:{value:o,enumerable:!0,configurable:!0},x:{value:i,enumerable:!0,configurable:!0},y:{value:s,enumerable:!0,configurable:!0},dx:{value:l,enumerable:!0,configurable:!0},dy:{value:d,enumerable:!0,configurable:!0},_:{value:c}})}function t1(e){return!e.ctrlKey&&!e.button}function t2(){return this.parentNode}function t5(e,t){return null==t?{x:e.x,y:e.y}:t}function t3(){return navigator.maxTouchPoints||"ontouchstart"in this}t0.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};var t4=e.i(74080);let t8=(0,p.createContext)(null),t6=t8.Provider,t9="[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001";function t7(e,t){let n=(0,p.useContext)(t8);if(null===n)throw Error(t9);return N(n,e,t)}let ne=()=>{let e=(0,p.useContext)(t8);if(null===e)throw Error(t9);return(0,p.useMemo)(()=>({getState:e.getState,setState:e.setState,subscribe:e.subscribe,destroy:e.destroy}),[e])},nt=e=>e.userSelectionActive?"none":"all";function nn({position:e,children:t,className:n,style:r,...a}){let o=t7(nt),i=`${e}`.split("-");return p.default.createElement("div",{className:m(["react-flow__panel",n,...i]),style:{...r,pointerEvents:o},...a},t)}function nr({proOptions:e,position:t="bottom-right"}){return e?.hideAttribution?null:p.default.createElement(nn,{position:t,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://reactflow.dev/pro"},p.default.createElement("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution"},"React Flow"))}var na=(0,p.memo)(({x:e,y:t,label:n,labelStyle:r={},labelShowBg:a=!0,labelBgStyle:o={},labelBgPadding:i=[2,4],labelBgBorderRadius:s=2,children:l,className:d,...c})=>{let u=(0,p.useRef)(null),[f,h]=(0,p.useState)({x:0,y:0,width:0,height:0}),g=m(["react-flow__edge-textwrapper",d]);return((0,p.useEffect)(()=>{if(u.current){let e=u.current.getBBox();h({x:e.x,y:e.y,width:e.width,height:e.height})}},[n]),void 0!==n&&n)?p.default.createElement("g",{transform:`translate(${e-f.width/2} ${t-f.height/2})`,className:g,visibility:f.width?"visible":"hidden",...c},a&&p.default.createElement("rect",{width:f.width+2*i[0],x:-i[0],y:-i[1],height:f.height+2*i[1],className:"react-flow__edge-textbg",style:o,rx:s,ry:s}),p.default.createElement("text",{className:"react-flow__edge-text",y:f.height/2,dy:"0.3em",ref:u,style:r},n),l):null});let no=e=>({width:e.offsetWidth,height:e.offsetHeight}),ni=(e,t=0,n=1)=>Math.min(Math.max(e,t),n),ns=(e={x:0,y:0},t)=>({x:ni(e.x,t[0][0],t[1][0]),y:ni(e.y,t[0][1],t[1][1])}),nl=(e,t,n)=>e<t?ni(Math.abs(e-t),1,50)/50:e>n?-ni(Math.abs(e-n),1,50)/50:0,nd=(e,t)=>[20*nl(e.x,35,t.width-35),20*nl(e.y,35,t.height-35)],nc=e=>e.getRootNode?.()||window?.document,nu=({x:e,y:t,width:n,height:r})=>({x:e,y:t,x2:e+n,y2:t+r}),nf=e=>({...e.positionAbsolute||{x:0,y:0},width:e.width||0,height:e.height||0}),nh=(e,t)=>Math.ceil(Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x))*Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y))),np=e=>!isNaN(e)&&isFinite(e),nm=Symbol.for("internals"),ng=["Enter"," ","Escape"],nx=(e,t)=>{};function ny(e){let t="nativeEvent"in e?e.nativeEvent:e,n=t.composedPath?.()?.[0]||e.target;return["INPUT","SELECT","TEXTAREA"].includes(n?.nodeName)||n?.hasAttribute("contenteditable")||!!n?.closest(".nokey")}let nv=(e,t)=>{let n="clientX"in e,r=n?e.clientX:e.touches?.[0].clientX,a=n?e.clientY:e.touches?.[0].clientY;return{x:r-(t?.left??0),y:a-(t?.top??0)}},nb=()=>"undefined"!=typeof navigator&&navigator?.userAgent?.indexOf("Mac")>=0,nw=({id:e,path:t,labelX:n,labelY:r,label:a,labelStyle:o,labelShowBg:i,labelBgStyle:s,labelBgPadding:l,labelBgBorderRadius:d,style:c,markerEnd:u,markerStart:f,interactionWidth:h=20})=>p.default.createElement(p.default.Fragment,null,p.default.createElement("path",{id:e,style:c,d:t,fill:"none",className:"react-flow__edge-path",markerEnd:u,markerStart:f}),h&&p.default.createElement("path",{d:t,fill:"none",strokeOpacity:0,strokeWidth:h,className:"react-flow__edge-interaction"}),a&&np(n)&&np(r)?p.default.createElement(na,{x:n,y:r,label:a,labelStyle:o,labelShowBg:i,labelBgStyle:s,labelBgPadding:l,labelBgBorderRadius:d}):null);function nN(e,t,n){return void 0===n?n:r=>{let a=t().edges.find(t=>t.id===e);a&&n(r,{...a})}}function nj({sourceX:e,sourceY:t,targetX:n,targetY:r}){let a=Math.abs(n-e)/2,o=Math.abs(r-t)/2;return[n<e?n+a:n-a,r<t?r+o:r-o,a,o]}function nk({sourceX:e,sourceY:t,targetX:n,targetY:r,sourceControlX:a,sourceControlY:o,targetControlX:i,targetControlY:s}){let l=.125*e+.375*a+.375*i+.125*n,d=.125*t+.375*o+.375*s+.125*r,c=Math.abs(l-e),u=Math.abs(d-t);return[l,d,c,u]}function nS({pos:e,x1:t,y1:n,x2:r,y2:a}){return e===h.Left||e===h.Right?[.5*(t+r),n]:[t,.5*(n+a)]}function nC({sourceX:e,sourceY:t,sourcePosition:n=h.Bottom,targetX:r,targetY:a,targetPosition:o=h.Top}){let[i,s]=nS({pos:n,x1:e,y1:t,x2:r,y2:a}),[l,d]=nS({pos:o,x1:r,y1:a,x2:e,y2:t}),[c,u,f,p]=nk({sourceX:e,sourceY:t,targetX:r,targetY:a,sourceControlX:i,sourceControlY:s,targetControlX:l,targetControlY:d});return[`M${e},${t} C${i},${s} ${l},${d} ${r},${a}`,c,u,f,p]}nw.displayName="BaseEdge",(t=l||(l={})).Strict="strict",t.Loose="loose",(n=d||(d={})).Free="free",n.Vertical="vertical",n.Horizontal="horizontal",(r=c||(c={})).Partial="partial",r.Full="full",(a=u||(u={})).Bezier="default",a.Straight="straight",a.Step="step",a.SmoothStep="smoothstep",a.SimpleBezier="simplebezier",(o=f||(f={})).Arrow="arrow",o.ArrowClosed="arrowclosed",(i=h||(h={})).Left="left",i.Top="top",i.Right="right",i.Bottom="bottom";let nE=(0,p.memo)(({sourceX:e,sourceY:t,targetX:n,targetY:r,sourcePosition:a=h.Bottom,targetPosition:o=h.Top,label:i,labelStyle:s,labelShowBg:l,labelBgStyle:d,labelBgPadding:c,labelBgBorderRadius:u,style:f,markerEnd:m,markerStart:g,interactionWidth:x})=>{let[y,v,b]=nC({sourceX:e,sourceY:t,sourcePosition:a,targetX:n,targetY:r,targetPosition:o});return p.default.createElement(nw,{path:y,labelX:v,labelY:b,label:i,labelStyle:s,labelShowBg:l,labelBgStyle:d,labelBgPadding:c,labelBgBorderRadius:u,style:f,markerEnd:m,markerStart:g,interactionWidth:x})});nE.displayName="SimpleBezierEdge";let nM={[h.Left]:{x:-1,y:0},[h.Right]:{x:1,y:0},[h.Top]:{x:0,y:-1},[h.Bottom]:{x:0,y:1}},n_=({source:e,sourcePosition:t=h.Bottom,target:n})=>t===h.Left||t===h.Right?e.x<n.x?{x:1,y:0}:{x:-1,y:0}:e.y<n.y?{x:0,y:1}:{x:0,y:-1},nA=(e,t)=>Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));function nR({sourceX:e,sourceY:t,sourcePosition:n=h.Bottom,targetX:r,targetY:a,targetPosition:o=h.Top,borderRadius:i=5,centerX:s,centerY:l,offset:d=20}){let[c,u,f,p,m]=function({source:e,sourcePosition:t=h.Bottom,target:n,targetPosition:r=h.Top,center:a,offset:o}){let i,s,l=nM[t],d=nM[r],c={x:e.x+l.x*o,y:e.y+l.y*o},u={x:n.x+d.x*o,y:n.y+d.y*o},f=n_({source:c,sourcePosition:t,target:u}),p=0!==f.x?"x":"y",m=f[p],g=[],x={x:0,y:0},y={x:0,y:0},[v,b,w,N]=nj({sourceX:e.x,sourceY:e.y,targetX:n.x,targetY:n.y});if(l[p]*d[p]==-1){i=a.x??v,s=a.y??b;let e=[{x:i,y:c.y},{x:i,y:u.y}],t=[{x:c.x,y:s},{x:u.x,y:s}];g=l[p]===m?"x"===p?e:t:"x"===p?t:e}else{let a=[{x:c.x,y:u.y}],f=[{x:u.x,y:c.y}];if(g="x"===p?l.x===m?f:a:l.y===m?a:f,t===r){let t=Math.abs(e[p]-n[p]);if(t<=o){let r=Math.min(o-1,o-t);l[p]===m?x[p]=(c[p]>e[p]?-1:1)*r:y[p]=(u[p]>n[p]?-1:1)*r}}if(t!==r){let e="x"===p?"y":"x",t=l[p]===d[e],n=c[e]>u[e],r=c[e]<u[e];(1===l[p]&&(!t&&n||t&&r)||1!==l[p]&&(!t&&r||t&&n))&&(g="x"===p?a:f)}let h={x:c.x+x.x,y:c.y+x.y},v={x:u.x+y.x,y:u.y+y.y};Math.max(Math.abs(h.x-g[0].x),Math.abs(v.x-g[0].x))>=Math.max(Math.abs(h.y-g[0].y),Math.abs(v.y-g[0].y))?(i=(h.x+v.x)/2,s=g[0].y):(i=g[0].x,s=(h.y+v.y)/2)}return[[e,{x:c.x+x.x,y:c.y+x.y},...g,{x:u.x+y.x,y:u.y+y.y},n],i,s,w,N]}({source:{x:e,y:t},sourcePosition:n,target:{x:r,y:a},targetPosition:o,center:{x:s,y:l},offset:d});return[c.reduce((e,t,n)=>e+(n>0&&n<c.length-1?function(e,t,n,r){let a=Math.min(nA(e,t)/2,nA(t,n)/2,r),{x:o,y:i}=t;if(e.x===o&&o===n.x||e.y===i&&i===n.y)return`L${o} ${i}`;if(e.y===i){let t=e.x<n.x?-1:1,r=e.y<n.y?1:-1;return`L ${o+a*t},${i}Q ${o},${i} ${o},${i+a*r}`}let s=e.x<n.x?1:-1,l=e.y<n.y?-1:1;return`L ${o},${i+a*l}Q ${o},${i} ${o+a*s},${i}`}(c[n-1],t,c[n+1],i):`${0===n?"M":"L"}${t.x} ${t.y}`),""),u,f,p,m]}let nP=(0,p.memo)(({sourceX:e,sourceY:t,targetX:n,targetY:r,label:a,labelStyle:o,labelShowBg:i,labelBgStyle:s,labelBgPadding:l,labelBgBorderRadius:d,style:c,sourcePosition:u=h.Bottom,targetPosition:f=h.Top,markerEnd:m,markerStart:g,pathOptions:x,interactionWidth:y})=>{let[v,b,w]=nR({sourceX:e,sourceY:t,sourcePosition:u,targetX:n,targetY:r,targetPosition:f,borderRadius:x?.borderRadius,offset:x?.offset});return p.default.createElement(nw,{path:v,labelX:b,labelY:w,label:a,labelStyle:o,labelShowBg:i,labelBgStyle:s,labelBgPadding:l,labelBgBorderRadius:d,style:c,markerEnd:m,markerStart:g,interactionWidth:y})});nP.displayName="SmoothStepEdge";let nO=(0,p.memo)(e=>p.default.createElement(nP,{...e,pathOptions:(0,p.useMemo)(()=>({borderRadius:0,offset:e.pathOptions?.offset}),[e.pathOptions?.offset])}));nO.displayName="StepEdge";let nT=(0,p.memo)(({sourceX:e,sourceY:t,targetX:n,targetY:r,label:a,labelStyle:o,labelShowBg:i,labelBgStyle:s,labelBgPadding:l,labelBgBorderRadius:d,style:c,markerEnd:u,markerStart:f,interactionWidth:h})=>{let[m,g,x]=function({sourceX:e,sourceY:t,targetX:n,targetY:r}){let[a,o,i,s]=nj({sourceX:e,sourceY:t,targetX:n,targetY:r});return[`M ${e},${t}L ${n},${r}`,a,o,i,s]}({sourceX:e,sourceY:t,targetX:n,targetY:r});return p.default.createElement(nw,{path:m,labelX:g,labelY:x,label:a,labelStyle:o,labelShowBg:i,labelBgStyle:s,labelBgPadding:l,labelBgBorderRadius:d,style:c,markerEnd:u,markerStart:f,interactionWidth:h})});function nD(e,t){return e>=0?.5*e:25*t*Math.sqrt(-e)}function nz({pos:e,x1:t,y1:n,x2:r,y2:a,c:o}){switch(e){case h.Left:return[t-nD(t-r,o),n];case h.Right:return[t+nD(r-t,o),n];case h.Top:return[t,n-nD(n-a,o)];case h.Bottom:return[t,n+nD(a-n,o)]}}function nL({sourceX:e,sourceY:t,sourcePosition:n=h.Bottom,targetX:r,targetY:a,targetPosition:o=h.Top,curvature:i=.25}){let[s,l]=nz({pos:n,x1:e,y1:t,x2:r,y2:a,c:i}),[d,c]=nz({pos:o,x1:r,y1:a,x2:e,y2:t,c:i}),[u,f,p,m]=nk({sourceX:e,sourceY:t,targetX:r,targetY:a,sourceControlX:s,sourceControlY:l,targetControlX:d,targetControlY:c});return[`M${e},${t} C${s},${l} ${d},${c} ${r},${a}`,u,f,p,m]}nT.displayName="StraightEdge";let nI=(0,p.memo)(({sourceX:e,sourceY:t,targetX:n,targetY:r,sourcePosition:a=h.Bottom,targetPosition:o=h.Top,label:i,labelStyle:s,labelShowBg:l,labelBgStyle:d,labelBgPadding:c,labelBgBorderRadius:u,style:f,markerEnd:m,markerStart:g,pathOptions:x,interactionWidth:y})=>{let[v,b,w]=nL({sourceX:e,sourceY:t,sourcePosition:a,targetX:n,targetY:r,targetPosition:o,curvature:x?.curvature});return p.default.createElement(nw,{path:v,labelX:b,labelY:w,label:i,labelStyle:s,labelShowBg:l,labelBgStyle:d,labelBgPadding:c,labelBgBorderRadius:u,style:f,markerEnd:m,markerStart:g,interactionWidth:y})});nI.displayName="BezierEdge";let n$=(0,p.createContext)(null),nH=n$.Provider;n$.Consumer;let nF=(e,t)=>{if(void 0===e)return"";if("string"==typeof e)return e;let n=t?`${t}__`:"";return`${n}${Object.keys(e).sort().map(t=>`${t}=${e[t]}`).join("&")}`},nB=(e,t)=>{let n,r;return e.source&&e.target?(r=n="id"in e&&"source"in e&&"target"in e?{...e}:{...e,id:(({source:e,sourceHandle:t,target:n,targetHandle:r})=>`reactflow__edge-${e}${t||""}-${n}${r||""}`)(e)},t.some(e=>e.source===r.source&&e.target===r.target&&(e.sourceHandle===r.sourceHandle||!e.sourceHandle&&!r.sourceHandle)&&(e.targetHandle===r.targetHandle||!e.targetHandle&&!r.targetHandle)))?t:t.concat(n):(nx("006","Can't create edge. An edge needs a source and a target."),t)},nV=({x:e,y:t},[n,r,a],o,[i,s])=>{let l={x:(e-n)/a,y:(t-r)/a};return o?{x:i*Math.round(l.x/i),y:s*Math.round(l.y/s)}:l},nq=({x:e,y:t},[n,r,a])=>({x:e*a+n,y:t*a+r}),nW=(e,t=[0,0])=>{if(!e)return{x:0,y:0,positionAbsolute:{x:0,y:0}};let n=(e.width??0)*t[0],r=(e.height??0)*t[1],a={x:e.position.x-n,y:e.position.y-r};return{...a,positionAbsolute:e.positionAbsolute?{x:e.positionAbsolute.x-n,y:e.positionAbsolute.y-r}:a}},nK=(e,t=[0,0])=>0===e.length?{x:0,y:0,width:0,height:0}:(({x:e,y:t,x2:n,y2:r})=>({x:e,y:t,width:n-e,height:r-t}))(e.reduce((e,n)=>{let r,{x:a,y:o}=nW(n,t).positionAbsolute;return r=nu({x:a,y:o,width:n.width||0,height:n.height||0}),{x:Math.min(e.x,r.x),y:Math.min(e.y,r.y),x2:Math.max(e.x2,r.x2),y2:Math.max(e.y2,r.y2)}},{x:1/0,y:1/0,x2:-1/0,y2:-1/0})),nG=(e,t,[n,r,a]=[0,0,1],o=!1,i=!1,s=[0,0])=>{let l={x:(t.x-n)/a,y:(t.y-r)/a,width:t.width/a,height:t.height/a},d=[];return e.forEach(e=>{let{width:t,height:n,selectable:r=!0,hidden:a=!1}=e;if(i&&!r||a)return!1;let{positionAbsolute:c}=nW(e,s),u=nh(l,{x:c.x,y:c.y,width:t||0,height:n||0}),f=void 0===t||void 0===n||null===t||null===n,h=(t||0)*(n||0);(f||o&&u>0||u>=h||e.dragging)&&d.push(e)}),d},nX=(e,t)=>{let n=e.map(e=>e.id);return t.filter(e=>n.includes(e.source)||n.includes(e.target))},nU=(e,t,n,r,a,o=.1)=>{let i=ni(Math.min(t/(e.width*(1+o)),n/(e.height*(1+o))),r,a);return{x:t/2-(e.x+e.width/2)*i,y:n/2-(e.y+e.height/2)*i,zoom:i}},nY=(e,t=0)=>e.transition().duration(t);function nZ(e,t,n,r){return(t[n]||[]).reduce((t,a)=>(`${e.id}-${a.id}-${n}`!==r&&t.push({id:a.id||null,type:n,nodeId:e.id,x:(e.positionAbsolute?.x??0)+a.x+a.width/2,y:(e.positionAbsolute?.y??0)+a.y+a.height/2}),t),[])}let nQ={source:null,target:null,sourceHandle:null,targetHandle:null},nJ=()=>({handleDomNode:null,isValid:!1,connection:nQ,endHandle:null});function n0(e,t,n,r,a,o,i){let s="target"===a,d=i.querySelector(`.react-flow__handle[data-id="${e?.nodeId}-${e?.id}-${e?.type}"]`),c={...nJ(),handleDomNode:d};if(d){let e=n1(void 0,d),a=d.getAttribute("data-nodeid"),i=d.getAttribute("data-handleid"),u=d.classList.contains("connectable"),f=d.classList.contains("connectableend"),h={source:s?a:n,sourceHandle:s?i:r,target:s?n:a,targetHandle:s?r:i};c.connection=h,u&&f&&(t===l.Strict?s&&"source"===e||!s&&"target"===e:a!==n||i!==r)&&(c.endHandle={nodeId:a,handleId:i,type:e},c.isValid=o(h))}return c}function n1(e,t){return e?e:t?.classList.contains("target")?"target":t?.classList.contains("source")?"source":null}function n2(e){e?.classList.remove("valid","connecting","react-flow__handle-valid","react-flow__handle-connecting")}function n5({event:e,handleId:t,nodeId:n,onConnect:r,isTarget:a,getState:o,setState:i,isValidConnection:s,edgeUpdaterType:l,onReconnectEnd:d}){let c,u,f=nc(e.target),{connectionMode:h,domNode:p,autoPanOnConnect:m,connectionRadius:g,onConnectStart:x,panBy:y,getNodes:v,cancelConnection:b}=o(),w=0,{x:N,y:j}=nv(e),k=n1(l,f?.elementFromPoint(N,j)),S=p?.getBoundingClientRect();if(!S||!k)return;let C=nv(e,S),E=!1,M=null,_=!1,A=null,R=function({nodes:e,nodeId:t,handleId:n,handleType:r}){return e.reduce((e,a)=>{if(a[nm]){let{handleBounds:o}=a[nm],i=[],s=[];o&&(i=nZ(a,o,"source",`${t}-${n}-${r}`),s=nZ(a,o,"target",`${t}-${n}-${r}`)),e.push(...i,...s)}return e},[])}({nodes:v(),nodeId:n,handleId:t,handleType:k}),P=()=>{if(!m)return;let[e,t]=nd(C,S);y({x:e,y:t}),w=requestAnimationFrame(P)};function O(e){var r,l;let d,{transform:p}=o();C=nv(e,S);let{handle:m,validHandleResult:x}=function(e,t,n,r,a,o){let{x:i,y:s}=nv(e),l=t.elementsFromPoint(i,s).find(e=>e.classList.contains("react-flow__handle"));if(l){let e=l.getAttribute("data-nodeid");if(e){let t=n1(void 0,l),r=l.getAttribute("data-handleid"),i=o({nodeId:e,id:r,type:t});if(i){let o=a.find(n=>n.nodeId===e&&n.type===t&&n.id===r);return{handle:{id:r,type:t,nodeId:e,x:o?.x||n.x,y:o?.y||n.y},validHandleResult:i}}}}let d=[],c=1/0;if(a.forEach(e=>{let t=Math.sqrt((e.x-n.x)**2+(e.y-n.y)**2);if(t<=r){let n=o(e);t<=c&&(t<c?d=[{handle:e,validHandleResult:n}]:t===c&&d.push({handle:e,validHandleResult:n}),c=t)}}),!d.length)return{handle:null,validHandleResult:nJ()};if(1===d.length)return d[0];let u=d.some(({validHandleResult:e})=>e.isValid),f=d.some(({handle:e})=>"target"===e.type);return d.find(({handle:e,validHandleResult:t})=>f?"target"===e.type:!u||t.isValid)||d[0]}(e,f,nV(C,p,!1,[1,1]),g,R,e=>n0(e,h,n,t,a?"target":"source",s,f));if(c=m,E||(P(),E=!0),A=x.handleDomNode,M=x.connection,_=x.isValid,i({connectionPosition:c&&_?nq({x:c.x,y:c.y},p):C,connectionStatus:(r=!!c,d=null,(l=_)?d="valid":r&&!l&&(d="invalid"),d),connectionEndHandle:x.endHandle}),!c&&!_&&!A)return n2(u);M.source!==M.target&&A&&(n2(u),u=A,A.classList.add("connecting","react-flow__handle-connecting"),A.classList.toggle("valid",_),A.classList.toggle("react-flow__handle-valid",_))}function T(e){(c||A)&&M&&_&&r?.(M),o().onConnectEnd?.(e),l&&d?.(e),n2(u),b(),cancelAnimationFrame(w),E=!1,_=!1,M=null,A=null,f.removeEventListener("mousemove",O),f.removeEventListener("mouseup",T),f.removeEventListener("touchmove",O),f.removeEventListener("touchend",T)}i({connectionPosition:C,connectionStatus:null,connectionNodeId:n,connectionHandleId:t,connectionHandleType:k,connectionStartHandle:{nodeId:n,handleId:t,type:k},connectionEndHandle:null}),x?.(e,{nodeId:n,handleId:t,handleType:k}),f.addEventListener("mousemove",O),f.addEventListener("mouseup",T),f.addEventListener("touchmove",O),f.addEventListener("touchend",T)}let n3=()=>!0,n4=e=>({connectionStartHandle:e.connectionStartHandle,connectOnClick:e.connectOnClick,noPanClassName:e.noPanClassName}),n8=(0,p.forwardRef)(({type:e="source",position:t=h.Top,isValidConnection:n,isConnectable:r=!0,isConnectableStart:a=!0,isConnectableEnd:o=!0,id:i,onConnect:s,children:l,className:d,onMouseDown:c,onTouchStart:u,...f},g)=>{let x=i||null,y="target"===e,v=ne(),b=(0,p.useContext)(n$),{connectOnClick:w,noPanClassName:N}=t7(n4,k),{connecting:j,clickConnecting:S}=t7(t=>{let{connectionStartHandle:n,connectionEndHandle:r,connectionClickStartHandle:a}=t;return{connecting:n?.nodeId===b&&n?.handleId===x&&n?.type===e||r?.nodeId===b&&r?.handleId===x&&r?.type===e,clickConnecting:a?.nodeId===b&&a?.handleId===x&&a?.type===e}},k);b||v.getState().onError?.("010","Handle: No node id found. Make sure to only use a Handle inside a custom Node.");let C=e=>{let{defaultEdgeOptions:t,onConnect:n,hasDefaultEdges:r}=v.getState(),a={...t,...e};if(r){let{edges:e,setEdges:t}=v.getState();t(nB(a,e))}n?.(a),s?.(a)},E=e=>{if(!b)return;let t="clientX"in e;a&&(t&&0===e.button||!t)&&n5({event:e,handleId:x,nodeId:b,onConnect:C,isTarget:y,getState:v.getState,setState:v.setState,isValidConnection:n||v.getState().isValidConnection||n3}),t?c?.(e):u?.(e)};return p.default.createElement("div",{"data-handleid":x,"data-nodeid":b,"data-handlepos":t,"data-id":`${b}-${x}-${e}`,className:m(["react-flow__handle",`react-flow__handle-${t}`,"nodrag",N,d,{source:!y,target:y,connectable:r,connectablestart:a,connectableend:o,connecting:S,connectionindicator:r&&(a&&!j||o&&j)}]),onMouseDown:E,onTouchStart:E,onClick:w?t=>{let{onClickConnectStart:r,onClickConnectEnd:o,connectionClickStartHandle:i,connectionMode:s,isValidConnection:l}=v.getState();if(!b||!i&&!a)return;if(!i){r?.(t,{nodeId:b,handleId:x,handleType:e}),v.setState({connectionClickStartHandle:{nodeId:b,type:e,handleId:x}});return}let d=nc(t.target),c=n||l||n3,{connection:u,isValid:f}=n0({nodeId:b,id:x,type:e},s,i.nodeId,i.handleId||null,i.type,c,d);f&&C(u),o?.(t),v.setState({connectionClickStartHandle:null})}:void 0,ref:g,...f},l)});n8.displayName="Handle";var n6=(0,p.memo)(n8);let n9=({data:e,isConnectable:t,targetPosition:n=h.Top,sourcePosition:r=h.Bottom})=>p.default.createElement(p.default.Fragment,null,p.default.createElement(n6,{type:"target",position:n,isConnectable:t}),e?.label,p.default.createElement(n6,{type:"source",position:r,isConnectable:t}));n9.displayName="DefaultNode";var n7=(0,p.memo)(n9);let re=({data:e,isConnectable:t,sourcePosition:n=h.Bottom})=>p.default.createElement(p.default.Fragment,null,e?.label,p.default.createElement(n6,{type:"source",position:n,isConnectable:t}));re.displayName="InputNode";var rt=(0,p.memo)(re);let rn=({data:e,isConnectable:t,targetPosition:n=h.Top})=>p.default.createElement(p.default.Fragment,null,p.default.createElement(n6,{type:"target",position:n,isConnectable:t}),e?.label);rn.displayName="OutputNode";var rr=(0,p.memo)(rn);let ra=()=>null;ra.displayName="GroupNode";let ro=e=>({selectedNodes:e.getNodes().filter(e=>e.selected),selectedEdges:e.edges.filter(e=>e.selected).map(e=>({...e}))}),ri=e=>e.id;function rs(e,t){return k(e.selectedNodes.map(ri),t.selectedNodes.map(ri))&&k(e.selectedEdges.map(ri),t.selectedEdges.map(ri))}let rl=(0,p.memo)(({onSelectionChange:e})=>{let t=ne(),{selectedNodes:n,selectedEdges:r}=t7(ro,rs);return(0,p.useEffect)(()=>{let a={nodes:n,edges:r};e?.(a),t.getState().onSelectionChange.forEach(e=>e(a))},[n,r,e]),null});rl.displayName="SelectionListener";let rd=e=>!!e.onSelectionChange;function rc({onSelectionChange:e}){let t=t7(rd);return e||t?p.default.createElement(rl,{onSelectionChange:e}):null}let ru=e=>({setNodes:e.setNodes,setEdges:e.setEdges,setDefaultNodesAndEdges:e.setDefaultNodesAndEdges,setMinZoom:e.setMinZoom,setMaxZoom:e.setMaxZoom,setTranslateExtent:e.setTranslateExtent,setNodeExtent:e.setNodeExtent,reset:e.reset});function rf(e,t){(0,p.useEffect)(()=>{void 0!==e&&t(e)},[e])}function rh(e,t,n){(0,p.useEffect)(()=>{void 0!==t&&n({[e]:t})},[t])}let rp=({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,onConnect:a,onConnectStart:o,onConnectEnd:i,onClickConnectStart:s,onClickConnectEnd:l,nodesDraggable:d,nodesConnectable:c,nodesFocusable:u,edgesFocusable:f,edgesUpdatable:h,elevateNodesOnSelect:m,minZoom:g,maxZoom:x,nodeExtent:y,onNodesChange:v,onEdgesChange:b,elementsSelectable:w,connectionMode:N,snapGrid:j,snapToGrid:S,translateExtent:C,connectOnClick:E,defaultEdgeOptions:M,fitView:_,fitViewOptions:A,onNodesDelete:R,onEdgesDelete:P,onNodeDrag:O,onNodeDragStart:T,onNodeDragStop:D,onSelectionDrag:z,onSelectionDragStart:L,onSelectionDragStop:I,noPanClassName:$,nodeOrigin:H,rfId:F,autoPanOnConnect:B,autoPanOnNodeDrag:V,onError:q,connectionRadius:W,isValidConnection:K,nodeDragThreshold:G})=>{let{setNodes:X,setEdges:U,setDefaultNodesAndEdges:Y,setMinZoom:Z,setMaxZoom:Q,setTranslateExtent:J,setNodeExtent:ee,reset:et}=t7(ru,k),en=ne();return(0,p.useEffect)(()=>(Y(n,r?.map(e=>({...e,...M}))),()=>{et()}),[]),rh("defaultEdgeOptions",M,en.setState),rh("connectionMode",N,en.setState),rh("onConnect",a,en.setState),rh("onConnectStart",o,en.setState),rh("onConnectEnd",i,en.setState),rh("onClickConnectStart",s,en.setState),rh("onClickConnectEnd",l,en.setState),rh("nodesDraggable",d,en.setState),rh("nodesConnectable",c,en.setState),rh("nodesFocusable",u,en.setState),rh("edgesFocusable",f,en.setState),rh("edgesUpdatable",h,en.setState),rh("elementsSelectable",w,en.setState),rh("elevateNodesOnSelect",m,en.setState),rh("snapToGrid",S,en.setState),rh("snapGrid",j,en.setState),rh("onNodesChange",v,en.setState),rh("onEdgesChange",b,en.setState),rh("connectOnClick",E,en.setState),rh("fitViewOnInit",_,en.setState),rh("fitViewOnInitOptions",A,en.setState),rh("onNodesDelete",R,en.setState),rh("onEdgesDelete",P,en.setState),rh("onNodeDrag",O,en.setState),rh("onNodeDragStart",T,en.setState),rh("onNodeDragStop",D,en.setState),rh("onSelectionDrag",z,en.setState),rh("onSelectionDragStart",L,en.setState),rh("onSelectionDragStop",I,en.setState),rh("noPanClassName",$,en.setState),rh("nodeOrigin",H,en.setState),rh("rfId",F,en.setState),rh("autoPanOnConnect",B,en.setState),rh("autoPanOnNodeDrag",V,en.setState),rh("onError",q,en.setState),rh("connectionRadius",W,en.setState),rh("isValidConnection",K,en.setState),rh("nodeDragThreshold",G,en.setState),rf(e,X),rf(t,U),rf(g,Z),rf(x,Q),rf(C,J),rf(y,ee),null},rm={display:"none"},rg={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},rx="react-flow__node-desc",ry="react-flow__edge-desc",rv=e=>e.ariaLiveMessage;function rb({rfId:e}){let t=t7(rv);return p.default.createElement("div",{id:`react-flow__aria-live-${e}`,"aria-live":"assertive","aria-atomic":"true",style:rg},t)}function rw({rfId:e,disableKeyboardA11y:t}){return p.default.createElement(p.default.Fragment,null,p.default.createElement("div",{id:`${rx}-${e}`,style:rm},"Press enter or space to select a node.",!t&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "),p.default.createElement("div",{id:`${ry}-${e}`,style:rm},"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."),!t&&p.default.createElement(rb,{rfId:e}))}var rN=(e=null,t={actInsideInputWithModifier:!0})=>{let[n,r]=(0,p.useState)(!1),a=(0,p.useRef)(!1),o=(0,p.useRef)(new Set([])),[i,s]=(0,p.useMemo)(()=>{if(null!==e){let t=(Array.isArray(e)?e:[e]).filter(e=>"string"==typeof e).map(e=>e.split("+")),n=t.reduce((e,t)=>e.concat(...t),[]);return[t,n]}return[[],[]]},[e]);return(0,p.useEffect)(()=>{let n="undefined"!=typeof document?document:null,l=t?.target||n;if(null!==e){let e=e=>{if(a.current=e.ctrlKey||e.metaKey||e.shiftKey,(!a.current||a.current&&!t.actInsideInputWithModifier)&&ny(e))return!1;let n=rk(e.code,s);o.current.add(e[n]),rj(i,o.current,!1)&&(e.preventDefault(),r(!0))},n=e=>{if((!a.current||a.current&&!t.actInsideInputWithModifier)&&ny(e))return!1;let n=rk(e.code,s);rj(i,o.current,!0)?(r(!1),o.current.clear()):o.current.delete(e[n]),"Meta"===e.key&&o.current.clear(),a.current=!1},d=()=>{o.current.clear(),r(!1)};return l?.addEventListener("keydown",e),l?.addEventListener("keyup",n),window.addEventListener("blur",d),()=>{l?.removeEventListener("keydown",e),l?.removeEventListener("keyup",n),window.removeEventListener("blur",d)}}},[e,r]),n};function rj(e,t,n){return e.filter(e=>n||e.length===t.size).some(e=>e.every(e=>t.has(e)))}function rk(e,t){return t.includes(e)?"code":"key"}function rS(e,t,n){e.forEach(r=>{let a=r.parentNode||r.parentId;if(a&&!e.has(a))throw Error(`Parent node ${a} not found`);if(a||n?.[r.id]){let{x:a,y:o,z:i}=function e(t,n,r,a){let o=t.parentNode||t.parentId;if(!o)return r;let i=n.get(o),s=nW(i,a);return e(i,n,{x:(r.x??0)+s.x,y:(r.y??0)+s.y,z:(i[nm]?.z??0)>(r.z??0)?i[nm]?.z??0:r.z??0},a)}(r,e,{...r.position,z:r[nm]?.z??0},t);r.positionAbsolute={x:a,y:o},r[nm].z=i,n?.[r.id]&&(r[nm].isParent=!0)}})}function rC(e,t,n,r){let a=new Map,o={},i=1e3*!!r;return e.forEach(e=>{let n=(np(e.zIndex)?e.zIndex:0)+(e.selected?i:0),r=t.get(e.id),s={...e,positionAbsolute:{x:e.position.x,y:e.position.y}},l=e.parentNode||e.parentId;l&&(o[l]=!0),Object.defineProperty(s,nm,{enumerable:!1,value:{handleBounds:r?.type&&r?.type!==e.type?void 0:r?.[nm]?.handleBounds,z:n}}),a.set(e.id,s)}),rS(a,n,o),a}function rE(e,t={}){let{getNodes:n,width:r,height:a,minZoom:o,maxZoom:i,d3Zoom:s,d3Selection:l,fitViewOnInitDone:d,fitViewOnInit:c,nodeOrigin:u}=e(),f=t.initial&&!d&&c;if(s&&l&&(f||!t.initial)){let e=n().filter(e=>{let n=t.includeHiddenNodes?e.width&&e.height:!e.hidden;return t.nodes?.length?n&&t.nodes.some(t=>t.id===e.id):n}),d=e.every(e=>e.width&&e.height);if(e.length>0&&d){let{x:n,y:d,zoom:c}=nU(nK(e,u),r,a,t.minZoom??o,t.maxZoom??i,t.padding??.1),f=tq.translate(n,d).scale(c);return"number"==typeof t.duration&&t.duration>0?s.transform(nY(l,t.duration),f):s.transform(l,f),!0}}return!1}function rM({changedNodes:e,changedEdges:t,get:n,set:r}){let{nodeInternals:a,edges:o,onNodesChange:i,onEdgesChange:s,hasDefaultNodes:l,hasDefaultEdges:d}=n();e?.length&&(l&&r({nodeInternals:(e.forEach(e=>{let t=a.get(e.id);t&&a.set(t.id,{...t,[nm]:t[nm],selected:e.selected})}),new Map(a))}),i?.(e)),t?.length&&(d&&r({edges:o.map(e=>{let n=t.find(t=>t.id===e.id);return n&&(e.selected=n.selected),e})}),s?.(t))}let r_=()=>{},rA={zoomIn:r_,zoomOut:r_,zoomTo:r_,getZoom:()=>1,setViewport:r_,getViewport:()=>({x:0,y:0,zoom:1}),fitView:()=>!1,setCenter:r_,fitBounds:r_,project:e=>e,screenToFlowPosition:e=>e,flowToScreenPosition:e=>e,viewportInitialized:!1},rR=e=>({d3Zoom:e.d3Zoom,d3Selection:e.d3Selection});function rP(){let e=(()=>{let e=ne(),{d3Zoom:t,d3Selection:n}=t7(rR,k);return(0,p.useMemo)(()=>n&&t?{zoomIn:e=>t.scaleBy(nY(n,e?.duration),1.2),zoomOut:e=>t.scaleBy(nY(n,e?.duration),1/1.2),zoomTo:(e,r)=>t.scaleTo(nY(n,r?.duration),e),getZoom:()=>e.getState().transform[2],setViewport:(r,a)=>{let[o,i,s]=e.getState().transform,l=tq.translate(r.x??o,r.y??i).scale(r.zoom??s);t.transform(nY(n,a?.duration),l)},getViewport:()=>{let[t,n,r]=e.getState().transform;return{x:t,y:n,zoom:r}},fitView:t=>rE(e.getState,t),setCenter:(r,a,o)=>{let{width:i,height:s,maxZoom:l}=e.getState(),d=void 0!==o?.zoom?o.zoom:l,c=i/2-r*d,u=s/2-a*d,f=tq.translate(c,u).scale(d);t.transform(nY(n,o?.duration),f)},fitBounds:(r,a)=>{let{width:o,height:i,minZoom:s,maxZoom:l}=e.getState(),{x:d,y:c,zoom:u}=nU(r,o,i,s,l,a?.padding??.1),f=tq.translate(d,c).scale(u);t.transform(nY(n,a?.duration),f)},project:t=>{let{transform:n,snapToGrid:r,snapGrid:a}=e.getState();return console.warn("[DEPRECATED] `project` is deprecated. Instead use `screenToFlowPosition`. There is no need to subtract the react flow bounds anymore! https://reactflow.dev/api-reference/types/react-flow-instance#screen-to-flow-position"),nV(t,n,r,a)},screenToFlowPosition:t=>{let{transform:n,snapToGrid:r,snapGrid:a,domNode:o}=e.getState();if(!o)return t;let{x:i,y:s}=o.getBoundingClientRect();return nV({x:t.x-i,y:t.y-s},n,r,a)},flowToScreenPosition:t=>{let{transform:n,domNode:r}=e.getState();if(!r)return t;let{x:a,y:o}=r.getBoundingClientRect(),i=nq(t,n);return{x:i.x+a,y:i.y+o}},viewportInitialized:!0}:rA,[t,n])})(),t=ne(),n=(0,p.useCallback)(()=>t.getState().getNodes().map(e=>({...e})),[]),r=(0,p.useCallback)(e=>t.getState().nodeInternals.get(e),[]),a=(0,p.useCallback)(()=>{let{edges:e=[]}=t.getState();return e.map(e=>({...e}))},[]),o=(0,p.useCallback)(e=>{let{edges:n=[]}=t.getState();return n.find(t=>t.id===e)},[]),i=(0,p.useCallback)(e=>{let{getNodes:n,setNodes:r,hasDefaultNodes:a,onNodesChange:o}=t.getState(),i=n(),s="function"==typeof e?e(i):e;a?r(s):o&&o(0===s.length?i.map(e=>({type:"remove",id:e.id})):s.map(e=>({item:e,type:"reset"})))},[]),s=(0,p.useCallback)(e=>{let{edges:n=[],setEdges:r,hasDefaultEdges:a,onEdgesChange:o}=t.getState(),i="function"==typeof e?e(n):e;a?r(i):o&&o(0===i.length?n.map(e=>({type:"remove",id:e.id})):i.map(e=>({item:e,type:"reset"})))},[]),l=(0,p.useCallback)(e=>{let n=Array.isArray(e)?e:[e],{getNodes:r,setNodes:a,hasDefaultNodes:o,onNodesChange:i}=t.getState();o?a([...r(),...n]):i&&i(n.map(e=>({item:e,type:"add"})))},[]),d=(0,p.useCallback)(e=>{let n=Array.isArray(e)?e:[e],{edges:r=[],setEdges:a,hasDefaultEdges:o,onEdgesChange:i}=t.getState();o?a([...r,...n]):i&&i(n.map(e=>({item:e,type:"add"})))},[]),c=(0,p.useCallback)(()=>{let{getNodes:e,edges:n=[],transform:r}=t.getState(),[a,o,i]=r;return{nodes:e().map(e=>({...e})),edges:n.map(e=>({...e})),viewport:{x:a,y:o,zoom:i}}},[]),u=(0,p.useCallback)(({nodes:e,edges:n})=>{let{nodeInternals:r,getNodes:a,edges:o,hasDefaultNodes:i,hasDefaultEdges:s,onNodesDelete:l,onEdgesDelete:d,onNodesChange:c,onEdgesChange:u}=t.getState(),f=(e||[]).map(e=>e.id),h=(n||[]).map(e=>e.id),p=a().reduce((e,t)=>{let n=t.parentNode||t.parentId,r=!f.includes(t.id)&&n&&e.find(e=>e.id===n);return("boolean"!=typeof t.deletable||t.deletable)&&(f.includes(t.id)||r)&&e.push(t),e},[]),m=o.filter(e=>"boolean"!=typeof e.deletable||e.deletable),g=m.filter(e=>h.includes(e.id));if(p||g){let e=[...g,...nX(p,m)],n=e.reduce((e,t)=>(e.includes(t.id)||e.push(t.id),e),[]);(s||i)&&(s&&t.setState({edges:o.filter(e=>!n.includes(e.id))}),i&&(p.forEach(e=>{r.delete(e.id)}),t.setState({nodeInternals:new Map(r)}))),n.length>0&&(d?.(e),u&&u(n.map(e=>({id:e,type:"remove"})))),p.length>0&&(l?.(p),c&&c(p.map(e=>({id:e.id,type:"remove"}))))}},[]),f=(0,p.useCallback)(e=>{let n=np(e.width)&&np(e.height)&&np(e.x)&&np(e.y),r=n?null:t.getState().nodeInternals.get(e.id);return n||r?[n?e:nf(r),r,n]:[null,null,n]},[]),h=(0,p.useCallback)((e,n=!0,r)=>{let[a,o,i]=f(e);return a?(r||t.getState().getNodes()).filter(e=>{if(!i&&(e.id===o.id||!e.positionAbsolute))return!1;let t=nh(nf(e),a);return n&&t>0||t>=a.width*a.height}):[]},[]),m=(0,p.useCallback)((e,t,n=!0)=>{let[r]=f(e);if(!r)return!1;let a=nh(r,t);return n&&a>0||a>=r.width*r.height},[]);return(0,p.useMemo)(()=>({...e,getNodes:n,getNode:r,getEdges:a,getEdge:o,setNodes:i,setEdges:s,addNodes:l,addEdges:d,toObject:c,deleteElements:u,getIntersectingNodes:h,isNodeIntersecting:m}),[e,n,r,a,o,i,s,l,d,c,u,h,m])}let rO={actInsideInputWithModifier:!1},rT={position:"absolute",width:"100%",height:"100%",top:0,left:0},rD=e=>({x:e.x,y:e.y,zoom:e.k}),rz=(e,t)=>e.target.closest(`.${t}`),rL=(e,t)=>2===t&&Array.isArray(e)&&e.includes(2),rI=e=>{let t=e.ctrlKey&&nb()?10:1;return-e.deltaY*(1===e.deltaMode?.05:e.deltaMode?1:.002)*t},r$=e=>({d3Zoom:e.d3Zoom,d3Selection:e.d3Selection,d3ZoomHandler:e.d3ZoomHandler,userSelectionActive:e.userSelectionActive}),rH=({onMove:e,onMoveStart:t,onMoveEnd:n,onPaneContextMenu:r,zoomOnScroll:a=!0,zoomOnPinch:o=!0,panOnScroll:i=!1,panOnScrollSpeed:s=.5,panOnScrollMode:l=d.Free,zoomOnDoubleClick:c=!0,elementsSelectable:u,panOnDrag:f=!0,defaultViewport:h,translateExtent:m,minZoom:g,maxZoom:x,zoomActivationKeyCode:y,preventScrolling:v=!0,children:b,noWheelClassName:w,noPanClassName:N})=>{let j,S=(0,p.useRef)(),E=ne(),M=(0,p.useRef)(!1),_=(0,p.useRef)(!1),A=(0,p.useRef)(null),R=(0,p.useRef)({x:0,y:0,zoom:0}),{d3Zoom:P,d3Selection:O,d3ZoomHandler:T,userSelectionActive:D}=t7(r$,k),z=rN(y),L=(0,p.useRef)(0),I=(0,p.useRef)(!1),$=(0,p.useRef)();return j=ne(),(0,p.useEffect)(()=>{let e,t=()=>{if(!A.current)return;let e=no(A.current);(0===e.height||0===e.width)&&j.getState().onError?.("004","The React Flow parent container needs a width and a height to render the graph."),j.setState({width:e.width||500,height:e.height||500})};return t(),window.addEventListener("resize",t),A.current&&(e=new ResizeObserver(()=>t())).observe(A.current),()=>{window.removeEventListener("resize",t),e&&A.current&&e.unobserve(A.current)}},[]),(0,p.useEffect)(()=>{if(A.current){let e=A.current.getBoundingClientRect(),t=(function(){var e,t,n,r=tG,a=tX,o=tQ,i=tY,s=tZ,l=[0,1/0],d=[[-1/0,-1/0],[1/0,1/0]],c=250,u=ek,f=C("start","zoom","end"),h=0,p=10;function m(e){e.property("__zoom",tU).on("wheel.zoom",N,{passive:!1}).on("mousedown.zoom",j).on("dblclick.zoom",k).filter(s).on("touchstart.zoom",S).on("touchmove.zoom",E).on("touchend.zoom touchcancel.zoom",M).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function g(e,t){return(t=Math.max(l[0],Math.min(l[1],t)))===e.k?e:new tV(t,e.x,e.y)}function x(e,t,n){var r=t[0]-n[0]*e.k,a=t[1]-n[1]*e.k;return r===e.x&&a===e.y?e:new tV(e.k,r,a)}function y(e){return[(+e[0][0]+ +e[1][0])/2,(+e[0][1]+ +e[1][1])/2]}function v(e,t,n,r){e.on("start.zoom",function(){b(this,arguments).event(r).start()}).on("interrupt.zoom end.zoom",function(){b(this,arguments).event(r).end()}).tween("zoom",function(){var e=arguments,o=b(this,e).event(r),i=a.apply(this,e),s=null==n?y(i):"function"==typeof n?n.apply(this,e):n,l=Math.max(i[1][0]-i[0][0],i[1][1]-i[0][1]),d=this.__zoom,c="function"==typeof t?t.apply(this,e):t,f=u(d.invert(s).concat(l/d.k),c.invert(s).concat(l/c.k));return function(e){if(1===e)e=c;else{var t=f(e),n=l/t[2];e=new tV(n,s[0]-t[0]*n,s[1]-t[1]*n)}o.zoom(null,e)}})}function b(e,t,n){return!n&&e.__zooming||new w(e,t)}function w(e,t){this.that=e,this.args=t,this.active=0,this.sourceEvent=null,this.extent=a.apply(e,t),this.taps=0}function N(e,...t){if(r.apply(this,arguments)){var n=b(this,t).event(e),a=this.__zoom,s=Math.max(l[0],Math.min(l[1],a.k*Math.pow(2,i.apply(this,arguments)))),c=eS(e);if(n.wheel)(n.mouse[0][0]!==c[0]||n.mouse[0][1]!==c[1])&&(n.mouse[1]=a.invert(n.mouse[0]=c)),clearTimeout(n.wheel);else{if(a.k===s)return;n.mouse=[c,a.invert(c)],eY(this),n.start()}tK(e),n.wheel=setTimeout(function(){n.wheel=null,n.end()},150),n.zoom("mouse",o(x(g(a,s),n.mouse[0],n.mouse[1]),n.extent,d))}}function j(e,...t){if(!n&&r.apply(this,arguments)){var a=e.currentTarget,i=b(this,t,!0).event(e),s=eg(e.view).on("mousemove.zoom",function(e){if(tK(e),!i.moved){var t=e.clientX-c,n=e.clientY-u;i.moved=t*t+n*n>h}i.event(e).zoom("mouse",o(x(i.that.__zoom,i.mouse[0]=eS(e,a),i.mouse[1]),i.extent,d))},!0).on("mouseup.zoom",function(e){s.on("mousemove.zoom mouseup.zoom",null),eN(e.view,i.moved),tK(e),i.event(e).end()},!0),l=eS(e,a),c=e.clientX,u=e.clientY;ew(e.view),tW(e),i.mouse=[l,this.__zoom.invert(l)],eY(this),i.start()}}function k(e,...t){if(r.apply(this,arguments)){var n=this.__zoom,i=eS(e.changedTouches?e.changedTouches[0]:e,this),s=n.invert(i),l=n.k*(e.shiftKey?.5:2),u=o(x(g(n,l),i,s),a.apply(this,t),d);tK(e),c>0?eg(this).transition().duration(c).call(v,u,i,e):eg(this).call(m.transform,u,i,e)}}function S(n,...a){if(r.apply(this,arguments)){var o,i,s,l,d=n.touches,c=d.length,u=b(this,a,n.changedTouches.length===c).event(n);for(tW(n),i=0;i<c;++i)l=[l=eS(s=d[i],this),this.__zoom.invert(l),s.identifier],u.touch0?u.touch1||u.touch0[2]===l[2]||(u.touch1=l,u.taps=0):(u.touch0=l,o=!0,u.taps=1+!!e);e&&(e=clearTimeout(e)),o&&(u.taps<2&&(t=l[0],e=setTimeout(function(){e=null},500)),eY(this),u.start())}}function E(e,...t){if(this.__zooming){var n,r,a,i,s=b(this,t).event(e),l=e.changedTouches,c=l.length;for(tK(e),n=0;n<c;++n)a=eS(r=l[n],this),s.touch0&&s.touch0[2]===r.identifier?s.touch0[0]=a:s.touch1&&s.touch1[2]===r.identifier&&(s.touch1[0]=a);if(r=s.that.__zoom,s.touch1){var u=s.touch0[0],f=s.touch0[1],h=s.touch1[0],p=s.touch1[1],m=(m=h[0]-u[0])*m+(m=h[1]-u[1])*m,y=(y=p[0]-f[0])*y+(y=p[1]-f[1])*y;r=g(r,Math.sqrt(m/y)),a=[(u[0]+h[0])/2,(u[1]+h[1])/2],i=[(f[0]+p[0])/2,(f[1]+p[1])/2]}else{if(!s.touch0)return;a=s.touch0[0],i=s.touch0[1]}s.zoom("touch",o(x(r,a,i),s.extent,d))}}function M(e,...r){if(this.__zooming){var a,o,i=b(this,r).event(e),s=e.changedTouches,l=s.length;for(tW(e),n&&clearTimeout(n),n=setTimeout(function(){n=null},500),a=0;a<l;++a)o=s[a],i.touch0&&i.touch0[2]===o.identifier?delete i.touch0:i.touch1&&i.touch1[2]===o.identifier&&delete i.touch1;if(i.touch1&&!i.touch0&&(i.touch0=i.touch1,delete i.touch1),i.touch0)i.touch0[1]=this.__zoom.invert(i.touch0[0]);else if(i.end(),2===i.taps&&(o=eS(o,this),Math.hypot(t[0]-o[0],t[1]-o[1])<p)){var d=eg(this).on("dblclick.zoom");d&&d.apply(this,arguments)}}}return m.transform=function(e,t,n,r){var a=e.selection?e.selection():e;a.property("__zoom",tU),e!==a?v(e,t,n,r):a.interrupt().each(function(){b(this,arguments).event(r).start().zoom(null,"function"==typeof t?t.apply(this,arguments):t).end()})},m.scaleBy=function(e,t,n,r){m.scaleTo(e,function(){var e=this.__zoom.k,n="function"==typeof t?t.apply(this,arguments):t;return e*n},n,r)},m.scaleTo=function(e,t,n,r){m.transform(e,function(){var e=a.apply(this,arguments),r=this.__zoom,i=null==n?y(e):"function"==typeof n?n.apply(this,arguments):n,s=r.invert(i),l="function"==typeof t?t.apply(this,arguments):t;return o(x(g(r,l),i,s),e,d)},n,r)},m.translateBy=function(e,t,n,r){m.transform(e,function(){return o(this.__zoom.translate("function"==typeof t?t.apply(this,arguments):t,"function"==typeof n?n.apply(this,arguments):n),a.apply(this,arguments),d)},null,r)},m.translateTo=function(e,t,n,r,i){m.transform(e,function(){var e=a.apply(this,arguments),i=this.__zoom,s=null==r?y(e):"function"==typeof r?r.apply(this,arguments):r;return o(tq.translate(s[0],s[1]).scale(i.k).translate("function"==typeof t?-t.apply(this,arguments):-t,"function"==typeof n?-n.apply(this,arguments):-n),e,d)},r,i)},w.prototype={event:function(e){return e&&(this.sourceEvent=e),this},start:function(){return 1==++this.active&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(e,t){return this.mouse&&"mouse"!==e&&(this.mouse[1]=t.invert(this.mouse[0])),this.touch0&&"touch"!==e&&(this.touch0[1]=t.invert(this.touch0[0])),this.touch1&&"touch"!==e&&(this.touch1[1]=t.invert(this.touch1[0])),this.that.__zoom=t,this.emit("zoom"),this},end:function(){return 0==--this.active&&(delete this.that.__zooming,this.emit("end")),this},emit:function(e){var t=eg(this.that).datum();f.call(e,this.that,new tB(e,{sourceEvent:this.sourceEvent,target:m,type:e,transform:this.that.__zoom,dispatch:f}),t)}},m.wheelDelta=function(e){return arguments.length?(i="function"==typeof e?e:tF(+e),m):i},m.filter=function(e){return arguments.length?(r="function"==typeof e?e:tF(!!e),m):r},m.touchable=function(e){return arguments.length?(s="function"==typeof e?e:tF(!!e),m):s},m.extent=function(e){return arguments.length?(a="function"==typeof e?e:tF([[+e[0][0],+e[0][1]],[+e[1][0],+e[1][1]]]),m):a},m.scaleExtent=function(e){return arguments.length?(l[0]=+e[0],l[1]=+e[1],m):[l[0],l[1]]},m.translateExtent=function(e){return arguments.length?(d[0][0]=+e[0][0],d[1][0]=+e[1][0],d[0][1]=+e[0][1],d[1][1]=+e[1][1],m):[[d[0][0],d[0][1]],[d[1][0],d[1][1]]]},m.constrain=function(e){return arguments.length?(o=e,m):o},m.duration=function(e){return arguments.length?(c=+e,m):c},m.interpolate=function(e){return arguments.length?(u=e,m):u},m.on=function(){var e=f.on.apply(f,arguments);return e===f?m:e},m.clickDistance=function(e){return arguments.length?(h=(e*=1)*e,m):Math.sqrt(h)},m.tapDistance=function(e){return arguments.length?(p=+e,m):p},m})().scaleExtent([g,x]).translateExtent(m),n=eg(A.current).call(t),r=tq.translate(h.x,h.y).scale(ni(h.zoom,g,x)),a=[[0,0],[e.width,e.height]],o=t.constrain()(r,a,m);t.transform(n,o),t.wheelDelta(rI),E.setState({d3Zoom:t,d3Selection:n,d3ZoomHandler:n.on("wheel.zoom"),transform:[o.x,o.y,o.k],domNode:A.current.closest(".react-flow")})}},[]),(0,p.useEffect)(()=>{O&&P&&(!i||z||D?void 0!==T&&O.on("wheel.zoom",function(e,t){if(!v&&"wheel"===e.type&&!e.ctrlKey||rz(e,w))return null;e.preventDefault(),T.call(this,e,t)},{passive:!1}):O.on("wheel.zoom",r=>{if(rz(r,w))return!1;r.preventDefault(),r.stopImmediatePropagation();let a=O.property("__zoom").k||1;if(r.ctrlKey&&o){let e=eS(r),t=a*Math.pow(2,rI(r));P.scaleTo(O,t,e,r);return}let i=1===r.deltaMode?20:1,c=l===d.Vertical?0:r.deltaX*i,u=l===d.Horizontal?0:r.deltaY*i;!nb()&&r.shiftKey&&l!==d.Vertical&&(c=r.deltaY*i,u=0),P.translateBy(O,-(c/a)*s,-(u/a)*s,{internal:!0});let f=rD(O.property("__zoom")),{onViewportChangeStart:h,onViewportChange:p,onViewportChangeEnd:m}=E.getState();clearTimeout($.current),I.current||(I.current=!0,t?.(r,f),h?.(f)),I.current&&(e?.(r,f),p?.(f),$.current=setTimeout(()=>{n?.(r,f),m?.(f),I.current=!1},150))},{passive:!1}))},[D,i,l,O,P,T,z,o,v,w,t,e,n]),(0,p.useEffect)(()=>{P&&P.on("start",e=>{if(!e.sourceEvent||e.sourceEvent.internal)return null;L.current=e.sourceEvent?.button;let{onViewportChangeStart:n}=E.getState(),r=rD(e.transform);M.current=!0,R.current=r,e.sourceEvent?.type==="mousedown"&&E.setState({paneDragging:!0}),n?.(r),t?.(e.sourceEvent,r)})},[P,t]),(0,p.useEffect)(()=>{P&&(D&&!M.current?P.on("zoom",null):D||P.on("zoom",t=>{let{onViewportChange:n}=E.getState();if(E.setState({transform:[t.transform.x,t.transform.y,t.transform.k]}),_.current=!!(r&&rL(f,L.current??0)),(e||n)&&!t.sourceEvent?.internal){let r=rD(t.transform);n?.(r),e?.(t.sourceEvent,r)}}))},[D,P,e,f,r]),(0,p.useEffect)(()=>{P&&P.on("end",e=>{let t,a;if(!e.sourceEvent||e.sourceEvent.internal)return null;let{onViewportChangeEnd:o}=E.getState();if(M.current=!1,E.setState({paneDragging:!1}),r&&rL(f,L.current??0)&&!_.current&&r(e.sourceEvent),_.current=!1,(n||o)&&(t=R.current,a=e.transform,t.x!==a.x||t.y!==a.y||t.zoom!==a.k)){let t=rD(e.transform);R.current=t,clearTimeout(S.current),S.current=setTimeout(()=>{o?.(t),n?.(e.sourceEvent,t)},150*!!i)}})},[P,i,f,n,r]),(0,p.useEffect)(()=>{P&&P.filter(e=>{let t=z||a,n=o&&e.ctrlKey;if((!0===f||Array.isArray(f)&&f.includes(1))&&1===e.button&&"mousedown"===e.type&&(rz(e,"react-flow__node")||rz(e,"react-flow__edge")))return!0;if(!f&&!t&&!i&&!c&&!o||D||!c&&"dblclick"===e.type||rz(e,w)&&"wheel"===e.type||rz(e,N)&&("wheel"!==e.type||i&&"wheel"===e.type&&!z)||!o&&e.ctrlKey&&"wheel"===e.type||!t&&!i&&!n&&"wheel"===e.type||!f&&("mousedown"===e.type||"touchstart"===e.type)||Array.isArray(f)&&!f.includes(e.button)&&"mousedown"===e.type)return!1;let r=Array.isArray(f)&&f.includes(e.button)||!e.button||e.button<=1;return(!e.ctrlKey||"wheel"===e.type)&&r})},[D,P,a,o,i,c,f,u,z]),p.default.createElement("div",{className:"react-flow__renderer",ref:A,style:rT},b)},rF=e=>({userSelectionActive:e.userSelectionActive,userSelectionRect:e.userSelectionRect});function rB(){let{userSelectionActive:e,userSelectionRect:t}=t7(rF,k);return e&&t?p.default.createElement("div",{className:"react-flow__selection react-flow__container",style:{width:t.width,height:t.height,transform:`translate(${t.x}px, ${t.y}px)`}}):null}function rV(e,t){let n=t.parentNode||t.parentId,r=e.find(e=>e.id===n);if(r){let e=t.position.x+t.width-r.width,n=t.position.y+t.height-r.height;if(e>0||n>0||t.position.x<0||t.position.y<0){if(r.style={...r.style},r.style.width=r.style.width??r.width,r.style.height=r.style.height??r.height,e>0&&(r.style.width+=e),n>0&&(r.style.height+=n),t.position.x<0){let e=Math.abs(t.position.x);r.position.x=r.position.x-e,r.style.width+=e,t.position.x=0}if(t.position.y<0){let e=Math.abs(t.position.y);r.position.y=r.position.y-e,r.style.height+=e,t.position.y=0}r.width=r.style.width,r.height=r.style.height}}}function rq(e,t){if(e.some(e=>"reset"===e.type))return e.filter(e=>"reset"===e.type).map(e=>e.item);let n=e.filter(e=>"add"===e.type).map(e=>e.item);return t.reduce((t,n)=>{let r=e.filter(e=>e.id===n.id);if(0===r.length)return t.push(n),t;let a={...n};for(let e of r)if(e)switch(e.type){case"select":a.selected=e.selected;break;case"position":void 0!==e.position&&(a.position=e.position),void 0!==e.positionAbsolute&&(a.positionAbsolute=e.positionAbsolute),void 0!==e.dragging&&(a.dragging=e.dragging),a.expandParent&&rV(t,a);break;case"dimensions":void 0!==e.dimensions&&(a.width=e.dimensions.width,a.height=e.dimensions.height),void 0!==e.updateStyle&&(a.style={...a.style||{},...e.dimensions}),"boolean"==typeof e.resizing&&(a.resizing=e.resizing),a.expandParent&&rV(t,a);break;case"remove":return t}return t.push(a),t},n)}function rW(e,t){return rq(e,t)}let rK=(e,t)=>({id:e,type:"select",selected:t});function rG(e,t){return e.reduce((e,n)=>{let r=t.includes(n.id);return!n.selected&&r?(n.selected=!0,e.push(rK(n.id,!0))):n.selected&&!r&&(n.selected=!1,e.push(rK(n.id,!1))),e},[])}let rX=(e,t)=>n=>{n.target===t.current&&e?.(n)},rU=e=>({userSelectionActive:e.userSelectionActive,elementsSelectable:e.elementsSelectable,dragging:e.paneDragging}),rY=(0,p.memo)(({isSelecting:e,selectionMode:t=c.Full,panOnDrag:n,onSelectionStart:r,onSelectionEnd:a,onPaneClick:o,onPaneContextMenu:i,onPaneScroll:s,onPaneMouseEnter:l,onPaneMouseMove:d,onPaneMouseLeave:u,children:f})=>{let h=(0,p.useRef)(null),g=ne(),x=(0,p.useRef)(0),y=(0,p.useRef)(0),v=(0,p.useRef)(),{userSelectionActive:b,elementsSelectable:w,dragging:N}=t7(rU,k),j=()=>{g.setState({userSelectionActive:!1,userSelectionRect:null}),x.current=0,y.current=0},S=e=>{o?.(e),g.getState().resetSelectedElements(),g.setState({nodesSelectionActive:!1})},C=w&&(e||b);return p.default.createElement("div",{className:m(["react-flow__pane",{dragging:N,selection:e}]),onClick:C?void 0:rX(S,h),onContextMenu:rX(e=>{Array.isArray(n)&&n?.includes(2)?e.preventDefault():i?.(e)},h),onWheel:rX(s?e=>s(e):void 0,h),onMouseEnter:C?void 0:l,onMouseDown:C?t=>{let{resetSelectedElements:n,domNode:a}=g.getState();if(v.current=a?.getBoundingClientRect(),!w||!e||0!==t.button||t.target!==h.current||!v.current)return;let{x:o,y:i}=nv(t,v.current);n(),g.setState({userSelectionRect:{width:0,height:0,startX:o,startY:i,x:o,y:i}}),r?.(t)}:void 0,onMouseMove:C?n=>{let{userSelectionRect:r,nodeInternals:a,edges:o,transform:i,onNodesChange:s,onEdgesChange:l,nodeOrigin:d,getNodes:u}=g.getState();if(!e||!v.current||!r)return;g.setState({userSelectionActive:!0,nodesSelectionActive:!1});let f=nv(n,v.current),h=r.startX??0,p=r.startY??0,m={...r,x:f.x<h?f.x:h,y:f.y<p?f.y:p,width:Math.abs(f.x-h),height:Math.abs(f.y-p)},b=u(),w=nG(a,m,i,t===c.Partial,!0,d),N=nX(w,o).map(e=>e.id),j=w.map(e=>e.id);if(x.current!==j.length){x.current=j.length;let e=rG(b,j);e.length&&s?.(e)}if(y.current!==N.length){y.current=N.length;let e=rG(o,N);e.length&&l?.(e)}g.setState({userSelectionRect:m})}:d,onMouseUp:C?e=>{if(0!==e.button)return;let{userSelectionRect:t}=g.getState();!b&&t&&e.target===h.current&&S?.(e),g.setState({nodesSelectionActive:x.current>0}),j(),a?.(e)}:void 0,onMouseLeave:C?e=>{b&&(g.setState({nodesSelectionActive:x.current>0}),a?.(e)),j()}:u,ref:h,style:rT},f,p.default.createElement(rB,null))});function rZ(e,t,n){let r=e;do{if(r?.matches(t))return!0;if(r===n.current)break;r=r.parentElement}while(r)return!1}function rQ(e,t,n,r,a=[0,0],o){var i;let s=(i=e.extent||r)&&"parent"!==i?[i[0],[i[1][0]-(e.width||0),i[1][1]-(e.height||0)]]:i,l=s,d=e.parentNode||e.parentId;if("parent"!==e.extent||e.expandParent){if(e.extent&&d&&"parent"!==e.extent){let{x:t,y:r}=nW(n.get(d),a).positionAbsolute;l=[[e.extent[0][0]+t,e.extent[0][1]+r],[e.extent[1][0]+t,e.extent[1][1]+r]]}}else if(d&&e.width&&e.height){let t=n.get(d),{x:r,y:o}=nW(t,a).positionAbsolute;l=t&&np(r)&&np(o)&&np(t.width)&&np(t.height)?[[r+e.width*a[0],o+e.height*a[1]],[r+t.width-e.width+e.width*a[0],o+t.height-e.height+e.height*a[1]]]:l}else o?.("005","Only child nodes can use a parent extent."),l=s;let c={x:0,y:0};d&&(c=nW(n.get(d),a).positionAbsolute);let u=l&&"parent"!==l?ns(t,l):t;return{position:{x:u.x-c.x,y:u.y-c.y},positionAbsolute:u}}function rJ({nodeId:e,dragItems:t,nodeInternals:n}){let r=t.map(e=>({...n.get(e.id),position:e.position,positionAbsolute:e.positionAbsolute}));return[e?r.find(t=>t.id===e):r[0],r]}rY.displayName="Pane";let r0=(e,t,n,r)=>{let a=t.querySelectorAll(e);if(!a||!a.length)return null;let o=Array.from(a),i=t.getBoundingClientRect(),s={x:i.width*r[0],y:i.height*r[1]};return o.map(e=>{let t=e.getBoundingClientRect();return{id:e.getAttribute("data-handleid"),position:e.getAttribute("data-handlepos"),x:(t.left-i.left-s.x)/n,y:(t.top-i.top-s.y)/n,...no(e)}})};function r1(e,t,n){return void 0===n?n:r=>{let a=t().nodeInternals.get(e);a&&n(r,{...a})}}function r2({id:e,store:t,unselect:n=!1,nodeRef:r}){let a,{addSelectedNodes:o,unselectNodesAndEdges:i,multiSelectionActive:s,nodeInternals:l,onError:d}=t.getState(),c=l.get(e);c?(t.setState({nodesSelectionActive:!1}),c.selected?(n||c.selected&&s)&&(i({nodes:[c],edges:[]}),requestAnimationFrame(()=>r?.current?.blur())):o([e])):d?.("012",(a=e,`Node with id "${a}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`))}function r5(e){return(t,n,r)=>e?.(t,r)}function r3({nodeRef:e,disabled:t=!1,noDragClassName:n,handleSelector:r,nodeId:a,isSelectable:o,selectNodesOnDrag:i}){let s,l=ne(),[d,c]=(0,p.useState)(!1),u=(0,p.useRef)([]),f=(0,p.useRef)({x:null,y:null}),h=(0,p.useRef)(0),m=(0,p.useRef)(null),g=(0,p.useRef)({x:0,y:0}),x=(0,p.useRef)(null),y=(0,p.useRef)(!1),v=(0,p.useRef)(!1),b=(0,p.useRef)(!1),w=(s=ne(),(0,p.useCallback)(({sourceEvent:e})=>{let{transform:t,snapGrid:n,snapToGrid:r}=s.getState(),a=e.touches?e.touches[0].clientX:e.clientX,o=e.touches?e.touches[0].clientY:e.clientY,i={x:(a-t[0])/t[2],y:(o-t[1])/t[2]};return{xSnapped:r?n[0]*Math.round(i.x/n[0]):i.x,ySnapped:r?n[1]*Math.round(i.y/n[1]):i.y,...i}},[]));return(0,p.useEffect)(()=>{if(e?.current){let s=eg(e.current),d=({x:e,y:t})=>{let{nodeInternals:n,onNodeDrag:r,onSelectionDrag:o,updateNodePositions:i,nodeExtent:s,snapGrid:d,snapToGrid:h,nodeOrigin:p,onError:m}=l.getState();f.current={x:e,y:t};let g=!1,y={x:0,y:0,x2:0,y2:0};if(u.current.length>1&&s&&(y=nu(nK(u.current,p))),u.current=u.current.map(r=>{let a={x:e-r.distance.x,y:t-r.distance.y};h&&(a.x=d[0]*Math.round(a.x/d[0]),a.y=d[1]*Math.round(a.y/d[1]));let o=[[s[0][0],s[0][1]],[s[1][0],s[1][1]]];u.current.length>1&&s&&!r.extent&&(o[0][0]=r.positionAbsolute.x-y.x+s[0][0],o[1][0]=r.positionAbsolute.x+(r.width??0)-y.x2+s[1][0],o[0][1]=r.positionAbsolute.y-y.y+s[0][1],o[1][1]=r.positionAbsolute.y+(r.height??0)-y.y2+s[1][1]);let i=rQ(r,a,n,o,p,m);return g=g||r.position.x!==i.position.x||r.position.y!==i.position.y,r.position=i.position,r.positionAbsolute=i.positionAbsolute,r}),!g)return;i(u.current,!0,!0),c(!0);let v=a?r:r5(o);if(v&&x.current){let[e,t]=rJ({nodeId:a,dragItems:u.current,nodeInternals:n});v(x.current,e,t)}},p=()=>{if(!m.current)return;let[e,t]=nd(g.current,m.current);if(0!==e||0!==t){let{transform:n,panBy:r}=l.getState();f.current.x=(f.current.x??0)-e/n[2],f.current.y=(f.current.y??0)-t/n[2],r({x:e,y:t})&&d(f.current)}h.current=requestAnimationFrame(p)},N=t=>{let{nodeInternals:n,multiSelectionActive:r,nodesDraggable:s,unselectNodesAndEdges:d,onNodeDragStart:c,onSelectionDragStart:h}=l.getState();v.current=!0;let p=a?c:r5(h);i&&o||r||!a||n.get(a)?.selected||d(),a&&o&&i&&r2({id:a,store:l,nodeRef:e});let m=w(t);if(f.current=m,u.current=Array.from(n.values()).filter(e=>(e.selected||e.id===a)&&(!e.parentNode||e.parentId||!function e(t,n){let r=t.parentNode||t.parentId;if(!r)return!1;let a=n.get(r);return!!a&&(!!a.selected||e(a,n))}(e,n))&&(e.draggable||s&&void 0===e.draggable)).map(e=>({id:e.id,position:e.position||{x:0,y:0},positionAbsolute:e.positionAbsolute||{x:0,y:0},distance:{x:m.x-(e.positionAbsolute?.x??0),y:m.y-(e.positionAbsolute?.y??0)},delta:{x:0,y:0},extent:e.extent,parentNode:e.parentNode||e.parentId,parentId:e.parentNode||e.parentId,width:e.width,height:e.height,expandParent:e.expandParent})),p&&u.current){let[e,r]=rJ({nodeId:a,dragItems:u.current,nodeInternals:n});p(t.sourceEvent,e,r)}};if(t)s.on(".drag",null);else{let t=(function(){var e,t,n,r,a=t1,o=t2,i=t5,s=t3,l={},d=C("start","drag","end"),c=0,u=0;function f(e){e.on("mousedown.drag",h).filter(s).on("touchstart.drag",g).on("touchmove.drag",x,ex).on("touchend.drag touchcancel.drag",y).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function h(i,s){if(!r&&a.call(this,i,s)){var l=v(this,o.call(this,i,s),i,s,"mouse");l&&(eg(i.view).on("mousemove.drag",p,ey).on("mouseup.drag",m,ey),ew(i.view),ev(i),n=!1,e=i.clientX,t=i.clientY,l("start",i))}}function p(r){if(eb(r),!n){var a=r.clientX-e,o=r.clientY-t;n=a*a+o*o>u}l.mouse("drag",r)}function m(e){eg(e.view).on("mousemove.drag mouseup.drag",null),eN(e.view,n),eb(e),l.mouse("end",e)}function g(e,t){if(a.call(this,e,t)){var n,r,i=e.changedTouches,s=o.call(this,e,t),l=i.length;for(n=0;n<l;++n)(r=v(this,s,e,t,i[n].identifier,i[n]))&&(ev(e),r("start",e,i[n]))}}function x(e){var t,n,r=e.changedTouches,a=r.length;for(t=0;t<a;++t)(n=l[r[t].identifier])&&(eb(e),n("drag",e,r[t]))}function y(e){var t,n,a=e.changedTouches,o=a.length;for(r&&clearTimeout(r),r=setTimeout(function(){r=null},500),t=0;t<o;++t)(n=l[a[t].identifier])&&(ev(e),n("end",e,a[t]))}function v(e,t,n,r,a,o){var s,u,h,p=d.copy(),m=eS(o||n,t);if(null!=(h=i.call(e,new t0("beforestart",{sourceEvent:n,target:f,identifier:a,active:c,x:m[0],y:m[1],dx:0,dy:0,dispatch:p}),r)))return s=h.x-m[0]||0,u=h.y-m[1]||0,function n(o,i,d){var g,x=m;switch(o){case"start":l[a]=n,g=c++;break;case"end":delete l[a],--c;case"drag":m=eS(d||i,t),g=c}p.call(o,e,new t0(o,{sourceEvent:i,subject:h,target:f,identifier:a,active:g,x:m[0]+s,y:m[1]+u,dx:m[0]-x[0],dy:m[1]-x[1],dispatch:p}),r)}}return f.filter=function(e){return arguments.length?(a="function"==typeof e?e:tJ(!!e),f):a},f.container=function(e){return arguments.length?(o="function"==typeof e?e:tJ(e),f):o},f.subject=function(e){return arguments.length?(i="function"==typeof e?e:tJ(e),f):i},f.touchable=function(e){return arguments.length?(s="function"==typeof e?e:tJ(!!e),f):s},f.on=function(){var e=d.on.apply(d,arguments);return e===d?f:e},f.clickDistance=function(e){return arguments.length?(u=(e*=1)*e,f):Math.sqrt(u)},f})().on("start",e=>{let{domNode:t,nodeDragThreshold:n}=l.getState();0===n&&N(e),b.current=!1,f.current=w(e),m.current=t?.getBoundingClientRect()||null,g.current=nv(e.sourceEvent,m.current)}).on("drag",e=>{let t=w(e),{autoPanOnNodeDrag:n,nodeDragThreshold:r}=l.getState();if("touchmove"===e.sourceEvent.type&&e.sourceEvent.touches.length>1&&(b.current=!0),!b.current){if(!y.current&&v.current&&n&&(y.current=!0,p()),!v.current){let n=t.xSnapped-(f?.current?.x??0),a=t.ySnapped-(f?.current?.y??0);Math.sqrt(n*n+a*a)>r&&N(e)}(f.current.x!==t.xSnapped||f.current.y!==t.ySnapped)&&u.current&&v.current&&(x.current=e.sourceEvent,g.current=nv(e.sourceEvent,m.current),d(t))}}).on("end",e=>{if(v.current&&!b.current&&(c(!1),y.current=!1,v.current=!1,cancelAnimationFrame(h.current),u.current)){let{updateNodePositions:t,nodeInternals:n,onNodeDragStop:r,onSelectionDragStop:o}=l.getState(),i=a?r:r5(o);if(t(u.current,!1,!1),i){let[t,r]=rJ({nodeId:a,dragItems:u.current,nodeInternals:n});i(e.sourceEvent,t,r)}}}).filter(t=>{let a=t.target;return!t.button&&(!n||!rZ(a,`.${n}`,e))&&(!r||rZ(a,r,e))});return s.call(t),()=>{s.on(".drag",null)}}}},[e,t,n,r,o,l,a,i,w]),d}function r4(){let e=ne();return(0,p.useCallback)(t=>{let{nodeInternals:n,nodeExtent:r,updateNodePositions:a,getNodes:o,snapToGrid:i,snapGrid:s,onError:l,nodesDraggable:d}=e.getState(),c=o().filter(e=>e.selected&&(e.draggable||d&&void 0===e.draggable)),u=i?s[0]:5,f=i?s[1]:5,h=t.isShiftPressed?4:1,p=t.x*u*h,m=t.y*f*h;a(c.map(e=>{if(e.positionAbsolute){let t={x:e.positionAbsolute.x+p,y:e.positionAbsolute.y+m};i&&(t.x=s[0]*Math.round(t.x/s[0]),t.y=s[1]*Math.round(t.y/s[1]));let{positionAbsolute:a,position:o}=rQ(e,t,n,r,void 0,l);e.position=o,e.positionAbsolute=a}return e}),!0,!1)},[])}let r8={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};var r6=e=>{let t=({id:t,type:n,data:r,xPos:a,yPos:o,xPosOrigin:i,yPosOrigin:s,selected:l,onClick:d,onMouseEnter:c,onMouseMove:u,onMouseLeave:f,onContextMenu:h,onDoubleClick:g,style:x,className:y,isDraggable:v,isSelectable:b,isConnectable:w,isFocusable:N,selectNodesOnDrag:j,sourcePosition:k,targetPosition:S,hidden:C,resizeObserver:E,dragHandle:M,zIndex:_,isParent:A,noDragClassName:R,noPanClassName:P,initialized:O,disableKeyboardA11y:T,ariaLabel:D,rfId:z,hasHandleBounds:L})=>{let I=ne(),$=(0,p.useRef)(null),H=(0,p.useRef)(null),F=(0,p.useRef)(k),B=(0,p.useRef)(S),V=(0,p.useRef)(n),q=b||v||d||c||u||f,W=r4(),K=r1(t,I.getState,c),G=r1(t,I.getState,u),X=r1(t,I.getState,f),U=r1(t,I.getState,h),Y=r1(t,I.getState,g);(0,p.useEffect)(()=>()=>{H.current&&(E?.unobserve(H.current),H.current=null)},[]),(0,p.useEffect)(()=>{if($.current&&!C){let e=$.current;O&&L&&H.current===e||(H.current&&E?.unobserve(H.current),E?.observe(e),H.current=e)}},[C,O,L]),(0,p.useEffect)(()=>{let e=V.current!==n,r=F.current!==k,a=B.current!==S;$.current&&(e||r||a)&&(e&&(V.current=n),r&&(F.current=k),a&&(B.current=S),I.getState().updateNodeDimensions([{id:t,nodeElement:$.current,forceUpdate:!0}]))},[t,n,k,S]);let Z=r3({nodeRef:$,disabled:C||!v,noDragClassName:R,handleSelector:M,nodeId:t,isSelectable:b,selectNodesOnDrag:j});return C?null:p.default.createElement("div",{className:m(["react-flow__node",`react-flow__node-${n}`,{[P]:v},y,{selected:l,selectable:b,parent:A,dragging:Z}]),ref:$,style:{zIndex:_,transform:`translate(${i}px,${s}px)`,pointerEvents:q?"all":"none",visibility:O?"visible":"hidden",...x},"data-id":t,"data-testid":`rf__node-${t}`,onMouseEnter:K,onMouseMove:G,onMouseLeave:X,onContextMenu:U,onClick:e=>{let{nodeDragThreshold:n}=I.getState();if(b&&(!j||!v||n>0)&&r2({id:t,store:I,nodeRef:$}),d){let n=I.getState().nodeInternals.get(t);n&&d(e,{...n})}},onDoubleClick:Y,onKeyDown:N?e=>{ny(e)||!T&&(ng.includes(e.key)&&b?r2({id:t,store:I,unselect:"Escape"===e.key,nodeRef:$}):v&&l&&Object.prototype.hasOwnProperty.call(r8,e.key)&&(I.setState({ariaLiveMessage:`Moved selected node ${e.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~a}, y: ${~~o}`}),W({x:r8[e.key].x,y:r8[e.key].y,isShiftPressed:e.shiftKey})))}:void 0,tabIndex:N?0:void 0,role:N?"button":void 0,"aria-describedby":T?void 0:`${rx}-${z}`,"aria-label":D},p.default.createElement(nH,{value:t},p.default.createElement(e,{id:t,data:r,type:n,xPos:a,yPos:o,selected:l,isConnectable:w,sourcePosition:k,targetPosition:S,dragging:Z,dragHandle:M,zIndex:_})))};return t.displayName="NodeWrapper",(0,p.memo)(t)};let r9=e=>({...nK(e.getNodes().filter(e=>e.selected),e.nodeOrigin),transformString:`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`,userSelectionActive:e.userSelectionActive});var r7=(0,p.memo)(function({onSelectionContextMenu:e,noPanClassName:t,disableKeyboardA11y:n}){let r=ne(),{width:a,height:o,x:i,y:s,transformString:l,userSelectionActive:d}=t7(r9,k),c=r4(),u=(0,p.useRef)(null);if((0,p.useEffect)(()=>{n||u.current?.focus({preventScroll:!0})},[n]),r3({nodeRef:u}),d||!a||!o)return null;let f=e?t=>{e(t,r.getState().getNodes().filter(e=>e.selected))}:void 0;return p.default.createElement("div",{className:m(["react-flow__nodesselection","react-flow__container",t]),style:{transform:l}},p.default.createElement("div",{ref:u,className:"react-flow__nodesselection-rect",onContextMenu:f,tabIndex:n?void 0:-1,onKeyDown:n?void 0:e=>{Object.prototype.hasOwnProperty.call(r8,e.key)&&c({x:r8[e.key].x,y:r8[e.key].y,isShiftPressed:e.shiftKey})},style:{width:a,height:o,top:s,left:i}}))});let ae=e=>e.nodesSelectionActive,at=({children:e,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:a,onPaneContextMenu:o,onPaneScroll:i,deleteKeyCode:s,onMove:l,onMoveStart:d,onMoveEnd:c,selectionKeyCode:u,selectionOnDrag:f,selectionMode:h,onSelectionStart:m,onSelectionEnd:g,multiSelectionKeyCode:x,panActivationKeyCode:y,zoomActivationKeyCode:v,elementsSelectable:b,zoomOnScroll:w,zoomOnPinch:N,panOnScroll:j,panOnScrollSpeed:k,panOnScrollMode:S,zoomOnDoubleClick:C,panOnDrag:E,defaultViewport:M,translateExtent:_,minZoom:A,maxZoom:R,preventScrolling:P,onSelectionContextMenu:O,noWheelClassName:T,noPanClassName:D,disableKeyboardA11y:z})=>{let L=t7(ae),I=rN(u),$=rN(y),H=$||E,F=$||j,B=I||f&&!0!==H;return(({deleteKeyCode:e,multiSelectionKeyCode:t})=>{let n=ne(),{deleteElements:r}=rP(),a=rN(e,rO),o=rN(t);(0,p.useEffect)(()=>{if(a){let{edges:e,getNodes:t}=n.getState();r({nodes:t().filter(e=>e.selected),edges:e.filter(e=>e.selected)}),n.setState({nodesSelectionActive:!1})}},[a]),(0,p.useEffect)(()=>{n.setState({multiSelectionActive:o})},[o])})({deleteKeyCode:s,multiSelectionKeyCode:x}),p.default.createElement(rH,{onMove:l,onMoveStart:d,onMoveEnd:c,onPaneContextMenu:o,elementsSelectable:b,zoomOnScroll:w,zoomOnPinch:N,panOnScroll:F,panOnScrollSpeed:k,panOnScrollMode:S,zoomOnDoubleClick:C,panOnDrag:!I&&H,defaultViewport:M,translateExtent:_,minZoom:A,maxZoom:R,zoomActivationKeyCode:v,preventScrolling:P,noWheelClassName:T,noPanClassName:D},p.default.createElement(rY,{onSelectionStart:m,onSelectionEnd:g,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:a,onPaneContextMenu:o,onPaneScroll:i,panOnDrag:H,isSelecting:!!B,selectionMode:h},e,L&&p.default.createElement(r7,{onSelectionContextMenu:O,noPanClassName:D,disableKeyboardA11y:z})))};at.displayName="FlowRenderer";var an=(0,p.memo)(at);function ar(e){let t={input:r6(e.input||rt),default:r6(e.default||n7),output:r6(e.output||rr),group:r6(e.group||ra)},n=Object.keys(e).filter(e=>!["input","default","output","group"].includes(e)).reduce((t,n)=>(t[n]=r6(e[n]||n7),t),{});return{...t,...n}}let aa=e=>({nodesDraggable:e.nodesDraggable,nodesConnectable:e.nodesConnectable,nodesFocusable:e.nodesFocusable,elementsSelectable:e.elementsSelectable,updateNodeDimensions:e.updateNodeDimensions,onError:e.onError}),ao=e=>{var t;let{nodesDraggable:n,nodesConnectable:r,nodesFocusable:a,elementsSelectable:o,updateNodeDimensions:i,onError:s}=t7(aa,k),l=(t=e.onlyRenderVisibleElements,t7((0,p.useCallback)(e=>t?nG(e.nodeInternals,{x:0,y:0,width:e.width,height:e.height},e.transform,!0):e.getNodes(),[t]))),d=(0,p.useRef)(),c=(0,p.useMemo)(()=>{if("undefined"==typeof ResizeObserver)return null;let e=new ResizeObserver(e=>{i(e.map(e=>({id:e.target.getAttribute("data-id"),nodeElement:e.target,forceUpdate:!0})))});return d.current=e,e},[]);return(0,p.useEffect)(()=>()=>{d?.current?.disconnect()},[]),p.default.createElement("div",{className:"react-flow__nodes",style:rT},l.map(t=>{let i,l=t.type||"default";e.nodeTypes[l]||(s?.("003",(i=l,`Node type "${i}" not found. Using fallback type "default".`)),l="default");let d=e.nodeTypes[l]||e.nodeTypes.default,u=!!(t.draggable||n&&void 0===t.draggable),f=!!(t.selectable||o&&void 0===t.selectable),m=!!(t.connectable||r&&void 0===t.connectable),g=!!(t.focusable||a&&void 0===t.focusable),x=e.nodeExtent?ns(t.positionAbsolute,e.nodeExtent):t.positionAbsolute,y=x?.x??0,v=x?.y??0,b=(({x:e,y:t,width:n,height:r,origin:a})=>!n||!r||a[0]<0||a[1]<0||a[0]>1||a[1]>1?{x:e,y:t}:{x:e-n*a[0],y:t-r*a[1]})({x:y,y:v,width:t.width??0,height:t.height??0,origin:e.nodeOrigin});return p.default.createElement(d,{key:t.id,id:t.id,className:t.className,style:t.style,type:l,data:t.data,sourcePosition:t.sourcePosition||h.Bottom,targetPosition:t.targetPosition||h.Top,hidden:t.hidden,xPos:y,yPos:v,xPosOrigin:b.x,yPosOrigin:b.y,selectNodesOnDrag:e.selectNodesOnDrag,onClick:e.onNodeClick,onMouseEnter:e.onNodeMouseEnter,onMouseMove:e.onNodeMouseMove,onMouseLeave:e.onNodeMouseLeave,onContextMenu:e.onNodeContextMenu,onDoubleClick:e.onNodeDoubleClick,selected:!!t.selected,isDraggable:u,isSelectable:f,isConnectable:m,isFocusable:g,resizeObserver:c,dragHandle:t.dragHandle,zIndex:t[nm]?.z??0,isParent:!!t[nm]?.isParent,noDragClassName:e.noDragClassName,noPanClassName:e.noPanClassName,initialized:!!t.width&&!!t.height,rfId:e.rfId,disableKeyboardA11y:e.disableKeyboardA11y,ariaLabel:t.ariaLabel,hasHandleBounds:!!t[nm]?.handleBounds})}))};ao.displayName="NodeRenderer";var ai=(0,p.memo)(ao);let as="react-flow__edgeupdater",al=({position:e,centerX:t,centerY:n,radius:r=10,onMouseDown:a,onMouseEnter:o,onMouseOut:i,type:s})=>p.default.createElement("circle",{onMouseDown:a,onMouseEnter:o,onMouseOut:i,className:m([as,`${as}-${s}`]),cx:e===h.Left?t-r:e===h.Right?t+r:t,cy:e===h.Top?n-r:e===h.Bottom?n+r:n,r:r,stroke:"transparent",fill:"transparent"}),ad=()=>!0;var ac=e=>{let t=({id:t,className:n,type:r,data:a,onClick:o,onEdgeDoubleClick:i,selected:s,animated:l,label:d,labelStyle:c,labelShowBg:u,labelBgStyle:f,labelBgPadding:h,labelBgBorderRadius:g,style:x,source:y,target:v,sourceX:b,sourceY:w,targetX:N,targetY:j,sourcePosition:k,targetPosition:S,elementsSelectable:C,hidden:E,sourceHandleId:M,targetHandleId:_,onContextMenu:A,onMouseEnter:R,onMouseMove:P,onMouseLeave:O,reconnectRadius:T,onReconnect:D,onReconnectStart:z,onReconnectEnd:L,markerEnd:I,markerStart:$,rfId:H,ariaLabel:F,isFocusable:B,isReconnectable:V,pathOptions:q,interactionWidth:W,disableKeyboardA11y:K})=>{let G=(0,p.useRef)(null),[X,U]=(0,p.useState)(!1),[Y,Z]=(0,p.useState)(!1),Q=ne(),J=(0,p.useMemo)(()=>`url('#${nF($,H)}')`,[$,H]),ee=(0,p.useMemo)(()=>`url('#${nF(I,H)}')`,[I,H]);if(E)return null;let et=nN(t,Q.getState,i),en=nN(t,Q.getState,A),er=nN(t,Q.getState,R),ea=nN(t,Q.getState,P),eo=nN(t,Q.getState,O),ei=(e,n)=>{if(0!==e.button)return;let{edges:r,isValidConnection:a}=Q.getState(),o=n?v:y,i=(n?_:M)||null,s=n?"target":"source",l=r.find(e=>e.id===t);Z(!0),z?.(e,l,s),n5({event:e,handleId:i,nodeId:o,onConnect:e=>D?.(l,e),isTarget:n,getState:Q.getState,setState:Q.setState,isValidConnection:a||ad,edgeUpdaterType:s,onReconnectEnd:e=>{Z(!1),L?.(e,l,s)}})},es=()=>U(!0),el=()=>U(!1);return p.default.createElement("g",{className:m(["react-flow__edge",`react-flow__edge-${r}`,n,{selected:s,animated:l,inactive:!C&&!o,updating:X}]),onClick:e=>{let{edges:n,addSelectedEdges:r,unselectNodesAndEdges:a,multiSelectionActive:i}=Q.getState(),s=n.find(e=>e.id===t);s&&(C&&(Q.setState({nodesSelectionActive:!1}),s.selected&&i?(a({nodes:[],edges:[s]}),G.current?.blur()):r([t])),o&&o(e,s))},onDoubleClick:et,onContextMenu:en,onMouseEnter:er,onMouseMove:ea,onMouseLeave:eo,onKeyDown:B?e=>{if(!K&&ng.includes(e.key)&&C){let{unselectNodesAndEdges:n,addSelectedEdges:r,edges:a}=Q.getState();"Escape"===e.key?(G.current?.blur(),n({edges:[a.find(e=>e.id===t)]})):r([t])}}:void 0,tabIndex:B?0:void 0,role:B?"button":"img","data-testid":`rf__edge-${t}`,"aria-label":null===F?void 0:F||`Edge from ${y} to ${v}`,"aria-describedby":B?`${ry}-${H}`:void 0,ref:G},!Y&&p.default.createElement(e,{id:t,source:y,target:v,selected:s,animated:l,label:d,labelStyle:c,labelShowBg:u,labelBgStyle:f,labelBgPadding:h,labelBgBorderRadius:g,data:a,style:x,sourceX:b,sourceY:w,targetX:N,targetY:j,sourcePosition:k,targetPosition:S,sourceHandleId:M,targetHandleId:_,markerStart:J,markerEnd:ee,pathOptions:q,interactionWidth:W}),V&&p.default.createElement(p.default.Fragment,null,("source"===V||!0===V)&&p.default.createElement(al,{position:k,centerX:b,centerY:w,radius:T,onMouseDown:e=>ei(e,!0),onMouseEnter:es,onMouseOut:el,type:"source"}),("target"===V||!0===V)&&p.default.createElement(al,{position:S,centerX:N,centerY:j,radius:T,onMouseDown:e=>ei(e,!1),onMouseEnter:es,onMouseOut:el,type:"target"})))};return t.displayName="EdgeWrapper",(0,p.memo)(t)};function au(e){let t={default:ac(e.default||nI),straight:ac(e.bezier||nT),step:ac(e.step||nO),smoothstep:ac(e.step||nP),simplebezier:ac(e.simplebezier||nE)},n=Object.keys(e).filter(e=>!["default","bezier"].includes(e)).reduce((t,n)=>(t[n]=ac(e[n]||nI),t),{});return{...t,...n}}function af(e,t,n=null){let r=(n?.x||0)+t.x,a=(n?.y||0)+t.y,o=n?.width||t.width,i=n?.height||t.height;switch(e){case h.Top:return{x:r+o/2,y:a};case h.Right:return{x:r+o,y:a+i/2};case h.Bottom:return{x:r+o/2,y:a+i};case h.Left:return{x:r,y:a+i/2}}}function ah(e,t){return e?1!==e.length&&t?t&&e.find(e=>e.id===t)||null:e[0]:null}function ap(e){let t=e?.[nm]?.handleBounds||null,n=t&&e?.width&&e?.height&&void 0!==e?.positionAbsolute?.x&&void 0!==e?.positionAbsolute?.y;return[{x:e?.positionAbsolute?.x||0,y:e?.positionAbsolute?.y||0,width:e?.width||0,height:e?.height||0},t,!!n]}let am=[{level:0,isMaxLevel:!0,edges:[]}],ag={[f.Arrow]:({color:e="none",strokeWidth:t=1})=>p.default.createElement("polyline",{style:{stroke:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"}),[f.ArrowClosed]:({color:e="none",strokeWidth:t=1})=>p.default.createElement("polyline",{style:{stroke:e,fill:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"})},ax=({id:e,type:t,color:n,width:r=12.5,height:a=12.5,markerUnits:o="strokeWidth",strokeWidth:i,orient:s="auto-start-reverse"})=>{let l,d=(l=ne(),(0,p.useMemo)(()=>{let e;return Object.prototype.hasOwnProperty.call(ag,t)?ag[t]:(l.getState().onError?.("009",(e=t,`Marker type "${e}" doesn't exist.`)),null)},[t]));return d?p.default.createElement("marker",{className:"react-flow__arrowhead",id:e,markerWidth:`${r}`,markerHeight:`${a}`,viewBox:"-10 -10 20 20",markerUnits:o,orient:s,refX:"0",refY:"0"},p.default.createElement(d,{color:n,strokeWidth:i})):null},ay=({defaultColor:e,rfId:t})=>{let n=t7((0,p.useCallback)((({defaultColor:e,rfId:t})=>n=>{let r=[];return n.edges.reduce((n,a)=>([a.markerStart,a.markerEnd].forEach(a=>{if(a&&"object"==typeof a){let o=nF(a,t);r.includes(o)||(n.push({id:o,color:a.color||e,...a}),r.push(o))}}),n),[]).sort((e,t)=>e.id.localeCompare(t.id))})({defaultColor:e,rfId:t}),[e,t]),(e,t)=>!(e.length!==t.length||e.some((e,n)=>e.id!==t[n].id)));return p.default.createElement("defs",null,n.map(e=>p.default.createElement(ax,{id:e.id,key:e.id,type:e.type,color:e.color,width:e.width,height:e.height,markerUnits:e.markerUnits,strokeWidth:e.strokeWidth,orient:e.orient})))};ay.displayName="MarkerDefinitions";var av=(0,p.memo)(ay);let ab=e=>({nodesConnectable:e.nodesConnectable,edgesFocusable:e.edgesFocusable,edgesUpdatable:e.edgesUpdatable,elementsSelectable:e.elementsSelectable,width:e.width,height:e.height,connectionMode:e.connectionMode,nodeInternals:e.nodeInternals,onError:e.onError}),aw=({defaultMarkerColor:e,onlyRenderVisibleElements:t,elevateEdgesOnSelect:n,rfId:r,edgeTypes:a,noPanClassName:o,onEdgeContextMenu:i,onEdgeMouseEnter:s,onEdgeMouseMove:d,onEdgeMouseLeave:c,onEdgeClick:u,onEdgeDoubleClick:f,onReconnect:g,onReconnectStart:x,onReconnectEnd:y,reconnectRadius:v,children:b,disableKeyboardA11y:w})=>{let{edgesFocusable:N,edgesUpdatable:j,elementsSelectable:S,width:C,height:E,connectionMode:M,nodeInternals:_,onError:A}=t7(ab,k),R=function(e,t,n=!1){let r=-1,a=Object.entries(e.reduce((e,a)=>{let o=np(a.zIndex),i=o?a.zIndex:0;if(n){let e=t.get(a.target),n=t.get(a.source),r=a.selected||e?.selected||n?.selected,s=Math.max(n?.[nm]?.z||0,e?.[nm]?.z||0,1e3);i=(o?a.zIndex:0)+(r?s:0)}return e[i]?e[i].push(a):e[i]=[a],r=i>r?i:r,e},{})).map(([e,t])=>{let n=+e;return{edges:t,level:n,isMaxLevel:n===r}});return 0===a.length?am:a}(t7((0,p.useCallback)(e=>t?e.edges.filter(t=>{let n=_.get(t.source),r=_.get(t.target);return n?.width&&n?.height&&r?.width&&r?.height&&function({sourcePos:e,targetPos:t,sourceWidth:n,sourceHeight:r,targetWidth:a,targetHeight:o,width:i,height:s,transform:l}){let d={x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x+n,t.x+a),y2:Math.max(e.y+r,t.y+o)};d.x===d.x2&&(d.x2+=1),d.y===d.y2&&(d.y2+=1);let c=nu({x:(0-l[0])/l[2],y:(0-l[1])/l[2],width:i/l[2],height:s/l[2]});return Math.ceil(Math.max(0,Math.min(c.x2,d.x2)-Math.max(c.x,d.x))*Math.max(0,Math.min(c.y2,d.y2)-Math.max(c.y,d.y)))>0}({sourcePos:n.positionAbsolute||{x:0,y:0},targetPos:r.positionAbsolute||{x:0,y:0},sourceWidth:n.width,sourceHeight:n.height,targetWidth:r.width,targetHeight:r.height,width:e.width,height:e.height,transform:e.transform})}):e.edges,[t,_])),_,n);return C?p.default.createElement(p.default.Fragment,null,R.map(({level:t,edges:n,isMaxLevel:b})=>p.default.createElement("svg",{key:t,style:{zIndex:t},width:C,height:E,className:"react-flow__edges react-flow__container"},b&&p.default.createElement(av,{defaultColor:e,rfId:r}),p.default.createElement("g",null,n.map(e=>{let t,n,b,[k,C,E]=ap(_.get(e.source)),[R,P,O]=ap(_.get(e.target));if(!E||!O)return null;let T=e.type||"default";a[T]||(A?.("011",(t=T,`Edge type "${t}" not found. Using fallback type "default".`)),T="default");let D=a[T]||a.default,z=M===l.Strict?P.target:(P.target??[]).concat(P.source??[]),L=ah(C.source,e.sourceHandle),I=ah(z,e.targetHandle),$=L?.position||h.Bottom,H=I?.position||h.Top,F=!!(e.focusable||N&&void 0===e.focusable),B=e.reconnectable||e.updatable;if(!L||!I){let t,n;return A?.("008",(t=L,n=e,`Couldn't create edge for ${!t?"source":"target"} handle id: "${!t?n.sourceHandle:n.targetHandle}", edge id: ${n.id}.`)),null}let{sourceX:V,sourceY:q,targetX:W,targetY:K}=(n=af($,k,L),b=af(H,R,I),{sourceX:n.x,sourceY:n.y,targetX:b.x,targetY:b.y});return p.default.createElement(D,{key:e.id,id:e.id,className:m([e.className,o]),type:T,data:e.data,selected:!!e.selected,animated:!!e.animated,hidden:!!e.hidden,label:e.label,labelStyle:e.labelStyle,labelShowBg:e.labelShowBg,labelBgStyle:e.labelBgStyle,labelBgPadding:e.labelBgPadding,labelBgBorderRadius:e.labelBgBorderRadius,style:e.style,source:e.source,target:e.target,sourceHandleId:e.sourceHandle,targetHandleId:e.targetHandle,markerEnd:e.markerEnd,markerStart:e.markerStart,sourceX:V,sourceY:q,targetX:W,targetY:K,sourcePosition:$,targetPosition:H,elementsSelectable:S,onContextMenu:i,onMouseEnter:s,onMouseMove:d,onMouseLeave:c,onClick:u,onEdgeDoubleClick:f,onReconnect:g,onReconnectStart:x,onReconnectEnd:y,reconnectRadius:v,rfId:r,ariaLabel:e.ariaLabel,isFocusable:F,isReconnectable:void 0!==g&&(B||j&&void 0===B),pathOptions:"pathOptions"in e?e.pathOptions:void 0,interactionWidth:e.interactionWidth,disableKeyboardA11y:w})})))),b):null};aw.displayName="EdgeRenderer";var aN=(0,p.memo)(aw);let aj=e=>`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`;function ak({children:e}){let t=t7(aj);return p.default.createElement("div",{className:"react-flow__viewport react-flow__container",style:{transform:t}},e)}let aS={[h.Left]:h.Right,[h.Right]:h.Left,[h.Top]:h.Bottom,[h.Bottom]:h.Top},aC=({nodeId:e,handleType:t,style:n,type:r=u.Bezier,CustomComponent:a,connectionStatus:o})=>{let{fromNode:i,handleId:s,toX:d,toY:c,connectionMode:f}=t7((0,p.useCallback)(t=>({fromNode:t.nodeInternals.get(e),handleId:t.connectionHandleId,toX:(t.connectionPosition.x-t.transform[0])/t.transform[2],toY:(t.connectionPosition.y-t.transform[1])/t.transform[2],connectionMode:t.connectionMode}),[e]),k),h=i?.[nm]?.handleBounds,m=h?.[t];if(f===l.Loose&&(m=m||h?.["source"===t?"target":"source"]),!i||!m)return null;let g=s?m.find(e=>e.id===s):m[0],x=g?g.x+g.width/2:(i.width??0)/2,y=g?g.y+g.height/2:i.height??0,v=(i.positionAbsolute?.x??0)+x,b=(i.positionAbsolute?.y??0)+y,w=g?.position,N=w?aS[w]:null;if(!w||!N)return null;if(a)return p.default.createElement(a,{connectionLineType:r,connectionLineStyle:n,fromNode:i,fromHandle:g,fromX:v,fromY:b,toX:d,toY:c,fromPosition:w,toPosition:N,connectionStatus:o});let j="",S={sourceX:v,sourceY:b,sourcePosition:w,targetX:d,targetY:c,targetPosition:N};return r===u.Bezier?[j]=nL(S):r===u.Step?[j]=nR({...S,borderRadius:0}):r===u.SmoothStep?[j]=nR(S):r===u.SimpleBezier?[j]=nC(S):j=`M${v},${b} ${d},${c}`,p.default.createElement("path",{d:j,fill:"none",className:"react-flow__connection-path",style:n})};aC.displayName="ConnectionLine";let aE=e=>({nodeId:e.connectionNodeId,handleType:e.connectionHandleType,nodesConnectable:e.nodesConnectable,connectionStatus:e.connectionStatus,width:e.width,height:e.height});function aM({containerStyle:e,style:t,type:n,component:r}){let{nodeId:a,handleType:o,nodesConnectable:i,width:s,height:l,connectionStatus:d}=t7(aE,k);return a&&o&&s&&i?p.default.createElement("svg",{style:e,width:s,height:l,className:"react-flow__edges react-flow__connectionline react-flow__container"},p.default.createElement("g",{className:m(["react-flow__connection",d])},p.default.createElement(aC,{nodeId:a,handleType:o,style:t,type:n,CustomComponent:r,connectionStatus:d}))):null}function a_(e,t){return(0,p.useRef)(null),ne(),(0,p.useMemo)(()=>t(e),[e])}let aA=({nodeTypes:e,edgeTypes:t,onMove:n,onMoveStart:r,onMoveEnd:a,onInit:o,onNodeClick:i,onEdgeClick:s,onNodeDoubleClick:l,onEdgeDoubleClick:d,onNodeMouseEnter:c,onNodeMouseMove:u,onNodeMouseLeave:f,onNodeContextMenu:h,onSelectionContextMenu:m,onSelectionStart:g,onSelectionEnd:x,connectionLineType:y,connectionLineStyle:v,connectionLineComponent:b,connectionLineContainerStyle:w,selectionKeyCode:N,selectionOnDrag:j,selectionMode:k,multiSelectionKeyCode:S,panActivationKeyCode:C,zoomActivationKeyCode:E,deleteKeyCode:M,onlyRenderVisibleElements:_,elementsSelectable:A,selectNodesOnDrag:R,defaultViewport:P,translateExtent:O,minZoom:T,maxZoom:D,preventScrolling:z,defaultMarkerColor:L,zoomOnScroll:I,zoomOnPinch:$,panOnScroll:H,panOnScrollSpeed:F,panOnScrollMode:B,zoomOnDoubleClick:V,panOnDrag:q,onPaneClick:W,onPaneMouseEnter:K,onPaneMouseMove:G,onPaneMouseLeave:X,onPaneScroll:U,onPaneContextMenu:Y,onEdgeContextMenu:Z,onEdgeMouseEnter:Q,onEdgeMouseMove:J,onEdgeMouseLeave:ee,onReconnect:et,onReconnectStart:en,onReconnectEnd:er,reconnectRadius:ea,noDragClassName:eo,noWheelClassName:ei,noPanClassName:es,elevateEdgesOnSelect:el,disableKeyboardA11y:ed,nodeOrigin:ec,nodeExtent:eu,rfId:ef})=>{let eh,ep,em=a_(e,ar),eg=a_(t,au);return eh=rP(),ep=(0,p.useRef)(!1),(0,p.useEffect)(()=>{!ep.current&&eh.viewportInitialized&&o&&(setTimeout(()=>o(eh),1),ep.current=!0)},[o,eh.viewportInitialized]),p.default.createElement(an,{onPaneClick:W,onPaneMouseEnter:K,onPaneMouseMove:G,onPaneMouseLeave:X,onPaneContextMenu:Y,onPaneScroll:U,deleteKeyCode:M,selectionKeyCode:N,selectionOnDrag:j,selectionMode:k,onSelectionStart:g,onSelectionEnd:x,multiSelectionKeyCode:S,panActivationKeyCode:C,zoomActivationKeyCode:E,elementsSelectable:A,onMove:n,onMoveStart:r,onMoveEnd:a,zoomOnScroll:I,zoomOnPinch:$,zoomOnDoubleClick:V,panOnScroll:H,panOnScrollSpeed:F,panOnScrollMode:B,panOnDrag:q,defaultViewport:P,translateExtent:O,minZoom:T,maxZoom:D,onSelectionContextMenu:m,preventScrolling:z,noDragClassName:eo,noWheelClassName:ei,noPanClassName:es,disableKeyboardA11y:ed},p.default.createElement(ak,null,p.default.createElement(aN,{edgeTypes:eg,onEdgeClick:s,onEdgeDoubleClick:d,onlyRenderVisibleElements:_,onEdgeContextMenu:Z,onEdgeMouseEnter:Q,onEdgeMouseMove:J,onEdgeMouseLeave:ee,onReconnect:et,onReconnectStart:en,onReconnectEnd:er,reconnectRadius:ea,defaultMarkerColor:L,noPanClassName:es,elevateEdgesOnSelect:!!el,disableKeyboardA11y:ed,rfId:ef},p.default.createElement(aM,{style:v,type:y,component:b,containerStyle:w})),p.default.createElement("div",{className:"react-flow__edgelabel-renderer"}),p.default.createElement(ai,{nodeTypes:em,onNodeClick:i,onNodeDoubleClick:l,onNodeMouseEnter:c,onNodeMouseMove:u,onNodeMouseLeave:f,onNodeContextMenu:h,selectNodesOnDrag:R,onlyRenderVisibleElements:_,noPanClassName:es,noDragClassName:eo,disableKeyboardA11y:ed,nodeOrigin:ec,nodeExtent:eu,rfId:ef})))};aA.displayName="GraphView";var aR=(0,p.memo)(aA);let aP=[[-1/0,-1/0],[1/0,1/0]],aO={rfId:"1",width:0,height:0,transform:[0,0,1],nodeInternals:new Map,edges:[],onNodesChange:null,onEdgesChange:null,hasDefaultNodes:!1,hasDefaultEdges:!1,d3Zoom:null,d3Selection:null,d3ZoomHandler:void 0,minZoom:.5,maxZoom:2,translateExtent:aP,nodeExtent:aP,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionNodeId:null,connectionHandleId:null,connectionHandleType:"source",connectionPosition:{x:0,y:0},connectionStatus:null,connectionMode:l.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:[0,0],nodeDragThreshold:0,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesUpdatable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,fitViewOnInit:!1,fitViewOnInitDone:!1,fitViewOnInitOptions:void 0,onSelectionChange:[],multiSelectionActive:!1,connectionStartHandle:null,connectionEndHandle:null,connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,connectionRadius:20,onError:nx,isValidConnection:void 0},aT=({children:e})=>{let t,n,r=(0,p.useRef)(null);return r.current||(t=(e,t)=>({...aO,setNodes:n=>{let{nodeInternals:r,nodeOrigin:a,elevateNodesOnSelect:o}=t();e({nodeInternals:rC(n,r,a,o)})},getNodes:()=>Array.from(t().nodeInternals.values()),setEdges:n=>{let{defaultEdgeOptions:r={}}=t();e({edges:n.map(e=>({...r,...e}))})},setDefaultNodesAndEdges:(n,r)=>{let a=void 0!==n,o=void 0!==r;e({nodeInternals:a?rC(n,new Map,t().nodeOrigin,t().elevateNodesOnSelect):new Map,edges:o?r:[],hasDefaultNodes:a,hasDefaultEdges:o})},updateNodeDimensions:n=>{let{onNodesChange:r,nodeInternals:a,fitViewOnInit:o,fitViewOnInitDone:i,fitViewOnInitOptions:s,domNode:l,nodeOrigin:d}=t(),c=l?.querySelector(".react-flow__viewport");if(!c)return;let u=window.getComputedStyle(c),{m22:f}=new window.DOMMatrixReadOnly(u.transform),h=n.reduce((e,t)=>{let n=a.get(t.id);if(n?.hidden)a.set(n.id,{...n,[nm]:{...n[nm],handleBounds:void 0}});else if(n){let r=no(t.nodeElement);r.width&&r.height&&(n.width!==r.width||n.height!==r.height||t.forceUpdate)&&(a.set(n.id,{...n,[nm]:{...n[nm],handleBounds:{source:r0(".source",t.nodeElement,f,d),target:r0(".target",t.nodeElement,f,d)}},...r}),e.push({id:n.id,type:"dimensions",dimensions:r}))}return e},[]);rS(a,d);let p=i||o&&!i&&rE(t,{initial:!0,...s});e({nodeInternals:new Map(a),fitViewOnInitDone:p}),h?.length>0&&r?.(h)},updateNodePositions:(e,n=!0,r=!1)=>{let{triggerNodeChanges:a}=t();a(e.map(e=>{let t={id:e.id,type:"position",dragging:r};return n&&(t.positionAbsolute=e.positionAbsolute,t.position=e.position),t}))},triggerNodeChanges:n=>{let{onNodesChange:r,nodeInternals:a,hasDefaultNodes:o,nodeOrigin:i,getNodes:s,elevateNodesOnSelect:l}=t();n?.length&&(o&&e({nodeInternals:rC(rW(n,s()),a,i,l)}),r?.(n))},addSelectedNodes:n=>{let r,{multiSelectionActive:a,edges:o,getNodes:i}=t(),s=null;a?r=n.map(e=>rK(e,!0)):(r=rG(i(),n),s=rG(o,[])),rM({changedNodes:r,changedEdges:s,get:t,set:e})},addSelectedEdges:n=>{let r,{multiSelectionActive:a,edges:o,getNodes:i}=t(),s=null;a?r=n.map(e=>rK(e,!0)):(r=rG(o,n),s=rG(i(),[])),rM({changedNodes:s,changedEdges:r,get:t,set:e})},unselectNodesAndEdges:({nodes:n,edges:r}={})=>{let{edges:a,getNodes:o}=t();rM({changedNodes:(n||o()).map(e=>(e.selected=!1,rK(e.id,!1))),changedEdges:(r||a).map(e=>rK(e.id,!1)),get:t,set:e})},setMinZoom:n=>{let{d3Zoom:r,maxZoom:a}=t();r?.scaleExtent([n,a]),e({minZoom:n})},setMaxZoom:n=>{let{d3Zoom:r,minZoom:a}=t();r?.scaleExtent([a,n]),e({maxZoom:n})},setTranslateExtent:n=>{t().d3Zoom?.translateExtent(n),e({translateExtent:n})},resetSelectedElements:()=>{let{edges:n,getNodes:r}=t();rM({changedNodes:r().filter(e=>e.selected).map(e=>rK(e.id,!1)),changedEdges:n.filter(e=>e.selected).map(e=>rK(e.id,!1)),get:t,set:e})},setNodeExtent:n=>{let{nodeInternals:r}=t();r.forEach(e=>{e.positionAbsolute=ns(e.position,n)}),e({nodeExtent:n,nodeInternals:new Map(r)})},panBy:e=>{let{transform:n,width:r,height:a,d3Zoom:o,d3Selection:i,translateExtent:s}=t();if(!o||!i||!e.x&&!e.y)return!1;let l=tq.translate(n[0]+e.x,n[1]+e.y).scale(n[2]),d=o?.constrain()(l,[[0,0],[r,a]],s);return o.transform(i,d),n[0]!==d.x||n[1]!==d.y||n[2]!==d.k},cancelConnection:()=>e({connectionNodeId:aO.connectionNodeId,connectionHandleId:aO.connectionHandleId,connectionHandleType:aO.connectionHandleType,connectionStatus:aO.connectionStatus,connectionStartHandle:aO.connectionStartHandle,connectionEndHandle:aO.connectionEndHandle}),reset:()=>e({...aO})}),n=Object.is,r.current=t?j(t,n):j),p.default.createElement(t6,{value:r.current},e)};aT.displayName="ReactFlowProvider";let aD=({children:e})=>(0,p.useContext)(t8)?p.default.createElement(p.default.Fragment,null,e):p.default.createElement(aT,null,e);aD.displayName="ReactFlowWrapper";let az={input:rt,default:n7,output:rr,group:ra},aL={default:nI,straight:nT,step:nO,smoothstep:nP,simplebezier:nE},aI=[0,0],a$=[15,15],aH={x:0,y:0,zoom:1},aF={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0},aB=(0,p.forwardRef)(({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,className:a,nodeTypes:o=az,edgeTypes:i=aL,onNodeClick:s,onEdgeClick:f,onInit:h,onMove:g,onMoveStart:x,onMoveEnd:y,onConnect:v,onConnectStart:b,onConnectEnd:w,onClickConnectStart:N,onClickConnectEnd:j,onNodeMouseEnter:k,onNodeMouseMove:S,onNodeMouseLeave:C,onNodeContextMenu:E,onNodeDoubleClick:M,onNodeDragStart:_,onNodeDrag:A,onNodeDragStop:R,onNodesDelete:P,onEdgesDelete:O,onSelectionChange:T,onSelectionDragStart:D,onSelectionDrag:z,onSelectionDragStop:L,onSelectionContextMenu:I,onSelectionStart:$,onSelectionEnd:H,connectionMode:F=l.Strict,connectionLineType:B=u.Bezier,connectionLineStyle:V,connectionLineComponent:q,connectionLineContainerStyle:W,deleteKeyCode:K="Backspace",selectionKeyCode:G="Shift",selectionOnDrag:X=!1,selectionMode:U=c.Full,panActivationKeyCode:Y="Space",multiSelectionKeyCode:Z=nb()?"Meta":"Control",zoomActivationKeyCode:Q=nb()?"Meta":"Control",snapToGrid:J=!1,snapGrid:ee=a$,onlyRenderVisibleElements:et=!1,selectNodesOnDrag:en=!0,nodesDraggable:er,nodesConnectable:ea,nodesFocusable:eo,nodeOrigin:ei=aI,edgesFocusable:es,edgesUpdatable:el,elementsSelectable:ed,defaultViewport:ec=aH,minZoom:eu=.5,maxZoom:ef=2,translateExtent:eh=aP,preventScrolling:ep=!0,nodeExtent:em,defaultMarkerColor:eg="#b1b1b7",zoomOnScroll:ex=!0,zoomOnPinch:ey=!0,panOnScroll:ev=!1,panOnScrollSpeed:eb=.5,panOnScrollMode:ew=d.Free,zoomOnDoubleClick:eN=!0,panOnDrag:ej=!0,onPaneClick:ek,onPaneMouseEnter:eS,onPaneMouseMove:eC,onPaneMouseLeave:eE,onPaneScroll:eM,onPaneContextMenu:e_,children:eA,onEdgeContextMenu:eR,onEdgeDoubleClick:eP,onEdgeMouseEnter:eO,onEdgeMouseMove:eT,onEdgeMouseLeave:eD,onEdgeUpdate:ez,onEdgeUpdateStart:eL,onEdgeUpdateEnd:eI,onReconnect:e$,onReconnectStart:eH,onReconnectEnd:eF,reconnectRadius:eB=10,edgeUpdaterRadius:eV=10,onNodesChange:eq,onEdgesChange:eW,noDragClassName:eK="nodrag",noWheelClassName:eG="nowheel",noPanClassName:eX="nopan",fitView:eU=!1,fitViewOptions:eY,connectOnClick:eZ=!0,attributionPosition:eQ,proOptions:eJ,defaultEdgeOptions:e0,elevateNodesOnSelect:e1=!0,elevateEdgesOnSelect:e2=!1,disableKeyboardA11y:e5=!1,autoPanOnConnect:e3=!0,autoPanOnNodeDrag:e4=!0,connectionRadius:e8=20,isValidConnection:e6,onError:e9,style:e7,id:te,nodeDragThreshold:tt,...tn},tr)=>{let ta=te||"1";return p.default.createElement("div",{...tn,style:{...e7,...aF},ref:tr,className:m(["react-flow",a]),"data-testid":"rf__wrapper",id:te},p.default.createElement(aD,null,p.default.createElement(aR,{onInit:h,onMove:g,onMoveStart:x,onMoveEnd:y,onNodeClick:s,onEdgeClick:f,onNodeMouseEnter:k,onNodeMouseMove:S,onNodeMouseLeave:C,onNodeContextMenu:E,onNodeDoubleClick:M,nodeTypes:o,edgeTypes:i,connectionLineType:B,connectionLineStyle:V,connectionLineComponent:q,connectionLineContainerStyle:W,selectionKeyCode:G,selectionOnDrag:X,selectionMode:U,deleteKeyCode:K,multiSelectionKeyCode:Z,panActivationKeyCode:Y,zoomActivationKeyCode:Q,onlyRenderVisibleElements:et,selectNodesOnDrag:en,defaultViewport:ec,translateExtent:eh,minZoom:eu,maxZoom:ef,preventScrolling:ep,zoomOnScroll:ex,zoomOnPinch:ey,zoomOnDoubleClick:eN,panOnScroll:ev,panOnScrollSpeed:eb,panOnScrollMode:ew,panOnDrag:ej,onPaneClick:ek,onPaneMouseEnter:eS,onPaneMouseMove:eC,onPaneMouseLeave:eE,onPaneScroll:eM,onPaneContextMenu:e_,onSelectionContextMenu:I,onSelectionStart:$,onSelectionEnd:H,onEdgeContextMenu:eR,onEdgeDoubleClick:eP,onEdgeMouseEnter:eO,onEdgeMouseMove:eT,onEdgeMouseLeave:eD,onReconnect:e$??ez,onReconnectStart:eH??eL,onReconnectEnd:eF??eI,reconnectRadius:eB??eV,defaultMarkerColor:eg,noDragClassName:eK,noWheelClassName:eG,noPanClassName:eX,elevateEdgesOnSelect:e2,rfId:ta,disableKeyboardA11y:e5,nodeOrigin:ei,nodeExtent:em}),p.default.createElement(rp,{nodes:e,edges:t,defaultNodes:n,defaultEdges:r,onConnect:v,onConnectStart:b,onConnectEnd:w,onClickConnectStart:N,onClickConnectEnd:j,nodesDraggable:er,nodesConnectable:ea,nodesFocusable:eo,edgesFocusable:es,edgesUpdatable:el,elementsSelectable:ed,elevateNodesOnSelect:e1,minZoom:eu,maxZoom:ef,nodeExtent:em,onNodesChange:eq,onEdgesChange:eW,snapToGrid:J,snapGrid:ee,connectionMode:F,translateExtent:eh,connectOnClick:eZ,defaultEdgeOptions:e0,fitView:eU,fitViewOptions:eY,onNodesDelete:P,onEdgesDelete:O,onNodeDragStart:_,onNodeDrag:A,onNodeDragStop:R,onSelectionDrag:z,onSelectionDragStart:D,onSelectionDragStop:L,noPanClassName:eX,nodeOrigin:ei,rfId:ta,autoPanOnConnect:e3,autoPanOnNodeDrag:e4,onError:e9,connectionRadius:e8,isValidConnection:e6,nodeDragThreshold:tt}),p.default.createElement(rc,{onSelectionChange:T}),eA,p.default.createElement(nr,{proOptions:eJ,position:eQ}),p.default.createElement(rw,{rfId:ta,disableKeyboardA11y:e5})))});aB.displayName="ReactFlow";let aV=e=>e.domNode?.querySelector(".react-flow__edgelabel-renderer");function aq({children:e}){let t=t7(aV);return t?(0,t4.createPortal)(e,t):null}let aW=e=>e.edges;function aK(){return t7(aW,k)}function aG(e){return t=>{let[n,r]=(0,p.useState)(t),a=(0,p.useCallback)(t=>r(n=>e(t,n)),[]);return[n,r,a]}}let aX=aG(rW),aU=aG(function(e,t){return rq(e,t)});e.s(["EdgeLabelRenderer",()=>aq,"Handle",()=>n6,"MarkerType",()=>f,"Panel",()=>nn,"Position",()=>h,"ReactFlow",()=>aB,"ReactFlowProvider",()=>aT,"SelectionMode",()=>c,"addEdge",()=>nB,"getBezierPath",()=>nL,"useEdges",()=>aK,"useEdgesState",()=>aU,"useNodesState",()=>aX,"useReactFlow",()=>rP,"useStore",()=>t7],41336);var aY=e.i(86368),aZ=e.i(74117),aQ=e.i(94580);function aJ({initialNodes:e=[],initialEdges:t=[],workflowId:n}){let[r,a,o]=aX(e),[i,s,l]=aU(t),{fitView:d,zoomIn:c,zoomOut:u,getNodes:h}=rP(),{toast:m}=(0,aZ.useToast)(),{data:g=[]}=(0,aY.useNodeTypes)(),[x,y]=(0,p.useState)({items:[],index:-1}),v=(0,p.useRef)(!1),[b,w]=(0,p.useState)(null),N=(0,p.useCallback)((e,t)=>{if(v.current){v.current=!1;return}let n=JSON.parse(JSON.stringify({nodes:e,edges:t}));y(e=>{let t=[...e.items.slice(0,e.index+1),n];return{items:t.slice(-50),index:Math.min(t.length-1,49)+1}})},[]),j=(0,p.useCallback)(()=>{y(e=>{if(e.index>0){v.current=!0;let t=e.index-1,n=e.items[t];return a(n.nodes),s(n.edges),{...e,index:t}}return e})},[a,s]),k=(0,p.useCallback)(()=>{y(e=>{if(e.index<e.items.length-1){v.current=!0;let t=e.index+1,n=e.items[t];return a(n.nodes),s(n.edges),{...e,index:t}}return e})},[a,s]),[S,C]=(0,p.useState)("editor"),[E,M]=(0,p.useState)(!1),[_,A]=(0,p.useState)(!1),[R,P]=(0,p.useState)(null),[O,T]=(0,p.useState)(!1),{data:D}=(0,aY.useWorkflow)(n||""),[z,L]=(0,p.useState)(null),[I,$]=(0,p.useState)(null),[H,F]=(0,p.useState)(null),[B,V]=(0,p.useState)(null),[q,W]=(0,p.useState)(!1),K=(0,aY.useActivateWorkflow)(),G=(0,aY.useDeactivateWorkflow)(),X=(0,p.useCallback)(e=>{L(e.meta||null),$(e.execution||null),F(e.observability||null),V(e.ai||null),W(e.meta?.status==="active");let t=e.graph?.nodes?.map(e=>{let t=e.spec?.node_name;return g?.find(e=>e.name===t),e.spec&&e.ui&&e.ui.position||console.error("CRITICAL: Malformed node data from backend",e),{id:e.id,type:t&&"unknown"!==t?t:"default",position:e.ui.position,data:{id:e.id,label:e.ui.label,node_name:t,type:e.kind,config:e.spec.config,settings:e.spec.settings,spec:e.spec,workflowId:n,executeNode:t=>eO(t||e.id)}}})||[],r=e.graph?.edges?.map(e=>({...e,id:e.id||`edge-${e.source}-${e.target}`,sourceHandle:e.source_handle||e.sourceHandle||e.condition?.toLowerCase()||void 0,targetHandle:e.target_handle||e.targetHandle||void 0,label:e.condition}))||[];a(t),s(r),N(t,r),setTimeout(()=>d(),100)},[n,d,a,s,N,g]),U=(0,p.useRef)(null);(0,p.useEffect)(()=>{D&&n!==U.current&&(X(D),U.current=n||"new")},[D,n,X]);let Y=(0,p.useCallback)(e=>{s(t=>{let n=nB({...e,type:"custom",animated:!1,style:{stroke:"#9ca3af",strokeWidth:3},markerEnd:{type:f.ArrowClosed,color:"#9ca3af",width:14,height:14},deletable:!0},t);return N(r,n),n})},[r,s,N]),Z=(0,p.useCallback)((e,t)=>{N(r,i)},[r,i,N]),Q=(0,p.useCallback)((e,t)=>{P(t),A(!1)},[]),J=(0,p.useCallback)((e,t)=>{P(t),T(!0)},[]),ee=(0,p.useCallback)((e,t)=>{a(n=>{let r=n.map(n=>{if(n.id===e){let r={...n.data,...t};r.spec={...r.spec,config:r.config,settings:r.settings};let a={...n,data:r};return P(t=>t?.id===e?a:t),a}return n});return N(r,i),r})},[i,a,N,P]),et=(0,p.useCallback)(e=>{let t=r.filter(t=>t.id!==e),n=i.filter(t=>t.source!==e&&t.target!==e);a(t),s(n),N(t,n),R?.id===e&&P(null)},[r,i,a,s,N,R]),[en,er]=(0,p.useState)(null),[ea,eo]=(0,p.useState)(null),ei=(0,p.useCallback)(e=>{let t=e.inputs?.reduce((e,t)=>(void 0!==t.default&&(e[t.name]=t.default),e),{})||{},o={id:`${e.name}-${Date.now()}`,type:e.name,position:{x:500,y:300},data:{id:`${e.name}-${Date.now()}`,label:e.label,type:e.type,node_name:e.name,config:t,spec:{node_name:e.name,runtime:{type:"internal"},config:t,settings:{}},workflowId:n,executeNode:e=>eO(e||o.id)}};o.data.id=o.id;let l=[...r,o],d=[...i];if(en){let e=i.find(e=>e.id===en.edgeId);e&&(o.position={x:en.x-70,y:en.y-70},d=i.filter(e=>e.id!==en.edgeId).concat([{id:`edge-${e.source}-${o.id}`,source:e.source,target:o.id,type:"custom"},{id:`edge-${o.id}-${e.target}`,source:o.id,target:e.target,type:"custom"}])),er(null)}else ea&&(o.position={x:ea.x+150,y:ea.y-40},d=[...i,{id:`edge-${ea.source}-${o.id}`,source:ea.source,sourceHandle:ea.handleId,target:o.id,type:"custom"}],eo(null));a(l),s(d),N(l,d),A(!1)},[r,i,en,ea,n,a,s,N]),es=(0,aY.useGenerateWorkflowWithAI)(),[el,ed]=(0,p.useState)(""),[ec,eu]=(0,p.useState)(!1),[ef,eh]=(0,p.useState)([]),ep=(0,p.useCallback)(async()=>{if(el.trim()){ed(""),eh(e=>[...e,{role:"user",message:el}]),eu(!0);try{let e=r.map(e=>({id:e.id,kind:e.data?.type||"action",ui:{label:e.data?.label||"Node",icon:e.data?.spec?.ui?.icon,position:e.position},spec:{...e.data?.spec,config:e.data?.config||{},settings:e.data?.settings||{}}})),t=i.map(e=>({id:e.id,source:e.source,target:e.target,sourceHandle:e.sourceHandle,targetHandle:e.targetHandle,condition:"string"==typeof e.label?e.label:void 0})),o=await es.mutateAsync({prompt:el,current_nodes:e,current_edges:t}),l=o.suggestions?.join("\n")||"Workflow updated with generated nodes.";eh(e=>[...e,{role:"ai",message:l}]),o.nodes&&o.edges&&(a(e=>[...e,...o.nodes.map((e,t)=>({id:e.id,type:e.spec.node_name,position:e.ui.position,data:{id:e.id,label:e.ui.label,type:e.kind,node_name:e.spec.node_name,config:e.spec.config,settings:e.spec.settings,spec:e.spec,workflowId:n,executeNode:t=>eO(t||e.id)}}))]),s(e=>[...e,...o.edges.map(e=>({id:e.id,source:e.source,target:e.target,label:e.condition}))]))}catch(e){eh(e=>[...e,{role:"ai",message:"Error generating workflow."}])}finally{eu(!1)}}},[el,r,i,es,X]),[em,eg]=(0,p.useState)([]),[ex,ey]=(0,p.useState)([]),ev=(0,p.useCallback)(({nodes:e})=>{eg(e),1===e.length?P(e[0]):0===e.length&&(P(null),A(!1))},[]),eb=(0,p.useCallback)(()=>{0!==em.length&&(ey(JSON.parse(JSON.stringify(em))),m({title:"Copied",description:`${em.length} node${em.length>1?"s":""} copied to clipboard`}))},[em,m]),ew=(0,p.useCallback)(()=>{if(0===ex.length)return;let e=Date.now(),t=ex.map(t=>{let n=`${t.data.node_name}-${e}-${Math.random().toString(36).substr(2,6)}`;return{...t,id:n,position:{x:t.position.x+50,y:t.position.y+50},selected:!0,data:{...t.data,id:n}}});t.forEach(e=>e.data.id=e.id);let n=[...r.map(e=>({...e,selected:!1})),...t];a(n),eg(t),1===t.length&&P(t[0]),N(n,i),m({title:"Pasted",description:`Pasted ${t.length} node${t.length>1?"s":""}`})},[ex,r,i,a,m,N]),eN=(0,aY.useExecuteWorkflow)(),ej=(0,aY.useExecuteNode)(),[ek,eS]=(0,p.useState)(!1),[eC,eE]=(0,p.useState)(null),{logs:eM,setLogs:e_,handleMessage:eA}=function(e,t,n){let[r,a]=(0,p.useState)([]),o=(0,p.useRef)(e);(0,p.useEffect)(()=>{o.current=e},[e]);let i=(0,p.useCallback)(e=>{if(!e)return;let r=new Date().toISOString(),i=o.current;if("node_started"===e.type){let{node_id:n,input_data:o}=e.data;t(e=>e.map(e=>e.id===n||e.data.node_id===n?{...e,data:{...e.data,status:"running"}}:e));let s=i.find(e=>e.id===n||e.data.node_id===n);a(e=>[...e,{id:Math.random().toString(36).substring(7),timestamp:r,type:"info",message:`Starting node: ${s?.data?.label||n}`,nodeId:n,data:o}])}else if("node_completed"===e.type){let{node_id:n,result:o}=e.data;t(e=>e.map(e=>e.id===n||e.data.node_id===n?{...e,data:{...e.data,status:"success",output:o}}:e));let s=i.find(e=>e.id===n||e.data.node_id===n);a(e=>[...e,{id:Math.random().toString(36).substring(7),timestamp:r,type:"success",message:`Node completed: ${s?.data?.label||n}`,nodeId:n,data:o}])}else if("node_failed"===e.type){let{node_id:o,error:s,error_category:l,error_suggestion:d,is_retryable:c}=e.data;t(e=>e.map(e=>e.id===o||e.data.node_id===o?{...e,data:{...e.data,status:"failed",error:s,errorCategory:l,errorSuggestion:d}}:e));let u=i.find(e=>e.id===o||e.data.node_id===o),f=`Node failed: ${u?.data?.label||o}`;l&&"unknown"!==l&&(f+=` [${l.replace(/_/g," ")}]`),f+=`. ${s}`,a(e=>[...e,{id:Math.random().toString(36),timestamp:r,type:"error",message:f,nodeId:o,data:d?{suggestion:d,is_retryable:c}:void 0}]),d&&n({title:` Suggestion`,description:d,variant:"default"})}else if("node_retrying"===e.type){let{node_id:t,attempt:n,max_attempts:o,delay_seconds:s}=e.data,l=i.find(e=>e.id===t||e.data.node_id===t);a(e=>[...e,{id:Math.random().toString(36),timestamp:r,type:"warning",message:`Retrying node: ${l?.data?.label||t} (attempt ${n}/${o}, waiting ${s}s)`,nodeId:t}])}else if("node_continued"===e.type){let{node_id:n,error:o}=e.data,s=i.find(e=>e.id===n||e.data.node_id===n);t(e=>e.map(e=>e.id===n||e.data.node_id===n?{...e,data:{...e.data,status:"warning",error:o}}:e)),a(e=>[...e,{id:Math.random().toString(36),timestamp:r,type:"warning",message:`Node failed but workflow continues: ${s?.data?.label||n}. Error: ${o}`,nodeId:n}])}else"workflow_completed"===e.type?(n({title:"Workflow Completed",description:"All nodes executed successfully."}),a(e=>[...e,{id:Math.random().toString(36),timestamp:r,type:"success",message:"Workflow execution completed successfully."}])):"workflow_failed"===e.type?(n({title:"Workflow Failed",description:e.data.error,variant:"destructive"}),a(t=>[...t,{id:Math.random().toString(36),timestamp:r,type:"error",message:`Workflow execution failed. Error: ${e.data.error}`}])):"workflow_started"===e.type&&a(e=>[...e,{id:Math.random().toString(36),timestamp:r,type:"info",message:"Workflow execution started."}])},[t,n]);return{logs:r,setLogs:a,handleMessage:i}}(r,a,m),{isConnected:eR}=function(e,t){let[n,r]=(0,p.useState)(!1),a=(0,p.useRef)(null),o=(0,p.useRef)(t);return(0,p.useEffect)(()=>{o.current=t},[t]),(0,p.useEffect)(()=>{if(!e)return;a.current&&a.current.close();let t=new WebSocket(`ws://localhost:8000/api/v1/workflows/ws/${e}`);return a.current=t,t.onopen=()=>{aQ.wsLogger.debug("Connected",{executionId:e}),r(!0)},t.onmessage=e=>{try{let t=JSON.parse(e.data);o.current&&o.current(t)}catch(e){aQ.wsLogger.error("Failed to parse message",e)}},t.onclose=()=>{aQ.wsLogger.debug("Disconnected",{executionId:e}),r(!1)},t.onerror=e=>{aQ.wsLogger.error("Connection error",e)},()=>{t.close()}},[e]),{isConnected:n}}(eC,(0,p.useCallback)(e=>{eA(e),("workflow_completed"===e.type||"workflow_failed"===e.type)&&eS(!1)},[eA])),eP=(0,p.useCallback)(async()=>{if(n){eS(!0),e_([]),a(e=>e.map(e=>({...e,data:{...e.data,status:"pending"}})));try{let e=await eN.mutateAsync(n);eE(e.id),m({title:"Workflow Started",description:"The workflow execution has been queued."})}catch(e){eS(!1),m({title:"Execution Failed",description:"Failed to start workflow execution.",variant:"destructive"})}}},[n,eN,m,a,e_]),eO=(0,p.useCallback)(async(e,t,r={})=>{if(!n)return;eS(!0);let o=t||h().find(t=>t.id===e)?.data?.config||{};aQ.workflowLogger.debug(`Executing node ${e}`,{config:o,inputData:r}),a(t=>t.map(t=>t.id===e?{...t,data:{...t.data,status:"pending"}}:t));try{let t={input_data:r,config:o};aQ.workflowLogger.debug("Sending payload",t);let i=await ej.mutateAsync({workflowId:n,nodeId:e,inputData:t});a(t=>{let n=t.map(t=>t.id===e?{...t,data:{...t.data,status:"success",output:i,lastResult:i}}:t),r=n.find(t=>t.id===e);return r&&P(t=>t?.id===e?r:t),n}),eS(!1),m({title:"Node Executed",description:"The node execution completed successfully."})}catch(t){console.error("DEBUG: Node execution failed",t),a(n=>{let r=n.map(n=>n.id===e?{...n,data:{...n.data,status:"failed",error:t.message||"Failed to execute node."}}:n),a=r.find(t=>t.id===e);return a&&P(t=>t?.id===e?a:t),r}),eS(!1),m({title:"Node Execution Failed",description:t.message||"Failed to execute node.",variant:"destructive"})}},[n,ej,m,a,h]),{saveStatus:eT,isDirty:eD,isSaving:ez,handleSave:eL}=function({workflowId:e,nodes:t,edges:n,meta:r,execution:a,observability:o,aiMetadata:i,onSaveSuccess:s,onSaveError:l,autoSaveDelay:d=3e3,autoSaveEnabled:c=!0}){let[u,f]=(0,p.useState)("idle"),[h,m]=(0,p.useState)(!1),[g,x]=(0,p.useState)(""),y=(0,p.useRef)(null),v=(0,p.useRef)(null),b=(0,aY.useSaveWorkflow)(),w=(0,p.useCallback)(()=>JSON.stringify({nodes:t,edges:n,meta:r,execution:a,observability:o}),[t,n,r,a,o]);(0,p.useEffect)(()=>{let e=w();g&&e!==g&&(m(!0),f("idle"))},[t,n,r,a,o,g,w]);let N=(0,p.useCallback)(async(d=!1)=>{if(e){f("saving"),m(!1);try{let l=[],c=[],u=t.map(e=>{let t=e.data,n=t.node_name,r=e.position;return("unknown"===n||"default"===n)&&l.push({id:e.id,name:n}),r||c.push(e.id),{id:e.id,kind:t.type,ui:{label:t.label,position:r},spec:{...t.spec,node_name:n,config:t.config,settings:t.settings}}});if((l.length>0||c.length>0)&&d){let e={unknownTypeNodes:l,missingPositionNodes:c,sampleProblematicNodes:t.filter(e=>l.some(t=>t.id===e.id)||c.includes(e.id)).slice(0,3).map(e=>({id:e.id,type:e.type,hasPosition:!!e.position,dataKeys:Object.keys(e.data||{}),nodeName:e.data?.node_name,specNodeName:e.data?.spec?.node_name}))};console.warn("[Save] Skipping auto-save due to invalid node state:",e),f("idle");return}let h=n.map(e=>({id:e.id,source:e.source,target:e.target,sourceHandle:e.sourceHandle,targetHandle:e.targetHandle,condition:"string"==typeof e.label?e.label:void 0})),p={mode:"async",timeout_seconds:300,retry:{max_attempts:3,strategy:"exponential"},concurrency:1},m=a?{...p,...a,retry:{...p.retry,...a.retry||{}}}:p;await b.mutateAsync({workflow_id:e,meta:r||{id:e,name:"Workflow",status:"draft",version:"1.0.0",tags:[]},graph:{nodes:u,edges:h},execution:m,observability:o||{logging:!0,metrics:!0,tracing:!1},ai:i||{generated_by:"ui"}});let g=w();x(g),f("saved"),s?.(d),v.current&&clearTimeout(v.current),v.current=setTimeout(()=>{f("idle")},3e3)}catch(e){f("error"),m(!0),l?.(e)}}},[e,t,n,r,a,o,i,b,s,l,w]);return(0,p.useEffect)(()=>{if(h&&e&&c)return y.current&&clearTimeout(y.current),y.current=setTimeout(()=>{N(!0)},d),()=>{y.current&&clearTimeout(y.current)}},[h,e,N,d,c]),(0,p.useEffect)(()=>()=>{y.current&&clearTimeout(y.current),v.current&&clearTimeout(v.current)},[]),(0,p.useEffect)(()=>{!g&&t.length>0&&x(w())},[t,n,g,w]),{saveStatus:u,isDirty:h,isSaving:"saving"===u,handleSave:N}}({workflowId:n||"",nodes:r,edges:i,meta:z||void 0,execution:I||void 0,observability:H||void 0,aiMetadata:B||void 0,autoSaveEnabled:!0,autoSaveDelay:1500}),eI=(0,p.useCallback)(e=>{L(t=>t?{...t,...e}:t)},[]),e$=(0,p.useCallback)(async()=>{if(n)try{q?(await G.mutateAsync(n),W(!1),eI({status:"inactive"}),m({title:"Workflow Deactivated",description:"Triggers are now disabled."})):(await K.mutateAsync(n),W(!0),eI({status:"active"}),m({title:"Workflow Activated",description:"Triggers are now listening!"}))}catch(e){m({title:"Error",description:"Failed to toggle workflow status.",variant:"destructive"})}},[n,q,K,G,eI,m]);return{nodes:r,edges:i,onNodesChange:o,onEdgesChange:l,onConnect:Y,onNodeClick:Q,onNodeDoubleClick:J,onNodeDragStop:Z,onNodeDrag:()=>{},selectedNode:R,setSelectedNode:P,selectedNodes:em,onSelectionChange:ev,activeTab:S,setActiveTab:C,showChat:E,setShowChat:M,showNodePanel:_,setShowNodePanel:A,isDetailsModalOpen:O,setIsDetailsModalOpen:T,isActive:q,toggleActive:e$,workflowMeta:z,executionConfig:I,observabilityConfig:H,aiMetadata:B,updateWorkflowMeta:eI,loadV2Workflow:X,availableNodeTypes:g,onNodeUpdate:ee,onNodeDelete:et,handleAddNode:ei,undo:j,redo:k,copyNode:eb,pasteNode:ew,canUndo:x.index>0,canRedo:x.index<x.items.length-1,chatMessage:el,setChatMessage:ed,chatHistory:ef,isAiLoading:ec,handleSendChat:ep,fitView:d,zoomIn:c,zoomOut:u,handleExecute:eP,handleExecuteNode:eO,isExecuting:ek,logs:eM,setLogs:e_,splitEdge:en,setSplitEdge:er,pendingConnection:ea,setPendingConnection:eo,saveStatus:eT,isDirty:eD,isSaving:ez,handleSave:eL}}e.s(["useWorkflowBuilder",()=>aJ],89447);var a0=e.i(43476),a1=e.i(75254);let a2=(0,a1.default)("chevron-down",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);e.s(["ChevronDown",()=>a2],64659);var a5=e.i(46932),a3=e.i(88653),a4=e.i(47163),a8=e.i(7233);function a6({nodeId:e,handleId:t,position:n="right",color:r="#3b82f6",style:a}){let{getNode:o}=rP();return aK().some(n=>{if(n.source!==e)return!1;let r=n.sourceHandle||n.source_handle||n.condition,a=t?.toString().toLowerCase();if(!t)return!0;{if(r?.toString().toLowerCase()===a)return!0;let e="true"===t||"output"===t||"default"===t;return!r&&!!e}})?null:(0,a0.jsxs)(a5.motion.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},className:"absolute z-10 flex items-center pointer-events-none group/add",style:{top:a?.top||"50%",left:"100%",transform:"translateY(-50%)",height:"0px",...a},children:[(0,a0.jsx)("div",{className:"h-[2px] w-10 opacity-30 group-hover/node:opacity-60 transition-all duration-300",style:{background:`linear-gradient(to right, ${r} 0%, ${r} 60%, transparent 100%)`}}),(0,a0.jsx)(a5.motion.button,{whileHover:{scale:1.25},whileTap:{scale:.9},onClick:n=>{n.stopPropagation();let r=o(e);if(!r)return;let a=new CustomEvent("addNodeAfter",{detail:{source:e,handleId:t,x:r.position.x+(r.width||100)+40,y:r.position.y+(r.height||80)/2}});window.dispatchEvent(a)},className:"flex items-center justify-center w-6 h-6 rounded-full bg-card/95 backdrop-blur-xl border-2 border-border shadow-xl cursor-pointer pointer-events-auto transition-all group/plus active:shadow-inner -ml-2",style:{borderColor:`${r}40`},children:(0,a0.jsx)(a8.Plus,{className:"h-3.5 w-3.5 text-muted-foreground group-hover/plus:text-primary transition-colors"})})]})}function a9(e,t={},n={},r){let a=[],o={...n?.config,...t};if(!r)return{isValid:!0,warnings:[],hasCredentialIssue:!1,hasRequiredFieldIssue:!1};for(let e of r.inputs?.filter(e=>"credential"===e.type)||[])if(e.required){let t=o[e.name];t&&""!==t&&"dummy_cred"!==t&&null!==t||a.push({type:"credential_missing",field:e.name,message:`${e.label||"Credential"} is required`,severity:"warning"})}for(let e of r.inputs?.filter(e=>"credential"!==e.type&&e.required&&"node_name"!==e.name)||[]){let t=o[e.name];(null==t||""===t)&&a.push({type:"required_field_missing",field:e.name,message:`${e.label} is required`,severity:"warning"})}return{isValid:0===a.length,warnings:a,hasCredentialIssue:a.some(e=>"credential_missing"===e.type),hasRequiredFieldIssue:a.some(e=>"required_field_missing"===e.type)}}let a7=(0,p.memo)(({type:e,position:t,isConnectable:n=!0,color:r="#9ca3af",handleId:a,style:o})=>{let[i,s]=(0,p.useState)(!1),l={...t===h.Left&&{left:"-8px",top:"50%",transform:"translateY(-50%)"},...t===h.Right&&{right:"-8px",top:"50%",transform:"translateY(-50%)"},...t===h.Top&&{top:"-8px",left:"50%",transform:"translateX(-50%)"},...t===h.Bottom&&{bottom:"-8px",left:"50%",transform:"translateX(-50%)"},...o};return(0,a0.jsx)(n6,{type:e,position:t,id:a,isConnectable:n,className:"!w-4 !h-4 !bg-transparent !border-none z-50 p-0",style:l,onMouseEnter:()=>s(!0),onMouseLeave:()=>s(!1),children:(0,a0.jsxs)(a5.motion.div,{className:"w-full h-full relative flex items-center justify-center pointer-events-none",animate:i?"hover":"initial",initial:"initial",children:[(0,a0.jsx)(a5.motion.div,{variants:{initial:{scale:1,opacity:0},hover:{scale:2,opacity:.4,transition:{repeat:1/0,duration:1}}},className:"absolute inset-0 rounded-full",style:{backgroundColor:r}}),(0,a0.jsx)(a5.motion.div,{variants:{initial:{scale:1},hover:{scale:1.25}},className:"w-full h-full rounded-full border-2 border-white dark:border-slate-700 shadow-md relative z-10",style:{backgroundColor:r},children:(0,a0.jsx)("div",{className:"absolute top-0.5 left-0.5 w-[30%] h-[30%] bg-white rounded-full opacity-40"})})]})})});a7.displayName="NodeHandle";var oe=e.i(27612);let ot=(0,a1.default)("play",[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]]);e.s(["Play",()=>ot],31343);let on=(0,a1.default)("circle-pause",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"10",x2:"10",y1:"15",y2:"9",key:"c1nkhi"}],["line",{x1:"14",x2:"14",y1:"15",y2:"9",key:"h65svq"}]]);e.s(["PauseCircle",()=>on],1073);var or=e.i(31278);let oa=(0,p.memo)(({show:e,isRunning:t=!1,isPending:n=!1,isPaused:r=!1,onExecute:a,onTogglePause:o,onDelete:i,position:s="top"})=>(0,a0.jsx)(a3.AnimatePresence,{children:e&&(0,a0.jsxs)(a5.motion.div,{initial:{opacity:0,scale:.9,y:"top"===s?5:-5},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:"top"===s?5:-5},className:`${"top"===s?"absolute -top-12 left-1/2 -translate-x-1/2":"absolute -bottom-12 left-1/2 -translate-x-1/2"} flex items-center gap-1 p-1 bg-card/95 backdrop-blur-md border border-border rounded-lg shadow-xl z-50 min-w-max`,children:[a&&(0,a0.jsx)("button",{onClick:e=>{e.stopPropagation(),a()},disabled:t||n,className:"p-1.5 hover:bg-emerald-500/10 rounded-md transition-all group disabled:opacity-50",title:t?"Running...":"Run this node",children:t||n?(0,a0.jsx)(or.Loader2,{className:"h-3.5 w-3.5 text-muted-foreground animate-spin"}):(0,a0.jsx)(ot,{className:"h-3.5 w-3.5 text-muted-foreground group-hover:text-emerald-500 group-hover:fill-emerald-500"})}),o&&(0,a0.jsxs)(a0.Fragment,{children:[(0,a0.jsx)("div",{className:"w-[1px] h-4 bg-border/50"}),(0,a0.jsx)("button",{onClick:e=>{e.stopPropagation(),o()},className:`p-1.5 rounded-md transition-all group ${r?"hover:bg-emerald-500/10":"hover:bg-amber-500/10"}`,title:r?"Activate":"Deactivate",children:r?(0,a0.jsx)(ot,{className:"h-3.5 w-3.5 text-muted-foreground group-hover:text-emerald-500 group-hover:fill-emerald-500"}):(0,a0.jsx)(on,{className:"h-3.5 w-3.5 text-muted-foreground group-hover:text-amber-500"})})]}),i&&(0,a0.jsxs)(a0.Fragment,{children:[(0,a0.jsx)("div",{className:"w-[1px] h-4 bg-border/50"}),(0,a0.jsx)("button",{onClick:e=>{e.stopPropagation(),i()},className:"p-1.5 hover:bg-destructive/10 rounded-md transition-all group",title:"Delete",children:(0,a0.jsx)(oe.Trash2,{className:"h-3.5 w-3.5 text-muted-foreground group-hover:text-destructive"})})]})]})}));oa.displayName="NodeToolbar";var oo=e.i(78894);let oi=(0,p.memo)(({warnings:e,position:t="top-right",size:n="md"})=>{let[r,a]=(0,p.useState)(!1);return 0===e.length?null:(0,a0.jsx)("div",{className:`${{"top-right":"absolute -top-2 -right-2","top-left":"absolute -top-2 -left-2","bottom-right":"absolute -bottom-2 -right-2","bottom-left":"absolute -bottom-2 -left-2"}[t]} z-20`,onMouseEnter:()=>a(!0),onMouseLeave:()=>a(!1),children:(0,a0.jsxs)("div",{className:"relative",children:[(0,a0.jsx)("div",{className:`bg-amber-500 text-white ${{sm:"p-0.5",md:"p-1"}[n]} rounded-full shadow-lg cursor-help animate-pulse`,children:(0,a0.jsx)(oo.AlertTriangle,{className:"sm"===n?"h-3 w-3":"h-3.5 w-3.5"})}),(0,a0.jsx)(a3.AnimatePresence,{children:r&&(0,a0.jsxs)(a5.motion.div,{initial:{opacity:0,y:5,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:5,scale:.95},className:"absolute top-full left-1/2 -translate-x-1/2 mt-2 z-50",children:[(0,a0.jsxs)("div",{className:"bg-slate-900 text-white text-xs rounded-lg px-3 py-2 shadow-xl min-w-[160px] max-w-[220px]",children:[(0,a0.jsxs)("div",{className:"font-semibold text-amber-400 mb-1.5 flex items-center gap-1.5",children:[(0,a0.jsx)(oo.AlertTriangle,{className:"h-3 w-3"}),"Configuration Needed"]}),(0,a0.jsx)("ul",{className:"space-y-1 text-slate-300",children:e.map((e,t)=>(0,a0.jsxs)("li",{className:"flex items-start gap-1.5",children:[(0,a0.jsx)("span",{className:"text-amber-400 mt-0.5",children:""}),(0,a0.jsx)("span",{children:e.message})]},t))})]}),(0,a0.jsx)("div",{className:"absolute -top-1 left-1/2 -translate-x-1/2 w-2 h-2 bg-slate-900 rotate-45"})]})})]})})});oi.displayName="ValidationBadge";let os=(0,a1.default)("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);e.s(["Check",()=>os],43531);var ol=e.i(37727);let od=(0,p.memo)(({status:e,variant:t="dot",size:n="sm",className:r=""})=>{if("idle"===e)return null;let a={sm:{dot:"h-2 w-2",icon:"h-3 w-3"},md:{dot:"h-3 w-3",icon:"h-4 w-4"}};return"dot"===t?"running"===e||"pending"===e?(0,a0.jsxs)("span",{className:`relative flex ${a[n].dot} ${r}`,children:[(0,a0.jsx)("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-primary opacity-75"}),(0,a0.jsx)("span",{className:"relative inline-flex rounded-full h-full w-full bg-primary"})]}):(0,a0.jsx)("div",{className:`${a[n].dot} rounded-full ${{success:"bg-emerald-500",failed:"bg-destructive",warning:"bg-amber-500",idle:"bg-muted",pending:"bg-primary",running:"bg-primary"}[e]} shadow-sm ${r}`}):"icon"===t?"running"===e||"pending"===e?(0,a0.jsx)(or.Loader2,{className:`${a[n].icon} animate-spin text-primary ${r}`}):"success"===e?(0,a0.jsx)(os,{className:`${a[n].icon} text-emerald-500 ${r}`}):"failed"===e?(0,a0.jsx)(ol.X,{className:`${a[n].icon} text-destructive ${r}`}):null:"bar"===t?(0,a0.jsx)("div",{className:`h-1 w-full ${{success:"bg-emerald-500",failed:"bg-destructive",warning:"bg-amber-500",running:"bg-primary",pending:"bg-primary",idle:"bg-transparent"}[e]} ${r}`}):null});od.displayName="StatusIndicator";let oc=(0,p.memo)(({color:e,borderRadius:t="14px",isRunning:n})=>n?(0,a0.jsx)("div",{className:"absolute inset-[-2px] overflow-hidden z-0 pointer-events-none",style:{borderRadius:t},children:(0,a0.jsx)(a5.motion.div,{className:"absolute inset-[-250%]",animate:{rotate:[0,360]},transition:{duration:3,repeat:1/0,ease:"linear"},style:{background:`conic-gradient(from 0deg, transparent 0deg, ${e} 15deg, transparent 30deg, ${e} 180deg, transparent 195deg)`}})}):null);oc.displayName="RunningBorder";let ou=(0,a1.default)("file-text",[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);e.s(["FileText",()=>ou],78583);let of=(0,p.memo)(({notes:e,displayInFlow:t=!1,maxWidth:n="200px",marginTop:r="mt-3"})=>t&&e?(0,a0.jsx)("div",{className:`absolute top-full ${r} left-1/2 -translate-x-1/2 w-full min-w-[120px] z-0`,style:{maxWidth:n},children:(0,a0.jsx)("div",{className:"bg-amber-50/50 dark:bg-amber-900/20 backdrop-blur-sm border border-amber-200/50 dark:border-amber-700/30 rounded-lg p-2 shadow-sm animate-in fade-in slide-in-from-top-1 duration-300",children:(0,a0.jsxs)("div",{className:"flex items-start gap-1.5",children:[(0,a0.jsx)(ou,{className:"w-2.5 h-2.5 text-amber-500/50 mt-0.5 shrink-0"}),(0,a0.jsx)("p",{className:"text-[9px] text-amber-900/70 dark:text-amber-100/50 font-medium leading-relaxed italic line-clamp-3",children:e})]})})}):null);of.displayName="NodeNotes";let oh=(0,p.memo)(e=>{let{data:t,isConnectable:n,selected:r,id:a,config:o}=e,[i,s]=(0,p.useState)(!1),[l,d]=(0,p.useState)(!1),[c,u]=(0,p.useState)(!1),{setNodes:f,setEdges:m}=rP(),{toast:g}=(0,aZ.useToast)(),{data:x=[]}=(0,aY.useNodeTypes)(),y=x.find(e=>e.name===t.node_name),v="running"===t.status,b="success"===t.status,w="failed"===t.status,N="pending"===t.status,j=(0,p.useMemo)(()=>a9(t.node_name||"",t.config||{},t.spec||{},y),[t.node_name,t.config,t.spec,y]),k=o.icon,S=async()=>{t.executeNode?await t.executeNode(a):g({title:"Error",description:"Execute function not available",variant:"destructive"})};return(0,a0.jsxs)("div",{className:"relative",onMouseEnter:()=>s(!0),onMouseLeave:()=>s(!1),children:[(0,a0.jsx)(oa,{show:i,isRunning:v,isPending:N,isPaused:c,onExecute:S,onTogglePause:()=>u(!c),onDelete:()=>{f(e=>e.filter(e=>e.id!==a)),m(e=>e.filter(e=>e.source!==a&&e.target!==a))}}),(0,a0.jsxs)("div",{className:"flex flex-col items-center gap-2 group/node",children:[(0,a0.jsxs)("div",{className:"relative",children:[(0,a0.jsxs)("div",{className:(0,a4.cn)("relative w-20 h-20 bg-card/90 backdrop-blur-xl border-2 transition-all duration-300 overflow-hidden",r?"border-primary ring-4 ring-primary/20":"border-border hover:border-border-strong",b&&"border-emerald-500 ring-4 ring-emerald-500/10",w&&"border-destructive ring-4 ring-destructive/10",v?"border-primary shadow-[0_0_20px_rgba(59,130,246,0.3)]":"shadow-xl"),style:{borderRadius:"44px 12px 12px 44px",background:"linear-gradient(135deg, hsl(var(--card)) 0%, hsl(var(--card)/0.95) 100%)"},children:[(0,a0.jsx)(oc,{color:o.color,borderRadius:"46px 14px 14px 46px",isRunning:v}),(0,a0.jsxs)("div",{className:(0,a4.cn)("w-full h-full flex items-center justify-center relative overflow-hidden z-10 bg-card/90",v&&"m-[1px] w-[calc(100%-2px)] h-[calc(100%-2px)]"),style:{borderRadius:"42px 10px 10px 42px"},children:[(0,a0.jsx)("div",{className:"absolute inset-0 opacity-[0.03]",style:{backgroundColor:o.color}}),(0,a0.jsx)(a5.motion.div,{animate:v?{scale:[1,1.1,1]}:{},transition:{duration:1.5,repeat:1/0},children:(0,a0.jsx)(k,{className:"h-9 w-9",style:{color:o.color}})})]}),(b||w)&&(0,a0.jsx)("div",{className:"absolute -top-1 -right-1 flex items-center justify-center",children:(0,a0.jsx)(od,{status:t.status||"idle"})}),o.detailsContent&&(0,a0.jsx)("button",{onClick:e=>{e.stopPropagation(),d(!l)},className:"absolute bottom-1.5 left-2 p-1 rounded-full hover:bg-background/20 transition-colors z-20",children:(0,a0.jsx)(a2,{className:(0,a4.cn)("h-3 w-3 text-muted-foreground transition-transform duration-300",l&&"rotate-180")})})]}),!j.isValid&&!v&&!b&&(0,a0.jsx)(oi,{warnings:j.warnings,position:"top-right",size:"sm"}),(0,a0.jsx)(a7,{type:"source",position:h.Right,handleId:"output",isConnectable:n,color:o.color}),(0,a0.jsx)(a6,{nodeId:a,color:o.color})]}),(0,a0.jsxs)("div",{className:"flex flex-col items-center px-1 max-w-[120px]",children:[(0,a0.jsx)("span",{className:"text-[11px] font-bold text-foreground text-center line-clamp-1",children:t.label}),t.node_name&&(0,a0.jsx)("span",{className:"text-[9px] text-muted-foreground uppercase tracking-wider font-mono opacity-60",children:t.node_name.split(".")[0]})]}),(0,a0.jsx)(a3.AnimatePresence,{children:l&&o.detailsContent&&(0,a0.jsx)(a5.motion.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"w-full max-w-[140px] mt-2 overflow-hidden",children:(0,a0.jsx)("div",{className:"p-2.5 rounded-xl border border-border bg-card/50 backdrop-blur-sm shadow-sm space-y-2",children:o.detailsContent(t)})})})]}),(0,a0.jsx)(of,{notes:t.settings?.notes,displayInFlow:t.settings?.displayNoteInFlow,marginTop:"mt-10"})]})});oh.displayName="BaseTriggerNode";let op=(0,a1.default)("copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);e.s(["Copy",()=>op],74886);let om=({className:e,style:t})=>(0,a0.jsx)("svg",{className:e,style:t,viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:(0,a0.jsx)("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413Z"})}),og=({className:e,style:t})=>(0,a0.jsxs)("svg",{className:e,style:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",xmlns:"http://www.w3.org/2000/svg",children:[(0,a0.jsx)("rect",{x:"2",y:"4",width:"20",height:"16",rx:"2"}),(0,a0.jsx)("path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7"})]}),ox=({data:e})=>{let[t,n]=(0,p.useState)(!1);return(0,a0.jsxs)("div",{className:"space-y-3",children:[e.config?.phone_number_id&&(0,a0.jsxs)("div",{children:[(0,a0.jsx)("div",{className:"text-[9px] text-muted-foreground uppercase tracking-wider mb-1",children:"Phone ID"}),(0,a0.jsx)("div",{className:"text-[10px] font-mono bg-background/50 rounded px-1.5 py-1 border border-border/50 truncate",children:e.config.phone_number_id})]}),e.config?.webhook_url&&(0,a0.jsxs)("div",{children:[(0,a0.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,a0.jsx)("span",{className:"text-[9px] text-muted-foreground uppercase tracking-wider",children:"Webhook URL"}),(0,a0.jsx)("button",{onClick:t=>{t.stopPropagation(),e.config?.webhook_url&&(navigator.clipboard.writeText(e.config.webhook_url),n(!0),setTimeout(()=>n(!1),2e3))},className:"p-1 hover:bg-emerald-500/10 rounded transition-colors",children:t?(0,a0.jsx)(os,{className:"h-3 w-3 text-emerald-500"}):(0,a0.jsx)(op,{className:"h-3 w-3 text-muted-foreground"})})]}),(0,a0.jsx)("div",{className:"text-[10px] font-mono bg-background/50 rounded px-1.5 py-1 border border-border/50 truncate",children:e.config.webhook_url})]})]})},oy=(0,p.memo)(e=>(0,a0.jsx)(oh,{...e,config:{icon:om,color:"#25D366",detailsContent:e=>(0,a0.jsx)(ox,{data:e}),isConnected:e=>!!(e.config?.phone_number_id&&e.config?.verify_token)}}));oy.displayName="WhatsAppTriggerNode",e.s(["WhatsAppTriggerNode",0,oy],20506);let ov=({data:e})=>(0,a0.jsxs)("div",{className:"space-y-3",children:[e.config?.email_address&&(0,a0.jsxs)("div",{children:[(0,a0.jsx)("div",{className:"text-[9px] text-muted-foreground uppercase tracking-wider mb-1",children:"Email Address"}),(0,a0.jsx)("div",{className:"text-[10px] font-mono bg-background/50 rounded px-1.5 py-1 border border-border/50 truncate",children:e.config.email_address})]}),e.config?.imap_server&&(0,a0.jsxs)("div",{children:[(0,a0.jsx)("div",{className:"text-[9px] text-muted-foreground uppercase tracking-wider mb-1",children:"IMAP Server"}),(0,a0.jsxs)("div",{className:"text-[10px] font-mono bg-background/50 rounded px-1.5 py-1 border border-border/50 truncate",children:[e.config.imap_server,":",e.config.port||993]})]})]}),ob=(0,p.memo)(e=>(0,a0.jsx)(oh,{...e,config:{icon:og,color:"#3b82f6",detailsContent:e=>(0,a0.jsx)(ov,{data:e}),isConnected:e=>!!(e.config?.email_address&&e.config?.imap_server)}}));ob.displayName="EmailTriggerNode",e.s(["EmailTriggerNode",0,ob],38869);var ow=e.i(39312),oN=e.i(63488);let oj=(0,a1.default)("webhook",[["path",{d:"M18 16.98h-5.99c-1.1 0-1.95.94-2.48 1.9A4 4 0 0 1 2 17c.01-.7.2-1.4.57-2",key:"q3hayz"}],["path",{d:"m6 17 3.13-5.78c.53-.97.1-2.18-.5-3.1a4 4 0 1 1 6.89-4.06",key:"1go1hn"}],["path",{d:"m12 6 3.13 5.73C15.66 12.7 16.9 13 18 13a4 4 0 0 1 0 8",key:"qlwsc0"}]]);e.s(["Webhook",()=>oj],53305);let ok=(0,a1.default)("timer",[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]]);e.s(["Timer",()=>ok],17835);let oS=(0,a1.default)("rss",[["path",{d:"M4 11a9 9 0 0 1 9 9",key:"pv89mb"}],["path",{d:"M4 4a16 16 0 0 1 16 16",key:"k0647b"}],["circle",{cx:"5",cy:"19",r:"1",key:"bfqh0e"}]]);e.s(["Rss",()=>oS],83123);let oC=(0,p.memo)(e=>{let t,n,{data:r}=e,a={icon:(t=r.node_name||"",({"schedule.cron":ok,"webhook.receive":oj,"email.receive":oN.Mail,"whatsapp.receive":ow.Zap,"rss.read":oS,"manual.trigger":ow.Zap})[t]||ow.Zap),color:(n=r.node_name?.toLowerCase()||"").includes("schedule")||n.includes("cron")?"#10b981":n.includes("webhook")?"#f59e0b":n.includes("email")||n.includes("mail")?"#f97316":n.includes("trigger")||n.includes("manual")?"#f43f5e":"#ef4444"};return(0,a0.jsx)(oh,{...e,config:a})});oC.displayName="GenericTriggerNode",e.s(["GenericTriggerNode",0,oC],778),e.s([],39412);var oE=e.i(14764);let oM=(0,p.memo)(e=>{let{data:t,isConnectable:n,selected:r,id:a,config:o}=e,[i,s]=(0,p.useState)(!1),[l,d]=(0,p.useState)(!1),[c,u]=(0,p.useState)(!1),{setNodes:f,setEdges:m}=rP(),{toast:g}=(0,aZ.useToast)(),{data:x=[]}=(0,aY.useNodeTypes)(),y=x.find(e=>e.name===t.node_name),v="running"===t.status,b="success"===t.status,w="failed"===t.status,N="pending"===t.status,j=(0,p.useMemo)(()=>a9(t.node_name||"",t.config||{},t.spec||{},y),[t.node_name,t.config,t.spec,y]),k=o.icon,S=async()=>{t.executeNode?await t.executeNode(a):g({title:"Error",description:"Execute function not available",variant:"destructive"})};return(0,a0.jsxs)("div",{className:"relative",onMouseEnter:()=>s(!0),onMouseLeave:()=>s(!1),children:[(0,a0.jsx)(oa,{show:i,isRunning:v,isPending:N,isPaused:c,onExecute:S,onTogglePause:()=>u(!c),onDelete:()=>{f(e=>e.filter(e=>e.id!==a)),m(e=>e.filter(e=>e.source!==a&&e.target!==a))}}),(0,a0.jsxs)("div",{className:"flex flex-col items-center gap-2 group/node",children:[(0,a0.jsxs)("div",{className:"relative",children:[(0,a0.jsxs)("div",{className:(0,a4.cn)("relative w-20 h-20 bg-card/90 backdrop-blur-xl border-2 transition-all duration-300 shadow-xl overflow-hidden",r?"border-primary ring-4 ring-primary/20":"border-border hover:border-border-strong",c&&"opacity-60",v&&"border-primary shadow-[0_0_20px_rgba(59,130,246,0.3)]",b&&"border-emerald-500 ring-4 ring-emerald-500/10",w&&"border-destructive ring-4 ring-destructive/10"),style:{borderRadius:"24px",background:"linear-gradient(145deg, hsl(var(--card)) 0%, hsl(var(--card)/0.95) 100%)"},children:[(0,a0.jsx)(oc,{color:o.color,borderRadius:"26px",isRunning:v}),(0,a0.jsxs)("div",{className:"w-full h-full flex items-center justify-center relative z-10",children:[(0,a0.jsx)("div",{className:"absolute inset-0 opacity-[0.05]",style:{backgroundColor:o.color}}),(0,a0.jsx)(k,{className:"h-9 w-9 relative z-10",style:{color:o.color}})]}),(0,a0.jsxs)("div",{className:"absolute top-2 right-2",children:[(0,a0.jsx)(od,{status:t.status||"idle"}),c&&(0,a0.jsx)("div",{className:"h-2 w-2 rounded-full bg-amber-500 shadow-sm"})]}),o.detailsContent&&(0,a0.jsx)("button",{onClick:e=>{e.stopPropagation(),d(!l)},className:"absolute -bottom-1 left-1/2 -translate-x-1/2 p-1 bg-background border border-border rounded-full shadow-sm hover:bg-accent transition-colors z-20",children:(0,a0.jsx)(a2,{className:(0,a4.cn)("h-3 w-3 text-muted-foreground transition-transform duration-300",l&&"rotate-180")})})]}),!j.isValid&&!v&&!b&&(0,a0.jsx)(oi,{warnings:j.warnings}),(0,a0.jsx)(a7,{type:"target",position:h.Left,handleId:"input",isConnectable:n,color:"#9ca3af"}),(0,a0.jsx)(a7,{type:"source",position:h.Right,handleId:"output",isConnectable:n,color:o.color}),(0,a0.jsx)(a6,{nodeId:a,color:o.color})]}),(0,a0.jsxs)("div",{className:"flex flex-col items-center px-1 max-w-[120px]",children:[(0,a0.jsx)("span",{className:"text-[11px] font-bold text-foreground text-center line-clamp-1 group-hover:text-primary transition-colors",children:t.label}),(0,a0.jsx)("span",{className:"text-[9px] text-muted-foreground uppercase tracking-widest font-mono opacity-50",children:t.node_name?.split(".")[0]||"Action"})]}),(0,a0.jsx)(a3.AnimatePresence,{children:l&&o.detailsContent&&(0,a0.jsx)(a5.motion.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"w-full max-w-[140px] mt-1 overflow-hidden",children:(0,a0.jsx)("div",{className:"p-2.5 rounded-xl border border-border bg-card/50 backdrop-blur-sm shadow-sm",children:o.detailsContent(t)})})})]})]})});oM.displayName="BaseActionNode";let o_=(0,p.memo)(e=>{let t={icon:oN.Mail,color:"#3b82f6",detailsContent:e=>(0,a0.jsxs)("div",{className:"space-y-1.5",children:[(0,a0.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,a0.jsx)(oE.Send,{className:"h-3 w-3 text-blue-500"}),(0,a0.jsx)("span",{className:"text-[10px] text-muted-foreground uppercase font-mono tracking-tight",children:"Recipients"})]}),(0,a0.jsx)("div",{className:"text-xs font-medium text-foreground truncate pl-4",children:e.config?.to||"No recipient set"}),e.config?.subject&&(0,a0.jsxs)("div",{className:"text-[10px] text-muted-foreground italic truncate pl-4",children:["Re: ",e.config.subject]})]})};return(0,a0.jsx)(oM,{...e,config:t})});o_.displayName="EmailActionNode",e.s(["EmailActionNode",0,o_],95107);var oA=e.i(39616);let oR=(0,a1.default)("bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]);e.s(["Bot",()=>oR],31245);let oP=(0,a1.default)("message-square",[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]]);e.s(["MessageSquare",()=>oP],86311);let oO=(0,a1.default)("database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);e.s(["Database",()=>oO],58041);let oT=(0,a1.default)("globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);e.s(["Globe",()=>oT],48256);let oD=(0,a1.default)("code",[["path",{d:"m16 18 6-6-6-6",key:"eg8j8"}],["path",{d:"m8 6-6 6 6 6",key:"ppft3o"}]]);e.s(["Code",()=>oD],58472);let oz=(0,a1.default)("brain",[["path",{d:"M12 18V5",key:"adv99a"}],["path",{d:"M15 13a4.17 4.17 0 0 1-3-4 4.17 4.17 0 0 1-3 4",key:"1e3is1"}],["path",{d:"M17.598 6.5A3 3 0 1 0 12 5a3 3 0 1 0-5.598 1.5",key:"1gqd8o"}],["path",{d:"M17.997 5.125a4 4 0 0 1 2.526 5.77",key:"iwvgf7"}],["path",{d:"M18 18a4 4 0 0 0 2-7.464",key:"efp6ie"}],["path",{d:"M19.967 17.483A4 4 0 1 1 12 18a4 4 0 1 1-7.967-.517",key:"1gq6am"}],["path",{d:"M6 18a4 4 0 0 1-2-7.464",key:"k1g0md"}],["path",{d:"M6.003 5.125a4 4 0 0 0-2.526 5.77",key:"q97ue3"}]]),oL=(0,a1.default)("share-2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);e.s(["Share2",()=>oL],62031),(0,a1.default)("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]]),(0,a1.default)("upload",[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]]);let oI=(0,a1.default)("square-pen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);e.s(["Edit",()=>oI],88511);let o$=(0,a1.default)("shuffle",[["path",{d:"m18 14 4 4-4 4",key:"10pe0f"}],["path",{d:"m18 2 4 4-4 4",key:"pucp1d"}],["path",{d:"M2 18h1.973a4 4 0 0 0 3.3-1.7l5.454-8.6a4 4 0 0 1 3.3-1.7H22",key:"1ailkh"}],["path",{d:"M2 6h1.972a4 4 0 0 1 3.6 2.2",key:"km57vx"}],["path",{d:"M22 18h-6.041a4 4 0 0 1-3.3-1.8l-.359-.45",key:"os18l9"}]]);e.s(["Shuffle",()=>o$],96421);var oH=e.i(83086);let oF=({className:e,style:t})=>(0,a0.jsxs)("svg",{viewBox:"0 0 48 48",className:e,style:t,fill:"currentColor",children:[(0,a0.jsx)("path",{fill:"#0F9D58",d:"M37,45H11c-1.657,0-3-1.343-3-3V6c0-1.657,1.343-3,3-3h19l10,10v29C40,43.657,38.657,45,37,45z"}),(0,a0.jsx)("path",{fill:"#C8E6C9",d:"M40 13L30 13 30 3z"}),(0,a0.jsx)("path",{fill:"#E8F5E9",d:"M31,23H17c-1.105,0-2,0.895-2,2v2c0,1.105,0.895,2,2,2h14c1.105,0,2-0.895,2-2v-2C33,23.895,32.105,23,31,23z"}),(0,a0.jsx)("rect",{x:"15",y:"25",width:"18",height:"2",fill:"#0F9D58",opacity:"0.3"}),(0,a0.jsx)("path",{fill:"#E8F5E9",d:"M31,31H17c-1.105,0-2,0.895-2,2v2c0,1.105,0.895,2,2,2h14c1.105,0,2-0.895,2-2v-2C33,31.895,32.105,31,31,31z"}),(0,a0.jsx)("rect",{x:"15",y:"33",width:"18",height:"2",fill:"#0F9D58",opacity:"0.3"}),(0,a0.jsx)("path",{fill:"#E8F5E9",d:"M31,15H17c-1.105,0-2,0.895-2,2v2c0,1.105,0.895,2,2,2h14c1.105,0,2-0.895,2-2v-2C33,15.895,32.105,15,31,15z"}),(0,a0.jsx)("rect",{x:"15",y:"17",width:"18",height:"2",fill:"#0F9D58",opacity:"0.3"})]}),oB=({className:e,style:t})=>(0,a0.jsxs)("svg",{viewBox:"0 0 32 32",className:e,style:t,fill:"currentColor",children:[(0,a0.jsx)("path",{fill:"#25D366",d:"M16 2C8.27 2 2 8.27 2 16c0 2.5.65 4.88 1.83 6.95L3 29l6.23-1.63A13.9 13.9 0 0016 30c7.73 0 14-6.27 14-14S23.73 2 16 2zm0 25.5c-2.3 0-4.5-.6-6.42-1.74l-.46-.28-4.75 1.25 1.27-4.63-.3-.48A11.45 11.45 0 014.5 16C4.5 9.66 9.66 4.5 16 4.5S27.5 9.66 27.5 16 22.34 27.5 16 27.5z"}),(0,a0.jsx)("path",{fill:"#FFFFFF",d:"M22.54 18.06c-.36-.18-2.13-1.05-2.46-1.17-.33-.12-.57-.18-.81.18-.24.36-.93 1.17-1.14 1.41-.21.24-.42.27-.78.09-1.85-.92-3.08-1.58-4.29-3.66-.15-.26-.01-.39.16-.57.16-.16.36-.42.54-.63.18-.21.24-.36.36-.6.12-.24.06-.45-.03-.63-.09-.18-.81-1.95-1.11-2.67-.29-.7-.59-.6-.81-.61-.21-.01-.45-.01-.69-.01-.24 0-.63.09-.96.45-.33.36-1.26 1.23-1.26 3s1.29 3.48 1.47 3.72c.18.24 2.54 3.88 6.15 5.44.86.37 1.53.6 2.06.77 1.37.44 2.62.38 3.63.23.86-.13 2.13-.87 2.43-1.71.3-.84.3-1.56.21-1.71-.09-.15-.33-.24-.69-.42z"})]}),oV=({className:e,style:t})=>(0,a0.jsxs)("svg",{viewBox:"0 0 32 32",className:e,style:t,fill:"currentColor",children:[(0,a0.jsx)("path",{fill:"#3776AB",d:"M16 2.5c2.9 0 3.2.3 4.4.5 1.2.2 2.6.8 2.6 3.6v.9h-5.4v1.8h7.9c.9 0 2.2.4 2.7 1.2.6.9.5 2.5.5 2.5l-.1 4.3c-.1 1.7-1.3 3-3 3h-2.1v-2.7c0-1.7-1.4-3.1-3.2-3.1H14c-1.8 0-3.1 1.4-3.1 3.1v2.7H8.8c-1.7 0-3.1-1.4-3.1-3.1v-4.3c0-1.8.4-2.8.9-3.6.6-.8 2-1.2 2.7-1.2h.5V5.5c-1.7 0-3.1-1.3-3.1-3s1.4-3 3.1-3H16zm-5 1.5c-.8 0-1.5.7-1.5 1.5s.7 1.5 1.5 1.5 1.5-.7 1.5-1.5-.7-1.5-1.5-1.5z"}),(0,a0.jsx)("path",{fill:"#FFD43B",d:"M16 29.5c-2.9 0-3.2-.3-4.4-.5-1.2-.2-2.6-.8-2.6-3.6v-.9h5.4v-1.8H6.5c-.9 0-2.2-.4-2.7-1.2-.6-.9-.5-2.5-.5-2.5l.1-4.3c.1-1.7 1.3-3 3-3h2.1v2.7c0 1.7 1.4 3.1 3.2 3.1h6.4c1.8 0 3.1-1.4 3.1-3.1v-2.7h2.1c1.7 0 3.1 1.4 3.1 3.1v4.3c0 1.8-.4 2.8-.9 3.6-.6.8-2 1.2-2.7 1.2h-.5v2.7c1.7 0 3.1 1.3 3.1 3s-1.4 3-3.1 3H16zm5-1.5c.8 0 1.5-.7 1.5-1.5s-.7-1.5-1.5-1.5-1.5.7-1.5 1.5.7 1.5 1.5 1.5z"})]});e.s(["LogoGoogleSheets",0,oF,"LogoPython",0,oV,"LogoWhatsApp",0,oB],11761),ow.Zap,oA.Settings,oN.Mail,oE.Send,oe.Trash2;let oq=(0,p.memo)(e=>{let t,n,{data:r}=e,a={icon:(t=r.node_name||"",({"data.set":oI,"data.transform":o$,"slack.send":oP,"discord.send":oP,"whatsapp.send":oB,"email.send":oN.Mail,"http.request":oT,"ai.llm":oH.Sparkles,"ai.agent":oR,"data.store":oO,"google_sheets.read":oF,"google_sheets.write":oF})[t]||oA.Settings),color:(n=r.node_name?.toLowerCase()||"").includes("ai")?"#8b5cf6":n.includes("discord")?"#5865F2":n.includes("whatsapp")||n.includes("slack")?"#25d366":n.includes("email")||n.includes("mail")?"#3b82f6":n.includes("db")||n.includes("database")||n.includes("google_sheets")?"#f59e0b":"#3b82f6"};return(0,a0.jsx)(oM,{...e,config:a})});oq.displayName="GenericActionNode",e.s(["GenericActionNode",0,oq],55514);let oW=({className:e,style:t})=>(0,a0.jsxs)("svg",{viewBox:"0 0 48 48",className:e,style:t,fill:"currentColor",children:[(0,a0.jsx)("path",{fill:"#0F9D58",d:"M37,45H11c-1.657,0-3-1.343-3-3V6c0-1.657,1.343-3,3-3h19l10,10v29C40,43.657,38.657,45,37,45z"}),(0,a0.jsx)("path",{fill:"#C8E6C9",d:"M40 13L30 13 30 3z"}),(0,a0.jsx)("path",{fill:"#E8F5E9",d:"M31,23H17c-1.105,0-2,0.895-2,2v2c0,1.105,0.895,2,2,2h14c1.105,0,2-0.895,2-2v-2C33,23.895,32.105,23,31,23z"}),(0,a0.jsx)("rect",{x:"15",y:"25",width:"18",height:"2",fill:"#0F9D58",opacity:"0.3"}),(0,a0.jsx)("path",{fill:"#E8F5E9",d:"M31,31H17c-1.105,0-2,0.895-2,2v2c0,1.105,0.895,2,2,2h14c1.105,0,2-0.895,2-2v-2C33,31.895,32.105,31,31,31z"}),(0,a0.jsx)("rect",{x:"15",y:"33",width:"18",height:"2",fill:"#0F9D58",opacity:"0.3"}),(0,a0.jsx)("path",{fill:"#E8F5E9",d:"M31,15H17c-1.105,0-2,0.895-2,2v2c0,1.105,0.895,2,2,2h14c1.105,0,2-0.895,2-2v-2C33,15.895,32.105,15,31,15z"}),(0,a0.jsx)("rect",{x:"15",y:"17",width:"18",height:"2",fill:"#0F9D58",opacity:"0.3"})]}),oK=(0,p.memo)(e=>(0,a0.jsx)(oM,{...e,config:{icon:oW,color:"#0F9D58",detailsContent:e=>(0,a0.jsxs)("div",{className:"space-y-1",children:[(0,a0.jsx)("div",{className:"text-[10px] text-muted-foreground uppercase font-mono",children:"Action"}),(0,a0.jsx)("div",{className:"text-xs font-medium text-emerald-600 dark:text-emerald-400",children:e.config?.action==="write"?"Write Data":e.config?.action==="append"?"Append Row":"Read Sheets"})]})}}));oK.displayName="GoogleSheetsNode",e.s(["GoogleSheetsNode",0,oK],55466);let oG=(0,a1.default)("terminal",[["path",{d:"M12 19h8",key:"baeox8"}],["path",{d:"m4 17 6-6-6-6",key:"1yngyt"}]]);e.s(["Terminal",()=>oG],68054);let oX=(0,a1.default)("file-code",[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 12.5 8 15l2 2.5",key:"1tg20x"}],["path",{d:"m14 12.5 2 2.5-2 2.5",key:"yinavb"}]]),oU=(0,p.memo)(e=>(0,a0.jsx)(oM,{...e,config:{icon:oX,color:"#ffde57",detailsContent:e=>(0,a0.jsxs)("div",{className:"space-y-1",children:[(0,a0.jsx)("div",{className:"text-[10px] text-muted-foreground uppercase font-mono",children:"Environment"}),(0,a0.jsxs)("div",{className:"text-xs font-medium text-amber-600 dark:text-amber-400 flex items-center gap-1",children:[(0,a0.jsx)(oG,{className:"h-3 w-3"})," Python 3.10"]})]})}}));oU.displayName="PythonCodeNode",e.s(["PythonCodeNode",0,oU],17940),e.s([],4677);let oY=(0,a1.default)("split",[["path",{d:"M16 3h5v5",key:"1806ms"}],["path",{d:"M8 3H3v5",key:"15dfkv"}],["path",{d:"M12 22v-8.3a4 4 0 0 0-1.172-2.872L3 3",key:"1qrqzj"}],["path",{d:"m15 9 6-6",key:"ko1vev"}]]);e.s(["Split",()=>oY],61263);let oZ=(0,a1.default)("git-branch",[["line",{x1:"6",x2:"6",y1:"3",y2:"15",key:"17qcm7"}],["circle",{cx:"18",cy:"6",r:"3",key:"1h7g24"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M18 9a9 9 0 0 1-9 9",key:"n2h4wq"}]]);e.s(["GitBranch",()=>oZ],55716),(0,a1.default)("funnel",[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]]),(0,a1.default)("list-filter",[["path",{d:"M2 5h20",key:"1fs1ex"}],["path",{d:"M6 12h12",key:"8npq4p"}],["path",{d:"M9 19h6",key:"456am0"}]]);let oQ=(0,a1.default)("git-merge",[["circle",{cx:"18",cy:"18",r:"3",key:"1xkwt0"}],["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["path",{d:"M6 21V9a9 9 0 0 0 9 9",key:"7kw0sc"}]]);e.s(["GitMerge",()=>oQ],61735);let oJ=(0,a1.default)("rotate-cw",[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]]);e.s(["RotateCw",()=>oJ],91810);var o0=e.i(3116),o1=e.i(21218);let o2=(0,p.memo)(e=>{let{data:t,isConnectable:n,selected:r,id:a,config:o={}}=e,[i,s]=(0,p.useState)(!1),[l,d]=(0,p.useState)(!1),[c,u]=(0,p.useState)(!1),{setNodes:f,setEdges:m}=rP(),{data:g=[]}=(0,aY.useNodeTypes)(),x=g.find(e=>e.name===t.node_name),y=a9(t.node_name||"",t.config||{},t.spec||{},x),v=o.icon||oY,b=o.color||"#8b5cf6",w=t.node_name?.includes("condition")||t.node_name?.includes("if")||t.node_name?.includes("switch")||t.node_name?.includes("parallel"),N="running"===t.status,j="pending"===t.status;return(0,a0.jsxs)("div",{className:"relative",onMouseEnter:()=>s(!0),onMouseLeave:()=>s(!1),children:[(0,a0.jsx)(oa,{show:i,isRunning:N,isPending:j,isPaused:c,onExecute:()=>{},onTogglePause:()=>u(!c),onDelete:()=>{f(e=>e.filter(e=>e.id!==a)),m(e=>e.filter(e=>e.source!==a&&e.target!==a))}}),(0,a0.jsx)(oi,{warnings:y.warnings}),(0,a0.jsxs)("div",{className:"flex flex-col items-center gap-2 group/node",children:[(0,a0.jsxs)("div",{className:"relative",children:[(0,a0.jsxs)("div",{className:(0,a4.cn)("relative w-24 h-24 bg-card/90 backdrop-blur-xl border-2 transition-all duration-300 shadow-xl overflow-hidden",r?"border-primary ring-4 ring-primary/20":"border-border hover:border-border-strong",c&&"opacity-60",N&&"border-primary shadow-[0_0_25px_rgba(139,92,246,0.3)]"),style:{borderRadius:"28px",background:"linear-gradient(135deg, hsl(var(--card)) 0%, hsl(var(--card)/0.95) 100%)"},children:[(0,a0.jsx)(oc,{color:b,borderRadius:"30px",isRunning:N}),(0,a0.jsxs)("div",{className:"w-full h-full flex flex-col items-center justify-center relative overflow-hidden rounded-[26px] z-10",children:[(0,a0.jsx)("div",{className:"absolute inset-0 opacity-[0.08]",style:{backgroundColor:b}}),(0,a0.jsx)(a5.motion.div,{animate:N?{scale:[1,1.1,1]}:{},transition:{duration:1.5,repeat:1/0},children:(0,a0.jsx)(v,{className:"h-10 w-10 relative z-10",style:{color:b}})}),(t.node_name?.includes("condition")||t.node_name?.includes("if")||t.node_name?.includes("switch"))&&(0,a0.jsxs)("div",{className:"absolute inset-y-0 right-1 flex flex-col justify-around py-4 opacity-40 group-hover/node:opacity-100 transition-opacity",children:[(0,a0.jsx)(os,{className:"h-3 w-3 text-emerald-500"}),(0,a0.jsx)(ol.X,{className:"h-3 w-3 text-rose-500"})]})]}),o.detailsContent&&(0,a0.jsx)("button",{onClick:e=>{e.stopPropagation(),d(!l)},className:"absolute -bottom-1.5 left-1/2 -translate-x-1/2 p-1 bg-background border border-border rounded-full shadow-sm hover:bg-accent transition-colors z-20",children:(0,a0.jsx)(a2,{className:(0,a4.cn)("h-3 w-3 text-muted-foreground transition-transform duration-300",l&&"rotate-180")})})]}),(0,a0.jsx)(a7,{type:"target",position:h.Left,handleId:"input",isConnectable:n,color:"#9ca3af"}),w?(0,a0.jsxs)(a0.Fragment,{children:[(0,a0.jsx)(a7,{type:"source",position:h.Right,handleId:"true",isConnectable:n,color:"#10b981",style:{top:"30%",transform:"translateY(-50%)"}}),(0,a0.jsx)(a7,{type:"source",position:h.Right,handleId:"false",isConnectable:n,color:"#f43f5e",style:{top:"70%",transform:"translateY(-50%)"}}),(0,a0.jsx)(a6,{nodeId:a,handleId:"true",color:"#10b981",style:{top:"30%"}}),(0,a0.jsx)(a6,{nodeId:a,handleId:"false",color:"#f43f5e",style:{top:"70%"}})]}):(0,a0.jsxs)(a0.Fragment,{children:[(0,a0.jsx)(a7,{type:"source",position:h.Right,handleId:"true",isConnectable:n,color:"#9ca3af"}),(0,a0.jsx)(a6,{nodeId:a,handleId:"true",color:b,style:{top:"50%"}})]})]}),(0,a0.jsxs)("div",{className:"flex flex-col items-center px-1 max-w-[140px]",children:[(0,a0.jsx)("span",{className:"text-[11px] font-bold text-foreground text-center line-clamp-1",children:t.label}),(0,a0.jsx)("span",{className:"text-[9px] text-muted-foreground uppercase tracking-widest font-mono opacity-50",children:t.node_name?.split(".")[0]||"Condition"})]}),(0,a0.jsx)(a3.AnimatePresence,{children:l&&o.detailsContent&&(0,a0.jsx)(a5.motion.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"w-full max-w-[150px] mt-1 overflow-hidden",children:(0,a0.jsx)("div",{className:"p-2.5 rounded-xl border border-border bg-card/50 backdrop-blur-sm shadow-sm",children:o.detailsContent(t)})})})]})]})});o2.displayName="BaseLogicNode";let o5=(0,p.memo)(e=>{let t,{data:n}=e,r={icon:(t=n.node_name||"",({"condition.if":oY,"logic.parallel":oZ,"logic.merge":oQ,"logic.delay":o0.Clock,"logic.loop":oJ,"logic.switch":o$,"condition.switch":o$,"logic.pause":on,"execution.pause":on,"utility.noop":o1.Activity})[t]||oY),color:"#8b5cf6"};return(0,a0.jsx)(o2,{...e,config:r})});o5.displayName="GenericLogicNode",e.s(["GenericLogicNode",0,o5],44068),(0,p.memo)(e=>(0,a0.jsx)(o2,{...e,config:{icon:oZ,color:"#8b5cf6",detailsContent:e=>(0,a0.jsxs)("div",{className:"space-y-1",children:[(0,a0.jsx)("div",{className:"text-[10px] text-muted-foreground uppercase font-mono",children:"Condition"}),(0,a0.jsx)("div",{className:"text-xs font-medium text-foreground truncate",children:e.config?.condition||"If [value] equals..."})]})}})).displayName="IfConditionNode",(0,p.memo)(e=>(0,a0.jsx)(o2,{...e,config:{icon:oz,color:"#8b5cf6"}})).displayName="SwitchNode",e.s([],31804);let o3=(0,a1.default)("circle-play",[["path",{d:"M9 9.003a1 1 0 0 1 1.517-.859l4.997 2.997a1 1 0 0 1 0 1.718l-4.997 2.997A1 1 0 0 1 9 14.996z",key:"kmsa83"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);e.s(["PlayCircle",()=>o3],17697);let o4=(0,a1.default)("inbox",[["polyline",{points:"22 12 16 12 14 15 10 15 8 12 2 12",key:"o97t9d"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}]]);e.s(["Inbox",()=>o4],32102);let o8=(0,a1.default)("pen-line",[["path",{d:"M13 21h8",key:"1jsn5i"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);e.s(["Edit3",()=>o8],83627);let o6=(0,p.memo)(e=>{let{data:t,isConnectable:n,selected:r,id:a}=e,[o,i]=(0,p.useState)(!1),[s,l]=(0,p.useState)(!1),[d,c]=(0,p.useState)(!1),[u,f]=(0,p.useState)(!1),[m,g]=(0,p.useState)(!1),{setNodes:x,setEdges:y}=rP(),v="running"===t.status,b="success"===t.status,w="failed"===t.status,N="pending"===t.status,j="warning"===t.status,{data:k=[]}=(0,aY.useNodeTypes)(),S=k.find(e=>e.name===t.node_name),C=(0,p.useMemo)(()=>a9(t.node_name||"",t.config||{},t.spec||{},S),[t.node_name,t.config,t.spec,S]);(0,p.useMemo)(()=>(function(e){if(e.isValid)return"";let t=[];if(e.hasCredentialIssue&&t.push("Credential needed"),e.hasRequiredFieldIssue){let n=e.warnings.filter(e=>"required_field_missing"===e.type).length;t.push(`${n} required field${n>1?"s":""}`)}return t.join(", ")})(C),[C]);let{toast:E}=(0,aZ.useToast)(),M=async e=>{e.stopPropagation(),t.executeNode?await t.executeNode(a):E({title:"Error",description:"Execute function not available",variant:"destructive"})},_=e.color||("trigger"===t.type?"#ef4444":"#3b82f6");return(0,a0.jsxs)("div",{className:"relative",onMouseEnter:()=>i(!0),onMouseLeave:()=>i(!1),children:[(0,a0.jsx)(a3.AnimatePresence,{children:o&&(0,a0.jsxs)(a5.motion.div,{initial:{opacity:0,y:-5},animate:{opacity:1,y:0},exit:{opacity:0,y:-5},className:"absolute -top-12 left-1/2 -translate-x-1/2 flex items-center gap-1 bg-white dark:bg-slate-800 border border-border rounded-lg px-2 py-1.5 shadow-xl z-50",children:[(0,a0.jsx)("button",{onClick:M,disabled:v||N,className:"p-1.5 hover:bg-green-50 dark:hover:bg-green-900/20 rounded-md transition-colors text-muted-foreground hover:text-green-600 disabled:opacity-50",title:v?"Running...":"Run this node",children:v||N?(0,a0.jsx)(or.Loader2,{className:"h-4 w-4 animate-spin"}):(0,a0.jsx)(ot,{className:"h-4 w-4"})}),(0,a0.jsx)("div",{className:"w-px h-4 bg-border"}),(0,a0.jsx)("button",{onClick:e=>{e.stopPropagation(),x(e=>e.filter(e=>e.id!==a)),y(e=>e.filter(e=>e.source!==a&&e.target!==a))},className:"p-1.5 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-md transition-colors text-muted-foreground hover:text-red-600",title:"Delete",children:(0,a0.jsx)(oe.Trash2,{className:"h-4 w-4"})})]})}),(0,a0.jsxs)("div",{className:(0,a4.cn)("min-w-[180px] bg-white dark:bg-slate-900 border-2 rounded-xl shadow-sm transition-all relative",r?"border-primary shadow-md":"border-border",v&&"border-transparent shadow-xl ring-1 ring-primary/10",N&&"border-blue-400 border-dashed",b&&"border-green-500 shadow-[0_0_15px_rgba(34,197,94,0.25)]",w&&"border-red-500 shadow-[0_0_15px_rgba(239,68,68,0.25)]",j&&"border-amber-400 shadow-[0_0_15px_rgba(245,158,11,0.2)]",!C.isValid&&!b&&!w&&!v&&"border-amber-300"),children:[w&&(0,a0.jsx)("div",{className:"absolute -top-2 -right-2 z-20",onMouseEnter:()=>g(!0),onMouseLeave:()=>g(!1),children:(0,a0.jsxs)("div",{className:"relative",children:[(0,a0.jsx)("div",{className:"bg-red-500 text-white p-1 rounded-full shadow-lg cursor-help",children:(0,a0.jsx)(oo.AlertTriangle,{className:"h-3.5 w-3.5"})}),(0,a0.jsx)(a3.AnimatePresence,{children:m&&(0,a0.jsxs)(a5.motion.div,{initial:{opacity:0,y:5,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:5,scale:.95},className:"absolute top-full right-0 mt-2 z-50",children:[(0,a0.jsxs)("div",{className:"bg-slate-900 text-white text-xs rounded-lg px-3 py-2 shadow-xl min-w-[200px] max-w-[280px]",children:[(0,a0.jsxs)("div",{className:"font-semibold text-red-400 mb-1.5 flex items-center gap-1.5",children:[(0,a0.jsx)(oo.AlertTriangle,{className:"h-3 w-3"}),"Execution Failed"]}),(0,a0.jsx)("div",{className:"text-slate-200 mb-2 whitespace-pre-wrap leading-relaxed",children:t.error||"An unexpected error occurred during execution."}),t.errorSuggestion&&(0,a0.jsxs)("div",{className:"mt-2 pt-2 border-t border-slate-700/50",children:[(0,a0.jsxs)("div",{className:"text-blue-400 font-medium mb-1 flex items-center gap-1.5 text-[10px] uppercase tracking-wider",children:[(0,a0.jsx)(oH.Sparkles,{className:"h-2.5 w-2.5"}),"Suggestion"]}),(0,a0.jsx)("div",{className:"text-slate-300 italic",children:t.errorSuggestion})]})]}),(0,a0.jsx)("div",{className:"absolute -top-1 right-3 w-2 h-2 bg-slate-900 rotate-45"})]})})]})}),!C.isValid&&!v&&!b&&!w&&(0,a0.jsx)("div",{className:"absolute -top-2 -right-2 z-20",onMouseEnter:()=>f(!0),onMouseLeave:()=>f(!1),children:(0,a0.jsxs)("div",{className:"relative",children:[(0,a0.jsx)("div",{className:"bg-amber-500 text-white p-1 rounded-full shadow-lg cursor-help animate-pulse",children:(0,a0.jsx)(oo.AlertTriangle,{className:"h-3.5 w-3.5"})}),(0,a0.jsx)(a3.AnimatePresence,{children:u&&(0,a0.jsxs)(a5.motion.div,{initial:{opacity:0,y:5,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:5,scale:.95},className:"absolute top-full right-0 mt-2 z-50",children:[(0,a0.jsxs)("div",{className:"bg-slate-900 text-white text-xs rounded-lg px-3 py-2 shadow-xl min-w-[160px] max-w-[220px]",children:[(0,a0.jsxs)("div",{className:"font-semibold text-amber-400 mb-1.5 flex items-center gap-1.5",children:[(0,a0.jsx)(oo.AlertTriangle,{className:"h-3 w-3"}),"Configuration Needed"]}),(0,a0.jsx)("ul",{className:"space-y-1 text-slate-300",children:C.warnings.map((e,t)=>(0,a0.jsxs)("li",{className:"flex items-start gap-1.5",children:[(0,a0.jsx)("span",{className:"text-amber-400 mt-0.5",children:""}),(0,a0.jsx)("span",{children:e.message})]},t))})]}),(0,a0.jsx)("div",{className:"absolute -top-1 right-3 w-2 h-2 bg-slate-900 rotate-45"})]})})]})}),v&&(0,a0.jsx)("div",{className:"absolute inset-[-2px] overflow-hidden rounded-[14px] z-0 pointer-events-none",children:(0,a0.jsx)(a5.motion.div,{className:"absolute inset-[-250%]",animate:{rotate:[0,360]},transition:{duration:3,repeat:1/0,ease:"linear"},style:{background:`conic-gradient(from 0deg, transparent 0deg, ${_} 15deg, transparent 30deg, ${_} 180deg, transparent 195deg)`}})}),(0,a0.jsxs)("div",{className:(0,a4.cn)("flex items-center gap-3 p-3 relative z-10 rounded-xl bg-white dark:bg-slate-900",v&&"m-[1px] p-[11px]"),children:[(0,a0.jsx)("div",{className:"p-2 rounded-lg flex items-center justify-center text-white shrink-0",style:{backgroundColor:_},children:(()=>{if(e.icon)return(0,a0.jsx)(e.icon,{className:"h-5 w-5"});let n=t.node_name||"",r={"manual.trigger":o3,"schedule.cron":ok,"webhook.receive":oj,"whatsapp.trigger":oB,"email.trigger":o4,"rss.trigger":oS,"ai.llm":oH.Sparkles,"ai.agent":oR,"data.set":o8,"data.transform":o$,"slack.send":oP,"whatsapp.send":oB,"google_sheets.write":oF,"google_sheets.read":oF,"http.request":oT,"code.python":oV,"code.javascript":oD,"email.send":oE.Send,"discord.send":oE.Send,"condition.if":oY,"logic.parallel":oZ,"logic.merge":oQ,"logic.delay":o0.Clock,"logic.loop":oJ,"logic.switch":o$,"logic.pause":on,"utility.noop":o1.Activity}[n]||("trigger"===t.type?ow.Zap:oA.Settings);return(0,a0.jsx)(r,{className:"h-5 w-5"})})()}),(0,a0.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a0.jsx)("div",{className:"text-sm font-semibold truncate leading-tight",children:t.label}),(0,a0.jsx)("div",{className:"text-[10px] text-muted-foreground truncate uppercase tracking-wider font-medium mt-0.5",children:t.node_name||t.type||"Action"})]}),v&&(0,a0.jsx)("div",{className:"flex space-x-0.5",children:(0,a0.jsx)(a5.motion.div,{animate:{opacity:[.4,1,.4],scale:[1,1.2,1]},transition:{repeat:1/0,duration:2},className:"w-2 h-2 rounded-full bg-blue-500 shadow-[0_0_8px_rgba(59,130,246,0.5)]"})})]}),(b||w)&&(0,a0.jsx)("div",{className:(0,a4.cn)("h-1 w-full",b?"bg-green-500":"bg-red-500")}),"trigger"!==t.type&&(0,a0.jsx)(n6,{type:"target",position:h.Left,isConnectable:n,className:"!w-4 !h-4 !bg-transparent !border-none z-50 p-0",style:{left:"-8px",top:"50%",transform:"translateY(-50%)"},onMouseEnter:()=>l(!0),onMouseLeave:()=>l(!1),children:(0,a0.jsxs)(a5.motion.div,{className:"w-full h-full relative flex items-center justify-center pointer-events-none",animate:s?"hover":"initial",initial:"initial",children:[(0,a0.jsx)(a5.motion.div,{variants:{initial:{scale:1,opacity:0},hover:{scale:2,opacity:.4,transition:{repeat:1/0,duration:1}}},className:"absolute inset-0 rounded-full bg-slate-400"}),(0,a0.jsx)(a5.motion.div,{variants:{initial:{scale:1},hover:{scale:1.25}},className:"w-full h-full rounded-full border-2 border-white dark:border-slate-700 bg-slate-400 shadow-md relative z-10",children:(0,a0.jsx)("div",{className:"absolute top-0.5 left-0.5 w-[30%] h-[30%] bg-white rounded-full opacity-40"})})]})}),(0,a0.jsx)(a6,{nodeId:a,color:_}),(0,a0.jsx)(n6,{type:"source",position:h.Right,isConnectable:n,className:"!w-4 !h-4 !bg-transparent !border-none z-50 p-0",style:{right:"-8px",top:"50%",transform:"translateY(-50%)"},onMouseEnter:()=>c(!0),onMouseLeave:()=>c(!1),children:(0,a0.jsxs)(a5.motion.div,{className:"w-full h-full relative flex items-center justify-center pointer-events-none",animate:d?"hover":"initial",initial:"initial",children:[(0,a0.jsx)(a5.motion.div,{variants:{initial:{scale:1,opacity:0},hover:{scale:2,opacity:.4,transition:{repeat:1/0,duration:1}}},className:"absolute inset-0 rounded-full",style:{backgroundColor:_}}),(0,a0.jsx)(a5.motion.div,{variants:{initial:{scale:1},hover:{scale:1.25}},className:"w-full h-full rounded-full border-2 border-white dark:border-slate-700 shadow-md relative z-10",style:{backgroundColor:_},children:(0,a0.jsx)("div",{className:"absolute top-0.5 left-0.5 w-[30%] h-[30%] bg-white rounded-full opacity-40"})})]})})]}),t.settings?.displayNoteInFlow&&t.settings?.notes&&(0,a0.jsx)("div",{className:"absolute top-full mt-3 left-1/2 -translate-x-1/2 w-full min-w-[120px] max-w-[200px] z-0",children:(0,a0.jsx)("div",{className:"bg-amber-50/50 dark:bg-amber-900/20 backdrop-blur-sm border border-amber-200/50 dark:border-amber-700/30 rounded-lg p-2 shadow-sm animate-in fade-in slide-in-from-top-1 duration-300",children:(0,a0.jsxs)("div",{className:"flex items-start gap-1.5",children:[(0,a0.jsx)(ou,{className:"w-2.5 h-2.5 text-amber-500/50 mt-0.5 shrink-0"}),(0,a0.jsx)("p",{className:"text-[9px] text-amber-900/70 dark:text-amber-100/50 font-medium leading-relaxed italic line-clamp-3",children:t.settings.notes})]})})})]})});o6.displayName="BaseNode",e.s(["BaseNode",0,o6],93226);var o9=e.i(40143),o7=e.i(69230),ie=e.i(15823),it=e.i(19273);function ir(e,t){let n=new Set(t);return e.filter(e=>!n.has(e))}var ia=class extends ie.Subscribable{#e;#t;#n;#r;#a;#o;#i;#s;#l=[];constructor(e,t,n){super(),this.#e=e,this.#r=n,this.#n=[],this.#a=[],this.#t=[],this.setQueries(t)}onSubscribe(){1===this.listeners.size&&this.#a.forEach(e=>{e.subscribe(t=>{this.#d(e,t)})})}onUnsubscribe(){this.listeners.size||this.destroy()}destroy(){this.listeners=new Set,this.#a.forEach(e=>{e.destroy()})}setQueries(e,t){this.#n=e,this.#r=t,o9.notifyManager.batch(()=>{let e=this.#a,t=this.#c(this.#n);this.#l=t,t.forEach(e=>e.observer.setOptions(e.defaultedQueryOptions));let n=t.map(e=>e.observer),r=n.map(e=>e.getCurrentResult()),a=e.length!==n.length,o=n.some((t,n)=>t!==e[n]),i=a||o,s=!!i||r.some((e,t)=>{let n=this.#t[t];return!n||!(0,it.shallowEqualObjects)(e,n)});(i||s)&&(i&&(this.#a=n),this.#t=r,this.hasListeners()&&(i&&(ir(e,n).forEach(e=>{e.destroy()}),ir(n,e).forEach(e=>{e.subscribe(t=>{this.#d(e,t)})})),this.#u()))})}getCurrentResult(){return this.#t}getQueries(){return this.#a.map(e=>e.getCurrentQuery())}getObservers(){return this.#a}getOptimisticResult(e,t){let n=this.#c(e),r=n.map(e=>e.observer.getOptimisticResult(e.defaultedQueryOptions));return[r,e=>this.#f(e??r,t),()=>this.#h(r,n)]}#h(e,t){return t.map((n,r)=>{let a=e[r];return n.defaultedQueryOptions.notifyOnChangeProps?a:n.observer.trackResult(a,e=>{t.forEach(t=>{t.observer.trackProp(e)})})})}#f(e,t){return t?(this.#o&&this.#t===this.#s&&t===this.#i||(this.#i=t,this.#s=this.#t,this.#o=(0,it.replaceEqualDeep)(this.#o,t(e))),this.#o):e}#c(e){let t=new Map;this.#a.forEach(e=>{let n=e.options.queryHash;if(!n)return;let r=t.get(n);r?r.push(e):t.set(n,[e])});let n=[];return e.forEach(e=>{let r=this.#e.defaultQueryOptions(e),a=t.get(r.queryHash)?.shift()??new o7.QueryObserver(this.#e,r);n.push({defaultedQueryOptions:r,observer:a})}),n}#d(e,t){let n=this.#a.indexOf(e);if(-1!==n){var r;let e;this.#t=(r=this.#t,(e=r.slice(0))[n]=t,e),this.#u()}}#u(){if(this.hasListeners()){let e=this.#o,t=this.#h(this.#t,this.#l);e!==this.#f(t,this.#r?.combine)&&o9.notifyManager.batch(()=>{this.listeners.forEach(e=>{e(this.#t)})})}}},io=e.i(12598),ii=e.i(81384),is=e.i(73664),il=e.i(27001),id=e.i(54440);function ic({queries:e,...t},n){let r=(0,io.useQueryClient)(n),a=(0,ii.useIsRestoring)(),o=(0,is.useQueryErrorResetBoundary)(),i=p.useMemo(()=>e.map(e=>{let t=r.defaultQueryOptions(e);return t._optimisticResults=a?"isRestoring":"optimistic",t}),[e,r,a]);i.forEach(e=>{(0,id.ensureSuspenseTimers)(e),(0,il.ensurePreventErrorBoundaryRetry)(e,o)}),(0,il.useClearResetErrorBoundary)(o);let[s]=p.useState(()=>new ia(r,i,t)),[l,d,c]=s.getOptimisticResult(i,t.combine),u=!a&&!1!==t.subscribed;p.useSyncExternalStore(p.useCallback(e=>u?s.subscribe(o9.notifyManager.batchCalls(e)):it.noop,[s,u]),()=>s.getCurrentResult(),()=>s.getCurrentResult()),p.useEffect(()=>{s.setQueries(i,t)},[i,t,s]);let f=l.some((e,t)=>(0,id.shouldSuspend)(i[t],e))?l.flatMap((e,t)=>{let n=i[t];if(n){let t=new o7.QueryObserver(r,n);if((0,id.shouldSuspend)(n,e))return(0,id.fetchOptimistic)(n,t,o);(0,id.willFetch)(e,a)&&(0,id.fetchOptimistic)(n,t,o)}return[]}):[];if(f.length>0)throw Promise.all(f);let h=l.find((e,t)=>{let n=i[t];return n&&(0,il.getHasError)({result:e,errorResetBoundary:o,throwOnError:n.throwOnError,query:r.getQueryCache().get(n.queryHash),suspense:n.suspense})});if(h?.error)throw h.error;return d(c())}e.s(["useQueries",()=>ic],86448);let iu=(0,a1.default)("info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);e.s(["Info",()=>iu],52571);let ih=(0,a1.default)("type",[["path",{d:"M12 4v16",key:"1654pz"}],["path",{d:"M4 7V5a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1v2",key:"e0r10z"}],["path",{d:"M9 20h6",key:"s66wpe"}]]);e.s(["Type",()=>ih],71649);let ip=(0,a1.default)("hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]);e.s(["Hash",()=>ip],88081)},70956,e=>{"use strict";let t=(0,e.i(75254).default)("list",[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]]);e.s(["List",()=>t],70956)},40126,61911,36281,87316,22614,e=>{"use strict";let t;var n,r,a,o,i,s=e.i(43476),l=e.i(71645),d=e.i(41336),c=e.i(88653),u=e.i(89447);e.i(39412),e.i(4677),e.i(31804);var f=e.i(93226),h=e.i(86448),p=e.i(37727),m=e.i(52571),g=e.i(64659),x=e.i(71649),y=e.i(88081),v=e.i(70956),b=e.i(58472),w=e.i(58041),N=e.i(34161),j=e.i(39312),k=e.i(39616),S=e.i(75254);(0,S.default)("circle-question-mark",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);var C=e.i(63209);e.i(78583);var E=e.i(7233);let M=(0,S.default)("trash",[["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]);var _=e.i(86311),A=e.i(31343),R=e.i(46932),P=e.i(47163),O=e.i(76525),T=e.i(31278),D=e.i(70756);let z=(0,S.default)("link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]),L=(0,S.default)("shield-check",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);var I=e.i(48256),$=e.i(27612),H=e.i(83627);let F=(0,S.default)("external-link",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);var B=e.i(58253),V=e.i(94262),q=e.i(12598),W=e.i(11761),K=e.i(94580);let G={google_sheets:{fields:[{name:"client_id",label:"Client ID",type:"text",required:!0,placeholder:"Enter your Client ID"},{name:"client_secret",label:"Client Secret",type:"password",required:!0,placeholder:"Enter your Client Secret"}],help:"You can find these in your Google Cloud Console under APIs & Services > Credentials."},slack:{fields:[{name:"client_id",label:"Client ID",type:"text",required:!0,placeholder:"Enter your Client ID"},{name:"client_secret",label:"Client Secret",type:"password",required:!0,placeholder:"Enter your Client Secret"},{name:"bot_token",label:"Bot User OAuth Token",type:"password",required:!0,placeholder:"xoxb-..."},{name:"refresh_token",label:"Refresh Token (Optional)",type:"password",placeholder:"xoxe-..."}],help:'Create a Slack App and look for these in the "Basic Information" and "OAuth & Permissions" sections.'},discord:{fields:[{name:"bot_token",label:"Discord Bot Token",type:"password",required:!0,placeholder:"Enter your bot token"}],help:'Generate this token in the Discord Developer Portal under the "Bot" tab of your application.'},generic:{fields:[{name:"api_key",label:"API Key",type:"password",required:!0,placeholder:"Enter your API key"}]},ai_provider:{fields:[{name:"provider",label:"Provider",type:"select",required:!0,options:[{label:"OpenRouter",value:"openrouter"},{label:"OpenAI",value:"openai"},{label:"Anthropic",value:"anthropic"},{label:"Gemini",value:"gemini"},{label:"Custom (OpenAI Compatible)",value:"ai_provider"}],default:"openrouter"},{name:"api_key",label:"API Key",type:"password",required:!0,placeholder:"sk-..."},{name:"base_url",label:"Base URL (Optional)",type:"text",placeholder:"https://openrouter.ai/api/v1"}],help:"Provide your AI platform credentials. For OpenRouter, use https://openrouter.ai/api/v1 as Base URL."}},X=({value:e,onChange:t,credentialType:n,label:r})=>{let a=(0,q.useQueryClient)(),{data:o=[],isLoading:i}=(0,V.useCredentialsByType)(n),d=(0,V.useCreateCredential)(),u=(0,V.useDeleteCredential)(),[f,h]=(0,l.useState)(!1),[x,y]=(0,l.useState)(!1),[v,b]=(0,l.useState)("oauth"),[w,k]=(0,l.useState)({name:""}),[S,C]=(0,l.useState)(null),M=["google_sheets","slack","discord"].includes(n),_=G[n]||G.generic,A=o.find(t=>t.id===e),X=(0,l.useCallback)(()=>{let e={name:""};return _.fields.forEach(t=>{t.default&&(e[t.name]=t.default)}),e},[_]);(0,l.useEffect)(()=>{M?b("oauth"):b("manual")},[n,M]),(0,l.useEffect)(()=>{f&&(k(X()),C(null))},[f,X]);let U=async()=>{if(!w.name)return void C("Please provide a name for this account");C(null);let{name:e,...r}=w;d.mutate({name:e,type:n,data:r},{onSuccess:e=>{t(e.id),h(!1),k(X())},onError:e=>{C(e instanceof Error?e.message:"Failed to create credential")}})},Y=async(n,r)=>{r.stopPropagation(),confirm("Are you sure you want to delete this credential?")&&u.mutate(n,{onSuccess:()=>{e===n&&t("")},onError:e=>{K.workflowLogger.error("Failed to delete credential",e)}})};return(0,s.jsxs)("div",{className:"relative w-full",children:[(0,s.jsx)("div",{className:"space-y-1.5",children:(0,s.jsxs)("div",{onClick:()=>!f&&y(!x),className:(0,P.cn)("group flex items-center justify-between w-full h-10 px-4 bg-muted/20 border border-border rounded-md cursor-pointer transition-all hover:border-primary/50",x&&"ring-1 ring-primary/50 border-primary/50",f&&"opacity-50 pointer-events-none"),children:[(0,s.jsxs)("div",{className:"flex items-center gap-3 overflow-hidden",children:[(0,s.jsx)("div",{className:"p-1 px-1.5 rounded bg-primary/10 text-primary",children:(0,s.jsx)(N.Key,{className:"w-3.5 h-3.5"})}),A?(0,s.jsx)("span",{className:"text-[11px] font-bold truncate",children:A.name}):(0,s.jsxs)("span",{className:"text-[11px] text-muted-foreground/60 font-bold uppercase tracking-widest",children:["Select ",r||"Account"]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[i&&(0,s.jsx)(T.Loader2,{className:"w-3 h-3 animate-spin text-primary/50"}),(0,s.jsx)(g.ChevronDown,{className:(0,P.cn)("w-3.5 h-3.5 text-muted-foreground transition-transform",x&&"rotate-180")})]})]})}),(0,s.jsx)(c.AnimatePresence,{children:x&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"fixed inset-0 z-[110]",onClick:()=>y(!1)}),(0,s.jsxs)(R.motion.div,{initial:{opacity:0,y:4,scale:.98},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:4,scale:.98},className:"absolute top-full mt-2 left-0 w-full bg-background border border-border rounded-md shadow-2xl z-[120] overflow-hidden",children:[(0,s.jsxs)("div",{className:"max-h-[240px] overflow-y-auto p-1.5 space-y-1 custom-scrollbar",children:[0===o.length&&!i&&(0,s.jsxs)("div",{className:"py-8 text-center opacity-30 flex flex-col items-center gap-2",children:[(0,s.jsx)(L,{className:"w-6 h-6 stroke-1"}),(0,s.jsx)("span",{className:"text-[9px] font-bold uppercase",children:"No Accounts Added"})]}),o.map(n=>(0,s.jsxs)("div",{onClick:()=>{t(n.id),y(!1)},className:(0,P.cn)("flex items-center justify-between px-3 py-2 rounded-sm cursor-pointer transition-all group/item",e===n.id?"bg-primary/10 text-primary border border-primary/20":"hover:bg-muted/50 border border-transparent"),children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:(0,P.cn)("h-1.5 w-1.5 rounded-full",e===n.id?"bg-primary":"bg-muted-foreground/30")}),(0,s.jsx)("span",{className:"text-[10px] font-bold",children:n.name})]}),(0,s.jsx)("button",{onClick:e=>Y(n.id,e),className:"opacity-0 group-hover/item:opacity-100 p-1.5 hover:bg-destructive/10 hover:text-destructive rounded-sm transition-all",children:(0,s.jsx)($.Trash2,{className:"w-3 h-3"})})]},n.id))]}),(0,s.jsx)("div",{className:"p-1.5 bg-muted/20 border-t border-border mt-1",children:(0,s.jsxs)("button",{onClick:()=>{h(!0),y(!1)},className:"flex items-center justify-center gap-2 w-full py-2.5 rounded-sm bg-primary/5 hover:bg-primary/10 text-primary transition-all border border-primary/20 border-dashed",children:[(0,s.jsx)(E.Plus,{className:"w-3.5 h-3.5"}),(0,s.jsx)("span",{className:"text-[10px] font-black uppercase tracking-widest",children:"Connect New Account"})]})})]})]})}),(0,s.jsx)(c.AnimatePresence,{children:f&&(0,s.jsx)("div",{className:"fixed inset-0 z-[150] flex items-center justify-center p-6 bg-background/90 backdrop-blur-xl",children:(0,s.jsxs)(R.motion.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},className:"w-[500px] bg-background border border-border rounded-lg shadow-[0_32px_128px_-32px_rgba(0,0,0,0.5)] overflow-hidden flex flex-col",children:[(0,s.jsxs)("header",{className:"px-6 py-5 border-b border-border bg-muted/20 flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"h-10 w-10 rounded-md bg-primary/10 text-primary flex items-center justify-center border border-primary/20",children:(0,s.jsx)(I.Globe,{className:"w-5 h-5"})}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("h3",{className:"text-sm font-black uppercase tracking-widest leading-none mb-1",children:["New ",r||"Account"]}),(0,s.jsxs)("p",{className:"text-[9px] text-muted-foreground/50 uppercase font-bold tracking-tighter",children:["Connection Bridge / ",n]})]})]}),(0,s.jsx)("button",{onClick:()=>h(!1),className:"p-2 hover:bg-destructive/10 hover:text-destructive rounded-md transition-all",children:(0,s.jsx)(p.X,{className:"w-4 h-4"})})]}),(0,s.jsxs)("div",{className:"p-8 space-y-6",children:[M&&(0,s.jsxs)("div",{className:"flex p-1 bg-muted/20 border border-border rounded-md shrink-0",children:[(0,s.jsxs)("button",{onClick:()=>b("oauth"),className:(0,P.cn)("flex-1 flex items-center justify-center gap-2 py-2 rounded-sm text-[10px] font-black uppercase tracking-widest transition-all","oauth"===v?"bg-background text-primary shadow-sm":"text-muted-foreground hover:text-foreground"),children:[(0,s.jsx)(j.Zap,{className:"w-3 h-3"}),"OAuth 2.0"]}),(0,s.jsxs)("button",{onClick:()=>b("manual"),className:(0,P.cn)("flex-1 flex items-center justify-center gap-2 py-2 rounded-sm text-[10px] font-black uppercase tracking-widest transition-all","manual"===v?"bg-background text-primary shadow-sm":"text-muted-foreground hover:text-foreground"),children:[(0,s.jsx)(H.Edit3,{className:"w-3 h-3"}),"Manual Setup"]})]}),(0,s.jsx)(c.AnimatePresence,{mode:"wait",children:"oauth"===v?(0,s.jsx)(R.motion.div,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},exit:{opacity:0,x:10},className:"space-y-6",children:(0,s.jsxs)("div",{className:"p-6 rounded-md border border-dashed border-border flex flex-col items-center gap-4 text-center",children:[(0,s.jsxs)("div",{className:"h-16 w-16 rounded-xl bg-muted/50 flex items-center justify-center shadow-inner",children:["google_sheets"===n&&(0,s.jsx)(W.LogoGoogleSheets,{className:"w-8 h-8"}),"slack"===n&&(0,s.jsx)(j.Zap,{className:"w-8 h-8 text-[#E01E5A]"}),"discord"===n&&(0,s.jsx)(j.Zap,{className:"w-8 h-8 text-[#5865F2]"})]}),(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsx)("h4",{className:"text-xs font-bold uppercase tracking-wider",children:"Fast Authentication"}),(0,s.jsxs)("p",{className:"text-[10px] text-muted-foreground leading-relaxed max-w-[280px]",children:["We'll handle the connection securely via ",n.replace("_"," "),"'s official OAuth portal."]})]}),(0,s.jsxs)(O.Button,{onClick:()=>{C(null);let e=`${B.API_V1}/credentials/oauth/${n}/authorize`,r=window.screen.width/2-300,o=window.screen.height/2-350;if(!window.open(e,`Connect ${n}`,`width=600,height=700,left=${r},top=${o},scrollbars=yes,resizable=yes`))return void C("Popup blocked. Please allow popups.");let i=e=>{if(e.data?.type==="OAUTH_SUCCESS"){let{credentialId:r}=e.data;a.invalidateQueries({queryKey:V.credentialKeys.byType(n)}),t(r),h(!1),window.removeEventListener("message",i)}};window.addEventListener("message",i)},className:"w-full h-12 rounded-md bg-primary text-primary-foreground font-black uppercase tracking-widest text-[10px] shadow-lg shadow-primary/20 flex items-center justify-center gap-3",children:[(0,s.jsx)(F,{className:"w-4 h-4"}),"Sign in to ",n.replace("_"," ").replace(/\b\w/g,e=>e.toUpperCase())]})]})},"oauth"):(0,s.jsxs)(R.motion.div,{initial:{opacity:0,x:10},animate:{opacity:1,x:0},exit:{opacity:0,x:-10},className:"space-y-6",children:[_.help&&(0,s.jsxs)("div",{className:"p-4 rounded-md bg-amber-500/5 border border-amber-500/10 flex gap-3",children:[(0,s.jsx)(m.Info,{className:"w-4 h-4 text-amber-500 shrink-0"}),(0,s.jsx)("p",{className:"text-[10px] text-muted-foreground leading-relaxed",children:_.help})]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("label",{className:"text-[10px] font-black text-muted-foreground uppercase tracking-widest ml-1",children:"Account Label"}),(0,s.jsx)("input",{className:"w-full h-11 px-4 bg-muted/20 border border-border rounded-md text-xs focus:ring-1 focus:ring-primary/50 outline-none transition-all placeholder:text-muted-foreground/30 font-bold",placeholder:"e.g. Primary Workspace",value:w.name,onChange:e=>k({...w,name:e.target.value}),autoFocus:!0})]}),_.fields.map(e=>(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)("label",{className:"text-[10px] font-black text-muted-foreground uppercase tracking-widest ml-1",children:[e.label,e.required&&(0,s.jsx)("span",{className:"text-primary ml-1",children:"*"})]}),(0,s.jsxs)("div",{className:"relative group/input",children:[(0,s.jsx)("div",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-muted-foreground/40 pointer-events-none group-focus-within/input:text-primary transition-colors",children:"password"===e.type?(0,s.jsx)(D.Lock,{className:"w-3.5 h-3.5"}):"select"===e.type?(0,s.jsx)(I.Globe,{className:"w-3.5 h-3.5"}):(0,s.jsx)(z,{className:"w-3.5 h-3.5"})}),"select"===e.type?(0,s.jsxs)("select",{className:"w-full h-11 pl-10 pr-10 bg-muted/20 border border-border rounded-md text-xs focus:ring-1 focus:ring-primary/50 outline-none transition-all appearance-none font-bold",value:w[e.name]||e.default||"",onChange:t=>k({...w,[e.name]:t.target.value}),children:[(0,s.jsx)("option",{value:"",disabled:!0,children:"Select Provider..."}),e.options?.map(e=>(0,s.jsx)("option",{value:e.value,children:e.label},e.value))]}):(0,s.jsx)("input",{type:e.type,className:"w-full h-11 pl-10 pr-4 bg-muted/20 border border-border rounded-md text-xs focus:ring-1 focus:ring-primary/50 outline-none transition-all placeholder:text-muted-foreground/20 font-mono",placeholder:e.placeholder,value:w[e.name]||"",onChange:t=>k({...w,[e.name]:t.target.value})}),"select"===e.type&&(0,s.jsx)("div",{className:"absolute right-4 top-1/2 -translate-y-1/2 text-muted-foreground/30 pointer-events-none",children:(0,s.jsx)(g.ChevronDown,{className:"w-3.5 h-3.5"})})]})]},e.name))]})]},"manual")}),S&&(0,s.jsxs)("div",{className:"p-3 rounded-md bg-destructive/10 border border-destructive/20 text-destructive text-[10px] font-bold flex items-center gap-2",children:[(0,s.jsx)(p.X,{className:"w-3 h-3"}),S]})]}),(0,s.jsxs)("footer",{className:"px-6 py-5 border-t border-border bg-muted/10 flex items-center justify-between",children:[(0,s.jsx)(O.Button,{variant:"ghost",onClick:()=>h(!1),className:"px-6 h-10 rounded-md text-[10px] font-black uppercase tracking-widest",children:"Cancel"}),"manual"===v&&(0,s.jsxs)(O.Button,{onClick:U,disabled:d.isPending||!w.name,className:"px-8 h-10 rounded-md bg-primary text-primary-foreground font-black uppercase tracking-widest text-[10px] shadow-lg shadow-primary/20 hover:scale-[1.02] active:scale-95 transition-all flex items-center gap-2",children:[d.isPending?(0,s.jsx)(T.Loader2,{className:"w-3.5 h-3.5 animate-spin"}):(0,s.jsx)(L,{className:"w-3.5 h-3.5"}),d.isPending?"Creating...":"Securely Connect"]})]})]})})})]})};function U(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function Y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Z(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Y(Object(n),!0).forEach(function(t){var r;r=n[t],t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Y(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Q(e){return function t(){for(var n=this,r=arguments.length,a=Array(r),o=0;o<r;o++)a[o]=arguments[o];return a.length>=e.length?e.apply(this,a):function(){for(var e=arguments.length,r=Array(e),o=0;o<e;o++)r[o]=arguments[o];return t.apply(n,[].concat(a,r))}}}function J(e){return({}).toString.call(e).includes("Object")}function ee(e){return"function"==typeof e}var et=Q(function(e,t){throw Error(e[t]||e.default)})({initialIsRequired:"initial state is required",initialType:"initial state should be an object",initialContent:"initial state shouldn't be an empty object",handlerType:"handler should be an object or a function",handlersType:"all handlers should be a functions",selectorType:"selector should be a function",changeType:"provided value of changes should be an object",changeField:'it seams you want to change a field in the state which is not specified in the "initial" state',default:"an unknown error accured in `state-local` package"}),en=function(e,t){return J(t)||et("changeType"),Object.keys(t).some(function(t){return!Object.prototype.hasOwnProperty.call(e,t)})&&et("changeField"),t},er=function(e){ee(e)||et("selectorType")},ea=function(e){ee(e)||J(e)||et("handlerType"),J(e)&&Object.values(e).some(function(e){return!ee(e)})&&et("handlersType")},eo=function(e){e||et("initialIsRequired"),J(e)||et("initialType"),Object.keys(e).length||et("initialContent")};function ei(e,t){return ee(t)?t(e.current):t}function es(e,t){return e.current=Z(Z({},e.current),t),t}function el(e,t,n){return ee(t)?t(e.current):Object.keys(n).forEach(function(n){var r;return null==(r=t[n])?void 0:r.call(t,e.current[n])}),n}var ed={configIsRequired:"the configuration object is required",configType:"the configuration object should be an object",default:"an unknown error accured in `@monaco-editor/loader` package",deprecation:"Deprecation warning!\n    You are using deprecated way of configuration.\n\n    Instead of using\n      monaco.config({ urls: { monacoBase: '...' } })\n    use\n      monaco.config({ paths: { vs: '...' } })\n\n    For more please check the link https://github.com/suren-atoyan/monaco-loader#config\n  "},ec=(n=function(e,t){throw Error(e[t]||e.default)},function e(){for(var t=this,r=arguments.length,a=Array(r),o=0;o<r;o++)a[o]=arguments[o];return a.length>=n.length?n.apply(this,a):function(){for(var n=arguments.length,r=Array(n),o=0;o<n;o++)r[o]=arguments[o];return e.apply(t,[].concat(a,r))}})(ed),eu=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return t.reduceRight(function(e,t){return t(e)},e)}},ef={type:"cancelation",msg:"operation is manually canceled"};function eh(e){var t=!1,n=new Promise(function(n,r){e.then(function(e){return t?r(ef):n(e)}),e.catch(r)});return n.cancel=function(){return t=!0},n}var ep=function(e){if(Array.isArray(e))return e}(r=({create:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};eo(e),ea(t);var n={current:e},r=Q(el)(n,t),a=Q(es)(n),o=Q(en)(e),i=Q(ei)(n);return[function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(e){return e};return er(e),e(n.current)},function(e){(function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return t.reduceRight(function(e,t){return t(e)},e)}})(r,a,o,i)(e)}]}}).create({config:{paths:{vs:"https://cdn.jsdelivr.net/npm/monaco-editor@0.55.1/min/vs"}},isInitialized:!1,resolve:null,reject:null,monaco:null}))||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o,i,s=[],l=!0,d=!1;try{o=(n=n.call(e)).next,!1;for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),2!==s.length);l=!0);}catch(e){d=!0,a=e}finally{try{if(!l&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(d)throw a}}return s}}(r,2)||function(e,t){if(e){if("string"==typeof e)return U(e,2);var n=({}).toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?U(e,2):void 0}}(r,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),em=ep[0],eg=ep[1];function ex(e){return document.body.appendChild(e)}function ey(e){var t,n,r=em(function(e){return{config:e.config,reject:e.reject}}),a=(t="".concat(r.config.paths.vs,"/loader.js"),n=document.createElement("script"),t&&(n.src=t),n);return a.onload=function(){return e()},a.onerror=r.reject,a}function ev(){var e=em(function(e){return{config:e.config,resolve:e.resolve,reject:e.reject}}),t=window.require;t.config(e.config),t(["vs/editor/editor.main"],function(t){var n=t.m||t;eb(n),e.resolve(n)},function(t){e.reject(t)})}function eb(e){em().monaco||eg({monaco:e})}var ew=new Promise(function(e,t){return eg({resolve:e,reject:t})}),eN=function(){var e=em(function(e){return{monaco:e.monaco,isInitialized:e.isInitialized,resolve:e.resolve}});if(!e.isInitialized){if(eg({isInitialized:!0}),e.monaco)return e.resolve(e.monaco),eh(ew);if(window.monaco&&window.monaco.editor)return eb(window.monaco),e.resolve(window.monaco),eh(ew);eu(ex,ey)(ev)}return eh(ew)},ej={display:"flex",position:"relative",textAlign:"initial"},ek={width:"100%"},eS={display:"none"},eC={display:"flex",height:"100%",width:"100%",justifyContent:"center",alignItems:"center"},eE=function({children:e}){return l.default.createElement("div",{style:eC},e)},eM=(0,l.memo)(function({width:e,height:t,isEditorReady:n,loading:r,_ref:a,className:o,wrapperProps:i}){return l.default.createElement("section",{style:{...ej,width:e,height:t},...i},!n&&l.default.createElement(eE,null,r),l.default.createElement("div",{ref:a,style:{...ek,...!n&&eS},className:o}))}),e_=function(e){(0,l.useEffect)(e,[])},eA=function(e,t,n=!0){let r=(0,l.useRef)(!0);(0,l.useEffect)(r.current||!n?()=>{r.current=!1}:e,t)};function eR(){}function eP(e,t,n,r){var a,o,i,s,l,d;return a=e,o=r,a.editor.getModel(eO(a,o))||(i=e,s=t,l=n,d=r,i.editor.createModel(s,l,d?eO(i,d):void 0))}function eO(e,t){return e.Uri.parse(t)}(0,l.memo)(function({original:e,modified:t,language:n,originalLanguage:r,modifiedLanguage:a,originalModelPath:o,modifiedModelPath:i,keepCurrentOriginalModel:s=!1,keepCurrentModifiedModel:d=!1,theme:c="light",loading:u="Loading...",options:f={},height:h="100%",width:p="100%",className:m,wrapperProps:g={},beforeMount:x=eR,onMount:y=eR}){let[v,b]=(0,l.useState)(!1),[w,N]=(0,l.useState)(!0),j=(0,l.useRef)(null),k=(0,l.useRef)(null),S=(0,l.useRef)(null),C=(0,l.useRef)(y),E=(0,l.useRef)(x),M=(0,l.useRef)(!1);e_(()=>{let e=eN();return e.then(e=>(k.current=e)&&N(!1)).catch(e=>e?.type!=="cancelation"&&console.error("Monaco initialization: error:",e)),()=>{let t;return j.current?(t=j.current?.getModel(),void(s||t?.original?.dispose(),d||t?.modified?.dispose(),j.current?.dispose())):e.cancel()}}),eA(()=>{if(j.current&&k.current){let t=j.current.getOriginalEditor(),a=eP(k.current,e||"",r||n||"text",o||"");a!==t.getModel()&&t.setModel(a)}},[o],v),eA(()=>{if(j.current&&k.current){let e=j.current.getModifiedEditor(),r=eP(k.current,t||"",a||n||"text",i||"");r!==e.getModel()&&e.setModel(r)}},[i],v),eA(()=>{let e=j.current.getModifiedEditor();e.getOption(k.current.editor.EditorOption.readOnly)?e.setValue(t||""):t!==e.getValue()&&(e.executeEdits("",[{range:e.getModel().getFullModelRange(),text:t||"",forceMoveMarkers:!0}]),e.pushUndoStop())},[t],v),eA(()=>{j.current?.getModel()?.original.setValue(e||"")},[e],v),eA(()=>{let{original:e,modified:t}=j.current.getModel();k.current.editor.setModelLanguage(e,r||n||"text"),k.current.editor.setModelLanguage(t,a||n||"text")},[n,r,a],v),eA(()=>{k.current?.editor.setTheme(c)},[c],v),eA(()=>{j.current?.updateOptions(f)},[f],v);let _=(0,l.useCallback)(()=>{if(!k.current)return;E.current(k.current);let s=eP(k.current,e||"",r||n||"text",o||""),l=eP(k.current,t||"",a||n||"text",i||"");j.current?.setModel({original:s,modified:l})},[n,t,a,e,r,o,i]),A=(0,l.useCallback)(()=>{!M.current&&S.current&&(j.current=k.current.editor.createDiffEditor(S.current,{automaticLayout:!0,...f}),_(),k.current?.editor.setTheme(c),b(!0),M.current=!0)},[f,c,_]);return(0,l.useEffect)(()=>{v&&C.current(j.current,k.current)},[v]),(0,l.useEffect)(()=>{w||v||A()},[w,v,A]),l.default.createElement(eM,{width:p,height:h,isEditorReady:v,loading:u,_ref:S,className:m,wrapperProps:g})});var eT=function(e){let t=(0,l.useRef)();return(0,l.useEffect)(()=>{t.current=e},[e]),t.current},eD=new Map,ez=(0,l.memo)(function({defaultValue:e,defaultLanguage:t,defaultPath:n,value:r,language:a,path:o,theme:i="light",line:s,loading:d="Loading...",options:c={},overrideServices:u={},saveViewState:f=!0,keepCurrentModel:h=!1,width:p="100%",height:m="100%",className:g,wrapperProps:x={},beforeMount:y=eR,onMount:v=eR,onChange:b,onValidate:w=eR}){let[N,j]=(0,l.useState)(!1),[k,S]=(0,l.useState)(!0),C=(0,l.useRef)(null),E=(0,l.useRef)(null),M=(0,l.useRef)(null),_=(0,l.useRef)(v),A=(0,l.useRef)(y),R=(0,l.useRef)(),P=(0,l.useRef)(r),O=eT(o),T=(0,l.useRef)(!1),D=(0,l.useRef)(!1);e_(()=>{let e=eN();return e.then(e=>(C.current=e)&&S(!1)).catch(e=>e?.type!=="cancelation"&&console.error("Monaco initialization: error:",e)),()=>E.current?void(R.current?.dispose(),h?f&&eD.set(o,E.current.saveViewState()):E.current.getModel()?.dispose(),E.current.dispose()):e.cancel()}),eA(()=>{let i=eP(C.current,e||r||"",t||a||"",o||n||"");i!==E.current?.getModel()&&(f&&eD.set(O,E.current?.saveViewState()),E.current?.setModel(i),f&&E.current?.restoreViewState(eD.get(o)))},[o],N),eA(()=>{E.current?.updateOptions(c)},[c],N),eA(()=>{E.current&&void 0!==r&&(E.current.getOption(C.current.editor.EditorOption.readOnly)?E.current.setValue(r):r!==E.current.getValue()&&(D.current=!0,E.current.executeEdits("",[{range:E.current.getModel().getFullModelRange(),text:r,forceMoveMarkers:!0}]),E.current.pushUndoStop(),D.current=!1))},[r],N),eA(()=>{let e=E.current?.getModel();e&&a&&C.current?.editor.setModelLanguage(e,a)},[a],N),eA(()=>{void 0!==s&&E.current?.revealLine(s)},[s],N),eA(()=>{C.current?.editor.setTheme(i)},[i],N);let z=(0,l.useCallback)(()=>{if(!(!M.current||!C.current)&&!T.current){A.current(C.current);let l=o||n,d=eP(C.current,r||e||"",t||a||"",l||"");E.current=C.current?.editor.create(M.current,{model:d,automaticLayout:!0,...c},u),f&&E.current.restoreViewState(eD.get(l)),C.current.editor.setTheme(i),void 0!==s&&E.current.revealLine(s),j(!0),T.current=!0}},[e,t,n,r,a,o,c,u,f,i,s]);return(0,l.useEffect)(()=>{N&&_.current(E.current,C.current)},[N]),(0,l.useEffect)(()=>{k||N||z()},[k,N,z]),P.current=r,(0,l.useEffect)(()=>{N&&b&&(R.current?.dispose(),R.current=E.current?.onDidChangeModelContent(e=>{D.current||b(E.current.getValue(),e)}))},[N,b]),(0,l.useEffect)(()=>{if(N){let e=C.current.editor.onDidChangeMarkers(e=>{let t=E.current.getModel()?.uri;if(t&&e.find(e=>e.path===t.path)){let e=C.current.editor.getModelMarkers({resource:t});w?.(e)}});return()=>{e?.dispose()}}return()=>{}},[N,w]),l.default.createElement(eM,{width:p,height:m,isEditorReady:N,loading:d,_ref:M,className:g,wrapperProps:x})}),eL=e.i(69638),eI=e.i(73884);let e$=(0,S.default)("maximize-2",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"m21 3-7 7",key:"1l2asr"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M9 21H3v-6",key:"wtvkvv"}]]),eH=(0,S.default)("minimize-2",[["path",{d:"m14 10 7-7",key:"oa77jy"}],["path",{d:"M20 10h-6V4",key:"mjg0md"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M4 14h6v6",key:"rmj7iw"}]]);var eF=e.i(86368);let eB=({value:e,onChange:t,language:n,height:r="400px",nodeId:a,workflowId:o})=>{let i=(0,eF.useExecuteCode)(),[d,c]=(0,l.useState)(""),[u,f]=(0,l.useState)(""),[h,p]=(0,l.useState)(!1),m=async()=>{c(""),f(""),i.mutate({code:e,language:n,inputData:a||o?{node_id:a,workflow_id:o}:void 0},{onSuccess:e=>{c(e.output||"Code executed successfully!")},onError:e=>{f(e.message||"Failed to execute code")}})};return(0,s.jsxs)("div",{className:`relative ${h?"fixed inset-0 z-50 bg-background p-4":""}`,children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-2 px-1",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("span",{className:"text-xs font-bold text-muted-foreground uppercase tracking-wider",children:"python"===n?" Python":" JavaScript"}),(0,s.jsxs)("span",{className:"text-xs text-muted-foreground",children:[e.split("\n").length," lines"]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(O.Button,{size:"sm",variant:"ghost",onClick:()=>p(!h),className:"h-7 px-2",children:h?(0,s.jsx)(eH,{className:"h-3.5 w-3.5"}):(0,s.jsx)(e$,{className:"h-3.5 w-3.5"})}),(0,s.jsx)(O.Button,{size:"sm",onClick:m,disabled:i.isPending||!e.trim(),className:"h-7 px-3",children:i.isPending?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(T.Loader2,{className:"h-3.5 w-3.5 mr-1.5 animate-spin"}),"Running..."]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(A.Play,{className:"h-3.5 w-3.5 mr-1.5"}),"Test Run"]})})]})]}),(0,s.jsx)("div",{className:"border border-border rounded-xl overflow-hidden shadow-lg",children:(0,s.jsx)(ez,{height:h?"calc(100vh - 200px)":r,defaultLanguage:n,language:n,value:e||("python"===n?`# Python Script
# Available variables:
# - input_data: Data from previous node
# - context: Workflow context

def main(input_data, context):
    # Your code here
    result = {
        "message": "Hello from Python!",
        "input": input_data
    }
    return result

# Return value will be passed to next node
return main(input_data, context)`:`// JavaScript Script
// Available variables:
// - inputData: Data from previous node
// - context: Workflow context

function main(inputData, context) {
    // Your code here
    const result = {
        message: "Hello from JavaScript!",
        input: inputData
    };
    return result;
}

// Return value will be passed to next node
return main(inputData, context);`),onChange:e=>{t(e||"")},theme:"vs-dark",options:{minimap:{enabled:!h},fontSize:14,lineNumbers:"on",roundedSelection:!0,scrollBeyondLastLine:!1,automaticLayout:!0,tabSize:"python"===n?4:2,insertSpaces:!0,wordWrap:"on",theme:"vs-dark",padding:{top:16,bottom:16}},loading:(0,s.jsx)("div",{className:"flex items-center justify-center h-full bg-slate-950",children:(0,s.jsx)(T.Loader2,{className:"h-8 w-8 animate-spin text-primary"})})})}),(d||u)&&(0,s.jsxs)("div",{className:"mt-3 border border-border rounded-xl overflow-hidden",children:[(0,s.jsx)("div",{className:`px-4 py-2 flex items-center gap-2 text-sm font-semibold ${u?"bg-destructive/10 text-destructive":"bg-emerald-500/10 text-emerald-500"}`,children:u?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(eI.XCircle,{className:"h-4 w-4"}),"Execution Failed"]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(eL.CheckCircle,{className:"h-4 w-4"}),"Execution Successful"]})}),(0,s.jsx)("div",{className:"p-4 bg-slate-950 text-slate-100 font-mono text-sm max-h-48 overflow-auto",children:(0,s.jsx)("pre",{className:"whitespace-pre-wrap",children:u||d})})]}),(0,s.jsxs)("div",{className:"mt-2 px-1 text-xs text-muted-foreground",children:[" Tip: Use ",(0,s.jsx)("code",{className:"px-1 py-0.5 bg-muted rounded",children:"input_data"})," to access data from the previous node. Press ",(0,s.jsx)("code",{className:"px-1 py-0.5 bg-muted rounded",children:"Ctrl/Cmd + S"})," to save."]})]})};var eV=e.i(19765);let eq=(0,S.default)("file-braces",[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 12a1 1 0 0 0-1 1v1a1 1 0 0 1-1 1 1 1 0 0 1 1 1v1a1 1 0 0 0 1 1",key:"1oajmo"}],["path",{d:"M14 18a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1 1 1 0 0 1-1-1v-1a1 1 0 0 0-1-1",key:"mpwhp6"}]]);var eW=e.i(21218);let eK=(0,S.default)("cpu",[["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M17 20v2",key:"1rnc9c"}],["path",{d:"M17 2v2",key:"11trls"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M2 17h2",key:"7oei6x"}],["path",{d:"M2 7h2",key:"asdhe0"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"M20 17h2",key:"1fpfkl"}],["path",{d:"M20 7h2",key:"1o8tra"}],["path",{d:"M7 20v2",key:"4gnj0m"}],["path",{d:"M7 2v2",key:"1i4yhu"}],["rect",{x:"4",y:"4",width:"16",height:"16",rx:"2",key:"1vbyd7"}],["rect",{x:"8",y:"8",width:"8",height:"8",rx:"1",key:"z9xiuo"}]]);var eG=e.i(17697),eX=e.i(53305),eU=e.i(32102),eY=e.i(83123),eZ=e.i(14764),eQ=e.i(61263),eJ=e.i(96421),e0=e.i(61735),e1=e.i(91810),e2=e.i(1073),e5=e.i(3116),e3=e.i(17835);let e4=(0,S.default)("sliders-vertical",[["path",{d:"M10 8h4",key:"1sr2af"}],["path",{d:"M12 21v-9",key:"17s77i"}],["path",{d:"M12 8V3",key:"13r4qs"}],["path",{d:"M17 16h4",key:"h1uq16"}],["path",{d:"M19 12V3",key:"o1uvq1"}],["path",{d:"M19 21v-5",key:"qua636"}],["path",{d:"M3 14h4",key:"bcjad9"}],["path",{d:"M5 10V3",key:"cb8scm"}],["path",{d:"M5 21v-7",key:"1w1uti"}]]),e8=(0,S.default)("table",[["path",{d:"M12 3v18",key:"108xh3"}],["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}]]),e6=(0,S.default)("braces",[["path",{d:"M8 3H7a2 2 0 0 0-2 2v5a2 2 0 0 1-2 2 2 2 0 0 1 2 2v5c0 1.1.9 2 2 2h1",key:"ezmyqa"}],["path",{d:"M16 21h1a2 2 0 0 0 2-2v-5c0-1.1.9-2 2-2a2 2 0 0 1-2-2V5a2 2 0 0 0-2-2h-1",key:"e1hn23"}]]),e9=(0,S.default)("binary",[["rect",{x:"14",y:"14",width:"4",height:"6",rx:"2",key:"p02svl"}],["rect",{x:"6",y:"4",width:"4",height:"6",rx:"2",key:"xm4xkj"}],["path",{d:"M6 20h4",key:"1i6q5t"}],["path",{d:"M14 10h4",key:"ru81e7"}],["path",{d:"M6 14h2v6",key:"16z9wg"}],["path",{d:"M14 4h2v6",key:"1idq9u"}]]);var e7=e.i(55716),te=e.i(83086),tt=e.i(31245),tn=e.i(43531);let tr=({value:e,onChange:t,options:n,placeholder:r="Select...",disabled:a,className:o,itemIcon:i})=>{let[d,u]=(0,l.useState)(!1),f=(0,l.useRef)(null),h=n.find(t=>t.value===e);return(0,l.useEffect)(()=>{let e=e=>{f.current&&!f.current.contains(e.target)&&u(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]),(0,s.jsxs)("div",{className:(0,P.cn)("relative",o),ref:f,children:[(0,s.jsxs)("button",{type:"button",onClick:()=>!a&&u(!d),disabled:a,className:(0,P.cn)("w-full h-10 px-3 bg-muted/20 border border-border rounded-md text-xs text-left flex items-center justify-between transition-all focus:ring-1 focus:ring-primary/50 outline-none hover:bg-muted/30",a&&"opacity-50 cursor-not-allowed",d&&"ring-1 ring-primary/50 border-primary/50"),children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 min-w-0 flex-1",children:[i&&(0,s.jsx)(i,{className:"w-3.5 h-3.5 shrink-0 opacity-70"}),(0,s.jsxs)("div",{className:"flex flex-col truncate",children:[(0,s.jsx)("span",{className:(0,P.cn)("font-medium truncate",!h&&"text-muted-foreground"),children:h?h.label:r}),h?.description&&(0,s.jsxs)("span",{className:"text-[9px] text-muted-foreground/70 truncate -mt-0.5",children:[h.description.split("")[0]," "]})]})]}),(0,s.jsx)(g.ChevronDown,{className:(0,P.cn)("w-3.5 h-3.5 text-muted-foreground transition-transform duration-200",d&&"rotate-180")})]}),(0,s.jsx)(c.AnimatePresence,{children:d&&(0,s.jsx)(R.motion.div,{initial:{opacity:0,y:5},animate:{opacity:1,y:0},exit:{opacity:0,y:5},transition:{duration:.15},className:"absolute top-full left-0 right-0 mt-1 z-50 bg-popover/95 backdrop-blur-xl border border-border shadow-2xl rounded-md overflow-hidden max-h-[300px] overflow-y-auto custom-scrollbar",children:0===n.length?(0,s.jsx)("div",{className:"p-3 text-[10px] text-muted-foreground text-center",children:"No options available"}):(0,s.jsx)("div",{className:"p-1 space-y-0.5",children:n.map(n=>(0,s.jsxs)("button",{onClick:()=>{t(n.value),u(!1)},className:(0,P.cn)("w-full text-left p-2 rounded-sm flex items-start gap-2 hover:bg-accent transition-colors group",n.value===e&&"bg-primary/10"),children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 min-w-0 flex-1 overflow-hidden",children:[i&&(0,s.jsx)(i,{className:"w-3.5 h-3.5 opacity-70 shrink-0"}),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsx)("div",{className:(0,P.cn)("text-xs font-medium truncate",n.value===e?"text-primary":"text-foreground"),children:n.label}),n.description&&(0,s.jsx)("div",{className:"text-[10px] text-muted-foreground truncate opacity-70 group-hover:opacity-100",children:n.description})]})]}),n.value===e&&(0,s.jsx)(tn.Check,{className:"w-3.5 h-3.5 text-primary shrink-0 mt-0.5"})]},n.value))})})})]})},ta={"manual.trigger":eG.PlayCircle,"schedule.cron":e3.Timer,"webhook.receive":eX.Webhook,"whatsapp.trigger":W.LogoWhatsApp,"email.trigger":eU.Inbox,"rss.trigger":eY.Rss,"ai.llm":te.Sparkles,"ai.agent":tt.Bot,"data.set":H.Edit3,"data.transform":eJ.Shuffle,"slack.send":_.MessageSquare,"whatsapp.send":W.LogoWhatsApp,"google_sheets.write":W.LogoGoogleSheets,"google_sheets.read":W.LogoGoogleSheets,"http.request":I.Globe,"code.python":W.LogoPython,"code.javascript":b.Code,"email.send":eZ.Send,"discord.send":eZ.Send,"condition.if":eQ.Split,"logic.parallel":e7.GitBranch,"logic.merge":e0.GitMerge,"logic.delay":e5.Clock,"logic.loop":e1.RotateCw,"logic.switch":eJ.Shuffle,"logic.pause":e2.PauseCircle,"execution.pause":e2.PauseCircle,"utility.noop":eW.Activity},to=({data:e,mode:t})=>{if(!e||0===Object.keys(e).length)return(0,s.jsxs)("div",{className:"h-full flex flex-col items-center justify-center text-muted-foreground/20 opacity-40 py-10",children:[(0,s.jsx)(w.Database,{className:"w-8 h-8 mb-2 stroke-1"}),(0,s.jsx)("span",{className:"text-[10px] font-bold uppercase tracking-widest",children:"No Data Recorded"})]});if("json"===t)return(0,s.jsx)("pre",{className:"text-[9px] font-mono text-emerald-400/60 leading-tight",children:JSON.stringify(e,null,2)});if("schema"===t){let t=(e,n="")=>e&&"object"==typeof e?Object.entries(e).flatMap(([e,r])=>{let a=n?`${n}.${e}`:e,o=Array.isArray(r)?"array":typeof r,i=[{path:a,type:o}];return"object"!==o||null===r||Array.isArray(r)?i:[...i,...t(r,a)]}):[],n=t(e);return(0,s.jsx)("div",{className:"space-y-1",children:n.map((e,t)=>(0,s.jsxs)("div",{className:"flex items-center justify-between py-1 px-2 bg-white/2 border border-white/5 rounded-sm",children:[(0,s.jsx)("span",{className:"text-[9px] font-mono text-muted-foreground",children:e.path}),(0,s.jsx)("span",{className:"text-[8px] font-bold uppercase text-primary/50 tracking-tighter",children:e.type})]},t))})}if("table"===t){let t=Array.isArray(e)?e:[e],n=Array.from(new Set(t.flatMap(e=>Object.keys(e))));return(0,s.jsx)("div",{className:"overflow-auto border border-border rounded-sm",children:(0,s.jsxs)("table",{className:"w-full text-left text-[9px] border-collapse",children:[(0,s.jsx)("thead",{className:"bg-muted/50 sticky top-0",children:(0,s.jsx)("tr",{children:n.map(e=>(0,s.jsx)("th",{className:"px-2 py-1.5 border-b border-border font-black uppercase text-muted-foreground/60",children:e},e))})}),(0,s.jsx)("tbody",{children:t.map((e,t)=>(0,s.jsx)("tr",{className:"border-b border-white/5 hover:bg-white/2",children:n.map(t=>(0,s.jsx)("td",{className:"px-2 py-1.5 font-mono text-muted-foreground truncate max-w-[120px]",children:"object"==typeof e[t]?"{...}":String(e[t])},t))},t))})]})})}return null},ti=({node:e,onSelect:t,direction:n})=>{let r=ta[e.data.node_name||""]||("trigger"===e.data.type?j.Zap:k.Settings);return(0,s.jsxs)(R.motion.button,{whileHover:{scale:1.1,backgroundColor:"rgba(var(--primary), 0.1)"},whileTap:{scale:.9},onClick:()=>t(e),className:"h-10 w-10 shrink-0 bg-card border border-border rounded-md flex items-center justify-center shadow-lg hover:border-primary/50 transition-all group relative",title:`${n}: ${e.data.label}`,children:[(0,s.jsx)(r,{className:"w-4 h-4 text-muted-foreground group-hover:text-primary"}),(0,s.jsx)("div",{className:"absolute left-full ml-2 px-2 py-1 bg-popover text-[8px] font-bold text-popover-foreground rounded-sm border border-border opacity-0 group-hover:opacity-100 pointer-events-none whitespace-nowrap z-[110]",children:e.data.label})]})},ts=({checked:e,onChange:t})=>(0,s.jsx)("div",{className:(0,P.cn)("relative w-8 h-4.5 rounded-full transition-all duration-300 cursor-pointer",e?"bg-primary":"bg-muted-foreground/20 hover:bg-muted-foreground/30"),onClick:()=>t(!e),children:(0,s.jsx)(R.motion.div,{animate:{x:e?16:2},initial:!1,transition:{type:"spring",stiffness:500,damping:30},className:"absolute top-0.75 w-3 h-3 rounded-full bg-white shadow-sm"})}),tl=({node:e,schema:t,allNodes:n,edges:r,onSelectNode:a,onClose:o,onUpdate:i,onExecute:d,saveStatus:u="idle",isDirty:f=!1})=>{let S,[D,z]=(0,l.useState)(e.data.config||{}),[L,I]=(0,l.useState)(e.data.settings||{}),[$,H]=(0,l.useState)("parameters"),F=(0,h.useQueries)({queries:t.inputs.map(e=>{let n=e.dynamic_options,r=e.dynamic_options,a=e.dynamic_dependencies||[],o={};a.forEach(e=>{o[e]=D[e]});let i=n&&Object.values(o).some(e=>void 0!==e&&""!==e&&null!==e);return{queryKey:["node-options",t.name,e.name,o],queryFn:async()=>await eV.workflowApi.getNodeOptions(t.name,r,o),enabled:!!i,staleTime:3e5}})}),[B,V]=(0,l.useState)("json"),[q,K]=(0,l.useState)("json"),[G,U]=(0,l.useState)(280),[Y,Z]=(0,l.useState)(320),Q=(0,l.useRef)(null),J=(0,l.useRef)(null),ee=e=>t=>{J.current=e,document.body.style.cursor="col-resize",document.body.style.userSelect="none"},et=(0,l.useCallback)(e=>{if(!J.current||!Q.current)return;let t=Q.current.getBoundingClientRect();if("left"===J.current){let n=e.clientX-t.left;n>220&&n<.45*t.width&&U(n)}else if("right"===J.current){let n=t.right-e.clientX;n>220&&n<.45*t.width&&Z(n)}},[]),en=(0,l.useCallback)(()=>{J.current=null,document.body.style.cursor="default",document.body.style.userSelect="auto"},[]);(0,l.useEffect)(()=>(window.addEventListener("mousemove",et),window.addEventListener("mouseup",en),()=>{window.removeEventListener("mousemove",et),window.removeEventListener("mouseup",en)}),[et,en]);let er=(0,l.useRef)(null);(0,l.useEffect)(()=>{e.id!==er.current&&(z(e.data.config||{}),I(e.data.settings||{}),er.current=e.id)},[e.id,e.data.config,e.data.settings]);let ea=(t,n)=>{let r={...D,[t]:n};z(r),i(e.id,{...e.data,config:r})},eo=(t,n)=>{let r={...L,[t]:n};I(r),i(e.id,{...e.data,settings:r})},{previousNodes:ei,nextNodes:es}=(0,l.useMemo)(()=>{let t=r.filter(t=>t.target===e.id).map(e=>e.source),a=r.filter(t=>t.source===e.id).map(e=>e.target);return{previousNodes:n.filter(e=>t.includes(e.id)),nextNodes:n.filter(e=>a.includes(e.id))}},[e.id,n,r]),el=(0,l.useMemo)(()=>{let t=e.data.input;if(t&&Object.keys(t).length>0)return t;if(0===ei.length)return{};if(1===ei.length)return ei[0].data.output||ei[0].data.lastResult||{};let n={};return ei.forEach(e=>{n[e.id]=e.data.output||e.data.lastResult||{}}),n},[e.data,ei]);return(0,s.jsxs)("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-background/80 backdrop-blur-md pointer-events-auto",children:[(0,s.jsx)("div",{className:"absolute left-6 top-1/2 -translate-y-1/2 flex flex-col gap-3",children:ei.map(e=>(0,s.jsx)(ti,{node:e,onSelect:a,direction:"Prev"},e.id))}),(0,s.jsx)("div",{className:"absolute right-6 top-1/2 -translate-y-1/2 flex flex-col gap-3",children:es.map(e=>(0,s.jsx)(ti,{node:e,onSelect:a,direction:"Next"},e.id))}),(0,s.jsxs)(R.motion.div,{ref:Q,layoutId:`node-modal-${e.id}`,className:"w-[1520px] h-[92vh] max-w-[96vw] bg-background border border-border shadow-2xl rounded-lg flex flex-col overflow-hidden ring-1 ring-white/5",children:[(0,s.jsxs)("header",{className:"h-14 px-6 border-b border-border bg-muted/10 flex items-center justify-between shrink-0",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"h-8 w-8 rounded bg-primary/10 text-primary flex items-center justify-center border border-primary/20",children:(S=ta[e.data.node_name||""]||("trigger"===e.data.type?j.Zap:k.Settings),(0,s.jsx)(S,{className:"w-4 h-4 fill-current"}))}),(0,s.jsx)("input",{value:e.data.label,onChange:t=>i(e.id,{...e.data,label:t.target.value}),className:"text-sm font-bold bg-transparent border-none focus:outline-none focus:ring-1 focus:ring-primary/20 rounded-sm px-1 -ml-1 w-96 hover:bg-white/5"}),(0,s.jsx)("span",{className:"text-[10px] font-black uppercase tracking-widest text-muted-foreground/40 px-2 py-0.5 rounded-sm border border-border/50",children:t.label})]}),(0,s.jsx)("div",{className:"flex items-center gap-2",children:(0,s.jsx)(O.Button,{variant:"ghost",size:"icon",onClick:o,className:"rounded-md h-8 w-8",children:(0,s.jsx)(p.X,{className:"w-4 h-4"})})})]}),(0,s.jsxs)("div",{className:"flex-1 flex overflow-hidden",children:[(0,s.jsxs)("aside",{style:{width:G},className:"border-r border-border bg-muted/5 flex flex-col overflow-hidden shrink-0",children:[(0,s.jsxs)("div",{className:"px-4 py-3 border-b border-border bg-muted/10 flex items-center justify-between shrink-0",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(eW.Activity,{className:"w-3 h-3 text-muted-foreground"}),(0,s.jsx)("span",{className:"text-[9px] font-black uppercase tracking-widest",children:"Input"})]}),(0,s.jsx)("div",{className:"flex p-0.5 bg-background rounded-sm border border-border/50",children:[{id:"json",icon:e6},{id:"table",icon:e8},{id:"schema",icon:e9}].map(e=>(0,s.jsx)("button",{onClick:()=>V(e.id),className:(0,P.cn)("p-1 rounded-sm transition-all",B===e.id?"bg-muted text-primary":"text-muted-foreground/40 hover:text-muted-foreground"),children:(0,s.jsx)(e.icon,{className:"w-2.5 h-2.5"})},e.id))})]}),(0,s.jsx)("div",{className:"flex-1 overflow-auto p-4 custom-scrollbar bg-black/10",children:(0,s.jsx)(to,{data:el,mode:B})})]}),(0,s.jsx)("div",{onMouseDown:ee("left"),className:"w-1.5 -mx-0.75 hover:bg-primary/50 cursor-col-resize transition-all shrink-0 z-20 flex items-center justify-center group",children:(0,s.jsx)("div",{className:"h-8 w-1 rounded-full bg-border group-hover:bg-primary/50"})}),(0,s.jsxs)("main",{className:"flex-1 flex flex-col bg-background overflow-y-auto custom-scrollbar",children:[(0,s.jsxs)("div",{className:"sticky top-0 z-10 bg-background/80 backdrop-blur-md px-6 py-3 border-b border-border/50 flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex bg-muted/30 p-1 rounded-md shrink-0",children:[(0,s.jsxs)("button",{onClick:()=>H("parameters"),className:(0,P.cn)("flex items-center gap-2 px-4 py-1.5 rounded-sm transition-all text-[10px] font-bold uppercase tracking-wider","parameters"===$?"bg-background text-primary shadow-sm":"text-muted-foreground hover:text-foreground"),children:[(0,s.jsx)(e4,{className:"w-3.5 h-3.5"}),"Parameters"]}),(0,s.jsxs)("button",{onClick:()=>H("settings"),className:(0,P.cn)("flex items-center gap-2 px-4 py-1.5 rounded-sm transition-all text-[10px] font-bold uppercase tracking-wider","settings"===$?"bg-background text-primary shadow-sm":"text-muted-foreground hover:text-foreground"),children:[(0,s.jsx)(k.Settings,{className:"w-3.5 h-3.5"}),"Settings"]})]}),(0,s.jsxs)(O.Button,{size:"sm",onClick:()=>d?.(e.id,D,el),className:"h-8 px-4 rounded-md bg-primary text-primary-foreground font-black uppercase tracking-widest text-[9px] shadow-lg shadow-primary/20 hover:scale-[1.02] transition-transform flex items-center gap-2",children:[(0,s.jsx)(A.Play,{className:"w-2.5 h-2.5 fill-current"}),"Run Step"]})]}),(0,s.jsx)("div",{className:"max-w-3xl mx-auto w-full p-10 space-y-8",children:(0,s.jsx)(c.AnimatePresence,{mode:"wait",children:"parameters"===$?(0,s.jsx)(R.motion.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"space-y-6",children:0===t.inputs.length?(0,s.jsxs)("div",{className:"py-20 text-center text-muted-foreground/30 flex flex-col items-center gap-4",children:[(0,s.jsx)("div",{className:"p-6 rounded border border-dashed border-border",children:(0,s.jsx)(eK,{className:"w-10 h-10"})}),(0,s.jsx)("p",{className:"text-[10px] uppercase font-bold tracking-widest",children:"Default Configuration Only"})]}):t.inputs.map(n=>n.show_if&&!Object.entries(n.show_if).every(([e,t])=>D[e]===t)?null:(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)("label",{className:"text-[10px] font-bold text-muted-foreground uppercase tracking-widest flex items-center gap-2",children:[(e=>{switch(e){case"number":return(0,s.jsx)(y.Hash,{className:"w-3 h-3"});case"select":return(0,s.jsx)(v.List,{className:"w-3 h-3"});case"json":return(0,s.jsx)(w.Database,{className:"w-3 h-3"});case"code":return(0,s.jsx)(b.Code,{className:"w-3 h-3"});case"credential":return(0,s.jsx)(N.Key,{className:"w-3 h-3"});case"messages":return(0,s.jsx)(_.MessageSquare,{className:"w-3 h-3"});default:return(0,s.jsx)(x.Type,{className:"w-3 h-3"})}})(n.type),n.label]}),"messages"===n.type?(0,s.jsx)("div",{className:"space-y-4",children:(0,s.jsxs)("div",{className:"space-y-3",children:[(D[n.name]||n.default||[]).map((e,t)=>(0,s.jsxs)("div",{className:"relative group/msg p-4 bg-muted/10 border border-border rounded-xl space-y-3 transition-all hover:bg-muted/20",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsxs)("select",{value:e.role,onChange:e=>{let r=[...D[n.name]||n.default||[]];r[t]={...r[t],role:e.target.value},ea(n.name,r)},className:"pl-3 pr-8 py-1.5 bg-background border border-border rounded-lg text-[10px] font-bold uppercase tracking-wider appearance-none focus:outline-none focus:ring-1 focus:ring-primary/20",children:[(0,s.jsx)("option",{value:"system",children:"System (Goal)"}),(0,s.jsx)("option",{value:"user",children:"User (Request)"}),(0,s.jsx)("option",{value:"assistant",children:"AI (Response)"})]}),(0,s.jsx)(g.ChevronDown,{className:"absolute right-2 top-1/2 -translate-y-1/2 w-3 h-3 text-muted-foreground/40 pointer-events-none"})]}),(0,s.jsx)("button",{onClick:()=>{let e=(D[n.name]||n.default||[]).filter((e,n)=>n!==t);ea(n.name,e)},className:"p-1.5 text-muted-foreground/20 hover:text-destructive hover:bg-destructive/10 rounded-lg transition-all",children:(0,s.jsx)(M,{className:"w-3.5 h-3.5"})})]}),(0,s.jsx)("textarea",{value:e.content,onChange:e=>{let r=[...D[n.name]||n.default||[]];r[t]={...r[t],content:e.target.value},ea(n.name,r)},className:"w-full bg-transparent border-none text-xs placeholder:text-muted-foreground/30 focus:outline-none resize-none custom-scrollbar min-h-[60px]",placeholder:"Type instructions or message... {{use_variables}}"})]},t)),(0,s.jsxs)("button",{onClick:()=>{let e=D[n.name]||n.default||[];ea(n.name,[...e,{role:"user",content:""}])},className:"w-full py-3 border border-dashed border-border rounded-xl text-[10px] font-bold text-muted-foreground/50 hover:text-primary hover:border-primary/40 hover:bg-primary/5 transition-all flex items-center justify-center gap-2 group",children:[(0,s.jsx)(E.Plus,{className:"w-3.5 h-3.5 group-hover:scale-110 transition-transform"}),"Add Interaction Step"]})]})}):"code"===n.type?(0,s.jsx)("div",{className:"rounded-md overflow-hidden border border-border shadow-inner bg-black/20",children:(0,s.jsx)(eB,{value:D[n.name]||n.default||"",onChange:e=>ea(n.name,e),language:t.name.includes("python")?"python":"javascript",height:"400px",nodeId:e.id})}):"select"===n.type?(0,s.jsx)(tr,{value:D[n.name]||n.default||"",onChange:e=>ea(n.name,e),options:F[t.inputs.indexOf(n)]?.data||n.options||[],placeholder:`Select ${n.label.toLowerCase()}...`,disabled:F[t.inputs.indexOf(n)]?.isLoading,className:"w-full",itemIcon:"spreadsheet_id"===n.name?W.LogoGoogleSheets:void 0}):"credential"===n.type?(0,s.jsx)(X,{value:D[n.name],onChange:e=>ea(n.name,e),credentialType:n.credential_type||"generic",label:n.label}):"json"===n.type?(0,s.jsxs)("div",{className:"relative rounded-md overflow-hidden border border-border bg-slate-950 shadow-lg",children:[(0,s.jsx)("div",{className:"absolute top-2 right-2 flex gap-1 z-10",children:(0,s.jsx)("span",{className:"text-[8px] font-bold text-slate-500 uppercase tracking-widest bg-slate-900/80 px-2 py-0.5 rounded border border-slate-800",children:"JSON"})}),(0,s.jsx)("textarea",{value:D[n.name]&&"object"==typeof D[n.name]?JSON.stringify(D[n.name],null,2):D[n.name]||"",onChange:e=>{try{let t=JSON.parse(e.target.value);ea(n.name,t)}catch{ea(n.name,e.target.value)}},className:"w-full px-4 py-4 bg-transparent text-slate-300 font-mono text-[11px] h-32 focus:outline-none transition-all shadow-inner resize-none custom-scrollbar",placeholder:"{}"})]}):(0,s.jsx)("input",{className:"w-full h-10 px-4 bg-muted/20 border border-border rounded-md text-xs focus:ring-1 focus:ring-primary/50 outline-none transition-all placeholder:text-muted-foreground/20",value:D[n.name]||"",onChange:e=>ea(n.name,e.target.value),placeholder:`Enter ${n.label.toLowerCase()}...`})]},n.name))},"p"):(0,s.jsxs)(R.motion.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"space-y-6",children:[(0,s.jsxs)("div",{className:"p-6 rounded-md bg-amber-500/5 border border-amber-500/10 flex gap-4",children:[(0,s.jsx)(m.Info,{className:"w-5 h-5 text-amber-500 shrink-0"}),(0,s.jsx)("p",{className:"text-[11px] text-muted-foreground leading-relaxed",children:"System-level orchestration: Configure retries, error handling, and timeout behavior for this internal node execution."})]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between p-4 rounded-md border border-border bg-card/50",children:[(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsx)("div",{className:"text-xs font-bold uppercase tracking-wider",children:"Always Output Data"}),(0,s.jsx)("div",{className:"text-[10px] text-muted-foreground",children:"Return empty object if no results"})]}),(0,s.jsx)(ts,{checked:L.alwaysOutputData,onChange:e=>eo("alwaysOutputData",e)})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between p-4 rounded-md border border-border bg-card/50",children:[(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsx)("div",{className:"text-xs font-bold uppercase tracking-wider",children:"Execute Once"}),(0,s.jsx)("div",{className:"text-[10px] text-muted-foreground",children:"Only run first time in a loop"})]}),(0,s.jsx)(ts,{checked:L.executeOnce,onChange:e=>eo("executeOnce",e)})]}),(0,s.jsxs)("div",{className:"space-y-4 p-4 rounded-md border border-border bg-card/50",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsx)("div",{className:"text-xs font-bold uppercase tracking-wider",children:"Retry On Fail"}),(0,s.jsx)("div",{className:"text-[10px] text-muted-foreground",children:"Automatically retry if node fails"})]}),(0,s.jsx)(ts,{checked:L.retryOnFail,onChange:e=>eo("retryOnFail",e)})]}),L.retryOnFail&&(0,s.jsx)(R.motion.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},className:"pt-4 space-y-4 border-t border-border/50",children:(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{className:"space-y-1.5",children:[(0,s.jsx)("label",{className:"text-[10px] font-bold text-muted-foreground uppercase tracking-widest ml-1",children:"Max Retries"}),(0,s.jsx)("input",{type:"number",value:L.maxRetries??3,onChange:e=>eo("maxRetries",Number(e.target.value)),className:"w-full h-10 px-4 bg-muted/20 border border-border rounded-md text-xs focus:ring-1 focus:ring-primary/50 outline-none transition-all"})]}),(0,s.jsxs)("div",{className:"space-y-1.5",children:[(0,s.jsx)("label",{className:"text-[10px] font-bold text-muted-foreground uppercase tracking-widest ml-1",children:"Retry Delay (s)"}),(0,s.jsx)("input",{type:"number",value:L.retryDelay??5,onChange:e=>eo("retryDelay",Number(e.target.value)),className:"w-full h-10 px-4 bg-muted/20 border border-border rounded-md text-xs focus:ring-1 focus:ring-primary/50 outline-none transition-all"})]})]})})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("label",{className:"text-[10px] font-bold text-muted-foreground uppercase tracking-widest ml-1",children:"On Error"}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsxs)("select",{value:L.onError||"stop",onChange:e=>eo("onError",e.target.value),className:"w-full h-10 px-4 bg-muted/20 border border-border rounded-md text-xs focus:ring-1 focus:ring-primary/50 outline-none transition-all appearance-none",children:[(0,s.jsx)("option",{value:"stop",children:"Stop Workflow"}),(0,s.jsx)("option",{value:"continue",children:"Continue (Ignore Error)"}),(0,s.jsx)("option",{value:"retry",children:"Retry and Stop"})]}),(0,s.jsx)(g.ChevronDown,{className:"absolute right-4 top-1/2 -translate-y-1/2 w-3.5 h-3.5 text-muted-foreground pointer-events-none"})]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("label",{className:"text-[10px] font-bold text-muted-foreground uppercase tracking-widest ml-1",children:"Notes"}),(0,s.jsx)("textarea",{value:L.notes||"",onChange:e=>eo("notes",e.target.value),className:"w-full px-4 py-3 bg-muted/20 border border-border rounded-md text-xs transition-all focus:ring-1 focus:ring-primary/50 outline-none h-32 resize-none custom-scrollbar",placeholder:"Add notes about what this node does..."})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between p-4 rounded-md border border-border bg-card/50",children:[(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsx)("div",{className:"text-xs font-bold uppercase tracking-wider",children:"Display Note in Flow"}),(0,s.jsx)("div",{className:"text-[10px] text-muted-foreground",children:"Show this note on the canvas"})]}),(0,s.jsx)(ts,{checked:L.displayNoteInFlow,onChange:e=>eo("displayNoteInFlow",e)})]})]})]},"s")})})]}),(0,s.jsx)("div",{onMouseDown:ee("right"),className:"w-1.5 -mx-0.75 hover:bg-primary/50 cursor-col-resize transition-all shrink-0 z-20 flex items-center justify-center group",children:(0,s.jsx)("div",{className:"h-8 w-1 rounded-full bg-border group-hover:bg-primary/50"})}),(0,s.jsxs)("aside",{style:{width:Y},className:"border-l border-border bg-muted/5 flex flex-col overflow-hidden shrink-0 relative",children:["pending"===e.data.status&&(0,s.jsxs)("div",{className:"absolute inset-0 bg-background/50 backdrop-blur-sm z-50 flex flex-col items-center justify-center gap-3",children:[(0,s.jsx)(T.Loader2,{className:"w-8 h-8 animate-spin text-primary"}),(0,s.jsx)("span",{className:"text-xs font-bold uppercase tracking-widest text-muted-foreground",children:"Executing..."})]}),(0,s.jsxs)("div",{className:"px-4 py-3 border-b border-border bg-muted/10 flex items-center justify-between shrink-0",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(eq,{className:"w-3 h-3 text-muted-foreground"}),(0,s.jsx)("span",{className:"text-[9px] font-black uppercase tracking-widest",children:"Output"})]}),(0,s.jsx)("div",{className:"flex p-0.5 bg-background rounded-sm border border-border/50",children:[{id:"json",icon:e6},{id:"table",icon:e8},{id:"schema",icon:e9}].map(e=>(0,s.jsx)("button",{onClick:()=>K(e.id),className:(0,P.cn)("p-1 rounded-sm transition-all",q===e.id?"bg-muted text-primary":"text-muted-foreground/40 hover:text-muted-foreground"),children:(0,s.jsx)(e.icon,{className:"w-2.5 h-2.5"})},e.id))})]}),(0,s.jsxs)("div",{className:"flex-1 overflow-auto p-4 custom-scrollbar bg-black/10 flex flex-col gap-4",children:["failed"===e.data.status&&e.data.error?(0,s.jsxs)("div",{className:"p-4 rounded-md border border-destructive/50 bg-destructive/10 text-destructive text-xs font-mono break-words shrink-0",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-2 font-bold uppercase tracking-wider",children:[(0,s.jsx)(C.AlertCircle,{className:"w-4 h-4"}),"Execution Failed"]}),e.data.error]}):null,(0,s.jsx)(to,{data:e.data.output,mode:q})]})]})]}),(0,s.jsxs)("footer",{className:"h-14 px-6 border-t border-border bg-card flex items-center justify-between shrink-0",children:[(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("div",{className:(0,P.cn)("w-1.5 h-1.5 rounded-full transition-all duration-500","saving"===u?"bg-amber-500 shadow-[0_0_8px_rgba(245,158,11,0.5)] animate-pulse":f?"bg-blue-500 shadow-[0_0_8px_rgba(59,130,246,0.3)]":"bg-emerald-500 shadow-[0_0_8px_rgba(16,185,129,0.5)]")}),(0,s.jsx)("span",{className:"text-[10px] text-muted-foreground uppercase tracking-widest font-bold",children:"saving"===u?"Saving changes...":f?"Unsaved changes":"All changes saved"})]}),(0,s.jsx)("div",{className:"h-4 w-px bg-border/50 mx-2"}),(0,s.jsxs)("div",{className:"flex items-center gap-2 opacity-30 grayscale pointer-events-none",children:[(0,s.jsx)(W.LogoPython,{className:"w-4 h-4 shadow-sm"}),(0,s.jsx)("span",{className:"text-[9px] font-black uppercase tracking-[0.2em]",children:"Engine Instance Ready"})]})]}),(0,s.jsxs)("div",{className:"text-[8px] font-black uppercase tracking-widest text-muted-foreground/30",children:["Node ID: ",e.id]})]})]},e.id)]})};var td=e.i(778),tc=e.i(20506),tu=e.i(38869),tf=e.i(55514),th=e.i(55466),tp=e.i(95107),tm=e.i(17940),tg=e.i(44068);let tx={"manual.trigger":td.GenericTriggerNode,"schedule.cron":td.GenericTriggerNode,"webhook.receive":td.GenericTriggerNode,"email.receive":tu.EmailTriggerNode,"form.submit":td.GenericTriggerNode,"rss.read":td.GenericTriggerNode,"whatsapp.receive":tc.WhatsAppTriggerNode,"google_sheets.read":th.GoogleSheetsNode,"google_sheets.write":th.GoogleSheetsNode,"email.send":tp.EmailActionNode,"code.python":tm.PythonCodeNode,"code.javascript":tm.PythonCodeNode,"discord.send":tf.GenericActionNode,"slack.send":tf.GenericActionNode,"whatsapp.send":tf.GenericActionNode,"http.request":tf.GenericActionNode,"data.store":tf.GenericActionNode,"data.set":tf.GenericActionNode,"data.transform":tf.GenericActionNode,"ai.agent":tf.GenericActionNode,"ai.llm":tf.GenericActionNode,"condition.if":tg.GenericLogicNode,"condition.switch":tg.GenericLogicNode,"execution.pause":tg.GenericLogicNode,"logic.loop":tg.GenericLogicNode,"logic.delay":tg.GenericLogicNode,"logic.merge":tg.GenericLogicNode,"logic.parallel":tg.GenericLogicNode,"utility.noop":tg.GenericLogicNode,trigger:td.GenericTriggerNode,action:tf.GenericActionNode,logic:tg.GenericLogicNode,default:f.BaseNode};var ty=e.i(68054),tv=e.i(78894);let tb=(0,S.default)("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);var tw=e.i(74886);function tN({logs:e,isOpen:t,onClose:n,onClear:r}){let a=(0,l.useRef)(null),[o,i]=(0,l.useState)(320),[d,c]=(0,l.useState)(!1),[u,f]=(0,l.useState)(!1);return((0,l.useEffect)(()=>{let e=e=>{if(!d)return;let t=window.innerHeight-e.clientY;t>100&&t<.8*window.innerHeight&&i(t)},t=()=>{c(!1)};return d&&(window.addEventListener("mousemove",e),window.addEventListener("mouseup",t)),()=>{window.removeEventListener("mousemove",e),window.removeEventListener("mouseup",t)}},[d]),(0,l.useEffect)(()=>{a.current&&(a.current.scrollTop=a.current.scrollHeight)},[e,t]),t)?(0,s.jsxs)(R.motion.div,{initial:{height:0,opacity:0,y:20},animate:{height:o,opacity:1,y:0,transition:d?{duration:0}:{type:"spring",damping:25,stiffness:300}},exit:{height:0,opacity:0,y:20},style:{height:o},className:(0,P.cn)("fixed bottom-0 left-0 right-0 border-t border-border/50 bg-card/80 backdrop-blur-xl flex flex-col shadow-[0_-10px_40px_rgba(0,0,0,0.1)] z-50 overflow-hidden",d&&"transition-none select-none"),children:[(0,s.jsx)("div",{onMouseDown:e=>{c(!0),e.preventDefault()},className:"absolute top-0 left-0 right-0 h-1.5 cursor-ns-resize hover:bg-primary/30 transition-colors z-40 group flex items-center justify-center",children:(0,s.jsx)("div",{className:"w-12 h-1 rounded-full bg-border group-hover:bg-primary/50"})}),(0,s.jsxs)("div",{className:"flex items-center justify-between px-6 py-3 border-b border-border/50 bg-muted/40 backdrop-blur-md shrink-0",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"flex items-center justify-center h-8 w-8 rounded-lg bg-primary/10 border border-primary/20",children:(0,s.jsx)(ty.Terminal,{className:"h-4 w-4 text-primary"})}),(0,s.jsx)("div",{children:(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("h3",{className:"text-sm font-semibold tracking-tight",children:"Execution logs"}),(0,s.jsxs)("div",{className:"flex items-center gap-1.5 px-2 py-0.5 rounded-full bg-emerald-500/10 border border-emerald-500/20",children:[(0,s.jsx)("span",{className:"h-1.5 w-1.5 rounded-full bg-emerald-500 animate-pulse"}),(0,s.jsx)("span",{className:"text-[10px] font-medium text-emerald-600 dark:text-emerald-400 uppercase tracking-wider",children:"Live"})]})]})})]}),(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsxs)("div",{className:"flex items-center p-1 bg-background/80 backdrop-blur-sm rounded-xl border border-border shadow-sm",children:[(0,s.jsxs)(O.Button,{variant:"ghost",size:"sm",onClick:()=>{let t=e.map(e=>`[${new Date(e.timestamp).toLocaleString()}] ${e.type.toUpperCase()}: ${e.message}${e.data?"\nData: "+JSON.stringify(e.data,null,2):""}`).join("\n\n");navigator.clipboard.writeText(t),f(!0),setTimeout(()=>f(!1),2e3)},className:(0,P.cn)("h-8 text-[11px] font-bold transition-all px-3 gap-2 rounded-lg",u?"bg-emerald-500/20 text-emerald-600":"hover:bg-primary/10 text-primary"),children:[u?(0,s.jsx)(eL.CheckCircle,{className:"h-3.5 w-3.5"}):(0,s.jsx)(tw.Copy,{className:"h-3.5 w-3.5"}),(0,s.jsx)("span",{children:"Copy All"})]}),(0,s.jsx)("div",{className:"w-px h-4 bg-border mx-1"}),(0,s.jsxs)(O.Button,{variant:"ghost",size:"sm",onClick:r,className:"h-8 text-[11px] font-bold text-muted-foreground hover:text-destructive hover:bg-destructive/10 transition-all px-3 gap-2 rounded-lg",children:[(0,s.jsx)(ty.Terminal,{className:"h-3.5 w-3.5"}),(0,s.jsx)("span",{children:"Clear Logs"})]})]}),(0,s.jsx)("div",{className:"w-px h-4 bg-border mx-1"}),(0,s.jsx)("button",{onClick:n,className:"h-8 w-8 flex items-center justify-center rounded-full hover:bg-muted transition-colors text-muted-foreground hover:text-foreground",children:(0,s.jsx)(p.X,{className:"h-4 w-4"})})]})]}),(0,s.jsx)("div",{ref:a,className:"flex-1 overflow-y-auto p-6 space-y-1.5 font-mono text-[10px] custom-scrollbar",style:{scrollBehavior:"smooth"},children:0===e.length?(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center py-12 text-center space-y-3 opacity-50",children:[(0,s.jsx)(ty.Terminal,{className:"h-8 w-8 stroke-1"}),(0,s.jsx)("p",{className:"max-w-[200px] text-xs leading-relaxed italic",children:"No active logs. Start a workflow to monitor execution in real-time."})]}):(0,s.jsx)("div",{className:"space-y-1",children:e.map(e=>(0,s.jsx)(tj,{log:e},e.id))})})]}):null}function tj({log:e}){let[t,n]=(0,l.useState)(!1),[r,a]=(0,l.useState)(!1),o=e.data&&Object.keys(e.data).length>0;return(0,s.jsxs)("div",{className:(0,P.cn)("flex flex-col gap-1 p-1.5 rounded transition-all border border-transparent group",o&&"cursor-pointer hover:bg-accent/40 hover:border-border/50",t&&"bg-accent/30 border-border/50 shadow-sm"),onClick:()=>o&&n(!t),children:[(0,s.jsxs)("div",{className:"flex gap-3 items-start",children:[(0,s.jsx)("span",{className:"text-muted-foreground/50 w-20 shrink-0 select-none pt-0.5",children:new Date(e.timestamp).toLocaleTimeString()}),(0,s.jsxs)("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[o&&(0,s.jsx)("button",{className:"p-0.5 hover:bg-muted rounded transition-colors shrink-0",children:t?(0,s.jsx)(g.ChevronDown,{className:"h-3 w-3"}):(0,s.jsx)(tb,{className:"h-3 w-3"})}),"success"===e.type&&(0,s.jsx)(eL.CheckCircle,{className:"h-3 w-3 text-green-500 shrink-0"}),"error"===e.type&&(0,s.jsx)(tv.AlertTriangle,{className:"h-3 w-3 text-destructive shrink-0"}),"info"===e.type&&(0,s.jsx)(m.Info,{className:"h-3 w-3 text-blue-500 shrink-0"}),(0,s.jsx)("span",{className:(0,P.cn)("font-medium text-[10px] break-all whitespace-pre-wrap leading-tight","error"===e.type?"text-destructive":"success"===e.type?"text-green-600 dark:text-green-400":"text-foreground"),children:e.message}),e.nodeId&&(0,s.jsx)("span",{className:"text-[10px] px-1.5 py-0.5 rounded bg-muted border border-border text-muted-foreground font-sans shrink-0",children:e.nodeId}),(0,s.jsx)("button",{onClick:t=>{t.stopPropagation(),navigator.clipboard.writeText(`[${new Date(e.timestamp).toLocaleTimeString()}] ${e.message}`),a(!0),setTimeout(()=>a(!1),2e3)},className:"ml-auto p-1.5 hover:bg-muted rounded-md transition-all shrink-0 border border-transparent hover:border-border text-muted-foreground/50 hover:text-foreground",title:"Copy message",children:r?(0,s.jsx)(eL.CheckCircle,{className:"h-3 w-3 text-emerald-500"}):(0,s.jsx)(tw.Copy,{className:"h-3 w-3 text-muted-foreground/50"})})]})]}),(0,s.jsx)(c.AnimatePresence,{children:t&&o&&(0,s.jsx)(R.motion.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"ml-[92px] mt-2 overflow-hidden",onClick:e=>e.stopPropagation(),children:(0,s.jsxs)("div",{className:"relative group/json",children:[(0,s.jsx)("pre",{className:"p-3 rounded-lg bg-slate-950 text-slate-300 overflow-x-auto text-[9px] border border-border/50 leading-relaxed shadow-inner",children:JSON.stringify(e.data,null,2)}),(0,s.jsx)("button",{onClick:t=>{t.stopPropagation(),navigator.clipboard.writeText(JSON.stringify(e.data,null,2))},className:"absolute top-2 right-2 p-1.5 bg-slate-800 hover:bg-slate-700 rounded-md opacity-0 group-hover/json:opacity-100 transition-opacity text-slate-400",title:"Copy JSON",children:(0,s.jsx)(tw.Copy,{className:"h-3 w-3"})})]})})})]})}let tk=(0,S.default)("ghost",[["path",{d:"M9 10h.01",key:"qbtxuw"}],["path",{d:"M15 10h.01",key:"1qmjsl"}],["path",{d:"M12 2a8 8 0 0 0-8 8v12l3-3 2.5 2.5L12 19l2.5 2.5L17 19l3 3V10a8 8 0 0 0-8-8z",key:"uwwb07"}]]);function tS({isOpen:e,onClose:t,messages:n,isLoading:r,input:a,onInputChange:o,onSend:i}){let d=(0,l.useRef)(null);return(0,l.useEffect)(()=>{d.current?.scrollIntoView({behavior:"smooth"})},[n,r]),(0,s.jsx)(c.AnimatePresence,{children:e&&(0,s.jsxs)(R.motion.div,{initial:{opacity:0,y:20,scale:.9},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,scale:.9,y:20},className:"absolute bottom-6 right-6 w-[400px] h-[550px] bg-card border border-border rounded-lg shadow-2xl flex flex-col z-[100] overflow-hidden",children:[(0,s.jsxs)("header",{className:"p-5 flex items-center justify-between border-b border-border bg-muted/30 shrink-0 select-none",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"h-10 w-10 rounded-md bg-gradient-to-tr from-indigo-500 via-primary to-emerald-400 flex items-center justify-center shadow-lg shadow-primary/20 animate-gradient-xy",children:(0,s.jsx)(te.Sparkles,{className:"h-5 w-5 text-white"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"font-bold text-sm tracking-tight text-foreground",children:"AI Architect"}),(0,s.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,s.jsx)("div",{className:"h-1 w-1 rounded-full bg-emerald-500 animate-pulse"}),(0,s.jsx)("p",{className:"text-[10px] font-bold text-muted-foreground uppercase tracking-widest opacity-60",children:"Neural Engine Active"})]})]})]}),(0,s.jsx)(O.Button,{variant:"ghost",size:"icon",className:"h-8 w-8 rounded-md hover:bg-white/10 transition-colors",onClick:t,children:(0,s.jsx)(p.X,{className:"h-4 w-4 text-muted-foreground"})})]}),(0,s.jsxs)("div",{className:"flex-1 overflow-y-auto p-6 space-y-6 custom-scrollbar scroll-smooth",children:[0===n.length&&(0,s.jsxs)("div",{className:"h-full flex flex-col items-center justify-center text-center p-4",children:[(0,s.jsx)(R.motion.div,{initial:{scale:0},animate:{scale:1},className:"h-16 w-16 rounded-lg bg-primary/10 flex items-center justify-center mb-6 shadow-inner",children:(0,s.jsx)(tk,{className:"h-8 w-8 text-primary/40"})}),(0,s.jsx)("h4",{className:"font-bold text-base mb-2 tracking-tight",children:"I'm your Workflow Assistant"}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground max-w-[240px] leading-relaxed opacity-60",children:'"Create a workflow that sends Slack alerts when my website goes down"'})]}),n.map((e,t)=>(0,s.jsx)(R.motion.div,{initial:{opacity:0,x:"user"===e.role?10:-10,y:5},animate:{opacity:1,x:0,y:0},className:(0,P.cn)("flex w-full","user"===e.role?"justify-end":"justify-start"),children:(0,s.jsx)("div",{className:(0,P.cn)("max-w-[85%] px-4 py-3 rounded-md text-xs leading-relaxed font-medium shadow-lg transition-all","user"===e.role?"bg-primary text-primary-foreground rounded-tr-none shadow-primary/10":"bg-white/5 text-foreground border border-white/5 rounded-tl-none backdrop-blur-sm"),children:e.message})},t)),r&&(0,s.jsx)("div",{className:"flex justify-start",children:(0,s.jsx)("div",{className:"bg-white/5 border border-white/5 px-4 py-3 rounded-md rounded-tl-none",children:(0,s.jsxs)("div",{className:"flex gap-1.5",children:[(0,s.jsx)("div",{className:"w-1.5 h-1.5 bg-primary/60 rounded-full animate-bounce",style:{animationDelay:"0ms"}}),(0,s.jsx)("div",{className:"w-1.5 h-1.5 bg-primary/60 rounded-full animate-bounce",style:{animationDelay:"200ms"}}),(0,s.jsx)("div",{className:"w-1.5 h-1.5 bg-primary/60 rounded-full animate-bounce",style:{animationDelay:"400ms"}})]})})}),(0,s.jsx)("div",{ref:d})]}),(0,s.jsxs)("div",{className:"p-6 pt-2 shrink-0",children:[(0,s.jsxs)("div",{className:"relative flex items-center group",children:[(0,s.jsx)("input",{type:"text",value:a,onChange:e=>o(e.target.value),onKeyDown:e=>"Enter"===e.key&&!e.shiftKey&&i(),placeholder:"Command your workflow...",className:"w-full bg-white/5 border border-white/5 rounded-md pl-5 pr-14 py-4 text-xs focus:outline-none focus:ring-1 focus:ring-primary/40 focus:bg-white/10 transition-all shadow-inner placeholder:text-muted-foreground/30 font-bold tracking-tight",autoFocus:!0}),(0,s.jsx)("div",{className:"absolute right-2 flex items-center gap-1.5",children:(0,s.jsx)(O.Button,{size:"icon",onClick:i,disabled:!a.trim()||r,className:(0,P.cn)("h-9 w-9 rounded-md transition-all shadow-lg",a.trim()?"opacity-100 scale-100 bg-primary shadow-primary/20":"opacity-0 scale-90 pointer-events-none"),children:(0,s.jsx)(eZ.Send,{className:"h-4 w-4"})})})]}),(0,s.jsx)("p",{className:"mt-4 text-[9px] text-center text-muted-foreground/40 font-bold uppercase tracking-[0.2em]",children:"Alpha Neural Interface 1.0"})]}),(0,s.jsx)("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-indigo-500 via-primary to-emerald-400 opacity-60"}),(0,s.jsx)("div",{className:"absolute -bottom-24 -left-24 w-48 h-48 bg-primary/20 rounded-full blur-[60px] pointer-events-none"})]})})}let tC=(0,S.default)("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);var tE=e.i(62031),tM=e.i(92161);let t_=(0,l.memo)(({workflowMeta:e,updateWorkflowMeta:t,activeTab:n,setActiveTab:r,showLogs:a,setShowLogs:o,isActive:i,toggleActive:l,onSave:d,isSaving:c,saveStatus:u,isDirty:f,showNavSidebar:h,setShowNavSidebar:p})=>(0,s.jsxs)("header",{className:"h-14 border-b border-border bg-card/80 backdrop-blur-xl flex items-center justify-between px-4 z-10 shrink-0",children:[(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)("button",{onClick:()=>p(!h),className:"p-2 hover:bg-accent rounded-lg transition-colors","aria-label":"Toggle navigation",children:(0,s.jsx)(tM.Menu,{className:"h-5 w-5"})}),(0,s.jsxs)("div",{className:"flex flex-col",children:[(0,s.jsx)("input",{value:e?.name||"",onChange:e=>t({name:e.target.value}),placeholder:"Untitled Workflow",className:"font-semibold text-lg bg-transparent border-none focus:outline-none focus:ring-1 focus:ring-primary/20 rounded px-1 -ml-1 w-64"}),(0,s.jsx)("input",{value:e?.description||"",onChange:e=>t({description:e.target.value}),placeholder:"Add description...",className:"text-xs text-muted-foreground bg-transparent border-none focus:outline-none focus:ring-1 focus:ring-primary/20 rounded px-1 -ml-1 w-96"})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsxs)("div",{className:"flex bg-muted rounded-lg p-1 mr-4",children:[(0,s.jsx)("button",{onClick:()=>r("editor"),className:`px-3 py-1 rounded-md text-xs font-medium transition-all ${"editor"===n?"bg-background text-foreground shadow-sm":"text-muted-foreground hover:text-foreground"}`,children:"Editor"}),(0,s.jsx)("button",{onClick:()=>r("executions"),className:`px-3 py-1 rounded-md text-xs font-medium transition-all ${"executions"===n?"bg-background text-foreground shadow-sm":"text-muted-foreground hover:text-foreground"}`,children:"Executions"})]}),(0,s.jsxs)(O.Button,{variant:"ghost",size:"sm",onClick:()=>o(!a),className:a?"bg-accent":"",children:[(0,s.jsx)(b.Code,{className:"h-4 w-4 mr-2"}),"Logs"]}),(0,s.jsx)("div",{className:"w-px h-6 bg-border mx-1"}),(0,s.jsxs)(O.Button,{variant:"outline",size:"sm",onClick:l,className:i?"border-primary/50 text-primary hover:bg-primary/10":"",children:[(0,s.jsx)(j.Zap,{className:"h-3 w-3 mr-2"}),i?"Active":"Activate"]}),(0,s.jsx)(O.Button,{size:"sm",variant:"outline",onClick:d,disabled:c,className:"saved"!==u||f?"":"border-green-500/50 text-green-600",children:c?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"h-3 w-3 mr-2 animate-spin rounded-full border-2 border-primary border-t-transparent"}),"Saving..."]}):"saved"!==u||f?"error"===u?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(tC,{className:"h-3 w-3 mr-2"}),"Retry"]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(tC,{className:"h-3 w-3 mr-2"}),f?"Save*":"Save"]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(tC,{className:"h-3 w-3 mr-2"}),"Saved"]})}),(0,s.jsx)(O.Button,{variant:"ghost",size:"sm",children:(0,s.jsx)(tE.Share2,{className:"h-4 w-4"})})]})]}));t_.displayName="CanvasHeader";var tA=e.i(94351);let tR=(0,S.default)("panels-top-left",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M9 21V9",key:"1oto5p"}]]),tP=(0,l.memo)(({isOpen:e,onClose:t})=>(0,s.jsx)(c.AnimatePresence,{children:e&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(R.motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-background/80 backdrop-blur-sm z-40",onClick:t}),(0,s.jsxs)(R.motion.div,{initial:{x:-280},animate:{x:0},exit:{x:-280},transition:{type:"spring",damping:30,stiffness:300},className:"fixed left-0 top-0 bottom-0 w-64 bg-card border-r border-border z-50 flex flex-col",children:[(0,s.jsxs)("div",{className:"p-4 border-b border-border/50 flex items-center justify-between bg-muted/20",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"h-9 w-9 rounded-xl bg-gradient-to-br from-primary to-primary/60 flex items-center justify-center shadow-lg shadow-primary/20",children:(0,s.jsx)(j.Zap,{className:"h-5 w-5 text-primary-foreground fill-white"})}),(0,s.jsxs)("div",{className:"flex flex-col",children:[(0,s.jsx)("span",{className:"font-bold text-base leading-none tracking-tight",children:"Antigravity"}),(0,s.jsx)("span",{className:"text-[10px] text-muted-foreground uppercase tracking-wider font-medium mt-1",children:"Workspace"})]})]}),(0,s.jsx)("button",{onClick:t,className:"p-1.5 hover:bg-accent rounded-lg transition-all text-muted-foreground hover:text-foreground",children:(0,s.jsx)(p.X,{className:"h-4 w-4"})})]}),(0,s.jsxs)("nav",{className:"flex-1 p-3 space-y-1.5",children:[(0,s.jsxs)("a",{href:"/dashboard",className:"flex items-center gap-3 px-3 py-2.5 rounded-xl text-sm font-medium text-muted-foreground hover:bg-muted/50 hover:text-foreground transition-all group",children:[(0,s.jsx)(tA.Home,{className:"h-4 w-4 text-muted-foreground/70 group-hover:text-foreground transition-colors"}),(0,s.jsx)("span",{children:"Dashboard"})]}),(0,s.jsxs)("a",{href:"/workflows",className:"flex items-center gap-3 px-3 py-2.5 rounded-xl text-sm font-medium bg-gradient-to-r from-primary/10 to-transparent text-primary transition-all border border-primary/10 shadow-sm",children:[(0,s.jsx)(tR,{className:"h-4 w-4"}),(0,s.jsx)("span",{children:"Workflows"})]}),(0,s.jsxs)("a",{href:"/settings",className:"flex items-center gap-3 px-3 py-2.5 rounded-xl text-sm font-medium text-muted-foreground hover:bg-muted/50 hover:text-foreground transition-all group",children:[(0,s.jsx)(k.Settings,{className:"h-4 w-4 text-muted-foreground/70 group-hover:text-foreground transition-colors"}),(0,s.jsx)("span",{children:"Settings"})]})]})]})]})}));tP.displayName="NavSidebar";let tO=(0,S.default)("users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]]);e.s(["Users",()=>tO],61911);let tT=(0,S.default)("bug",[["path",{d:"M12 20v-9",key:"1qisl0"}],["path",{d:"M14 7a4 4 0 0 1 4 4v3a6 6 0 0 1-12 0v-3a4 4 0 0 1 4-4z",key:"uouzyp"}],["path",{d:"M14.12 3.88 16 2",key:"qol33r"}],["path",{d:"M21 21a4 4 0 0 0-3.81-4",key:"1b0z45"}],["path",{d:"M21 5a4 4 0 0 1-3.55 3.97",key:"5cxbf6"}],["path",{d:"M22 13h-4",key:"1jl80f"}],["path",{d:"M3 21a4 4 0 0 1 3.81-4",key:"1fjd4g"}],["path",{d:"M3 5a4 4 0 0 0 3.55 3.97",key:"1d7oge"}],["path",{d:"M6 13H2",key:"82j7cp"}],["path",{d:"m8 2 1.88 1.88",key:"fmnt4t"}],["path",{d:"M9 7.13V6a3 3 0 1 1 6 0v1.13",key:"1vgav8"}]]);function tD({onLoadWorkflow:e}){let[t,n]=(0,l.useState)(!1),{data:r=[],isLoading:a}=(0,eF.useDebugWorkflows)(),o=(0,eF.useLoadDebugWorkflow)(),i=a||o.isPending;return(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("button",{onClick:()=>n(!t),className:`p-2 rounded-lg transition-all hover:scale-110 active:scale-95 group ${t?"bg-amber-100 text-amber-600 ring-1 ring-amber-200":"text-muted-foreground hover:text-foreground hover:bg-accent"}`,title:"Debug Workflows",children:(0,s.jsx)(tT,{className:`h-5 w-5 transition-transform duration-300 ${t?"rotate-12 scale-110":""}`})}),(0,s.jsx)(c.AnimatePresence,{children:t&&(0,s.jsxs)(R.motion.div,{initial:{opacity:0,x:-10,scale:.95},animate:{opacity:1,x:0,scale:1},exit:{opacity:0,x:-10,scale:.95},className:"absolute top-0 left-12 w-72 bg-card/98 backdrop-blur-2xl border border-border rounded-2xl shadow-2xl overflow-hidden z-50 origin-left",children:[(0,s.jsx)("div",{className:"p-3 border-b border-border bg-slate-50 dark:bg-slate-800/50",children:(0,s.jsxs)("h3",{className:"text-[10px] font-bold uppercase tracking-widest text-muted-foreground flex items-center gap-2",children:[(0,s.jsx)(eq,{className:"h-3 w-3"}),"Dummy Workflows (",r.length,")"]})}),(0,s.jsx)("div",{className:"max-h-80 overflow-y-auto p-1",children:i?(0,s.jsx)("div",{className:"flex items-center justify-center py-8",children:(0,s.jsx)(T.Loader2,{className:"h-5 w-5 animate-spin text-primary"})}):r.length>0?r.map(t=>(0,s.jsxs)("button",{onClick:()=>{o.mutate(t,{onSuccess:t=>{e(t),n(!1)}})},className:"w-full text-left px-3 py-2 text-xs hover:bg-slate-100 dark:hover:bg-slate-800 rounded-lg transition-colors flex items-center justify-between group",children:[(0,s.jsx)("span",{className:"truncate pr-2",children:t.replace(".json","")}),(0,s.jsx)("span",{className:"text-[9px] opacity-0 group-hover:opacity-100 bg-primary/10 text-primary px-1.5 py-0.5 rounded uppercase font-bold transition-opacity",children:"Load"})]},t)):(0,s.jsx)("div",{className:"p-4 text-center text-xs text-muted-foreground italic",children:"No dummy workflows found"})})]})})]})}let tz=(0,l.memo)(({showChat:e,setShowChat:t,onLoadWorkflow:n})=>(0,s.jsxs)("div",{className:"w-14 border-r border-border bg-card/50 flex flex-col items-center py-4 gap-4 z-10",children:[(0,s.jsx)("button",{onClick:()=>window.location.href="/workflows/new",title:"New Workflow",className:"p-2 rounded-xl bg-primary text-primary-foreground shadow-lg hover:scale-105 transition-transform",children:(0,s.jsx)(E.Plus,{className:"h-5 w-5"})}),(0,s.jsx)("div",{className:"w-8 h-[1px] bg-border"}),(0,s.jsx)("button",{onClick:()=>t(!e),className:`p-2 rounded-lg transition-colors ${e?"bg-accent text-primary":"text-muted-foreground hover:text-foreground hover:bg-accent"}`,children:(0,s.jsx)(tt.Bot,{className:"h-5 w-5"})}),(0,s.jsx)("button",{className:"p-2 rounded-lg text-muted-foreground hover:text-foreground hover:bg-accent transition-colors",children:(0,s.jsx)(w.Database,{className:"h-5 w-5"})}),(0,s.jsx)(tD,{onLoadWorkflow:n}),(0,s.jsxs)("div",{className:"mt-auto flex flex-col gap-4",children:[(0,s.jsx)("button",{className:"p-2 rounded-lg text-muted-foreground hover:text-foreground hover:bg-accent transition-colors",children:(0,s.jsx)(tO,{className:"h-5 w-5"})}),(0,s.jsx)("button",{className:"p-2 rounded-lg text-muted-foreground hover:text-foreground hover:bg-accent transition-colors",children:(0,s.jsx)(k.Settings,{className:"h-5 w-5"})})]})]}));tz.displayName="SidebarControls";var tL=e.i(55436);let tI={"manual.trigger":eG.PlayCircle,"schedule.cron":e3.Timer,"webhook.receive":eX.Webhook,"whatsapp.trigger":W.LogoWhatsApp,"email.trigger":eU.Inbox,"rss.trigger":eY.Rss,"ai.llm":te.Sparkles,"ai.agent":tt.Bot,"data.set":H.Edit3,"data.transform":eJ.Shuffle,"slack.send":_.MessageSquare,"whatsapp.send":W.LogoWhatsApp,"google_sheets.write":W.LogoGoogleSheets,"google_sheets.read":W.LogoGoogleSheets,"http.request":I.Globe,"code.python":W.LogoPython,"code.javascript":b.Code,"email.send":eZ.Send,"discord.send":eZ.Send,"condition.if":eQ.Split,"logic.parallel":e7.GitBranch,"logic.merge":e0.GitMerge,"logic.delay":e5.Clock,"logic.loop":e1.RotateCw,"logic.switch":eJ.Shuffle,"logic.pause":e2.PauseCircle,"execution.pause":e2.PauseCircle,"utility.noop":eW.Activity},t$=(0,l.memo)(({isOpen:e,onClose:t,searchQuery:n,setSearchQuery:r,availableNodeTypes:a,onAddNode:o})=>(0,s.jsx)(c.AnimatePresence,{children:e&&(0,s.jsxs)(R.motion.div,{initial:{x:320,opacity:0},animate:{x:0,opacity:1},exit:{x:320,opacity:0},className:"absolute right-4 top-4 bottom-4 w-80 bg-card/90 backdrop-blur-xl border border-border rounded-2xl shadow-2xl overflow-hidden flex flex-col z-20",children:[(0,s.jsxs)("div",{className:"p-4 bg-background/50 backdrop-blur-md border-b border-border flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"font-bold text-lg",children:"Add Node"}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:"Select a step to add to your flow"})]}),(0,s.jsx)(O.Button,{variant:"ghost",size:"icon",onClick:t,className:"rounded-full shadow-sm hover:bg-background/80 transition-all",children:(0,s.jsx)(p.X,{className:"h-4 w-4"})})]}),(0,s.jsxs)("div",{className:"flex-1 flex flex-col min-h-0 overflow-hidden",children:[(0,s.jsx)("div",{className:"p-4 border-b border-border bg-background/20",children:(0,s.jsxs)("div",{className:"relative group",children:[(0,s.jsx)(tL.Search,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground group-focus-within:text-primary transition-colors"}),(0,s.jsx)("input",{type:"text",autoFocus:!0,value:n,onChange:e=>r(e.target.value),placeholder:"Search tools & triggers...",className:"w-full bg-background/50 border border-border rounded-xl pl-10 pr-4 py-2.5 text-sm placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-primary/20 focus:border-primary transition-all shadow-inner"})]})}),(0,s.jsx)("div",{className:"flex-1 overflow-y-auto p-4 space-y-8 custom-scrollbar",children:["Trigger","Action","Logic","Transform"].map(e=>{let t=(a||[]).filter(t=>(t.category===e||"Action"===e&&"action"===t.type||"Trigger"===e&&"trigger"===t.type)&&("Trigger"===e?"schedule.cron"===t.name:""===n||t.label?.toLowerCase().includes(n.toLowerCase())||t.description?.toLowerCase().includes(n.toLowerCase())));return 0===t.length?null:(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 px-1",children:[(0,s.jsx)("span",{className:"text-[10px] font-bold text-muted-foreground/60 uppercase tracking-[0.2em]",children:e}),(0,s.jsx)("div",{className:"h-[1px] flex-1 bg-border/40"})]}),(0,s.jsx)("div",{className:"grid grid-cols-1 gap-2.5",children:t.map(e=>{let t;return(0,s.jsxs)("button",{className:"flex items-center gap-4 p-3.5 rounded-2xl bg-background/40 border border-border/40 hover:border-primary/40 hover:bg-background/80 hover:shadow-lg transition-all text-left group relative overflow-hidden",onClick:()=>{o(e),r("")},children:[(0,s.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-primary/5 via-transparent to-transparent opacity-0 group-hover:opacity-100 transition-opacity"}),(0,s.jsx)("div",{className:`
                                                        relative z-10 p-2.5 rounded-xl transition-all shadow-sm group-hover:scale-110 group-hover:shadow-md
                                                        ${"trigger"===e.type?"bg-rose-500/10 text-rose-500":"bg-indigo-500/10 text-indigo-500"}
                                                    `,children:(t=((e,t="action")=>tI[e]||("trigger"===t?j.Zap:k.Settings))(e.name,e.type),(0,s.jsx)(t,{className:"h-5 w-5"}))}),(0,s.jsxs)("div",{className:"relative z-10 flex-1 min-w-0",children:[(0,s.jsxs)("div",{className:"text-sm font-semibold text-foreground group-hover:text-primary transition-colors flex items-center justify-between",children:[e.label,(0,s.jsx)(tb,{className:"h-3 w-3 opacity-0 -translate-x-2 group-hover:opacity-100 group-hover:translate-x-0 transition-all text-primary"})]}),(0,s.jsx)("div",{className:"text-xs text-muted-foreground line-clamp-1 group-hover:text-muted-foreground/80 transition-colors",children:e.description})]})]},e.name)})})]},e)})})]})]})}));t$.displayName="NodePanel";var tH=e.i(5868),tF=e.i(50608);function tB({color:e,dimensions:t,lineWidth:n}){return l.default.createElement("path",{stroke:e,strokeWidth:n,d:`M${t[0]/2} 0 V${t[1]} M0 ${t[1]/2} H${t[0]}`})}function tV({color:e,radius:t}){return l.default.createElement("circle",{cx:t,cy:t,r:t,fill:e})}(a=o||(o={})).Lines="lines",a.Dots="dots",a.Cross="cross";let tq={[o.Dots]:"#91919a",[o.Lines]:"#eee",[o.Cross]:"#e2e2e2"},tW={[o.Dots]:1,[o.Lines]:1,[o.Cross]:6},tK=e=>({transform:e.transform,patternId:`pattern-${e.rfId}`});function tG({id:e,variant:t=o.Dots,gap:n=20,size:r,lineWidth:a=1,offset:i=2,color:s,style:c,className:u}){let f=(0,l.useRef)(null),{transform:h,patternId:p}=(0,d.useStore)(tK,tF.shallow),m=s||tq[t],g=r||tW[t],x=t===o.Dots,y=t===o.Cross,v=Array.isArray(n)?n:[n,n],b=[v[0]*h[2]||1,v[1]*h[2]||1],w=g*h[2],N=y?[w,w]:b,j=x?[w/i,w/i]:[N[0]/i,N[1]/i];return l.default.createElement("svg",{className:(0,tH.default)(["react-flow__background",u]),style:{...c,position:"absolute",width:"100%",height:"100%",top:0,left:0},ref:f,"data-testid":"rf__background"},l.default.createElement("pattern",{id:p+e,x:h[0]%b[0],y:h[1]%b[1],width:b[0],height:b[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${j[0]},-${j[1]})`},x?l.default.createElement(tV,{color:m,radius:w/i}):l.default.createElement(tB,{dimensions:N,color:m,lineWidth:a})),l.default.createElement("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${p+e})`}))}tG.displayName="Background";var tX=(0,l.memo)(tG);let tU=(0,S.default)("mouse-pointer-2",[["path",{d:"M4.037 4.688a.495.495 0 0 1 .651-.651l16 6.5a.5.5 0 0 1-.063.947l-6.124 1.58a2 2 0 0 0-1.438 1.435l-1.579 6.126a.5.5 0 0 1-.947.063z",key:"edeuup"}]]),tY=(0,S.default)("hand",[["path",{d:"M18 11V6a2 2 0 0 0-2-2a2 2 0 0 0-2 2",key:"1fvzgz"}],["path",{d:"M14 10V4a2 2 0 0 0-2-2a2 2 0 0 0-2 2v2",key:"1kc0my"}],["path",{d:"M10 10.5V6a2 2 0 0 0-2-2a2 2 0 0 0-2 2v8",key:"10h0bg"}],["path",{d:"M18 8a2 2 0 1 1 4 0v6a8 8 0 0 1-8 8h-2c-2.8 0-4.5-.86-5.99-2.34l-3.6-3.6a2 2 0 0 1 2.83-2.82L7 15",key:"1s1gnw"}]]),tZ=(0,S.default)("zoom-in",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]),tQ=(0,S.default)("zoom-out",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]),tJ=(0,S.default)("maximize",[["path",{d:"M8 3H5a2 2 0 0 0-2 2v3",key:"1dcmit"}],["path",{d:"M21 8V5a2 2 0 0 0-2-2h-3",key:"1e4gt3"}],["path",{d:"M3 16v3a2 2 0 0 0 2 2h3",key:"wsl5sc"}],["path",{d:"M16 21h3a2 2 0 0 0 2-2v-3",key:"18trek"}]]),t0=(0,l.memo)(({nodes:e,edges:t,onNodesChange:n,onEdgesChange:r,onConnect:a,onNodeClick:i,onNodeDoubleClick:l,onNodeDrag:c,onNodeDragStop:u,onPaneClick:f,nodeTypes:h,edgeTypes:p,defaultEdgeOptions:m,canvasMode:g,setCanvasMode:x,onSelectionChange:y,setShowNodePanel:v,isExecuting:b,onExecute:w,zoomIn:N,zoomOut:j,fitView:k})=>(0,s.jsx)("div",{className:"flex-1 relative bg-background flex flex-col h-full",children:(0,s.jsx)("div",{className:"flex-1 relative h-full",children:(0,s.jsxs)(d.ReactFlow,{nodes:e,edges:t,onNodesChange:n,onEdgesChange:r,onConnect:a,onNodeClick:i,onNodeDoubleClick:l,onNodeDrag:c,onNodeDragStop:u,onPaneClick:f,nodeTypes:h,edgeTypes:p,defaultEdgeOptions:m,fitView:!0,className:"bg-background",edgesUpdatable:!0,edgesFocusable:!0,nodesDraggable:!0,nodesConnectable:!0,elementsSelectable:!0,selectionOnDrag:"select"===g,panOnDrag:"pan"===g||[1,2],selectionMode:d.SelectionMode.Partial,multiSelectionKeyCode:["Meta","Control"],onSelectionChange:y,children:[(0,s.jsx)(tX,{variant:o.Dots,gap:16,size:1.5,color:"#d1d5db",className:"dark:opacity-30"}),(0,s.jsx)(d.Panel,{position:"bottom-left",className:"ml-4 mb-4",children:(0,s.jsxs)("div",{className:"flex flex-col items-center gap-2",children:[(0,s.jsxs)("div",{className:"flex flex-col items-center gap-1 p-1 bg-card/90 backdrop-blur-xl border border-border rounded-lg shadow-lg",children:[(0,s.jsx)("button",{onClick:()=>x("select"),className:`p-1.5 rounded-md transition-all active:scale-95 ${"select"===g?"bg-primary text-primary-foreground shadow-sm":"text-muted-foreground hover:text-foreground hover:bg-accent"}`,title:"Select Mode (V)",children:(0,s.jsx)(tU,{className:"h-3.5 w-3.5"})}),(0,s.jsx)("button",{onClick:()=>x("pan"),className:`p-1.5 rounded-md transition-all active:scale-95 ${"pan"===g?"bg-primary text-primary-foreground shadow-sm":"text-muted-foreground hover:text-foreground hover:bg-accent"}`,title:"Pan Mode (H)",children:(0,s.jsx)(tY,{className:"h-3.5 w-3.5"})})]}),(0,s.jsxs)("div",{className:"flex flex-col items-center gap-1 p-1 bg-card/90 backdrop-blur-xl border border-border rounded-lg shadow-lg",children:[(0,s.jsx)("button",{onClick:N,className:"p-1 hover:bg-accent rounded-md text-muted-foreground hover:text-foreground transition-all active:scale-95",title:"Zoom In",children:(0,s.jsx)(tZ,{className:"h-3.5 w-3.5"})}),(0,s.jsx)("button",{onClick:k,className:"p-1 hover:bg-accent rounded-md text-muted-foreground hover:text-foreground transition-all active:scale-95",title:"Fit View",children:(0,s.jsx)(tJ,{className:"h-3.5 w-3.5"})}),(0,s.jsx)("button",{onClick:j,className:"p-1 hover:bg-accent rounded-md text-muted-foreground hover:text-foreground transition-all active:scale-95",title:"Zoom Out",children:(0,s.jsx)(tQ,{className:"h-3.5 w-3.5"})})]})]})}),(0,s.jsx)(d.Panel,{position:"top-right",className:"mr-4 mt-4",children:(0,s.jsx)(O.Button,{onClick:()=>v(!0),className:"p-0 h-10 w-10 rounded-xl shadow-xl hover:scale-105 transition-transform",children:(0,s.jsx)(E.Plus,{className:"h-5 w-5"})})}),(0,s.jsx)(d.Panel,{position:"bottom-center",className:"mb-6",children:(0,s.jsx)(R.motion.div,{whileHover:{scale:1.02},whileTap:{scale:.98},children:(0,s.jsxs)(O.Button,{onClick:w,disabled:b,className:"rounded-xl px-6 py-2.5 bg-primary hover:bg-primary/90 border-b-2 border-primary-dark shadow-xl hover:shadow-primary/20 h-auto font-semibold text-sm flex items-center gap-2.5 transition-all duration-150 active:border-b-0 active:translate-y-[1px]",children:[b?(0,s.jsx)(T.Loader2,{className:"h-4 w-4 animate-spin"}):(0,s.jsx)(A.Play,{className:"h-3.5 w-3.5 fill-current"}),b?"Running...":"Execute Workflow"]})})}),0===e.length&&(0,s.jsx)("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:(0,s.jsxs)(R.motion.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"flex flex-col items-center gap-3 pointer-events-auto",children:[(0,s.jsxs)("button",{onClick:()=>v(!0),className:"group flex flex-col items-center gap-2 p-8 rounded-xl border-2 border-dashed border-border hover:border-primary hover:bg-primary/5 transition-all",children:[(0,s.jsx)("div",{className:"p-4 rounded-full bg-muted group-hover:bg-primary/10 transition-colors",children:(0,s.jsx)(E.Plus,{className:"h-8 w-8 text-muted-foreground group-hover:text-primary"})}),(0,s.jsx)("span",{className:"text-sm font-medium",children:"Add first step..."})]}),(0,s.jsx)("a",{href:"/workflows",className:"text-xs text-primary hover:underline",children:"or start from a template"})]})})]})})}));t0.displayName="FlowCanvas";let t1={custom:function({id:e,sourceX:t,sourceY:n,targetX:r,targetY:a,sourcePosition:o,targetPosition:i,style:l={},markerEnd:c}){let{setEdges:u,setNodes:f,getEdge:h}=(0,d.useReactFlow)(),[p,m,g]=(0,d.getBezierPath)({sourceX:t,sourceY:n,sourcePosition:o,targetX:r,targetY:a,targetPosition:i});return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("path",{id:e,style:{...l,strokeWidth:3,stroke:"#9ca3af"},className:"react-flow__edge-path",d:p,markerEnd:c}),(0,s.jsx)(d.EdgeLabelRenderer,{children:(0,s.jsx)("div",{style:{position:"absolute",transform:`translate(-50%, -50%) translate(${m}px,${g}px)`,fontSize:12,pointerEvents:"all"},className:"nodrag nopan",children:(0,s.jsxs)("div",{className:"flex items-center gap-1.5 p-1 bg-background/80 backdrop-blur-sm border border-border rounded-full shadow-sm opacity-0 hover:opacity-100 transition-opacity duration-200",children:[(0,s.jsx)("button",{className:"w-5 h-5 flex items-center justify-center bg-primary text-primary-foreground rounded-full hover:scale-110 transition-transform",onClick:t=>{t.stopPropagation();let n=new CustomEvent("addNodeBetween",{detail:{edgeId:e,x:m,y:g}});window.dispatchEvent(n)},title:"Add node between",children:(0,s.jsx)(E.Plus,{size:12,strokeWidth:3})}),(0,s.jsx)("button",{className:"w-5 h-5 flex items-center justify-center bg-destructive text-destructive-foreground rounded-full hover:scale-110 transition-transform",onClick:t=>{t.stopPropagation(),u(t=>t.filter(t=>t.id!==e))},title:"Delete connection",children:(0,s.jsx)($.Trash2,{size:12,strokeWidth:3})})]})})})]})}},t2={type:"custom",animated:!1,style:{stroke:"#9ca3af",strokeWidth:3},markerEnd:{type:d.MarkerType.ArrowClosed,color:"#9ca3af",width:14,height:14},deletable:!0};function t5({workflowId:e,workflowName:t,initialNodes:n=[],initialEdges:r=[],onNodesChange:a,onEdgesChange:o,onMetaChange:i,onExecutionChange:d,onObservabilityChange:f,onAiMetadataChange:h,onSave:p,saveStatus:m,isDirty:g,isSaving:x,onBack:y}){let[v,b]=(0,l.useState)(!1),[w,N]=(0,l.useState)(!1),[j,k]=(0,l.useState)("select"),[S,C]=(0,l.useState)(""),E=(0,l.useMemo)(()=>tx,[]),M=(0,l.useMemo)(()=>t1,[]),{nodes:_,edges:A,onNodesChange:R,onEdgesChange:P,onConnect:O,onNodeClick:T,onNodeDoubleClick:D,onNodeDrag:z,onNodeDragStop:L,selectedNode:I,setSelectedNode:$,activeTab:H,setActiveTab:F,isActive:B,toggleActive:V,showNodePanel:q,setShowNodePanel:W,showChat:K,setShowChat:G,isDetailsModalOpen:X,setIsDetailsModalOpen:U,undo:Y,redo:Z,copyNode:Q,pasteNode:J,availableNodeTypes:ee,onNodeUpdate:et,onNodeDelete:en,handleAddNode:er,chatMessage:ea,setChatMessage:eo,chatHistory:ei,isAiLoading:es,handleSendChat:el,fitView:ed,zoomIn:ec,zoomOut:eu,handleExecute:ef,handleExecuteNode:eh,isExecuting:ep,logs:em,setLogs:eg,workflowMeta:ex,updateWorkflowMeta:ey,loadV2Workflow:ev,setSplitEdge:eb,setPendingConnection:ew,onSelectionChange:eN,saveStatus:ej,isDirty:ek,isSaving:eS,handleSave:eC}=(0,u.useWorkflowBuilder)({initialNodes:n,initialEdges:r,workflowId:e}),eE=m||ej,eM=g||ek;return(0,s.jsxs)("div",{className:"h-screen flex flex-col bg-background text-foreground overflow-hidden",children:[(0,s.jsx)(t_,{workflowMeta:ex,updateWorkflowMeta:ey,activeTab:H,setActiveTab:F,showLogs:w,setShowLogs:N,isActive:B||!1,toggleActive:V,onSave:p||eC,isSaving:x||eS,saveStatus:eE,isDirty:eM,showNavSidebar:v,setShowNavSidebar:b}),(0,s.jsx)(tP,{isOpen:v,onClose:()=>b(!1)}),(0,s.jsxs)("div",{className:"flex-1 relative flex",children:[(0,s.jsx)(tz,{showChat:K,setShowChat:G,onLoadWorkflow:ev}),(0,s.jsx)(t0,{nodes:_,edges:A,onNodesChange:R,onEdgesChange:P,onConnect:O,onNodeClick:T,onNodeDoubleClick:D,onNodeDrag:z,onNodeDragStop:L,onPaneClick:()=>{$(null),W(!1),C("")},nodeTypes:E,edgeTypes:M,defaultEdgeOptions:t2,canvasMode:j,setCanvasMode:k,onSelectionChange:eN,setShowNodePanel:W,isExecuting:ep,onExecute:ef,zoomIn:ec,zoomOut:eu,fitView:ed}),(0,s.jsx)(c.AnimatePresence,{children:w&&(0,s.jsx)(tN,{logs:em,isOpen:w,onClose:()=>N(!1),onClear:()=>eg([])})}),(0,s.jsx)(t$,{isOpen:q,onClose:()=>{W(!1),eb(null),ew(null)},searchQuery:S,setSearchQuery:C,availableNodeTypes:ee,onAddNode:er}),(0,s.jsx)(c.AnimatePresence,{children:X&&I&&(0,s.jsx)(tl,{node:I,schema:(ee||[]).find(e=>{let t=I.data?.node_name||I.type;return e.name===t})||{name:I.type||"unknown",label:I.data?.label||"Node",type:I.data?.type||"action",icon:"Settings",description:"",inputs:[],outputs:[],category:"Custom"},allNodes:_,edges:A,onSelectNode:e=>{$(e),U(!0)},onClose:()=>U(!1),onUpdate:et,onExecute:eh,saveStatus:ej,isDirty:ek})})]}),(0,s.jsx)(tS,{isOpen:K,onClose:()=>G(!1),messages:ei,isLoading:es,input:ea,onInputChange:eo,onSend:el})]})}e.s(["WorkflowBuilder",()=>t5],36281);let t3=(0,S.default)("ellipsis-vertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]),t4=(0,S.default)("pause",[["rect",{x:"14",y:"3",width:"5",height:"18",rx:"1",key:"kaeet6"}],["rect",{x:"5",y:"3",width:"5",height:"18",rx:"1",key:"1wsw3u"}]]);var t8=e.i(88511),t6=e.i(95468);let t9=(0,S.default)("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);e.s(["Calendar",()=>t9],87316);var t7=e.i(5050),ne=e.i(81140),nt=e.i(20783),nn=e.i(30030),nr=e.i(69340),na=e.i(74080);function no(e){var t;let n,r=(t=e,(n=l.forwardRef((e,t)=>{let{children:n,...r}=e;if(l.isValidElement(n)){var a;let e,o,i=(a=n,(o=(e=Object.getOwnPropertyDescriptor(a.props,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning)?a.ref:(o=(e=Object.getOwnPropertyDescriptor(a,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning)?a.props.ref:a.props.ref||a.ref),s=function(e,t){let n={...t};for(let r in t){let a=e[r],o=t[r];/^on[A-Z]/.test(r)?a&&o?n[r]=(...e)=>{let t=o(...e);return a(...e),t}:a&&(n[r]=a):"style"===r?n[r]={...a,...o}:"className"===r&&(n[r]=[a,o].filter(Boolean).join(" "))}return{...e,...n}}(r,n.props);return n.type!==l.Fragment&&(s.ref=t?(0,nt.composeRefs)(t,i):i),l.cloneElement(n,s)}return l.Children.count(n)>1?l.Children.only(null):null})).displayName=`${t}.SlotClone`,n),a=l.forwardRef((e,t)=>{let{children:n,...a}=e,o=l.Children.toArray(n),i=o.find(ns);if(i){let e=i.props.children,n=o.map(t=>t!==i?t:l.Children.count(e)>1?l.Children.only(null):l.isValidElement(e)?e.props.children:null);return(0,s.jsx)(r,{...a,ref:t,children:l.isValidElement(e)?l.cloneElement(e,void 0,n):null})}return(0,s.jsx)(r,{...a,ref:t,children:n})});return a.displayName=`${e}.Slot`,a}var ni=Symbol("radix.slottable");function ns(e){return l.isValidElement(e)&&"function"==typeof e.type&&"__radixId"in e.type&&e.type.__radixId===ni}var nl=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,t)=>{let n=no(`Primitive.${t}`),r=l.forwardRef((e,r)=>{let{asChild:a,...o}=e;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,s.jsx)(a?n:t,{...o,ref:r})});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{});function nd(e,t){e&&na.flushSync(()=>e.dispatchEvent(t))}function nc(e){let t=e+"CollectionProvider",[n,r]=(0,nn.createContextScope)(t),[a,o]=n(t,{collectionRef:{current:null},itemMap:new Map}),i=e=>{let{scope:t,children:n}=e,r=l.default.useRef(null),o=l.default.useRef(new Map).current;return(0,s.jsx)(a,{scope:t,itemMap:o,collectionRef:r,children:n})};i.displayName=t;let d=e+"CollectionSlot",c=no(d),u=l.default.forwardRef((e,t)=>{let{scope:n,children:r}=e,a=o(d,n),i=(0,nt.useComposedRefs)(t,a.collectionRef);return(0,s.jsx)(c,{ref:i,children:r})});u.displayName=d;let f=e+"CollectionItemSlot",h="data-radix-collection-item",p=no(f),m=l.default.forwardRef((e,t)=>{let{scope:n,children:r,...a}=e,i=l.default.useRef(null),d=(0,nt.useComposedRefs)(t,i),c=o(f,n);return l.default.useEffect(()=>(c.itemMap.set(i,{ref:i,...a}),()=>void c.itemMap.delete(i))),(0,s.jsx)(p,{...{[h]:""},ref:d,children:r})});return m.displayName=f,[{Provider:i,Slot:u,ItemSlot:m},function(t){let n=o(e+"CollectionConsumer",t);return l.default.useCallback(()=>{let e=n.collectionRef.current;if(!e)return[];let t=Array.from(e.querySelectorAll(`[${h}]`));return Array.from(n.itemMap.values()).sort((e,n)=>t.indexOf(e.ref.current)-t.indexOf(n.ref.current))},[n.collectionRef,n.itemMap])},r]}var nu=new WeakMap;function nf(e,t){var n,r;let a,o,i;if("at"in Array.prototype)return Array.prototype.at.call(e,t);let s=(n=e,r=t,a=n.length,(i=(o=nh(r))>=0?o:a+o)<0||i>=a?-1:i);return -1===s?void 0:e[s]}function nh(e){return e!=e||0===e?0:Math.trunc(e)}(class e extends Map{#p;constructor(e){super(e),this.#p=[...super.keys()],nu.set(this,!0)}set(e,t){return nu.get(this)&&(this.has(e)?this.#p[this.#p.indexOf(e)]=e:this.#p.push(e)),super.set(e,t),this}insert(e,t,n){let r,a=this.has(t),o=this.#p.length,i=nh(e),s=i>=0?i:o+i,l=s<0||s>=o?-1:s;if(l===this.size||a&&l===this.size-1||-1===l)return this.set(t,n),this;let d=this.size+ +!a;i<0&&s++;let c=[...this.#p],u=!1;for(let e=s;e<d;e++)if(s===e){let o=c[e];c[e]===t&&(o=c[e+1]),a&&this.delete(t),r=this.get(o),this.set(t,n)}else{u||c[e-1]!==t||(u=!0);let n=c[u?e:e-1],a=r;r=this.get(n),this.delete(n),this.set(n,a)}return this}with(t,n,r){let a=new e(this);return a.insert(t,n,r),a}before(e){let t=this.#p.indexOf(e)-1;if(!(t<0))return this.entryAt(t)}setBefore(e,t,n){let r=this.#p.indexOf(e);return -1===r?this:this.insert(r,t,n)}after(e){let t=this.#p.indexOf(e);if(-1!==(t=-1===t||t===this.size-1?-1:t+1))return this.entryAt(t)}setAfter(e,t,n){let r=this.#p.indexOf(e);return -1===r?this:this.insert(r+1,t,n)}first(){return this.entryAt(0)}last(){return this.entryAt(-1)}clear(){return this.#p=[],super.clear()}delete(e){let t=super.delete(e);return t&&this.#p.splice(this.#p.indexOf(e),1),t}deleteAt(e){let t=this.keyAt(e);return void 0!==t&&this.delete(t)}at(e){let t=nf(this.#p,e);if(void 0!==t)return this.get(t)}entryAt(e){let t=nf(this.#p,e);if(void 0!==t)return[t,this.get(t)]}indexOf(e){return this.#p.indexOf(e)}keyAt(e){return nf(this.#p,e)}from(e,t){let n=this.indexOf(e);if(-1===n)return;let r=n+t;return r<0&&(r=0),r>=this.size&&(r=this.size-1),this.at(r)}keyFrom(e,t){let n=this.indexOf(e);if(-1===n)return;let r=n+t;return r<0&&(r=0),r>=this.size&&(r=this.size-1),this.keyAt(r)}find(e,t){let n=0;for(let r of this){if(Reflect.apply(e,t,[r,n,this]))return r;n++}}findIndex(e,t){let n=0;for(let r of this){if(Reflect.apply(e,t,[r,n,this]))return n;n++}return -1}filter(t,n){let r=[],a=0;for(let e of this)Reflect.apply(t,n,[e,a,this])&&r.push(e),a++;return new e(r)}map(t,n){let r=[],a=0;for(let e of this)r.push([e[0],Reflect.apply(t,n,[e,a,this])]),a++;return new e(r)}reduce(...e){let[t,n]=e,r=0,a=n??this.at(0);for(let n of this)a=0===r&&1===e.length?n:Reflect.apply(t,this,[a,n,r,this]),r++;return a}reduceRight(...e){let[t,n]=e,r=n??this.at(-1);for(let n=this.size-1;n>=0;n--){let a=this.at(n);r=n===this.size-1&&1===e.length?a:Reflect.apply(t,this,[r,a,n,this])}return r}toSorted(t){return new e([...this.entries()].sort(t))}toReversed(){let t=new e;for(let e=this.size-1;e>=0;e--){let n=this.keyAt(e),r=this.get(n);t.set(n,r)}return t}toSpliced(...t){let n=[...this.entries()];return n.splice(...t),new e(n)}slice(t,n){let r=new e,a=this.size-1;if(void 0===t)return r;t<0&&(t+=this.size),void 0!==n&&n>0&&(a=n-1);for(let e=t;e<=a;e++){let t=this.keyAt(e),n=this.get(t);r.set(t,n)}return r}every(e,t){let n=0;for(let r of this){if(!Reflect.apply(e,t,[r,n,this]))return!1;n++}return!0}some(e,t){let n=0;for(let r of this){if(Reflect.apply(e,t,[r,n,this]))return!0;n++}return!1}});var np=e.i(86318),nm=e.i(30207),ng=e.i(26083),nx="dismissableLayer.update",ny=l.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),nv=l.forwardRef((e,t)=>{let{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:a,onFocusOutside:o,onInteractOutside:d,onDismiss:c,...u}=e,f=l.useContext(ny),[h,p]=l.useState(null),m=h?.ownerDocument??globalThis?.document,[,g]=l.useState({}),x=(0,nt.useComposedRefs)(t,e=>p(e)),y=Array.from(f.layers),[v]=[...f.layersWithOutsidePointerEventsDisabled].slice(-1),b=y.indexOf(v),w=h?y.indexOf(h):-1,N=f.layersWithOutsidePointerEventsDisabled.size>0,j=w>=b,k=function(e,t=globalThis?.document){let n=(0,nm.useCallbackRef)(e),r=l.useRef(!1),a=l.useRef(()=>{});return l.useEffect(()=>{let e=e=>{if(e.target&&!r.current){let r=function(){nw("dismissableLayer.pointerDownOutside",n,o,{discrete:!0})},o={originalEvent:e};"touch"===e.pointerType?(t.removeEventListener("click",a.current),a.current=r,t.addEventListener("click",a.current,{once:!0})):r()}else t.removeEventListener("click",a.current);r.current=!1},o=window.setTimeout(()=>{t.addEventListener("pointerdown",e)},0);return()=>{window.clearTimeout(o),t.removeEventListener("pointerdown",e),t.removeEventListener("click",a.current)}},[t,n]),{onPointerDownCapture:()=>r.current=!0}}(e=>{let t=e.target,n=[...f.branches].some(e=>e.contains(t));j&&!n&&(a?.(e),d?.(e),e.defaultPrevented||c?.())},m),S=function(e,t=globalThis?.document){let n=(0,nm.useCallbackRef)(e),r=l.useRef(!1);return l.useEffect(()=>{let e=e=>{e.target&&!r.current&&nw("dismissableLayer.focusOutside",n,{originalEvent:e},{discrete:!1})};return t.addEventListener("focusin",e),()=>t.removeEventListener("focusin",e)},[t,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}(e=>{let t=e.target;![...f.branches].some(e=>e.contains(t))&&(o?.(e),d?.(e),e.defaultPrevented||c?.())},m);return(0,ng.useEscapeKeydown)(e=>{w===f.layers.size-1&&(r?.(e),!e.defaultPrevented&&c&&(e.preventDefault(),c()))},m),l.useEffect(()=>{if(h)return n&&(0===f.layersWithOutsidePointerEventsDisabled.size&&(i=m.body.style.pointerEvents,m.body.style.pointerEvents="none"),f.layersWithOutsidePointerEventsDisabled.add(h)),f.layers.add(h),nb(),()=>{n&&1===f.layersWithOutsidePointerEventsDisabled.size&&(m.body.style.pointerEvents=i)}},[h,m,n,f]),l.useEffect(()=>()=>{h&&(f.layers.delete(h),f.layersWithOutsidePointerEventsDisabled.delete(h),nb())},[h,f]),l.useEffect(()=>{let e=()=>g({});return document.addEventListener(nx,e),()=>document.removeEventListener(nx,e)},[]),(0,s.jsx)(nl.div,{...u,ref:x,style:{pointerEvents:N?j?"auto":"none":void 0,...e.style},onFocusCapture:(0,ne.composeEventHandlers)(e.onFocusCapture,S.onFocusCapture),onBlurCapture:(0,ne.composeEventHandlers)(e.onBlurCapture,S.onBlurCapture),onPointerDownCapture:(0,ne.composeEventHandlers)(e.onPointerDownCapture,k.onPointerDownCapture)})});function nb(){let e=new CustomEvent(nx);document.dispatchEvent(e)}function nw(e,t,n,{discrete:r}){let a=n.originalEvent.target,o=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:n});t&&a.addEventListener(e,t,{once:!0}),r?nd(a,o):a.dispatchEvent(o)}nv.displayName="DismissableLayer",l.forwardRef((e,t)=>{let n=l.useContext(ny),r=l.useRef(null),a=(0,nt.useComposedRefs)(t,r);return l.useEffect(()=>{let e=r.current;if(e)return n.branches.add(e),()=>{n.branches.delete(e)}},[n.branches]),(0,s.jsx)(nl.div,{...e,ref:a})}).displayName="DismissableLayerBranch";var nN=e.i(3536),nj="focusScope.autoFocusOnMount",nk="focusScope.autoFocusOnUnmount",nS={bubbles:!1,cancelable:!0},nC=l.forwardRef((e,t)=>{let{loop:n=!1,trapped:r=!1,onMountAutoFocus:a,onUnmountAutoFocus:o,...i}=e,[d,c]=l.useState(null),u=(0,nm.useCallbackRef)(a),f=(0,nm.useCallbackRef)(o),h=l.useRef(null),p=(0,nt.useComposedRefs)(t,e=>c(e)),m=l.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;l.useEffect(()=>{if(r){let e=function(e){if(m.paused||!d)return;let t=e.target;d.contains(t)?h.current=t:n_(h.current,{select:!0})},t=function(e){if(m.paused||!d)return;let t=e.relatedTarget;null!==t&&(d.contains(t)||n_(h.current,{select:!0}))};document.addEventListener("focusin",e),document.addEventListener("focusout",t);let n=new MutationObserver(function(e){if(document.activeElement===document.body)for(let t of e)t.removedNodes.length>0&&n_(d)});return d&&n.observe(d,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",e),document.removeEventListener("focusout",t),n.disconnect()}}},[r,d,m.paused]),l.useEffect(()=>{if(d){nA.add(m);let e=document.activeElement;if(!d.contains(e)){let t=new CustomEvent(nj,nS);d.addEventListener(nj,u),d.dispatchEvent(t),t.defaultPrevented||(function(e,{select:t=!1}={}){let n=document.activeElement;for(let r of e)if(n_(r,{select:t}),document.activeElement!==n)return}(nE(d).filter(e=>"A"!==e.tagName),{select:!0}),document.activeElement===e&&n_(d))}return()=>{d.removeEventListener(nj,u),setTimeout(()=>{let t=new CustomEvent(nk,nS);d.addEventListener(nk,f),d.dispatchEvent(t),t.defaultPrevented||n_(e??document.body,{select:!0}),d.removeEventListener(nk,f),nA.remove(m)},0)}}},[d,u,f,m]);let g=l.useCallback(e=>{if(!n&&!r||m.paused)return;let t="Tab"===e.key&&!e.altKey&&!e.ctrlKey&&!e.metaKey,a=document.activeElement;if(t&&a){var o;let t,r=e.currentTarget,[i,s]=[nM(t=nE(o=r),o),nM(t.reverse(),o)];i&&s?e.shiftKey||a!==s?e.shiftKey&&a===i&&(e.preventDefault(),n&&n_(s,{select:!0})):(e.preventDefault(),n&&n_(i,{select:!0})):a===r&&e.preventDefault()}},[n,r,m.paused]);return(0,s.jsx)(nl.div,{tabIndex:-1,...i,ref:p,onKeyDown:g})});function nE(e){let t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:e=>{let t="INPUT"===e.tagName&&"hidden"===e.type;return e.disabled||e.hidden||t?NodeFilter.FILTER_SKIP:e.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function nM(e,t){for(let n of e)if(!function(e,{upTo:t}){if("hidden"===getComputedStyle(e).visibility)return!0;for(;e&&(void 0===t||e!==t);){if("none"===getComputedStyle(e).display)return!0;e=e.parentElement}return!1}(n,{upTo:t}))return n}function n_(e,{select:t=!1}={}){if(e&&e.focus){var n;let r=document.activeElement;e.focus({preventScroll:!0}),e!==r&&(n=e)instanceof HTMLInputElement&&"select"in n&&t&&e.select()}}nC.displayName="FocusScope";var nA=(t=[],{add(e){let n=t[0];e!==n&&n?.pause(),(t=nR(t,e)).unshift(e)},remove(e){t=nR(t,e),t[0]?.resume()}});function nR(e,t){let n=[...e],r=n.indexOf(t);return -1!==r&&n.splice(r,1),n}var nP=e.i(10772);let nO=["top","right","bottom","left"],nT=Math.min,nD=Math.max,nz=Math.round,nL=Math.floor,nI=e=>({x:e,y:e}),n$={left:"right",right:"left",bottom:"top",top:"bottom"},nH={start:"end",end:"start"};function nF(e,t){return"function"==typeof e?e(t):e}function nB(e){return e.split("-")[0]}function nV(e){return e.split("-")[1]}function nq(e){return"x"===e?"y":"x"}function nW(e){return"y"===e?"height":"width"}let nK=new Set(["top","bottom"]);function nG(e){return nK.has(nB(e))?"y":"x"}function nX(e){return e.replace(/start|end/g,e=>nH[e])}let nU=["left","right"],nY=["right","left"],nZ=["top","bottom"],nQ=["bottom","top"];function nJ(e){return e.replace(/left|right|bottom|top/g,e=>n$[e])}function n0(e){return"number"!=typeof e?{top:0,right:0,bottom:0,left:0,...e}:{top:e,right:e,bottom:e,left:e}}function n1(e){let{x:t,y:n,width:r,height:a}=e;return{width:r,height:a,top:n,left:t,right:t+r,bottom:n+a,x:t,y:n}}function n2(e,t,n){let r,{reference:a,floating:o}=e,i=nG(t),s=nq(nG(t)),l=nW(s),d=nB(t),c="y"===i,u=a.x+a.width/2-o.width/2,f=a.y+a.height/2-o.height/2,h=a[l]/2-o[l]/2;switch(d){case"top":r={x:u,y:a.y-o.height};break;case"bottom":r={x:u,y:a.y+a.height};break;case"right":r={x:a.x+a.width,y:f};break;case"left":r={x:a.x-o.width,y:f};break;default:r={x:a.x,y:a.y}}switch(nV(t)){case"start":r[s]-=h*(n&&c?-1:1);break;case"end":r[s]+=h*(n&&c?-1:1)}return r}let n5=async(e,t,n)=>{let{placement:r="bottom",strategy:a="absolute",middleware:o=[],platform:i}=n,s=o.filter(Boolean),l=await (null==i.isRTL?void 0:i.isRTL(t)),d=await i.getElementRects({reference:e,floating:t,strategy:a}),{x:c,y:u}=n2(d,r,l),f=r,h={},p=0;for(let n=0;n<s.length;n++){let{name:o,fn:m}=s[n],{x:g,y:x,data:y,reset:v}=await m({x:c,y:u,initialPlacement:r,placement:f,strategy:a,middlewareData:h,rects:d,platform:i,elements:{reference:e,floating:t}});c=null!=g?g:c,u=null!=x?x:u,h={...h,[o]:{...h[o],...y}},v&&p<=50&&(p++,"object"==typeof v&&(v.placement&&(f=v.placement),v.rects&&(d=!0===v.rects?await i.getElementRects({reference:e,floating:t,strategy:a}):v.rects),{x:c,y:u}=n2(d,f,l)),n=-1)}return{x:c,y:u,placement:f,strategy:a,middlewareData:h}};async function n3(e,t){var n;void 0===t&&(t={});let{x:r,y:a,platform:o,rects:i,elements:s,strategy:l}=e,{boundary:d="clippingAncestors",rootBoundary:c="viewport",elementContext:u="floating",altBoundary:f=!1,padding:h=0}=nF(t,e),p=n0(h),m=s[f?"floating"===u?"reference":"floating":u],g=n1(await o.getClippingRect({element:null==(n=await (null==o.isElement?void 0:o.isElement(m)))||n?m:m.contextElement||await (null==o.getDocumentElement?void 0:o.getDocumentElement(s.floating)),boundary:d,rootBoundary:c,strategy:l})),x="floating"===u?{x:r,y:a,width:i.floating.width,height:i.floating.height}:i.reference,y=await (null==o.getOffsetParent?void 0:o.getOffsetParent(s.floating)),v=await (null==o.isElement?void 0:o.isElement(y))&&await (null==o.getScale?void 0:o.getScale(y))||{x:1,y:1},b=n1(o.convertOffsetParentRelativeRectToViewportRelativeRect?await o.convertOffsetParentRelativeRectToViewportRelativeRect({elements:s,rect:x,offsetParent:y,strategy:l}):x);return{top:(g.top-b.top+p.top)/v.y,bottom:(b.bottom-g.bottom+p.bottom)/v.y,left:(g.left-b.left+p.left)/v.x,right:(b.right-g.right+p.right)/v.x}}function n4(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function n8(e){return nO.some(t=>e[t]>=0)}let n6=new Set(["left","top"]);async function n9(e,t){let{placement:n,platform:r,elements:a}=e,o=await (null==r.isRTL?void 0:r.isRTL(a.floating)),i=nB(n),s=nV(n),l="y"===nG(n),d=n6.has(i)?-1:1,c=o&&l?-1:1,u=nF(t,e),{mainAxis:f,crossAxis:h,alignmentAxis:p}="number"==typeof u?{mainAxis:u,crossAxis:0,alignmentAxis:null}:{mainAxis:u.mainAxis||0,crossAxis:u.crossAxis||0,alignmentAxis:u.alignmentAxis};return s&&"number"==typeof p&&(h="end"===s?-1*p:p),l?{x:h*c,y:f*d}:{x:f*d,y:h*c}}function n7(){return"undefined"!=typeof window}function re(e){return rr(e)?(e.nodeName||"").toLowerCase():"#document"}function rt(e){var t;return(null==e||null==(t=e.ownerDocument)?void 0:t.defaultView)||window}function rn(e){var t;return null==(t=(rr(e)?e.ownerDocument:e.document)||window.document)?void 0:t.documentElement}function rr(e){return!!n7()&&(e instanceof Node||e instanceof rt(e).Node)}function ra(e){return!!n7()&&(e instanceof Element||e instanceof rt(e).Element)}function ro(e){return!!n7()&&(e instanceof HTMLElement||e instanceof rt(e).HTMLElement)}function ri(e){return!!n7()&&"undefined"!=typeof ShadowRoot&&(e instanceof ShadowRoot||e instanceof rt(e).ShadowRoot)}let rs=new Set(["inline","contents"]);function rl(e){let{overflow:t,overflowX:n,overflowY:r,display:a}=rv(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!rs.has(a)}let rd=new Set(["table","td","th"]),rc=[":popover-open",":modal"];function ru(e){return rc.some(t=>{try{return e.matches(t)}catch(e){return!1}})}let rf=["transform","translate","scale","rotate","perspective"],rh=["transform","translate","scale","rotate","perspective","filter"],rp=["paint","layout","strict","content"];function rm(e){let t=rg(),n=ra(e)?rv(e):e;return rf.some(e=>!!n[e]&&"none"!==n[e])||!!n.containerType&&"normal"!==n.containerType||!t&&!!n.backdropFilter&&"none"!==n.backdropFilter||!t&&!!n.filter&&"none"!==n.filter||rh.some(e=>(n.willChange||"").includes(e))||rp.some(e=>(n.contain||"").includes(e))}function rg(){return"undefined"!=typeof CSS&&!!CSS.supports&&CSS.supports("-webkit-backdrop-filter","none")}let rx=new Set(["html","body","#document"]);function ry(e){return rx.has(re(e))}function rv(e){return rt(e).getComputedStyle(e)}function rb(e){return ra(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function rw(e){if("html"===re(e))return e;let t=e.assignedSlot||e.parentNode||ri(e)&&e.host||rn(e);return ri(t)?t.host:t}function rN(e,t,n){var r;void 0===t&&(t=[]),void 0===n&&(n=!0);let a=function e(t){let n=rw(t);return ry(n)?t.ownerDocument?t.ownerDocument.body:t.body:ro(n)&&rl(n)?n:e(n)}(e),o=a===(null==(r=e.ownerDocument)?void 0:r.body),i=rt(a);if(o){let e=rj(i);return t.concat(i,i.visualViewport||[],rl(a)?a:[],e&&n?rN(e):[])}return t.concat(a,rN(a,[],n))}function rj(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function rk(e){let t=rv(e),n=parseFloat(t.width)||0,r=parseFloat(t.height)||0,a=ro(e),o=a?e.offsetWidth:n,i=a?e.offsetHeight:r,s=nz(n)!==o||nz(r)!==i;return s&&(n=o,r=i),{width:n,height:r,$:s}}function rS(e){return ra(e)?e:e.contextElement}function rC(e){let t=rS(e);if(!ro(t))return nI(1);let n=t.getBoundingClientRect(),{width:r,height:a,$:o}=rk(t),i=(o?nz(n.width):n.width)/r,s=(o?nz(n.height):n.height)/a;return i&&Number.isFinite(i)||(i=1),s&&Number.isFinite(s)||(s=1),{x:i,y:s}}let rE=nI(0);function rM(e){let t=rt(e);return rg()&&t.visualViewport?{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}:rE}function r_(e,t,n,r){var a;void 0===t&&(t=!1),void 0===n&&(n=!1);let o=e.getBoundingClientRect(),i=rS(e),s=nI(1);t&&(r?ra(r)&&(s=rC(r)):s=rC(e));let l=(void 0===(a=n)&&(a=!1),r&&(!a||r===rt(i))&&a)?rM(i):nI(0),d=(o.left+l.x)/s.x,c=(o.top+l.y)/s.y,u=o.width/s.x,f=o.height/s.y;if(i){let e=rt(i),t=r&&ra(r)?rt(r):r,n=e,a=rj(n);for(;a&&r&&t!==n;){let e=rC(a),t=a.getBoundingClientRect(),r=rv(a),o=t.left+(a.clientLeft+parseFloat(r.paddingLeft))*e.x,i=t.top+(a.clientTop+parseFloat(r.paddingTop))*e.y;d*=e.x,c*=e.y,u*=e.x,f*=e.y,d+=o,c+=i,a=rj(n=rt(a))}}return n1({width:u,height:f,x:d,y:c})}function rA(e,t){let n=rb(e).scrollLeft;return t?t.left+n:r_(rn(e)).left+n}function rR(e,t){let n=e.getBoundingClientRect();return{x:n.left+t.scrollLeft-rA(e,n),y:n.top+t.scrollTop}}let rP=new Set(["absolute","fixed"]);function rO(e,t,n){var r;let a;if("viewport"===t)a=function(e,t){let n=rt(e),r=rn(e),a=n.visualViewport,o=r.clientWidth,i=r.clientHeight,s=0,l=0;if(a){o=a.width,i=a.height;let e=rg();(!e||e&&"fixed"===t)&&(s=a.offsetLeft,l=a.offsetTop)}let d=rA(r);if(d<=0){let e=r.ownerDocument,t=e.body,n=getComputedStyle(t),a="CSS1Compat"===e.compatMode&&parseFloat(n.marginLeft)+parseFloat(n.marginRight)||0,i=Math.abs(r.clientWidth-t.clientWidth-a);i<=25&&(o-=i)}else d<=25&&(o+=d);return{width:o,height:i,x:s,y:l}}(e,n);else if("document"===t){let t,n,o,i,s,l,d;r=rn(e),t=rn(r),n=rb(r),o=r.ownerDocument.body,i=nD(t.scrollWidth,t.clientWidth,o.scrollWidth,o.clientWidth),s=nD(t.scrollHeight,t.clientHeight,o.scrollHeight,o.clientHeight),l=-n.scrollLeft+rA(r),d=-n.scrollTop,"rtl"===rv(o).direction&&(l+=nD(t.clientWidth,o.clientWidth)-i),a={width:i,height:s,x:l,y:d}}else if(ra(t)){let e,r,o,i,s,l;r=(e=r_(t,!0,"fixed"===n)).top+t.clientTop,o=e.left+t.clientLeft,i=ro(t)?rC(t):nI(1),s=t.clientWidth*i.x,l=t.clientHeight*i.y,a={width:s,height:l,x:o*i.x,y:r*i.y}}else{let n=rM(e);a={x:t.x-n.x,y:t.y-n.y,width:t.width,height:t.height}}return n1(a)}function rT(e){return"static"===rv(e).position}function rD(e,t){if(!ro(e)||"fixed"===rv(e).position)return null;if(t)return t(e);let n=e.offsetParent;return rn(e)===n&&(n=n.ownerDocument.body),n}function rz(e,t){var n;let r=rt(e);if(ru(e))return r;if(!ro(e)){let t=rw(e);for(;t&&!ry(t);){if(ra(t)&&!rT(t))return t;t=rw(t)}return r}let a=rD(e,t);for(;a&&(n=a,rd.has(re(n)))&&rT(a);)a=rD(a,t);return a&&ry(a)&&rT(a)&&!rm(a)?r:a||function(e){let t=rw(e);for(;ro(t)&&!ry(t);){if(rm(t))return t;if(ru(t))break;t=rw(t)}return null}(e)||r}let rL=async function(e){let t=this.getOffsetParent||rz,n=this.getDimensions,r=await n(e.floating);return{reference:function(e,t,n){let r=ro(t),a=rn(t),o="fixed"===n,i=r_(e,!0,o,t),s={scrollLeft:0,scrollTop:0},l=nI(0);if(r||!r&&!o)if(("body"!==re(t)||rl(a))&&(s=rb(t)),r){let e=r_(t,!0,o,t);l.x=e.x+t.clientLeft,l.y=e.y+t.clientTop}else a&&(l.x=rA(a));o&&!r&&a&&(l.x=rA(a));let d=!a||r||o?nI(0):rR(a,s);return{x:i.left+s.scrollLeft-l.x-d.x,y:i.top+s.scrollTop-l.y-d.y,width:i.width,height:i.height}}(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}},rI={convertOffsetParentRelativeRectToViewportRelativeRect:function(e){let{elements:t,rect:n,offsetParent:r,strategy:a}=e,o="fixed"===a,i=rn(r),s=!!t&&ru(t.floating);if(r===i||s&&o)return n;let l={scrollLeft:0,scrollTop:0},d=nI(1),c=nI(0),u=ro(r);if((u||!u&&!o)&&(("body"!==re(r)||rl(i))&&(l=rb(r)),ro(r))){let e=r_(r);d=rC(r),c.x=e.x+r.clientLeft,c.y=e.y+r.clientTop}let f=!i||u||o?nI(0):rR(i,l);return{width:n.width*d.x,height:n.height*d.y,x:n.x*d.x-l.scrollLeft*d.x+c.x+f.x,y:n.y*d.y-l.scrollTop*d.y+c.y+f.y}},getDocumentElement:rn,getClippingRect:function(e){let{element:t,boundary:n,rootBoundary:r,strategy:a}=e,o=[..."clippingAncestors"===n?ru(t)?[]:function(e,t){let n=t.get(e);if(n)return n;let r=rN(e,[],!1).filter(e=>ra(e)&&"body"!==re(e)),a=null,o="fixed"===rv(e).position,i=o?rw(e):e;for(;ra(i)&&!ry(i);){let t=rv(i),n=rm(i);n||"fixed"!==t.position||(a=null),(o?!n&&!a:!n&&"static"===t.position&&!!a&&rP.has(a.position)||rl(i)&&!n&&function e(t,n){let r=rw(t);return!(r===n||!ra(r)||ry(r))&&("fixed"===rv(r).position||e(r,n))}(e,i))?r=r.filter(e=>e!==i):a=t,i=rw(i)}return t.set(e,r),r}(t,this._c):[].concat(n),r],i=o[0],s=o.reduce((e,n)=>{let r=rO(t,n,a);return e.top=nD(r.top,e.top),e.right=nT(r.right,e.right),e.bottom=nT(r.bottom,e.bottom),e.left=nD(r.left,e.left),e},rO(t,i,a));return{width:s.right-s.left,height:s.bottom-s.top,x:s.left,y:s.top}},getOffsetParent:rz,getElementRects:rL,getClientRects:function(e){return Array.from(e.getClientRects())},getDimensions:function(e){let{width:t,height:n}=rk(e);return{width:t,height:n}},getScale:rC,isElement:ra,isRTL:function(e){return"rtl"===rv(e).direction}};function r$(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}let rH=e=>({name:"arrow",options:e,async fn(t){let{x:n,y:r,placement:a,rects:o,platform:i,elements:s,middlewareData:l}=t,{element:d,padding:c=0}=nF(e,t)||{};if(null==d)return{};let u=n0(c),f={x:n,y:r},h=nq(nG(a)),p=nW(h),m=await i.getDimensions(d),g="y"===h,x=g?"clientHeight":"clientWidth",y=o.reference[p]+o.reference[h]-f[h]-o.floating[p],v=f[h]-o.reference[h],b=await (null==i.getOffsetParent?void 0:i.getOffsetParent(d)),w=b?b[x]:0;w&&await (null==i.isElement?void 0:i.isElement(b))||(w=s.floating[x]||o.floating[p]);let N=w/2-m[p]/2-1,j=nT(u[g?"top":"left"],N),k=nT(u[g?"bottom":"right"],N),S=w-m[p]-k,C=w/2-m[p]/2+(y/2-v/2),E=nD(j,nT(C,S)),M=!l.arrow&&null!=nV(a)&&C!==E&&o.reference[p]/2-(C<j?j:k)-m[p]/2<0,_=M?C<j?C-j:C-S:0;return{[h]:f[h]+_,data:{[h]:E,centerOffset:C-E-_,...M&&{alignmentOffset:_}},reset:M}}});var rF="undefined"!=typeof document?l.useLayoutEffect:function(){};function rB(e,t){let n,r,a;if(e===t)return!0;if(typeof e!=typeof t)return!1;if("function"==typeof e&&e.toString()===t.toString())return!0;if(e&&t&&"object"==typeof e){if(Array.isArray(e)){if((n=e.length)!==t.length)return!1;for(r=n;0!=r--;)if(!rB(e[r],t[r]))return!1;return!0}if((n=(a=Object.keys(e)).length)!==Object.keys(t).length)return!1;for(r=n;0!=r--;)if(!({}).hasOwnProperty.call(t,a[r]))return!1;for(r=n;0!=r--;){let n=a[r];if(("_owner"!==n||!e.$$typeof)&&!rB(e[n],t[n]))return!1}return!0}return e!=e&&t!=t}function rV(e){return"undefined"==typeof window?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function rq(e,t){let n=rV(e);return Math.round(t*n)/n}function rW(e){let t=l.useRef(e);return rF(()=>{t.current=e}),t}var rK=l.forwardRef((e,t)=>{let{children:n,width:r=10,height:a=5,...o}=e;return(0,s.jsx)(nl.svg,{...o,ref:t,width:r,height:a,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?n:(0,s.jsx)("polygon",{points:"0,0 30,0 15,10"})})});rK.displayName="Arrow";var rG=e.i(34620),rX="Popper",[rU,rY]=(0,nn.createContextScope)(rX),[rZ,rQ]=rU(rX),rJ=e=>{let{__scopePopper:t,children:n}=e,[r,a]=l.useState(null);return(0,s.jsx)(rZ,{scope:t,anchor:r,onAnchorChange:a,children:n})};rJ.displayName=rX;var r0="PopperAnchor",r1=l.forwardRef((e,t)=>{let{__scopePopper:n,virtualRef:r,...a}=e,o=rQ(r0,n),i=l.useRef(null),d=(0,nt.useComposedRefs)(t,i),c=l.useRef(null);return l.useEffect(()=>{let e=c.current;c.current=r?.current||i.current,e!==c.current&&o.onAnchorChange(c.current)}),r?null:(0,s.jsx)(nl.div,{...a,ref:d})});r1.displayName=r0;var r2="PopperContent",[r5,r3]=rU(r2),r4=l.forwardRef((e,t)=>{var n,r,a,o,i,d,c,u,f,h,p,m,g,x,y,v,b,w,N,j,k;let{__scopePopper:S,side:C="bottom",sideOffset:E=0,align:M="center",alignOffset:_=0,arrowPadding:A=0,avoidCollisions:R=!0,collisionBoundary:P=[],collisionPadding:O=0,sticky:T="partial",hideWhenDetached:D=!1,updatePositionStrategy:z="optimized",onPlaced:L,...I}=e,$=rQ(r2,S),[H,F]=l.useState(null),B=(0,nt.useComposedRefs)(t,e=>F(e)),[V,q]=l.useState(null),W=function(e){let[t,n]=l.useState(void 0);return(0,rG.useLayoutEffect)(()=>{if(e){n({width:e.offsetWidth,height:e.offsetHeight});let t=new ResizeObserver(t=>{let r,a;if(!Array.isArray(t)||!t.length)return;let o=t[0];if("borderBoxSize"in o){let e=o.borderBoxSize,t=Array.isArray(e)?e[0]:e;r=t.inlineSize,a=t.blockSize}else r=e.offsetWidth,a=e.offsetHeight;n({width:r,height:a})});return t.observe(e,{box:"border-box"}),()=>t.unobserve(e)}n(void 0)},[e]),t}(V),K=W?.width??0,G=W?.height??0,X="number"==typeof O?O:{top:0,right:0,bottom:0,left:0,...O},U=Array.isArray(P)?P:[P],Y=U.length>0,Z={padding:X,boundary:U.filter(r7),altBoundary:Y},{refs:Q,floatingStyles:J,placement:ee,isPositioned:et,middlewareData:en}=function(e){void 0===e&&(e={});let{placement:t="bottom",strategy:n="absolute",middleware:r=[],platform:a,elements:{reference:o,floating:i}={},transform:s=!0,whileElementsMounted:d,open:c}=e,[u,f]=l.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[h,p]=l.useState(r);rB(h,r)||p(r);let[m,g]=l.useState(null),[x,y]=l.useState(null),v=l.useCallback(e=>{e!==j.current&&(j.current=e,g(e))},[]),b=l.useCallback(e=>{e!==k.current&&(k.current=e,y(e))},[]),w=o||m,N=i||x,j=l.useRef(null),k=l.useRef(null),S=l.useRef(u),C=null!=d,E=rW(d),M=rW(a),_=rW(c),A=l.useCallback(()=>{var e,r;let a,o,i;if(!j.current||!k.current)return;let s={placement:t,strategy:n,middleware:h};M.current&&(s.platform=M.current),(e=j.current,r=k.current,a=new Map,i={...(o={platform:rI,...s}).platform,_c:a},n5(e,r,{...o,platform:i})).then(e=>{let t={...e,isPositioned:!1!==_.current};R.current&&!rB(S.current,t)&&(S.current=t,na.flushSync(()=>{f(t)}))})},[h,t,n,M,_]);rF(()=>{!1===c&&S.current.isPositioned&&(S.current.isPositioned=!1,f(e=>({...e,isPositioned:!1})))},[c]);let R=l.useRef(!1);rF(()=>(R.current=!0,()=>{R.current=!1}),[]),rF(()=>{if(w&&(j.current=w),N&&(k.current=N),w&&N){if(E.current)return E.current(w,N,A);A()}},[w,N,A,E,C]);let P=l.useMemo(()=>({reference:j,floating:k,setReference:v,setFloating:b}),[v,b]),O=l.useMemo(()=>({reference:w,floating:N}),[w,N]),T=l.useMemo(()=>{let e={position:n,left:0,top:0};if(!O.floating)return e;let t=rq(O.floating,u.x),r=rq(O.floating,u.y);return s?{...e,transform:"translate("+t+"px, "+r+"px)",...rV(O.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:t,top:r}},[n,s,O.floating,u.x,u.y]);return l.useMemo(()=>({...u,update:A,refs:P,elements:O,floatingStyles:T}),[u,A,P,O,T])}({strategy:"fixed",placement:C+("center"!==M?"-"+M:""),whileElementsMounted:(...e)=>(function(e,t,n,r){let a;void 0===r&&(r={});let{ancestorScroll:o=!0,ancestorResize:i=!0,elementResize:s="function"==typeof ResizeObserver,layoutShift:l="function"==typeof IntersectionObserver,animationFrame:d=!1}=r,c=rS(e),u=o||i?[...c?rN(c):[],...rN(t)]:[];u.forEach(e=>{o&&e.addEventListener("scroll",n,{passive:!0}),i&&e.addEventListener("resize",n)});let f=c&&l?function(e,t){let n,r=null,a=rn(e);function o(){var e;clearTimeout(n),null==(e=r)||e.disconnect(),r=null}return!function i(s,l){void 0===s&&(s=!1),void 0===l&&(l=1),o();let d=e.getBoundingClientRect(),{left:c,top:u,width:f,height:h}=d;if(s||t(),!f||!h)return;let p={rootMargin:-nL(u)+"px "+-nL(a.clientWidth-(c+f))+"px "+-nL(a.clientHeight-(u+h))+"px "+-nL(c)+"px",threshold:nD(0,nT(1,l))||1},m=!0;function g(t){let r=t[0].intersectionRatio;if(r!==l){if(!m)return i();r?i(!1,r):n=setTimeout(()=>{i(!1,1e-7)},1e3)}1!==r||r$(d,e.getBoundingClientRect())||i(),m=!1}try{r=new IntersectionObserver(g,{...p,root:a.ownerDocument})}catch(e){r=new IntersectionObserver(g,p)}r.observe(e)}(!0),o}(c,n):null,h=-1,p=null;s&&(p=new ResizeObserver(e=>{let[r]=e;r&&r.target===c&&p&&(p.unobserve(t),cancelAnimationFrame(h),h=requestAnimationFrame(()=>{var e;null==(e=p)||e.observe(t)})),n()}),c&&!d&&p.observe(c),p.observe(t));let m=d?r_(e):null;return d&&function t(){let r=r_(e);m&&!r$(m,r)&&n(),m=r,a=requestAnimationFrame(t)}(),n(),()=>{var e;u.forEach(e=>{o&&e.removeEventListener("scroll",n),i&&e.removeEventListener("resize",n)}),null==f||f(),null==(e=p)||e.disconnect(),p=null,d&&cancelAnimationFrame(a)}})(...e,{animationFrame:"always"===z}),elements:{reference:$.anchor},middleware:[{...{name:"offset",options:a=n={mainAxis:E+G,alignmentAxis:_},async fn(e){var t,n;let{x:r,y:o,placement:i,middlewareData:s}=e,l=await n9(e,a);return i===(null==(t=s.offset)?void 0:t.placement)&&null!=(n=s.arrow)&&n.alignmentOffset?{}:{x:r+l.x,y:o+l.y,data:{...l,placement:i}}}},options:[n,r]},R&&{...{name:"shift",options:f=c={mainAxis:!0,crossAxis:!1,limiter:"partial"===T?{...(void 0===(d=o)&&(d={}),{options:d,fn(e){let{x:t,y:n,placement:r,rects:a,middlewareData:o}=e,{offset:i=0,mainAxis:s=!0,crossAxis:l=!0}=nF(d,e),c={x:t,y:n},u=nG(r),f=nq(u),h=c[f],p=c[u],m=nF(i,e),g="number"==typeof m?{mainAxis:m,crossAxis:0}:{mainAxis:0,crossAxis:0,...m};if(s){let e="y"===f?"height":"width",t=a.reference[f]-a.floating[e]+g.mainAxis,n=a.reference[f]+a.reference[e]-g.mainAxis;h<t?h=t:h>n&&(h=n)}if(l){var x,y;let e="y"===f?"width":"height",t=n6.has(nB(r)),n=a.reference[u]-a.floating[e]+(t&&(null==(x=o.offset)?void 0:x[u])||0)+(t?0:g.crossAxis),i=a.reference[u]+a.reference[e]+(t?0:(null==(y=o.offset)?void 0:y[u])||0)-(t?g.crossAxis:0);p<n?p=n:p>i&&(p=i)}return{[f]:h,[u]:p}}}),options:[o,i]}:void 0,...Z},async fn(e){let{x:t,y:n,placement:r}=e,{mainAxis:a=!0,crossAxis:o=!1,limiter:i={fn:e=>{let{x:t,y:n}=e;return{x:t,y:n}}},...s}=nF(f,e),l={x:t,y:n},d=await n3(e,s),c=nG(nB(r)),u=nq(c),h=l[u],p=l[c];if(a){let e="y"===u?"top":"left",t="y"===u?"bottom":"right",n=h+d[e],r=h-d[t];h=nD(n,nT(h,r))}if(o){let e="y"===c?"top":"left",t="y"===c?"bottom":"right",n=p+d[e],r=p-d[t];p=nD(n,nT(p,r))}let m=i.fn({...e,[u]:h,[c]:p});return{...m,data:{x:m.x-t,y:m.y-n,enabled:{[u]:a,[c]:o}}}}},options:[c,u]},R&&{...{name:"flip",options:m=h={...Z},async fn(e){var t,n,r,a,o,i,s,l;let d,c,u,{placement:f,middlewareData:h,rects:p,initialPlacement:g,platform:x,elements:y}=e,{mainAxis:v=!0,crossAxis:b=!0,fallbackPlacements:w,fallbackStrategy:N="bestFit",fallbackAxisSideDirection:j="none",flipAlignment:k=!0,...S}=nF(m,e);if(null!=(t=h.arrow)&&t.alignmentOffset)return{};let C=nB(f),E=nG(g),M=nB(g)===g,_=await (null==x.isRTL?void 0:x.isRTL(y.floating)),A=w||(M||!k?[nJ(g)]:(d=nJ(g),[nX(g),d,nX(d)])),R="none"!==j;!w&&R&&A.push(...(c=nV(g),u=function(e,t,n){switch(e){case"top":case"bottom":if(n)return t?nY:nU;return t?nU:nY;case"left":case"right":return t?nZ:nQ;default:return[]}}(nB(g),"start"===j,_),c&&(u=u.map(e=>e+"-"+c),k&&(u=u.concat(u.map(nX)))),u));let P=[g,...A],O=await n3(e,S),T=[],D=(null==(n=h.flip)?void 0:n.overflows)||[];if(v&&T.push(O[C]),b){let e,t,n,r,a=(i=f,s=p,void 0===(l=_)&&(l=!1),e=nV(i),n=nW(t=nq(nG(i))),r="x"===t?e===(l?"end":"start")?"right":"left":"start"===e?"bottom":"top",s.reference[n]>s.floating[n]&&(r=nJ(r)),[r,nJ(r)]);T.push(O[a[0]],O[a[1]])}if(D=[...D,{placement:f,overflows:T}],!T.every(e=>e<=0)){let e=((null==(r=h.flip)?void 0:r.index)||0)+1,t=P[e];if(t&&("alignment"!==b||E===nG(t)||D.every(e=>nG(e.placement)!==E||e.overflows[0]>0)))return{data:{index:e,overflows:D},reset:{placement:t}};let n=null==(a=D.filter(e=>e.overflows[0]<=0).sort((e,t)=>e.overflows[1]-t.overflows[1])[0])?void 0:a.placement;if(!n)switch(N){case"bestFit":{let e=null==(o=D.filter(e=>{if(R){let t=nG(e.placement);return t===E||"y"===t}return!0}).map(e=>[e.placement,e.overflows.filter(e=>e>0).reduce((e,t)=>e+t,0)]).sort((e,t)=>e[1]-t[1])[0])?void 0:o[0];e&&(n=e);break}case"initialPlacement":n=g}if(f!==n)return{reset:{placement:n}}}return{}}},options:[h,p]},{...{name:"size",options:y=g={...Z,apply:({elements:e,rects:t,availableWidth:n,availableHeight:r})=>{let{width:a,height:o}=t.reference,i=e.floating.style;i.setProperty("--radix-popper-available-width",`${n}px`),i.setProperty("--radix-popper-available-height",`${r}px`),i.setProperty("--radix-popper-anchor-width",`${a}px`),i.setProperty("--radix-popper-anchor-height",`${o}px`)}},async fn(e){var t,n;let r,a,{placement:o,rects:i,platform:s,elements:l}=e,{apply:d=()=>{},...c}=nF(y,e),u=await n3(e,c),f=nB(o),h=nV(o),p="y"===nG(o),{width:m,height:g}=i.floating;"top"===f||"bottom"===f?(r=f,a=h===(await (null==s.isRTL?void 0:s.isRTL(l.floating))?"start":"end")?"left":"right"):(a=f,r="end"===h?"top":"bottom");let x=g-u.top-u.bottom,v=m-u.left-u.right,b=nT(g-u[r],x),w=nT(m-u[a],v),N=!e.middlewareData.shift,j=b,k=w;if(null!=(t=e.middlewareData.shift)&&t.enabled.x&&(k=v),null!=(n=e.middlewareData.shift)&&n.enabled.y&&(j=x),N&&!h){let e=nD(u.left,0),t=nD(u.right,0),n=nD(u.top,0),r=nD(u.bottom,0);p?k=m-2*(0!==e||0!==t?e+t:nD(u.left,u.right)):j=g-2*(0!==n||0!==r?n+r:nD(u.top,u.bottom))}await d({...e,availableWidth:k,availableHeight:j});let S=await s.getDimensions(l.floating);return m!==S.width||g!==S.height?{reset:{rects:!0}}:{}}},options:[g,x]},V&&{...{name:"arrow",options:w=v={element:V,padding:A},fn(e){let{element:t,padding:n}="function"==typeof w?w(e):w;return t&&({}).hasOwnProperty.call(t,"current")?null!=t.current?rH({element:t.current,padding:n}).fn(e):{}:t?rH({element:t,padding:n}).fn(e):{}}},options:[v,b]},ae({arrowWidth:K,arrowHeight:G}),D&&{...{name:"hide",options:k=N={strategy:"referenceHidden",...Z},async fn(e){let{rects:t}=e,{strategy:n="referenceHidden",...r}=nF(k,e);switch(n){case"referenceHidden":{let n=n4(await n3(e,{...r,elementContext:"reference"}),t.reference);return{data:{referenceHiddenOffsets:n,referenceHidden:n8(n)}}}case"escaped":{let n=n4(await n3(e,{...r,altBoundary:!0}),t.floating);return{data:{escapedOffsets:n,escaped:n8(n)}}}default:return{}}}},options:[N,j]}]}),[er,ea]=at(ee),eo=(0,nm.useCallbackRef)(L);(0,rG.useLayoutEffect)(()=>{et&&eo?.()},[et,eo]);let ei=en.arrow?.x,es=en.arrow?.y,el=en.arrow?.centerOffset!==0,[ed,ec]=l.useState();return(0,rG.useLayoutEffect)(()=>{H&&ec(window.getComputedStyle(H).zIndex)},[H]),(0,s.jsx)("div",{ref:Q.setFloating,"data-radix-popper-content-wrapper":"",style:{...J,transform:et?J.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:ed,"--radix-popper-transform-origin":[en.transformOrigin?.x,en.transformOrigin?.y].join(" "),...en.hide?.referenceHidden&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:(0,s.jsx)(r5,{scope:S,placedSide:er,onArrowChange:q,arrowX:ei,arrowY:es,shouldHideArrow:el,children:(0,s.jsx)(nl.div,{"data-side":er,"data-align":ea,...I,ref:B,style:{...I.style,animation:et?void 0:"none"}})})})});r4.displayName=r2;var r8="PopperArrow",r6={top:"bottom",right:"left",bottom:"top",left:"right"},r9=l.forwardRef(function(e,t){let{__scopePopper:n,...r}=e,a=r3(r8,n),o=r6[a.placedSide];return(0,s.jsx)("span",{ref:a.onArrowChange,style:{position:"absolute",left:a.arrowX,top:a.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[a.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[a.placedSide],visibility:a.shouldHideArrow?"hidden":void 0},children:(0,s.jsx)(rK,{...r,ref:t,style:{...r.style,display:"block"}})})});function r7(e){return null!==e}r9.displayName=r8;var ae=e=>({name:"transformOrigin",options:e,fn(t){let{placement:n,rects:r,middlewareData:a}=t,o=a.arrow?.centerOffset!==0,i=o?0:e.arrowWidth,s=o?0:e.arrowHeight,[l,d]=at(n),c={start:"0%",center:"50%",end:"100%"}[d],u=(a.arrow?.x??0)+i/2,f=(a.arrow?.y??0)+s/2,h="",p="";return"bottom"===l?(h=o?c:`${u}px`,p=`${-s}px`):"top"===l?(h=o?c:`${u}px`,p=`${r.floating.height+s}px`):"right"===l?(h=`${-s}px`,p=o?c:`${f}px`):"left"===l&&(h=`${r.floating.width+s}px`,p=o?c:`${f}px`),{data:{x:h,y:p}}}});function at(e){let[t,n="center"]=e.split("-");return[t,n]}var an=l.forwardRef((e,t)=>{let{container:n,...r}=e,[a,o]=l.useState(!1);(0,rG.useLayoutEffect)(()=>o(!0),[]);let i=n||a&&globalThis?.document?.body;return i?na.default.createPortal((0,s.jsx)(nl.div,{...r,ref:t}),i):null});an.displayName="Portal";var ar=e=>{var t;let n,r,{present:a,children:o}=e,i=function(e){var t,n;let[r,a]=l.useState(),o=l.useRef(null),i=l.useRef(e),s=l.useRef("none"),[d,c]=(t=e?"mounted":"unmounted",n={mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}},l.useReducer((e,t)=>n[e][t]??e,t));return l.useEffect(()=>{let e=aa(o.current);s.current="mounted"===d?e:"none"},[d]),(0,rG.useLayoutEffect)(()=>{let t=o.current,n=i.current;if(n!==e){let r=s.current,a=aa(t);e?c("MOUNT"):"none"===a||t?.display==="none"?c("UNMOUNT"):n&&r!==a?c("ANIMATION_OUT"):c("UNMOUNT"),i.current=e}},[e,c]),(0,rG.useLayoutEffect)(()=>{if(r){let e,t=r.ownerDocument.defaultView??window,n=n=>{let a=aa(o.current).includes(CSS.escape(n.animationName));if(n.target===r&&a&&(c("ANIMATION_END"),!i.current)){let n=r.style.animationFillMode;r.style.animationFillMode="forwards",e=t.setTimeout(()=>{"forwards"===r.style.animationFillMode&&(r.style.animationFillMode=n)})}},a=e=>{e.target===r&&(s.current=aa(o.current))};return r.addEventListener("animationstart",a),r.addEventListener("animationcancel",n),r.addEventListener("animationend",n),()=>{t.clearTimeout(e),r.removeEventListener("animationstart",a),r.removeEventListener("animationcancel",n),r.removeEventListener("animationend",n)}}c("ANIMATION_END")},[r,c]),{isPresent:["mounted","unmountSuspended"].includes(d),ref:l.useCallback(e=>{o.current=e?getComputedStyle(e):null,a(e)},[])}}(a),s="function"==typeof o?o({present:i.isPresent}):l.Children.only(o),d=(0,nt.useComposedRefs)(i.ref,(t=s,(r=(n=Object.getOwnPropertyDescriptor(t.props,"ref")?.get)&&"isReactWarning"in n&&n.isReactWarning)?t.ref:(r=(n=Object.getOwnPropertyDescriptor(t,"ref")?.get)&&"isReactWarning"in n&&n.isReactWarning)?t.props.ref:t.props.ref||t.ref));return"function"==typeof o||i.isPresent?l.cloneElement(s,{ref:d}):null};function aa(e){return e?.animationName||"none"}ar.displayName="Presence";var ao="rovingFocusGroup.onEntryFocus",ai={bubbles:!1,cancelable:!0},as="RovingFocusGroup",[al,ad,ac]=nc(as),[au,af]=(0,nn.createContextScope)(as,[ac]),[ah,ap]=au(as),am=l.forwardRef((e,t)=>(0,s.jsx)(al.Provider,{scope:e.__scopeRovingFocusGroup,children:(0,s.jsx)(al.Slot,{scope:e.__scopeRovingFocusGroup,children:(0,s.jsx)(ag,{...e,ref:t})})}));am.displayName=as;var ag=l.forwardRef((e,t)=>{let{__scopeRovingFocusGroup:n,orientation:r,loop:a=!1,dir:o,currentTabStopId:i,defaultCurrentTabStopId:d,onCurrentTabStopIdChange:c,onEntryFocus:u,preventScrollOnEntryFocus:f=!1,...h}=e,p=l.useRef(null),m=(0,nt.useComposedRefs)(t,p),g=(0,np.useDirection)(o),[x,y]=(0,nr.useControllableState)({prop:i,defaultProp:d??null,onChange:c,caller:as}),[v,b]=l.useState(!1),w=(0,nm.useCallbackRef)(u),N=ad(n),j=l.useRef(!1),[k,S]=l.useState(0);return l.useEffect(()=>{let e=p.current;if(e)return e.addEventListener(ao,w),()=>e.removeEventListener(ao,w)},[w]),(0,s.jsx)(ah,{scope:n,orientation:r,dir:g,loop:a,currentTabStopId:x,onItemFocus:l.useCallback(e=>y(e),[y]),onItemShiftTab:l.useCallback(()=>b(!0),[]),onFocusableItemAdd:l.useCallback(()=>S(e=>e+1),[]),onFocusableItemRemove:l.useCallback(()=>S(e=>e-1),[]),children:(0,s.jsx)(nl.div,{tabIndex:v||0===k?-1:0,"data-orientation":r,...h,ref:m,style:{outline:"none",...e.style},onMouseDown:(0,ne.composeEventHandlers)(e.onMouseDown,()=>{j.current=!0}),onFocus:(0,ne.composeEventHandlers)(e.onFocus,e=>{let t=!j.current;if(e.target===e.currentTarget&&t&&!v){let t=new CustomEvent(ao,ai);if(e.currentTarget.dispatchEvent(t),!t.defaultPrevented){let e=N().filter(e=>e.focusable);ab([e.find(e=>e.active),e.find(e=>e.id===x),...e].filter(Boolean).map(e=>e.ref.current),f)}}j.current=!1}),onBlur:(0,ne.composeEventHandlers)(e.onBlur,()=>b(!1))})})}),ax="RovingFocusGroupItem",ay=l.forwardRef((e,t)=>{let{__scopeRovingFocusGroup:n,focusable:r=!0,active:a=!1,tabStopId:o,children:i,...d}=e,c=(0,nP.useId)(),u=o||c,f=ap(ax,n),h=f.currentTabStopId===u,p=ad(n),{onFocusableItemAdd:m,onFocusableItemRemove:g,currentTabStopId:x}=f;return l.useEffect(()=>{if(r)return m(),()=>g()},[r,m,g]),(0,s.jsx)(al.ItemSlot,{scope:n,id:u,focusable:r,active:a,children:(0,s.jsx)(nl.span,{tabIndex:h?0:-1,"data-orientation":f.orientation,...d,ref:t,onMouseDown:(0,ne.composeEventHandlers)(e.onMouseDown,e=>{r?f.onItemFocus(u):e.preventDefault()}),onFocus:(0,ne.composeEventHandlers)(e.onFocus,()=>f.onItemFocus(u)),onKeyDown:(0,ne.composeEventHandlers)(e.onKeyDown,e=>{if("Tab"===e.key&&e.shiftKey)return void f.onItemShiftTab();if(e.target!==e.currentTarget)return;let t=function(e,t,n){var r;let a=(r=e.key,"rtl"!==n?r:"ArrowLeft"===r?"ArrowRight":"ArrowRight"===r?"ArrowLeft":r);if(!("vertical"===t&&["ArrowLeft","ArrowRight"].includes(a))&&!("horizontal"===t&&["ArrowUp","ArrowDown"].includes(a)))return av[a]}(e,f.orientation,f.dir);if(void 0!==t){if(e.metaKey||e.ctrlKey||e.altKey||e.shiftKey)return;e.preventDefault();let a=p().filter(e=>e.focusable).map(e=>e.ref.current);if("last"===t)a.reverse();else if("prev"===t||"next"===t){var n,r;"prev"===t&&a.reverse();let o=a.indexOf(e.currentTarget);a=f.loop?(n=a,r=o+1,n.map((e,t)=>n[(r+t)%n.length])):a.slice(o+1)}setTimeout(()=>ab(a))}}),children:"function"==typeof i?i({isCurrentTabStop:h,hasTabStop:null!=x}):i})})});ay.displayName=ax;var av={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function ab(e,t=!1){let n=document.activeElement;for(let r of e)if(r===n||(r.focus({preventScroll:t}),document.activeElement!==n))return}var aw=e.i(86312),aN=e.i(85369),aj=["Enter"," "],ak=["ArrowUp","PageDown","End"],aS=["ArrowDown","PageUp","Home",...ak],aC={ltr:[...aj,"ArrowRight"],rtl:[...aj,"ArrowLeft"]},aE={ltr:["ArrowLeft"],rtl:["ArrowRight"]},aM="Menu",[a_,aA,aR]=nc(aM),[aP,aO]=(0,nn.createContextScope)(aM,[aR,rY,af]),aT=rY(),aD=af(),[az,aL]=aP(aM),[aI,a$]=aP(aM),aH=e=>{let{__scopeMenu:t,open:n=!1,children:r,dir:a,onOpenChange:o,modal:i=!0}=e,d=aT(t),[c,u]=l.useState(null),f=l.useRef(!1),h=(0,nm.useCallbackRef)(o),p=(0,np.useDirection)(a);return l.useEffect(()=>{let e=()=>{f.current=!0,document.addEventListener("pointerdown",t,{capture:!0,once:!0}),document.addEventListener("pointermove",t,{capture:!0,once:!0})},t=()=>f.current=!1;return document.addEventListener("keydown",e,{capture:!0}),()=>{document.removeEventListener("keydown",e,{capture:!0}),document.removeEventListener("pointerdown",t,{capture:!0}),document.removeEventListener("pointermove",t,{capture:!0})}},[]),(0,s.jsx)(rJ,{...d,children:(0,s.jsx)(az,{scope:t,open:n,onOpenChange:h,content:c,onContentChange:u,children:(0,s.jsx)(aI,{scope:t,onClose:l.useCallback(()=>h(!1),[h]),isUsingKeyboardRef:f,dir:p,modal:i,children:r})})})};aH.displayName=aM;var aF=l.forwardRef((e,t)=>{let{__scopeMenu:n,...r}=e,a=aT(n);return(0,s.jsx)(r1,{...a,...r,ref:t})});aF.displayName="MenuAnchor";var aB="MenuPortal",[aV,aq]=aP(aB,{forceMount:void 0}),aW=e=>{let{__scopeMenu:t,forceMount:n,children:r,container:a}=e,o=aL(aB,t);return(0,s.jsx)(aV,{scope:t,forceMount:n,children:(0,s.jsx)(ar,{present:n||o.open,children:(0,s.jsx)(an,{asChild:!0,container:a,children:r})})})};aW.displayName=aB;var aK="MenuContent",[aG,aX]=aP(aK),aU=l.forwardRef((e,t)=>{let n=aq(aK,e.__scopeMenu),{forceMount:r=n.forceMount,...a}=e,o=aL(aK,e.__scopeMenu),i=a$(aK,e.__scopeMenu);return(0,s.jsx)(a_.Provider,{scope:e.__scopeMenu,children:(0,s.jsx)(ar,{present:r||o.open,children:(0,s.jsx)(a_.Slot,{scope:e.__scopeMenu,children:i.modal?(0,s.jsx)(aY,{...a,ref:t}):(0,s.jsx)(aZ,{...a,ref:t})})})})}),aY=l.forwardRef((e,t)=>{let n=aL(aK,e.__scopeMenu),r=l.useRef(null),a=(0,nt.useComposedRefs)(t,r);return l.useEffect(()=>{let e=r.current;if(e)return(0,aw.hideOthers)(e)},[]),(0,s.jsx)(aJ,{...e,ref:a,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:(0,ne.composeEventHandlers)(e.onFocusOutside,e=>e.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),aZ=l.forwardRef((e,t)=>{let n=aL(aK,e.__scopeMenu);return(0,s.jsx)(aJ,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),aQ=no("MenuContent.ScrollLock"),aJ=l.forwardRef((e,t)=>{let{__scopeMenu:n,loop:r=!1,trapFocus:a,onOpenAutoFocus:o,onCloseAutoFocus:i,disableOutsidePointerEvents:d,onEntryFocus:c,onEscapeKeyDown:u,onPointerDownOutside:f,onFocusOutside:h,onInteractOutside:p,onDismiss:m,disableOutsideScroll:g,...x}=e,y=aL(aK,n),v=a$(aK,n),b=aT(n),w=aD(n),N=aA(n),[j,k]=l.useState(null),S=l.useRef(null),C=(0,nt.useComposedRefs)(t,S,y.onContentChange),E=l.useRef(0),M=l.useRef(""),_=l.useRef(0),A=l.useRef(null),R=l.useRef("right"),P=l.useRef(0),O=g?aN.RemoveScroll:l.Fragment;l.useEffect(()=>()=>window.clearTimeout(E.current),[]),(0,nN.useFocusGuards)();let T=l.useCallback(e=>{var t,n;return R.current===A.current?.side&&(t=e,!!(n=A.current?.area)&&function(e,t){let{x:n,y:r}=e,a=!1;for(let e=0,o=t.length-1;e<t.length;o=e++){let i=t[e],s=t[o],l=i.x,d=i.y,c=s.x,u=s.y;d>r!=u>r&&n<(c-l)*(r-d)/(u-d)+l&&(a=!a)}return a}({x:t.clientX,y:t.clientY},n))},[]);return(0,s.jsx)(aG,{scope:n,searchRef:M,onItemEnter:l.useCallback(e=>{T(e)&&e.preventDefault()},[T]),onItemLeave:l.useCallback(e=>{T(e)||(S.current?.focus(),k(null))},[T]),onTriggerLeave:l.useCallback(e=>{T(e)&&e.preventDefault()},[T]),pointerGraceTimerRef:_,onPointerGraceIntentChange:l.useCallback(e=>{A.current=e},[]),children:(0,s.jsx)(O,{...g?{as:aQ,allowPinchZoom:!0}:void 0,children:(0,s.jsx)(nC,{asChild:!0,trapped:a,onMountAutoFocus:(0,ne.composeEventHandlers)(o,e=>{e.preventDefault(),S.current?.focus({preventScroll:!0})}),onUnmountAutoFocus:i,children:(0,s.jsx)(nv,{asChild:!0,disableOutsidePointerEvents:d,onEscapeKeyDown:u,onPointerDownOutside:f,onFocusOutside:h,onInteractOutside:p,onDismiss:m,children:(0,s.jsx)(am,{asChild:!0,...w,dir:v.dir,orientation:"vertical",loop:r,currentTabStopId:j,onCurrentTabStopIdChange:k,onEntryFocus:(0,ne.composeEventHandlers)(c,e=>{v.isUsingKeyboardRef.current||e.preventDefault()}),preventScrollOnEntryFocus:!0,children:(0,s.jsx)(r4,{role:"menu","aria-orientation":"vertical","data-state":om(y.open),"data-radix-menu-content":"",dir:v.dir,...b,...x,ref:C,style:{outline:"none",...x.style},onKeyDown:(0,ne.composeEventHandlers)(x.onKeyDown,e=>{let t=e.target.closest("[data-radix-menu-content]")===e.currentTarget,n=e.ctrlKey||e.altKey||e.metaKey,r=1===e.key.length;if(t){var a;let t,o,i,s,l,d;"Tab"===e.key&&e.preventDefault(),!n&&r&&(a=e.key,t=M.current+a,o=N().filter(e=>!e.disabled),i=document.activeElement,s=o.find(e=>e.ref.current===i)?.textValue,l=function(e,t,n){var r;let a=t.length>1&&Array.from(t).every(e=>e===t[0])?t[0]:t,o=n?e.indexOf(n):-1,i=(r=Math.max(o,0),e.map((t,n)=>e[(r+n)%e.length]));1===a.length&&(i=i.filter(e=>e!==n));let s=i.find(e=>e.toLowerCase().startsWith(a.toLowerCase()));return s!==n?s:void 0}(o.map(e=>e.textValue),t,s),d=o.find(e=>e.textValue===l)?.ref.current,function e(t){M.current=t,window.clearTimeout(E.current),""!==t&&(E.current=window.setTimeout(()=>e(""),1e3))}(t),d&&setTimeout(()=>d.focus()))}let o=S.current;if(e.target!==o||!aS.includes(e.key))return;e.preventDefault();let i=N().filter(e=>!e.disabled).map(e=>e.ref.current);ak.includes(e.key)&&i.reverse(),function(e){let t=document.activeElement;for(let n of e)if(n===t||(n.focus(),document.activeElement!==t))return}(i)}),onBlur:(0,ne.composeEventHandlers)(e.onBlur,e=>{e.currentTarget.contains(e.target)||(window.clearTimeout(E.current),M.current="")}),onPointerMove:(0,ne.composeEventHandlers)(e.onPointerMove,oy(e=>{let t=e.target,n=P.current!==e.clientX;e.currentTarget.contains(t)&&n&&(R.current=e.clientX>P.current?"right":"left",P.current=e.clientX)}))})})})})})})});aU.displayName=aK;var a0=l.forwardRef((e,t)=>{let{__scopeMenu:n,...r}=e;return(0,s.jsx)(nl.div,{role:"group",...r,ref:t})});a0.displayName="MenuGroup";var a1=l.forwardRef((e,t)=>{let{__scopeMenu:n,...r}=e;return(0,s.jsx)(nl.div,{...r,ref:t})});a1.displayName="MenuLabel";var a2="MenuItem",a5="menu.itemSelect",a3=l.forwardRef((e,t)=>{let{disabled:n=!1,onSelect:r,...a}=e,o=l.useRef(null),i=a$(a2,e.__scopeMenu),d=aX(a2,e.__scopeMenu),c=(0,nt.useComposedRefs)(t,o),u=l.useRef(!1);return(0,s.jsx)(a4,{...a,ref:c,disabled:n,onClick:(0,ne.composeEventHandlers)(e.onClick,()=>{let e=o.current;if(!n&&e){let t=new CustomEvent(a5,{bubbles:!0,cancelable:!0});e.addEventListener(a5,e=>r?.(e),{once:!0}),nd(e,t),t.defaultPrevented?u.current=!1:i.onClose()}}),onPointerDown:t=>{e.onPointerDown?.(t),u.current=!0},onPointerUp:(0,ne.composeEventHandlers)(e.onPointerUp,e=>{u.current||e.currentTarget?.click()}),onKeyDown:(0,ne.composeEventHandlers)(e.onKeyDown,e=>{let t=""!==d.searchRef.current;n||t&&" "===e.key||aj.includes(e.key)&&(e.currentTarget.click(),e.preventDefault())})})});a3.displayName=a2;var a4=l.forwardRef((e,t)=>{let{__scopeMenu:n,disabled:r=!1,textValue:a,...o}=e,i=aX(a2,n),d=aD(n),c=l.useRef(null),u=(0,nt.useComposedRefs)(t,c),[f,h]=l.useState(!1),[p,m]=l.useState("");return l.useEffect(()=>{let e=c.current;e&&m((e.textContent??"").trim())},[o.children]),(0,s.jsx)(a_.ItemSlot,{scope:n,disabled:r,textValue:a??p,children:(0,s.jsx)(ay,{asChild:!0,...d,focusable:!r,children:(0,s.jsx)(nl.div,{role:"menuitem","data-highlighted":f?"":void 0,"aria-disabled":r||void 0,"data-disabled":r?"":void 0,...o,ref:u,onPointerMove:(0,ne.composeEventHandlers)(e.onPointerMove,oy(e=>{r?i.onItemLeave(e):(i.onItemEnter(e),e.defaultPrevented||e.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:(0,ne.composeEventHandlers)(e.onPointerLeave,oy(e=>i.onItemLeave(e))),onFocus:(0,ne.composeEventHandlers)(e.onFocus,()=>h(!0)),onBlur:(0,ne.composeEventHandlers)(e.onBlur,()=>h(!1))})})})}),a8=l.forwardRef((e,t)=>{let{checked:n=!1,onCheckedChange:r,...a}=e;return(0,s.jsx)(oa,{scope:e.__scopeMenu,checked:n,children:(0,s.jsx)(a3,{role:"menuitemcheckbox","aria-checked":og(n)?"mixed":n,...a,ref:t,"data-state":ox(n),onSelect:(0,ne.composeEventHandlers)(a.onSelect,()=>r?.(!!og(n)||!n),{checkForDefaultPrevented:!1})})})});a8.displayName="MenuCheckboxItem";var a6="MenuRadioGroup",[a9,a7]=aP(a6,{value:void 0,onValueChange:()=>{}}),oe=l.forwardRef((e,t)=>{let{value:n,onValueChange:r,...a}=e,o=(0,nm.useCallbackRef)(r);return(0,s.jsx)(a9,{scope:e.__scopeMenu,value:n,onValueChange:o,children:(0,s.jsx)(a0,{...a,ref:t})})});oe.displayName=a6;var ot="MenuRadioItem",on=l.forwardRef((e,t)=>{let{value:n,...r}=e,a=a7(ot,e.__scopeMenu),o=n===a.value;return(0,s.jsx)(oa,{scope:e.__scopeMenu,checked:o,children:(0,s.jsx)(a3,{role:"menuitemradio","aria-checked":o,...r,ref:t,"data-state":ox(o),onSelect:(0,ne.composeEventHandlers)(r.onSelect,()=>a.onValueChange?.(n),{checkForDefaultPrevented:!1})})})});on.displayName=ot;var or="MenuItemIndicator",[oa,oo]=aP(or,{checked:!1}),oi=l.forwardRef((e,t)=>{let{__scopeMenu:n,forceMount:r,...a}=e,o=oo(or,n);return(0,s.jsx)(ar,{present:r||og(o.checked)||!0===o.checked,children:(0,s.jsx)(nl.span,{...a,ref:t,"data-state":ox(o.checked)})})});oi.displayName=or;var os=l.forwardRef((e,t)=>{let{__scopeMenu:n,...r}=e;return(0,s.jsx)(nl.div,{role:"separator","aria-orientation":"horizontal",...r,ref:t})});os.displayName="MenuSeparator";var ol=l.forwardRef((e,t)=>{let{__scopeMenu:n,...r}=e,a=aT(n);return(0,s.jsx)(r9,{...a,...r,ref:t})});ol.displayName="MenuArrow";var[od,oc]=aP("MenuSub"),ou="MenuSubTrigger",of=l.forwardRef((e,t)=>{let n=aL(ou,e.__scopeMenu),r=a$(ou,e.__scopeMenu),a=oc(ou,e.__scopeMenu),o=aX(ou,e.__scopeMenu),i=l.useRef(null),{pointerGraceTimerRef:d,onPointerGraceIntentChange:c}=o,u={__scopeMenu:e.__scopeMenu},f=l.useCallback(()=>{i.current&&window.clearTimeout(i.current),i.current=null},[]);return l.useEffect(()=>f,[f]),l.useEffect(()=>{let e=d.current;return()=>{window.clearTimeout(e),c(null)}},[d,c]),(0,s.jsx)(aF,{asChild:!0,...u,children:(0,s.jsx)(a4,{id:a.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":a.contentId,"data-state":om(n.open),...e,ref:(0,nt.composeRefs)(t,a.onTriggerChange),onClick:t=>{e.onClick?.(t),e.disabled||t.defaultPrevented||(t.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:(0,ne.composeEventHandlers)(e.onPointerMove,oy(t=>{o.onItemEnter(t),!t.defaultPrevented&&(e.disabled||n.open||i.current||(o.onPointerGraceIntentChange(null),i.current=window.setTimeout(()=>{n.onOpenChange(!0),f()},100)))})),onPointerLeave:(0,ne.composeEventHandlers)(e.onPointerLeave,oy(e=>{f();let t=n.content?.getBoundingClientRect();if(t){let r=n.content?.dataset.side,a="right"===r,i=t[a?"left":"right"],s=t[a?"right":"left"];o.onPointerGraceIntentChange({area:[{x:e.clientX+(a?-5:5),y:e.clientY},{x:i,y:t.top},{x:s,y:t.top},{x:s,y:t.bottom},{x:i,y:t.bottom}],side:r}),window.clearTimeout(d.current),d.current=window.setTimeout(()=>o.onPointerGraceIntentChange(null),300)}else{if(o.onTriggerLeave(e),e.defaultPrevented)return;o.onPointerGraceIntentChange(null)}})),onKeyDown:(0,ne.composeEventHandlers)(e.onKeyDown,t=>{let a=""!==o.searchRef.current;e.disabled||a&&" "===t.key||aC[r.dir].includes(t.key)&&(n.onOpenChange(!0),n.content?.focus(),t.preventDefault())})})})});of.displayName=ou;var oh="MenuSubContent",op=l.forwardRef((e,t)=>{let n=aq(aK,e.__scopeMenu),{forceMount:r=n.forceMount,...a}=e,o=aL(aK,e.__scopeMenu),i=a$(aK,e.__scopeMenu),d=oc(oh,e.__scopeMenu),c=l.useRef(null),u=(0,nt.useComposedRefs)(t,c);return(0,s.jsx)(a_.Provider,{scope:e.__scopeMenu,children:(0,s.jsx)(ar,{present:r||o.open,children:(0,s.jsx)(a_.Slot,{scope:e.__scopeMenu,children:(0,s.jsx)(aJ,{id:d.contentId,"aria-labelledby":d.triggerId,...a,ref:u,align:"start",side:"rtl"===i.dir?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:e=>{i.isUsingKeyboardRef.current&&c.current?.focus(),e.preventDefault()},onCloseAutoFocus:e=>e.preventDefault(),onFocusOutside:(0,ne.composeEventHandlers)(e.onFocusOutside,e=>{e.target!==d.trigger&&o.onOpenChange(!1)}),onEscapeKeyDown:(0,ne.composeEventHandlers)(e.onEscapeKeyDown,e=>{i.onClose(),e.preventDefault()}),onKeyDown:(0,ne.composeEventHandlers)(e.onKeyDown,e=>{let t=e.currentTarget.contains(e.target),n=aE[i.dir].includes(e.key);t&&n&&(o.onOpenChange(!1),d.trigger?.focus(),e.preventDefault())})})})})})});function om(e){return e?"open":"closed"}function og(e){return"indeterminate"===e}function ox(e){return og(e)?"indeterminate":e?"checked":"unchecked"}function oy(e){return t=>"mouse"===t.pointerType?e(t):void 0}op.displayName=oh;var ov="DropdownMenu",[ob,ow]=(0,nn.createContextScope)(ov,[aO]),oN=aO(),[oj,ok]=ob(ov),oS=e=>{let{__scopeDropdownMenu:t,children:n,dir:r,open:a,defaultOpen:o,onOpenChange:i,modal:d=!0}=e,c=oN(t),u=l.useRef(null),[f,h]=(0,nr.useControllableState)({prop:a,defaultProp:o??!1,onChange:i,caller:ov});return(0,s.jsx)(oj,{scope:t,triggerId:(0,nP.useId)(),triggerRef:u,contentId:(0,nP.useId)(),open:f,onOpenChange:h,onOpenToggle:l.useCallback(()=>h(e=>!e),[h]),modal:d,children:(0,s.jsx)(aH,{...c,open:f,onOpenChange:h,dir:r,modal:d,children:n})})};oS.displayName=ov;var oC="DropdownMenuTrigger",oE=l.forwardRef((e,t)=>{let{__scopeDropdownMenu:n,disabled:r=!1,...a}=e,o=ok(oC,n),i=oN(n);return(0,s.jsx)(aF,{asChild:!0,...i,children:(0,s.jsx)(nl.button,{type:"button",id:o.triggerId,"aria-haspopup":"menu","aria-expanded":o.open,"aria-controls":o.open?o.contentId:void 0,"data-state":o.open?"open":"closed","data-disabled":r?"":void 0,disabled:r,...a,ref:(0,nt.composeRefs)(t,o.triggerRef),onPointerDown:(0,ne.composeEventHandlers)(e.onPointerDown,e=>{!r&&0===e.button&&!1===e.ctrlKey&&(o.onOpenToggle(),o.open||e.preventDefault())}),onKeyDown:(0,ne.composeEventHandlers)(e.onKeyDown,e=>{!r&&(["Enter"," "].includes(e.key)&&o.onOpenToggle(),"ArrowDown"===e.key&&o.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(e.key)&&e.preventDefault())})})})});oE.displayName=oC;var oM=e=>{let{__scopeDropdownMenu:t,...n}=e,r=oN(t);return(0,s.jsx)(aW,{...r,...n})};oM.displayName="DropdownMenuPortal";var o_="DropdownMenuContent",oA=l.forwardRef((e,t)=>{let{__scopeDropdownMenu:n,...r}=e,a=ok(o_,n),o=oN(n),i=l.useRef(!1);return(0,s.jsx)(aU,{id:a.contentId,"aria-labelledby":a.triggerId,...o,...r,ref:t,onCloseAutoFocus:(0,ne.composeEventHandlers)(e.onCloseAutoFocus,e=>{i.current||a.triggerRef.current?.focus(),i.current=!1,e.preventDefault()}),onInteractOutside:(0,ne.composeEventHandlers)(e.onInteractOutside,e=>{let t=e.detail.originalEvent,n=0===t.button&&!0===t.ctrlKey,r=2===t.button||n;(!a.modal||r)&&(i.current=!0)}),style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});oA.displayName=o_,l.forwardRef((e,t)=>{let{__scopeDropdownMenu:n,...r}=e,a=oN(n);return(0,s.jsx)(a0,{...a,...r,ref:t})}).displayName="DropdownMenuGroup";var oR=l.forwardRef((e,t)=>{let{__scopeDropdownMenu:n,...r}=e,a=oN(n);return(0,s.jsx)(a1,{...a,...r,ref:t})});oR.displayName="DropdownMenuLabel";var oP=l.forwardRef((e,t)=>{let{__scopeDropdownMenu:n,...r}=e,a=oN(n);return(0,s.jsx)(a3,{...a,...r,ref:t})});oP.displayName="DropdownMenuItem";var oO=l.forwardRef((e,t)=>{let{__scopeDropdownMenu:n,...r}=e,a=oN(n);return(0,s.jsx)(a8,{...a,...r,ref:t})});oO.displayName="DropdownMenuCheckboxItem",l.forwardRef((e,t)=>{let{__scopeDropdownMenu:n,...r}=e,a=oN(n);return(0,s.jsx)(oe,{...a,...r,ref:t})}).displayName="DropdownMenuRadioGroup";var oT=l.forwardRef((e,t)=>{let{__scopeDropdownMenu:n,...r}=e,a=oN(n);return(0,s.jsx)(on,{...a,...r,ref:t})});oT.displayName="DropdownMenuRadioItem";var oD=l.forwardRef((e,t)=>{let{__scopeDropdownMenu:n,...r}=e,a=oN(n);return(0,s.jsx)(oi,{...a,...r,ref:t})});oD.displayName="DropdownMenuItemIndicator";var oz=l.forwardRef((e,t)=>{let{__scopeDropdownMenu:n,...r}=e,a=oN(n);return(0,s.jsx)(os,{...a,...r,ref:t})});oz.displayName="DropdownMenuSeparator",l.forwardRef((e,t)=>{let{__scopeDropdownMenu:n,...r}=e,a=oN(n);return(0,s.jsx)(ol,{...a,...r,ref:t})}).displayName="DropdownMenuArrow";var oL=l.forwardRef((e,t)=>{let{__scopeDropdownMenu:n,...r}=e,a=oN(n);return(0,s.jsx)(of,{...a,...r,ref:t})});oL.displayName="DropdownMenuSubTrigger";var oI=l.forwardRef((e,t)=>{let{__scopeDropdownMenu:n,...r}=e,a=oN(n);return(0,s.jsx)(op,{...a,...r,ref:t,style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});oI.displayName="DropdownMenuSubContent";let o$=(0,S.default)("circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);l.forwardRef(({className:e,inset:t,children:n,...r},a)=>(0,s.jsxs)(oL,{ref:a,className:(0,P.cn)("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",t&&"pl-8",e),...r,children:[n,(0,s.jsx)(tb,{className:"ml-auto h-4 w-4"})]})).displayName=oL.displayName,l.forwardRef(({className:e,...t},n)=>(0,s.jsx)(oI,{ref:n,className:(0,P.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...t})).displayName=oI.displayName;let oH=l.forwardRef(({className:e,sideOffset:t=4,...n},r)=>(0,s.jsx)(oM,{children:(0,s.jsx)(oA,{ref:r,sideOffset:t,className:(0,P.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...n})}));oH.displayName=oA.displayName;let oF=l.forwardRef(({className:e,inset:t,...n},r)=>(0,s.jsx)(oP,{ref:r,className:(0,P.cn)("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t&&"pl-8",e),...n}));function oB({onEdit:e,onDuplicate:t,onDelete:n}){return(0,s.jsxs)(oS,{children:[(0,s.jsx)(oE,{asChild:!0,children:(0,s.jsx)(O.Button,{variant:"ghost",size:"icon",className:"h-8 w-8",children:(0,s.jsx)(t3,{className:"h-4 w-4"})})}),(0,s.jsxs)(oH,{align:"end",children:[(0,s.jsxs)(oF,{onClick:e,children:[(0,s.jsx)(t8.Edit,{className:"h-4 w-4 mr-2"}),"Edit"]}),(0,s.jsxs)(oF,{onClick:t,children:[(0,s.jsx)(tw.Copy,{className:"h-4 w-4 mr-2"}),"Duplicate"]}),(0,s.jsxs)(oF,{onClick:n,className:"text-destructive focus:text-destructive",children:[(0,s.jsx)($.Trash2,{className:"h-4 w-4 mr-2"}),"Delete"]})]})]})}oF.displayName=oP.displayName,l.forwardRef(({className:e,children:t,checked:n,...r},a)=>(0,s.jsxs)(oO,{ref:a,className:(0,P.cn)("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),checked:n,...r,children:[(0,s.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,s.jsx)(oD,{children:(0,s.jsx)(tn.Check,{className:"h-4 w-4"})})}),t]})).displayName=oO.displayName,l.forwardRef(({className:e,children:t,...n},r)=>(0,s.jsxs)(oT,{ref:r,className:(0,P.cn)("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...n,children:[(0,s.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,s.jsx)(oD,{children:(0,s.jsx)(o$,{className:"h-2 w-2 fill-current"})})}),t]})).displayName=oT.displayName,l.forwardRef(({className:e,inset:t,...n},r)=>(0,s.jsx)(oR,{ref:r,className:(0,P.cn)("px-2 py-1.5 text-sm font-semibold",t&&"pl-8",e),...n})).displayName=oR.displayName,l.forwardRef(({className:e,...t},n)=>(0,s.jsx)(oz,{ref:n,className:(0,P.cn)("-mx-1 my-1 h-px bg-muted",e),...t})).displayName=oz.displayName,e.s(["WorkflowCard",0,({workflow:e,onEdit:t,onDelete:n,onToggle:r,onDuplicate:a,viewMode:o="grid"})=>{let i="active"===e.status;return(0,s.jsx)(R.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},whileHover:{y:-4},transition:{duration:.2},children:(0,s.jsxs)(t7.Card,{className:(0,P.cn)("group relative overflow-hidden transition-all hover:shadow-md border-border/50 hover:border-border","list"===o?"flex items-center gap-6":""),children:[(0,s.jsx)("div",{className:(0,P.cn)("absolute left-0 top-0 bottom-0 w-1 transition-colors",i?"bg-green-500":"bg-muted")}),(0,s.jsxs)("div",{className:(0,P.cn)("flex-1","list"===o?"flex items-center justify-between gap-6":""),children:[(0,s.jsx)("div",{className:(0,P.cn)("mb-4","list"===o&&"mb-0 flex-1"),children:(0,s.jsxs)("div",{className:"flex items-start justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-lg font-semibold tracking-tight mb-1 group-hover:text-primary transition-colors",children:e.name}),e.description&&(0,s.jsx)("p",{className:"text-sm text-muted-foreground line-clamp-2",children:e.description})]}),"grid"===o&&(0,s.jsx)(oB,{onEdit:()=>t(e.id),onDuplicate:()=>a(e.id),onDelete:()=>n(e.id)})]})}),(0,s.jsxs)("div",{className:(0,P.cn)("flex items-center gap-4 text-sm text-muted-foreground","grid"===o?"mb-4 pb-4 border-b border-border/50":""),children:[(0,s.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,s.jsx)(t6.CheckCircle2,{className:"h-4 w-4"}),(0,s.jsxs)("span",{children:[e.nodes.length," steps"]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,s.jsx)(t9,{className:"h-4 w-4"}),(0,s.jsx)("span",{children:new Date(e.updatedAt).toLocaleDateString()})]})]}),"grid"===o&&(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:(0,P.cn)("inline-flex items-center gap-1.5 px-2.5 py-0.5 rounded-full text-xs font-medium",i?"bg-green-500/10 text-green-600 dark:text-green-400":"bg-muted text-muted-foreground"),children:[(0,s.jsx)("div",{className:(0,P.cn)("h-1.5 w-1.5 rounded-full",i?"bg-green-500":"bg-slate-400")}),i?"Active":"Inactive"]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsxs)(O.Button,{variant:"ghost",size:"sm",onClick:()=>r(e.id),className:i?"text-orange-600 hover:text-orange-700 hover:bg-orange-50":"text-green-600 hover:text-green-700 hover:bg-green-50",children:[i?(0,s.jsx)(t4,{className:"h-4 w-4 mr-1"}):(0,s.jsx)(A.Play,{className:"h-4 w-4 mr-1"}),i?"Pause":"Run"]}),(0,s.jsx)(O.Button,{size:"sm",variant:"outline",onClick:()=>t(e.id),children:"Edit"})]})]}),"list"===o&&(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(O.Button,{variant:"ghost",size:"icon",onClick:()=>r(e.id),children:i?(0,s.jsx)(t4,{className:"h-4 w-4"}):(0,s.jsx)(A.Play,{className:"h-4 w-4"})}),(0,s.jsx)(oB,{onEdit:()=>t(e.id),onDuplicate:()=>a(e.id),onDelete:()=>n(e.id)})]})]})]})})}],22614),e.s([],40126)}]);